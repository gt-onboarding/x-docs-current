---
title: Paginación
sidebarTitle: Paginación
---

La X API usa paginación para endpoints que devuelven múltiples páginas de resultados (por ejemplo, timelines, búsquedas, etc.). Cada respuesta de llamada a la API incluye un objeto `meta` con `result_count`, `previous_token` y `next_token`. El XDK se encarga de realizar múltiples llamadas a la API usando el `next_token` para que los desarrolladores solo tengan que especificar cuánta información necesitan sin tener que hacer múltiples llamadas.
El XDK simplifica esto con:

- **Iteradores integrados**: Usa funciones generadoras para una obtención fluida de múltiples páginas.
- **Gestión explícita de tokens**: Para un control manual flexible cuando sea necesario, permitiendo pasar `pagination_token` según se requiera.
- **Aplicación del límite de resultados**: Respeta `max_results` por llamada (hasta los límites de la API, por ejemplo, 100 para búsquedas).

<div id="automatic-pagination-recommended">
  ## Paginación automática (recomendada)
</div>

Usa el método `iterate()` sobre respuestas paginadas para obtener todos los resultados de forma diferida.
**Ejemplo: búsqueda paginada**

```python
from xdk import Client
client = Client(bearer_token="your_bearer_token")
# Búsqueda con paginación automática
all_posts = []
for page in client.posts.search_recent(
    query="python",
    max_results=100,  # Por página
    tweet_fields=["created_at", "author_id"]  # Expansiones opcionales
):
    all_posts.extend(page.data)
    print(f"Se obtuvieron {len(page.data)} Publicaciones (total: {len(all_posts)})")
print(f"Total de publicaciones: {len(all_posts)}")
```

* El iterador maneja `next_token` automáticamente.
* Se detiene cuando ya no hay `next_token`.
* Admite backoff por límite de frecuencia para evitar errores 429.


<div id="manual-pagination">
  ## Paginación manual
</div>

Si necesitas controlar los resultados para alguna lógica personalizada (por ejemplo, procesar página por página), todavía puedes usar `next_token` y hacer la paginación manualmente como se muestra a continuación:

```python
# Get first page - search_recent returns an Iterator
first_page = next(client.posts.search_recent(
    query="xdk python sdk",
    max_results=100,
    pagination_token=None  # Primera página
))
print(f"Primera página: {len(first_page.data) if first_page.data else 0} Publicaciones")
# Extract next_token from meta
next_token = None
if hasattr(first_page, 'meta') and first_page.meta:
    if hasattr(first_page.meta, 'next_token'):
        next_token = first_page.meta.next_token
    elif isinstance(first_page.meta, dict):
        next_token = first_page.meta.get('next_token')
if next_token:
    second_page = next(client.posts.search_recent(
        query="xdk python sdk",
        max_results=100,
        pagination_token=next_token
    ))
    print(f"Segunda página: {len(second_page.data) if second_page.data else 0} Publicaciones")
```

**Consejos**:

* Especifica siempre `max_results` para optimizar (el valor predeterminado varía según el endpoint).
* Supervisa `meta.result_count` para tareas de depuración.
* Para consultas muy grandes, considera la iteración asincrónica para evitar bloqueos.
  Para obtener ejemplos de código detallados que usan el Python XDK, consulta nuestro [repositorio de ejemplos de código en GitHub](https://github.com/xdevplatform/samples/tree/main/python).
