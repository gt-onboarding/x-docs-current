---
title: v1 a v2
sidebarTitle: v1 a v2
keywords: ["migración de v1.1 a v2", "migración de búsqueda", "migrar la búsqueda", "búsqueda estándar a v2", "búsqueda de v1 a v2", "guía de migración"]
---

<div id="standard-v11-compared-to-x-api-v2">
  ### v1.1 estándar en comparación con X API v2
</div>

Si has estado trabajando con la búsqueda estándar de v1.1 [search/posts](/es/x-api/posts/search/introduction), el objetivo de esta guía es ayudarte a comprender las similitudes y diferencias entre el endpoint estándar de búsqueda de Publicaciones y el endpoint de búsqueda de Publicaciones de X API v2.

* **Similitudes**
  * Contexto de usuario de OAuth 1.0a y OAuth 2.0 solo para la aplicación
  * Compatibilidad con el historial de edición de Publicaciones y sus metadatos. 
* **Diferencias**
  * URLs de los endpoints

  * Requisitos de Aplicación y Proyecto

  * Formato de los datos de la respuesta

  * Parámetros de solicitud

  * Nuevos operadores de consulta

  * Precedencia de los operadores AND / OR 

<div id="similarities">
  #### Similitudes
</div>

**Autenticación con Contexto de usuario de OAuth 1.0a y OAuth 2.0 solo para la aplicación**

El endpoint v1.1 search/posts y el endpoint de búsqueda reciente de X API v2 admiten tanto [Contexto de usuario de OAuth 1.0a](/es/resources/fundamentals/authentication) como [OAuth 2.0 solo para la aplicación](/es/resources/fundamentals/authentication#oauth-2-0). 

Por lo tanto, si usabas anteriormente el endpoint estándar de búsqueda de v1.1, puedes seguir utilizando el mismo método de autenticación si migras a la versión de X API v2. 

Según la biblioteca o el paquete de autenticación que utilices, la autenticación solo para la aplicación probablemente sea la forma más sencilla de comenzar y se puede configurar con una simple cabecera de solicitud. Para aprender a generar un Token de acceso de la aplicación, consulta esta [guía de OAuth 2.0 solo para la aplicación](/es/resources/fundamentals/authentication#bearer-token-also-known-as-app-only). 

Si deseas aprovechar la posibilidad de obtener métricas privadas o de publicidad con el endpoint de X API v2, deberás usar Contexto de usuario de OAuth 1.0a y pasar los tokens de acceso de usuario relacionados con el usuario que publicó la Publicación para la que deseas obtener métricas. 

**Compatibilidad con historial de edición de la Publicación y metadatos**

Ambas versiones proporcionan metadatos que describen cualquier historial de edición. Consulta las [referencias de la API de búsqueda](/es/x-api/posts/recent-search) y la [página de conceptos básicos sobre edición de Publicaciones](/es/x-api/fundamentals/edit-posts) para obtener más detalles. 

<div id="differences">
  #### Diferencias
</div>

**URLs de endpoint**

* Endpoints estándar v1.1:
  * https://api.x.com/1.1/search/tweets

* Endpoint de X API v2:
  * https://api.x.com/2/tweets/search/recent
     

**Requisitos de App y Proyecto**

Los endpoints de X API v2 requieren que uses credenciales de una [developer App](/es/resources/fundamentals/developer-apps) que esté asociada a un [Project](/es/resources/fundamentals/projects) para autenticar tus solicitudes. Todos los endpoints de X API v1.1 pueden usar credenciales de Apps independientes o de Apps asociadas con un Project. 

**Formato de los datos de respuesta**

Una de las mayores diferencias entre las versiones de endpoints estándar v1.1 y X API v2 es cómo seleccionas qué campos se devuelven en tu payload.

Para los endpoints estándar, recibes muchos de los campos de respuesta de forma predeterminada y luego tienes la opción de usar parámetros para identificar qué campos o conjuntos de campos se deben devolver en el payload.

La versión de X API v2 solo entrega los campos Post id y text de forma predeterminada. Para solicitar campos u objetos adicionales, deberás usar los parámetros [fields](/es/x-api/fundamentals/fields) y [expansions](/es/x-api/fundamentals/expansions). Cualquier campo de Post que solicites desde estos endpoints se devolverá en el objeto Post principal. Cualquier objeto y campo de usuario, contenido multimedia, encuesta o lugar que se haya expandido se devolverá en un objeto includes dentro de tu respuesta. Luego puedes volver a asociar cualquier objeto expandido con el objeto Post haciendo coincidir los IDs que se encuentran tanto en el Post como en el objeto expandido. 

Te recomendamos leer más sobre estos nuevos parámetros en sus guías respectivas o en nuestra guía sobre [cómo usar fields y expansions](/es/x-api/fundamentals/data-dictionary#how-to-use-fields-and-expansions). 

También hemos preparado una [guía de migración de formato de datos](/es/x-api/migrate/data-format-migration#migrating-from-standard-v1-1s-data-format-to-v2), que puede ayudarte a asignar campos estándar v1.1 a los campos más recientes de v2. Esta guía también te proporcionará el parámetro específico de expansión y de campo que deberás pasar con tu solicitud v2 para devolver campos específicos. 
 

Además de los cambios en cómo solicitas ciertos campos, X API v2 también está introduciendo nuevos diseños JSON para los objetos devueltos por las APIs, incluidos los objetos [Post](/es/x-api/fundamentals/data-dictionary#tweet) y [user](/es/x-api/fundamentals/data-dictionary#user).

* En el nivel raíz del JSON, los endpoints estándar devuelven objetos Post en un array statuses, mientras que X API v2 devuelve un array data. 
* En lugar de hacer referencia a &quot;statuses&quot; Retweeted y Quoted, el JSON de X API v2 hace referencia a Publicaciones retuiteadas y citadas. Muchos campos heredados y obsoletos, como contributors y user.translator&#95;type, se están eliminando. 
* En lugar de usar tanto favorites (en el objeto Post) como favourites (en el objeto user), X API v2 usa el término like. 
* X está adoptando la convención de que los valores JSON vacíos (por ejemplo, null) no se escriben en el payload. Los atributos de Post y user solo se incluyen si tienen valores distintos de null. 
   

También hemos introducido un nuevo conjunto de campos en el [objeto Post](/es/x-api/fundamentals/data-dictionary#tweet), incluidos los siguientes:

* Un campo [conversation&#95;id](/es/x-api/fundamentals/conversation-id)
* Dos nuevos campos de [annotations](/es/x-api/fundamentals/post-annotations), incluidos context y entities
* Varios campos nuevos de [metrics](/es/x-api/fundamentals/metrics) 
* Un nuevo campo reply&#95;setting, que te muestra quién puede responder a una Publicación determinada

<div id="request-parameters">
  #### Parámetros de la solicitud
</div>

Los siguientes parámetros de solicitud estándar de v1.1 tienen equivalentes en X API v2:

| Búsqueda estándar v1.1 | Búsqueda de Publicaciones v2 |
| :--- | :--- |
| q   | query |
|     | start&#95;time (YYYY-MM-DDTHH:mm:ssZ) |
| until (YYYY-MM-DD) | end&#95;time (YYYY-MM-DDTHH:mm:ssZ) |
| since&#95;id | since&#95;id |
| max&#95;id | until&#95;id |
| count | max&#95;results |
| Response provides search&#95;metadata.next&#95;results | next&#95;token |

También hay un conjunto de parámetros estándar de solicitud de búsqueda de Publicaciones que **no** son compatibles con X API v2:

| **Parámetro estándar v1.1** | **Detalles** |
| :--- | :--- |
| geocode | La búsqueda de Publicaciones en el nivel de Acceso Básico no admite operadores geográficos. |
| locale | En la búsqueda estándar, se utilizaba para especificar el idioma de la consulta, pero nunca se llegó a implementar completamente. |
| lang | Los endpoints de búsqueda de Publicaciones proporcionan un operador de consulta lang para hacer coincidir idiomas de interés. |
| include&#95;entities | Las entidades de la Publicación siempre se incluyen. |
| result&#95;type | Los endpoints de búsqueda de Publicaciones entregan todas las Publicaciones que coinciden, independientemente del nivel de interacción. |
| extended | X API v2 está diseñada desde cero para admitir Publicaciones de hasta 280 caracteres. Con v2, no existe el concepto de Publicaciones «extendidas». |

A continuación se muestra un ejemplo de solicitud que ilustra la diferencia entre una solicitud estándar y una solicitud de búsqueda de Publicaciones:

|     |     |
| :--- | :--- |
| **Estándar v1.1** | **X API v2** |
| https://api.x.com/1.1/search/tweets.json?q=snow&amp;count=50 | https://api.x.com/2/tweets/search/recent?query=snow&amp;max&#95;results=50 |

Ambas solicitudes devolverán las 50 Publicaciones más recientes que contienen la palabra clave snow. La solicitud de v2 devolverá los campos id y text predeterminados de las Publicaciones coincidentes. A continuación se muestra un ejemplo de cómo especificar campos adicionales de Publicaciones y de usuario para incluir en la carga JSON:

|     |
| :--- |
| **X API v2** |
| https://api.x.com/2/tweets/search/recent?query=snow&amp;max&#95;results=50&amp;tweet.fields=id,created&#95;at,author&#95;id,text,source,entities,attachments&amp;user.fields=id,name,username,description |

**Nuevos operadores de consulta**

La búsqueda de Publicaciones introduce nuevos operadores para admitir dos características nuevas de X API v2: 

* **[Conversation IDs](/es/x-api/fundamentals/conversation-id)** - A medida que se desarrollan las conversaciones en X, estará disponible un Conversation ID para marcar las Publicaciones que forman parte de la conversación. Todas las Publicaciones de la conversación tendrán su conversation&#95;id establecido en el ID de la Publicación que la inició. 
  * `conversation_id:`
* **[X Annotations](/es/x-api/fundamentals/post-annotations)** proporcionan información contextual sobre las Publicaciones e incluyen anotaciones de entidad y de contexto. Las entidades se componen de personas, lugares, productos y organizaciones. Los contextos son dominios o temas de los que forman parte las entidades que aparecen. Por ejemplo, las personas mencionadas en una Publicación pueden tener un contexto que indique si son atletas, actores o políticos.  
  * context: coincide con Publicaciones que han sido anotadas con un contexto de interés. 
  * entity: coincide con Publicaciones que han sido anotadas con una entidad de interés. 

     

<div id="and-or-operator-precedence">
  #### Precedencia de los operadores AND / OR
</div>

El elemento básico para crear consultas de búsqueda es el uso de agrupaciones lógicas OR y AND. La API de búsqueda estándar aplica primero los OR y luego los AND, mientras que los endpoints de Search Posts (así como las versiones premium y Enterprise) aplican primero los AND y luego los OR. Esta diferencia es fundamental al traducir consultas entre ambas. 

Por ejemplo, con la búsqueda estándar, si quisieras encontrar Publicaciones con la palabra clave &quot;storm&quot; que mencionen la palabra &quot;colorado&quot; o el hashtag #COwx, podrías hacerlo con la siguiente consulta de búsqueda:

storm #COwx OR colorado

Con la precedencia de operadores de Search Posts, los AND se aplican antes que los OR. Por lo tanto, la consulta anterior es equivalente a: 

(storm #COwx) OR colorado

Sin embargo, la regla anterior coincidiría con cualquier Publicación que mencione &quot;Colorado&quot;, independientemente de si la Publicación menciona &quot;storm&quot; o el hashtag #COwx. Además, también coincidiría con Publicaciones que mencionaran tanto la palabra clave &quot;storm&quot; como el hashtag #COwx. 

Para que la consulta se comporte como se pretendía originalmente, las cláusulas OR deben agruparse. La traducción de la consulta estándar original a Search Posts sería:

storm (#COwx OR colorado)

Estas dos reglas tienen comportamientos de coincidencia muy diferentes. Para el mes de octubre de 2019, la regla original coincide con más de 1.175.000 Publicaciones, mientras que la regla traducida correctamente coincide con alrededor de 5.600 Publicaciones. Asegúrate de prestar atención a los operadores AND y OR, y utiliza paréntesis cuando sea necesario. 

<div id="curl-requests">
  #### Solicitudes cURL
</div>

**La siguiente sección muestra solicitudes cURL para el endpoint estándar v1.1 y su endpoint equivalente en v2.**

Las solicitudes se realizan usando [OAuth 2.0 solo para la aplicación]([https://developer.x.com(/resources/fundamentals/authentication#app-only-authentication-and-oauth-2-0-bearer-token)](https://developer.x.com\(/resources/fundamentals/authentication#app-only-authentication-and-oauth-2-0-bearer-token\)). Para poder ejecutar las siguientes solicitudes cURL, deberás reemplazar ACCESS&#95;TOKEN en el encabezado de autorización con el token de acceso de tu aplicación. Para los endpoints de v2, el token de acceso de tu aplicación debe pertenecer a una [aplicación de desarrollador](/es/resources/fundamentals/developer-apps/overview) dentro de un [Proyecto](/es/resources/fundamentals/projects/overview). 

El payload de la respuesta que devuelve el endpoint v1.1 será diferente del payload de la respuesta que devuelve el endpoint v2. Con v2, la respuesta incluirá los campos predeterminados, así como cualquier otro campo solicitado con los parámetros [fields](/es/x-api/fundamentals/fields) y [expansions](/es/x-api/fundamentals/expansions). Puedes usar estos parámetros para solicitar que se devuelva un conjunto diferente de campos.

**Endpoints estándar v1.1 [GET search/tweets](https://developer.x.com/en/docs/twitter-api/v1/tweets/search/api-reference/get-search-tweets) y v2 [GET tweets/search/recent](/es/x-api/posts/recent-search)**

```bash
      curl --request GET \
  --url 'https://api.x.com/1.1/search/tweets.json?q=from%3ATwitterDev%20-is%3Aretweet&count=100' \
  --header 'Authorization: Bearer $ACCESS_TOKEN'
```

```bash
      curl --request GET \
  --url 'https://api.x.com/2/tweets/search/recent?query=from%3ATwitterDev%20-is%3Aretweet&tweet.fields=created_at%2Cconversation_id%2Centities&max_results=100' \
  --header 'Authorization: Bearer $ACCESS_TOKEN'
```

**Próximos pasos**

[Consulta nuestra guía de inicio rápido para la búsqueda reciente de X API v2](/es/x-api/posts/search/quickstart/recent-search)

[Revisa la referencia de la API para la búsqueda reciente](/es/x-api/posts/recent-search)

[Consulta código de ejemplo para estos endpoints](https://github.com/xdevplatform/Twitter-API-v2-sample-code "Consulta código de ejemplo para estos endpoints")

[Guía paso a paso para realizar tu primera solicitud de búsqueda reciente](/es/x-api/getting-started/make-your-first-request "Guía paso a paso para realizar tu primera solicitud de búsqueda reciente")
