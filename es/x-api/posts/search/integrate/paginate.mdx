---
title: Paginación
sidebarTitle: Paginación
keywords: ["paginación de búsqueda", "guía de paginación", "navegar por los resultados", "tokens de paginación", "paginación de búsqueda", "siguiente token"]
---

<div id="recent-search-pagination">
  ### Paginación de la búsqueda reciente
</div>

<div id="introduction">
  #### Introducción
</div>

Las consultas de búsqueda normalmente arrojan más Publicaciones de las que se pueden devolver en una sola respuesta de la API. Cuando eso sucede, los datos se devuelven en una serie de &quot;páginas&quot;. La paginación se refiere a los métodos para solicitar todas las páginas con el fin de recuperar el conjunto completo de datos.

A continuación se muestran detalles fundamentales sobre la paginación en búsquedas recientes:

* Los endpoints de búsqueda reciente responderán a una consulta con al menos una página y proporcionarán un next&#95;token en su respuesta JSON si hay páginas adicionales disponibles. Para recibir las Publicaciones que coincidan con la consulta, este proceso se puede repetir hasta que no se incluya ningún token en la respuesta.

* El next&#95;token no caduca. Varias solicitudes que usen el mismo valor de next&#95;token recibirán los mismos resultados, independientemente de cuándo se haga la solicitud.

* Las Publicaciones se entregan en orden cronológico inverso, en la zona horaria UTC. Esto es así tanto dentro de páginas individuales como entre múltiples páginas: 
  * La primera Publicación en la primera respuesta será la más reciente que coincida con tu consulta.
  * La última Publicación en la última respuesta será la más antigua que coincida con tu consulta.

* El parámetro de solicitud max&#95;results te permite configurar la cantidad de Publicaciones devueltas por respuesta. De forma predeterminada es de 10 Publicaciones y tiene un máximo de 100. 

* Toda implementación de paginación implicará extraer los next&#95;tokens del payload de la respuesta e incluirlos en la solicitud de búsqueda de la &quot;siguiente página&quot;. Consulta a continuación más detalles sobre cómo construir estas solicitudes de &quot;siguiente página&quot;.
   

El endpoint de búsqueda reciente se diseñó para admitir dos patrones de uso fundamentales:

* **Obtener datos históricos** - Solicitar Publicaciones que coincidan dentro de un período de tiempo de interés. Normalmente se trata de solicitudes puntuales que respaldan investigaciones históricas. Las solicitudes de búsqueda se pueden basar en los parámetros de solicitud start&#95;time y end&#95;time. El endpoint de búsqueda reciente responde con Publicaciones entregadas en orden cronológico inverso, comenzando por la Publicación más reciente que coincida. 

* **Sondeo** - Solicitar Publicaciones que coincidan y que se hayan publicado desde la última Publicación recibida. Estos casos de uso suelen tener un enfoque casi en tiempo real y se caracterizan por solicitudes frecuentes que &quot;escuchan&quot; nuevas Publicaciones de interés. El endpoint de búsqueda reciente proporciona el parámetro de solicitud since&#95;id para admitir el patrón de &quot;sondeo&quot;. Para ayudar a navegar por los id de las Publicaciones, también está disponible el parámetro de solicitud until&#95;id.
   

A continuación, analizaremos el modo histórico. Este es el modo predeterminado del endpoint de búsqueda reciente y muestra los fundamentos de la paginación. Luego comentaremos ejemplos de casos de uso de sondeo. Cuando el sondeo activa la paginación, hay un paso adicional para gestionar las solicitudes de búsqueda.
 

<div id="retrieving-historical-data">
  #### Recuperar datos históricos
</div>

Esta sección describe cómo puedes recuperar Publicaciones de un periodo de interés (actualmente limitado a los últimos siete días) utilizando los parámetros de la solicitud start&#95;time y end&#95;time. Las solicitudes históricas suelen ser solicitudes puntuales para respaldar tareas de investigación y análisis. 

Realizar solicitudes para un periodo de datos es el modo predeterminado del endpoint de búsqueda reciente. Si una solicitud de búsqueda no especifica un parámetro de solicitud start&#95;time, end&#95;time o since&#95;id, end&#95;time tendrá como valor predeterminado «now» (en realidad, 30 segundos antes del momento de la consulta) y start&#95;time tendrá como valor predeterminado siete días antes.

El endpoint responderá con la primera «página» de Publicaciones en orden cronológico inverso, comenzando por la Publicación más reciente. La carga útil JSON de la respuesta también incluirá un next&#95;token si hay páginas adicionales de datos. Para recopilar el conjunto completo de Publicaciones coincidentes, independientemente del número de páginas, se realizan solicitudes hasta que no se proporcione ningún next&#95;token. 

Por ejemplo, aquí tienes una solicitud inicial de Publicaciones con la palabra clave «snow» de la última semana:

[https://api.x.com/2/tweets/search/recent?query=snow](https://api.x.com/2/tweets/search/recent?query=snow)

La respuesta incluye las 10 Publicaciones más recientes, junto con estos atributos «meta» en la respuesta JSON:

```
"meta": {
        "newest_id": "1204860593741553664",
        "oldest_id": "1204860580630278147",
        "next_token": "b26v89c19zqg8o3fobd8v73egzbdt3qao235oql",
        "result_count": 10
    }
```

Para recuperar las 10 Publicaciones siguientes, este next&#95;token se agrega a la solicitud original. La solicitud sería:

[https://api.x.com/2/tweets/search/recent?query=snow&amp;next&#95;token=b26v89c19zqg8o3fobd8v73egzbdt3qao235oql](https://api.x.com/2/tweets/search/recent?query=snow\&next_token=b26v89c19zqg8o3fobd8v73egzbdt3qao235oql)

El proceso de buscar un next&#95;token e incluirlo en una solicitud posterior se puede repetir hasta que se recopilen todas las Publicaciones (o una cantidad determinada de ellas), o hasta que se haya realizado un número especificado de solicitudes. Si la fidelidad de los datos (recopilar todas las coincidencias de tu consulta) es clave para tu caso de uso, bastará con un sencillo diseño de &quot;repetir hasta que request.next&#95;token sea null&quot;.

<div id="polling-and-listening-use-cases">
  #### Casos de uso de sondeo y escucha
</div>

Esta sección describe cómo puedes obtener Publicaciones recientes sondeando el endpoint de búsqueda reciente con el parámetro de solicitud since&#95;id. 

En los casos de uso de sondeo, las consultas de “¿hay nuevas Publicaciones de interés?” se realizan de forma continua y frecuente. A diferencia de los casos de uso históricos, que basan las solicitudes en el tiempo, los casos de uso de sondeo normalmente basan las solicitudes en IDs de Publicación.

Un aspecto central del patrón de uso de sondeo es que cada nueva Publicación tiene un [ID único](/es/resources/fundamentals/x-ids) que se “emite” desde la plataforma X generalmente en orden ascendente. Si una Publicación tiene un ID menor que otra, significa que se publicó antes.

El endpoint de búsqueda reciente permite navegar por el archivo de Publicaciones mediante el ID de Publicación. Las respuestas del endpoint incluyen los IDs de Publicación oldest&#95;id y newest&#95;id. En el modo de sondeo, las solicitudes se realizan con since&#95;id establecido en el ID más alto/más reciente recibido hasta el momento. 

Por ejemplo, supongamos que se realiza una consulta sobre nuevas Publicaciones acerca de nieve cada cinco minutos, y que la última Publicación que recibimos tenía un ID de Publicación de 10000. Cuando llega el momento de sondear, la solicitud tiene este aspecto:

[https://api.x.com/2/tweets/search/recent?query=snow&amp;since&#95;id=10000](https://api.x.com/2/tweets/search/recent?query=snow\&since_id=10000)

A continuación, supongamos que se publicaron siete Publicaciones desde nuestra última solicitud. Dado que todas caben en una sola “página” de datos, no hay next&#95;token. La respuesta proporciona el ID de Publicación de la Publicación más reciente (más nueva):

```
"meta": {
        "newest_id": "12000",
        "oldest_id": "10005",
        "result_count": 7
    }
```

Para hacer la siguiente consulta de sondeo, este valor de newest&#95;id se usa para establecer el siguiente parámetro since&#95;id:

`https://api.x.com/2/tweets/search/recent?query=snow&since_id=12000`

Cuando hay más datos disponibles y se proporcionan next tokens, solo se necesita el valor de newest&#95;id de la primera página de resultados. Cada página de datos incluirá valores de newest&#95;id y oldest&#95;id, pero el valor proporcionado en la primera página es el único necesario para la siguiente solicitud de sondeo programada regularmente. Por lo tanto, si estás implementando un patrón de sondeo o buscando Publicaciones por rango de ID, la lógica de paginación es ligeramente más complicada. 

Ahora supongamos que hay 18 Publicaciones más que coinciden. El endpoint respondería con esta respuesta inicial con una página completa de datos y un next&#95;token para solicitar la siguiente página de datos de este período de cinco minutos. También incluiría la ID de la Publicación más reciente necesaria para el siguiente intervalo de sondeo dentro de cinco minutos.

```
"meta": {
        "newest_id": "13800",
        "oldest_id": "12500",
        "next_token": "fnsih9chihsnkjbvkjbsc",
        "result_count": 10
    }
```

Para recopilar todos los datos coincidentes de este período de cinco minutos, incluye el next&#95;token en tu siguiente solicitud, junto con el mismo valor de since&#95;id que en la solicitud anterior.

[https://api.x.com/2/tweets/search/recent?query=snow&amp;since&#95;id=12000&amp;next&#95;token=fnsih9chihsnkjbvkjbsc](https://api.x.com/2/tweets/search/recent?query=snow\&since\\_id=12000\&next\\_token=fnsih9chihsnkjbvkjbsc)

```
"meta": {
        "newest_id": "12300",
        "oldest_id": "12010",
        "result_count": 8
    }
```

Esta segunda respuesta proporciona las ocho Publicaciones restantes y no incluye ningún next&#95;token. Ten en cuenta que no actualizamos nuestro valor de newest&#95;id (12300), sino que basamos nuestra siguiente solicitud con since&#95;id en el valor de newest&#95;id de la primera respuesta:

[https://api.x.com/2/tweets/search/recent?query=snow&amp;since&#95;id=13800](https://api.x.com/2/tweets/search/recent?query=snow\&since_id=13800)
