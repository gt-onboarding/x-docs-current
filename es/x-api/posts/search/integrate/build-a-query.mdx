---
title: Crear una consulta
sidebarTitle: Crear una consulta
keywords: ["crear consulta", "consulta de búsqueda", "generador de consultas", "operadores de búsqueda", "sintaxis de consulta", "crear consulta de búsqueda", "guía de consultas"]
---

<div id="building-queries-for-search-posts">
  ## Creación de consultas para búsquedas de Publicaciones
</div>

Los endpoints de búsqueda aceptan una única consulta mediante una solicitud GET y devuelven un conjunto de Publicaciones históricas que coinciden con dicha consulta. Las consultas se componen de operadores que se utilizan para hacer coincidir una variedad de atributos de las Publicaciones. 

<div id="table-of-contents">
  ### Tabla de contenido
</div>

* [Crear una consulta](#build)
* [Limitaciones de las consultas](#limits)
* [Disponibilidad de operadores](#availability)
* [Tipos de operadores: independientes y que requieren conjunción](#types)
* [Operadores booleanos y agrupación](#boolean)
* [Orden de las operaciones](#order-of-operations)
* [Puntuación, diacríticos y distinción entre mayúsculas y minúsculas](#punctuation)
* [Especificidad y eficiencia](#specificity)
* [Comportamiento de coincidencia de publicaciones citadas](#quote-tweets)
* [Creación iterativa de una consulta](#iterative)
* [Agregar una consulta a tu solicitud](#adding-a-query)
* [Ejemplos de consultas](#examples)
* [Lista de operadores](#list)

<div id="building-a-query">
  ### Crear una consulta
</div>

<div id="query-limitations">
  #### Limitaciones de las consultas
</div>

Tus consultas estarán limitadas según el [nivel de acceso](/es/x-api/getting-started/about-x-api) que utilices. 

Si tienes acceso Basic o Pro, tu consulta puede tener hasta 512 caracteres para el endpoint de búsqueda reciente. 

Si tienes acceso Pro, tu consulta puede tener hasta 1.024 caracteres para el endpoint de búsqueda en el archivo completo. 

<div id="operator-availability">
  #### Disponibilidad de operadores
</div>

Aunque la mayoría de los operadores están disponibles para cualquier desarrollador, hay varios que están reservados para ciertos niveles de acceso. Indicamos con qué nivel de acceso cuenta cada operador en la tabla de la [lista de operadores](/es/x-api/posts/search/integrate/operators) utilizando las siguientes etiquetas:

* **Operadores básicos:** Disponibles cuando se usa cualquier [Proyecto](/es/resources/fundamentals/projects).
* **Operadores avanzados:** Disponibles cuando se usa un Proyecto con un determinado nivel de acceso.

<div id="operator-types-standalone-and-conjunction-required">
  #### Tipos de operadores: independientes y que requieren conjunción
</div>

Los **operadores independientes** se pueden usar solos o junto con cualquier otro operador (incluidos aquellos que requieren conjunción).

Por ejemplo, la siguiente consulta funcionará porque usa el operador `#hashtag`, que es independiente:

`#xapiv2`

Los operadores **que requieren conjunción** no se pueden usar por sí solos en una consulta; solo se pueden usar cuando al menos un operador independiente está incluido en la consulta. Esto se debe a que usar estos operadores solos sería demasiado general y devolvería un volumen extremadamente alto de Publicaciones.

Por ejemplo, las siguientes consultas no están permitidas porque contienen únicamente operadores que requieren conjunción:

`has:media`

`has:links OR is:retweet`

Si añadimos un operador independiente, como la frase `"X data"`, la consulta entonces funcionaría correctamente.

`"X data" has:mentions (has:media OR has:links)`

<div id="boolean-operators-and-grouping">
  #### Operadores booleanos y agrupación
</div>

Si deseas encadenar varios operadores en una sola consulta, tienes las siguientes herramientas a tu disposición:

|     |     |
| :--- | :--- |
| **Lógica AND** | Los operadores sucesivos separados por un espacio darán como resultado una lógica booleana &quot;AND&quot;, lo que significa que las Publicaciones solo coincidirán si se cumplen ambas condiciones. Por ejemplo, `snow day #NoSchool` coincidirá con Publicaciones que contengan los términos snow y day y el hashtag #NoSchool. |
| **Lógica OR** | Los operadores sucesivos con OR entre ellos darán como resultado una lógica OR, lo que significa que las Publicaciones coincidirán si se cumple cualquiera de las condiciones. Por ejemplo, si se especifica `grumpy OR cat OR #meme` coincidirá con cualquier Publicación que contenga al menos los términos grumpy o cat, o el hashtag #meme. |
| **Lógica NOT, negación** | Anteponer un guion (-) a una palabra clave (o a cualquier operador) la niega (NOT). Por ejemplo, `cat #meme -grumpy` coincidirá con Publicaciones que contengan el hashtag #meme y el término cat, pero solo si no contienen el término grumpy. Una cláusula de consulta común es `-is:retweet`, que no coincidirá con Retweets y, por lo tanto, solo coincidirá con Publicaciones originales, Quote Tweets y respuestas. Todos los operadores se pueden negar, pero los operadores negados no se pueden usar solos. |
| **Agrupación** | Puedes usar paréntesis para agrupar operadores. Por ejemplo, `(grumpy cat) OR (#meme has:images)` devolverá Publicaciones que contengan los términos grumpy y cat, o Publicaciones con imágenes que contengan el hashtag #meme. Ten en cuenta que los AND se aplican primero y luego se aplican los OR. |

**Nota sobre las negaciones**

El operador `-is:nullcast` siempre debe estar negado.

Los operadores negados no se pueden usar solos.

No niegues un conjunto de operadores agrupados entre paréntesis. En su lugar, niega cada operador individualmente. Por ejemplo, en lugar de usar `skiing -(snow OR day OR noschool)`, te sugerimos usar `skiing -snow -day -noschool`. 

<div id="order-of-operations">
  #### Orden de las operaciones
</div>

Cuando combines la funcionalidad AND y OR, el siguiente orden de operaciones determinará cómo se evalúa tu consulta.

1. Los operadores conectados con lógica AND se combinan primero
2. Luego, se aplican los operadores conectados con lógica OR

Por ejemplo:

* `apple OR iphone ipad` se evaluará como `apple OR (iphone ipad)`
* `ipad iphone OR android` se evaluará como `(iphone ipad) OR android`

Para eliminar la incertidumbre y asegurarte de que tu consulta se evalúa como deseas, agrupa los términos con paréntesis cuando sea apropiado. 

Por ejemplo:

* `(apple OR iphone) ipad`
* `iphone (ipad OR android)`

<div id="punctuation-diacritics-and-case-sensitivity">
  #### Puntuación, diacríticos y sensibilidad a mayúsculas y minúsculas
</div>

Si especificas una consulta de palabra clave o hashtag con acentos o diacríticos, coincidirá con texto de Publicaciones que contenga tanto el término con los acentos y diacríticos como esos mismos términos con caracteres normales. Por ejemplo, las consultas con una palabra clave `Diacrítica` o hashtag `#cumpleaños` coincidirán con *Diacrítica* o *#cumpleaños*, así como con *Diacritica* o *#cumpleanos* sin la tilde í o eñe.

Los caracteres con acentos o diacríticos se tratan igual que los caracteres normales y no se consideran límites de palabra. Por ejemplo, una consulta con la palabra clave `cumpleaños` solo coincidiría con actividades que contengan la palabra *cumpleaños* y no coincidiría con actividades que contengan *cumplea*, *cumplean* u *os*.

Todos los operadores se evalúan sin distinción entre mayúsculas y minúsculas. Por ejemplo, la consulta `cat` coincidirá con Publicaciones que contengan cualquiera de los siguientes: *cat*, *CAT*, *Cat*.

El comportamiento de coincidencia del [flujo filtrado](/es/x-api/posts/filtered-stream) funciona de manera diferente que Search Posts. Cuando [crees una regla de flujo filtrado](/es/x-api/posts/filtered-stream#building-rules-for-filtered-stream), ten en cuenta que las palabras clave y los hashtags que incluyan acentos y diacríticos solo coincidirán con términos que también incluyan el acento y el diacrítico, y no coincidirán con términos que utilicen caracteres normales en su lugar.

Por ejemplo, las reglas de flujo filtrado que incluyan una palabra clave `Diacrítica` o hashtag `#cumpleaños` solo coincidirán con los términos *Diacrítica* y *#cumpleaños*, y no coincidirán con *Diacritica* o *#cumpleanos* sin la tilde í o eñe.

<div id="specificity-and-efficiency">
  #### Especificidad y eficiencia
</div>

Cuando comiences a crear tu consulta, es importante tener en cuenta algunos aspectos.

* Usar operadores amplios e independientes en tu consulta, como una sola palabra clave o #hashtag, por lo general no es recomendable, ya que probablemente coincidirá con un volumen masivo de Publicaciones. Crear una consulta más sólida dará como resultado un conjunto más específico de Publicaciones coincidentes y, con suerte, reducirá la cantidad de ruido en la carga útil que tendrás que filtrar para encontrar información valiosa. 
  * Por ejemplo, si tu consulta fuera solo la palabra clave `happy`, probablemente obtendrías entre 200 000 y 300 000 Publicaciones por día.
  * Agregar más operadores condicionales acota tus resultados de búsqueda, por ejemplo `(happy OR happiness) place_country:GB -birthday -is:retweet`
* Escribir consultas eficientes también te ayuda a mantenerte dentro de la restricción de longitud de caracteres de la consulta. El número de caracteres incluye toda la cadena de consulta, incluidos los espacios y los operadores.
  * Por ejemplo, la siguiente consulta tiene 59 caracteres: `(happy OR happiness) place_country:GB -birthday -is:retweet`

<div id="quote-tweet-matching-behavior">
  #### Comportamiento de coincidencia en las Publicaciones citadas
</div>

Cuando uses los endpoints de Search Posts, los operadores no coincidirán con el contenido de la Publicación original que se citó, pero sí coincidirán con el contenido incluido en la Publicación citada.

Sin embargo, ten en cuenta que [filtered stream](/es/x-api/posts/filtered-stream) coincidirá tanto con el contenido de la Publicación original que se citó como con el contenido de la Publicación citada.

<div id="iteratively-building-a-query">
  #### Crear una consulta de forma iterativa
</div>

<div id="test-your-query-early-and-often">
  ##### Prueba tu consulta temprano y con frecuencia
</div>

Lograr que una consulta devuelva los resultados &quot;correctos&quot; a la primera es poco habitual. Hay tanto contenido en X que puede o no ser evidente al principio, y la sintaxis de consulta descrita arriba puede ser difícil de ajustar a la búsqueda que deseas. A medida que defines una consulta, es importante que la pruebes periódicamente.

Para esta sección, vamos a empezar con la siguiente consulta y ajustarla en función de los resultados que recibamos durante nuestra prueba: 

`happy OR happiness`

<div id="use-results-to-narrow-the-query">
  ##### Utiliza los resultados para acotar la consulta
</div>

A medida que pruebes la consulta, debes examinar las Publicaciones devueltas para ver si incluyen los datos que esperas y deseas recibir. Comenzar con una consulta amplia y un superconjunto de coincidencias de Publicaciones te permite revisar el resultado y acotar la consulta para filtrar los resultados no deseados.  

Cuando probamos la consulta de ejemplo, notamos que estábamos recibiendo Publicaciones en una variedad de idiomas diferentes. En esta situación, solo queremos recibir Publicaciones que estén en inglés, así que vamos a agregar el operador `lang:`:

`(happy OR happiness) lang:en`

La prueba devolvió varias Publicaciones en las que se deseaba un feliz cumpleaños a las personas, así que vamos a agregar `-birthday` como operador de palabra clave negada. También queremos recibir solo Publicaciones originales, así que hemos añadido el operador negado `-is:retweet`:

`(happy OR happiness) lang:en -birthday -is:retweet`

<div id="adjust-for-inclusion-where-needed">
  ##### Ajustar para inclusión cuando sea necesario
</div>

Si notas que no estás recibiendo los datos que esperas y sabes que hay Publicaciones existentes que deberían aparecer, es posible que tengas que ampliar tu consulta eliminando operadores que puedan estar filtrando los datos deseados. 

En nuestro ejemplo, notamos que había otras Publicaciones en nuestra cronología personal que expresaban la emoción que buscamos y no se incluyeron en los resultados de la prueba. Para asegurarnos de tener una mayor cobertura, vamos a añadir las palabras clave `excited` y `elated`.

`(happy OR happiness OR excited OR elated) lang:en -birthday -is:retweet`

<div id="adjust-for-popular-trendsbursts-over-the-time-period">
  ##### Ajustar según tendencias populares/picos de actividad durante el período de tiempo
</div>

Las tendencias en X van y vienen rápidamente. Mantener tu consulta debería ser un proceso activo. Si planeas usar una consulta durante un tiempo, te sugerimos que revises periódicamente los datos que estás recibiendo para ver si necesitas hacer algún ajuste.

En nuestro ejemplo, notamos que empezamos a recibir algunas publicaciones que desean a la gente unas “felices fiestas”. Como no queremos que estas publicaciones se incluyan en nuestros resultados, vamos a añadir la palabra clave negada `-holidays`.

`(happy OR happiness OR excited OR elated) lang:en -birthday -is:retweet -holidays`

<div id="adding-a-query-to-your-request">
  ### Agregar una consulta a tu solicitud
</div>

Para agregar tu consulta a tu solicitud, debes usar el parámetro `query`. Como con cualquier parámetro de consulta, debes asegurarte de codificar para HTTP la consulta que desarrollaste.

Aquí tienes un ejemplo de cómo podría verse usando un comando cURL, con los parámetros adicionales `tweet.fields` y `max_results` incluidos. Si deseas usar este comando, asegúrate de reemplazar `$BEARER_TOKEN` por tu propio [Bearer Token](/es/resources/fundamentals/authentication#oauth-2-0):

```bash
curl https://api.x.com/2/tweets/search/recent?query=cat%20has%3Amedia%20-grumpy&tweet.fields=created_at&max_results=100 -H "Authorization: Bearer $BEARER_TOKEN"
```

<div id="query-examples">
  ### Ejemplos de consultas
</div>

<div id="tracking-a-natural-disaster">
  #### Seguimiento de un desastre natural
</div>

La siguiente consulta devuelve Publicaciones originales provenientes de agencias meteorológicas y estaciones de medición que hablan sobre el huracán Harvey, que azotó Houston en 2017.

A continuación se muestra cómo sería la consulta sin la codificación HTTP:

`has:geo (from:NWSNHC OR from:NHC\_Atlantic OR from:NWSHouston OR from:NWSSanAntonio OR from:USGS\_TexasRain OR from:USGS_TexasFlood OR from:JeffLindner1) -is:retweet`

Y a continuación se muestra cómo sería la consulta con la codificación HTTP, el parámetro de consulta y el URI de búsqueda reciente:

`https://api.x.com/2/tweets/search/recent?query=-is%3Aretweet%20has%3Ageo%20(from%3ANWSNHC%20OR%20from%3ANHC\_Atlantic%20OR%20from%3ANWSHouston%20OR%20from%3ANWSSanAntonio%20OR%20from%3AUSGS\_TexasRain%20OR%20from%3AUSGS_TexasFlood%20OR%20from%3AJeffLindner1)`

<div id="reviewing-the-sentiment-of-a-conversation">
  #### Analizar el sentimiento de una conversación
</div>

La siguiente regla se podría utilizar para comprender mejor el sentimiento de la conversación que se desarrolla alrededor del hashtag *#nowplaying*, pero limitada únicamente a Publicaciones realizadas dentro de Norteamérica.

A continuación se muestra cómo se verían las dos consultas diferentes, una para sentimiento positivo y otra para negativo, sin la codificación HTTP:

`#nowplaying (happy OR exciting OR excited OR favorite OR fav OR amazing OR lovely OR incredible) (place\_country:US OR place\_country:MX OR place_country:CA) -horrible -worst -sucks -bad -disappointing`

`#nowplaying (horrible OR worst OR sucks OR bad OR disappointing) (place\_country:US OR place\_country:MX OR place_country:CA) -happy -exciting -excited -favorite -fav -amazing -lovely -incredible`

Y así es como se vería la consulta con la codificación HTTP, el parámetro de consulta y el URI de búsqueda reciente:

`https://api.x.com/2/tweets/search/recent?query=%23nowplaying%20(happy%20OR%20exciting%20OR%20excited%20OR%20favorite%20OR%20fav%20OR%20amazing%20OR%20lovely%20OR%20incredible)%20(place\_country%3AUS%20OR%20place\_country%3AMX%20OR%20place_country%3ACA)%20-horrible%20-worst%20-sucks%20-bad%20-disappointing`

`https://api.x.com/2/tweets/search/recent?query=%23nowplaying%20(horrible%20OR%20worst%20sucks%20OR%20bad%20OR%20disappointing)%20(place\_country%3AUS%20OR%20place\_country%3AMX%20OR%20place_country%3ACA)%20-happy%20-exciting%20-excited%20-favorite%20-fav%20-amazing%20-lovely%20-incredible`

<div id="find-posts-that-relate-to-a-specific-post-annotation">
  #### Buscar Publicaciones relacionadas con una anotación específica de una Publicación
</div>

Esta regla se creó para buscar Publicaciones originales que incluyan una imagen de una mascota que no sea un gato y cuyo idioma identificado en la Publicación sea japonés. Para hacerlo, usamos el operador `context:` para aprovechar la funcionalidad de [anotación de Publicaciones](/es/x-api/fundamentals/post-annotations). Primero usamos el endpoint de [búsqueda de Publicaciones](/es/x-api/posts/lookup/introduction) y el parámetro de campos `tweet.fields=context_annotations` para identificar qué IDs de dominio.entidad necesitamos usar en nuestra consulta:

* Las Publicaciones relacionadas con gatos devuelven `domain` 66 (categoría Interests and Hobbies) con la entidad 852262932607926273 (Cats).
* Las Publicaciones relacionadas con mascotas devuelven `domain` 65 (Interests and Hobbies Vertical) con la entidad 852262932607926273 (Pets).

Así se vería la consulta sin la codificación HTTP:

`context:65.852262932607926273 -context:66.852262932607926273 -is:retweet has:images lang:ja`

Y así se vería la consulta con la codificación HTTP, el parámetro de consulta y el URI de búsqueda reciente:

`https://api.x.com/2/tweets/search/recent?query=context%3A65.852262932607926273%20-context%3A66.852262932607926273%20-is%3Aretweet%20has%3Aimages%20lang%3Aja`

Prueba la [herramienta de creación de consultas](https://developer.x.com/apitools/query?query=) para obtener ayuda adicional.