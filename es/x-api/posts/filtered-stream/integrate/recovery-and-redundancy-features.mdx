---
title: Recuperación y redundancia
sidebarTitle: Recuperación y redundancia
keywords: ["recuperación", "redundancia", "recuperación de flujos", "reconexión", "tolerancia a fallos", "redundancia de flujos", "recuperación de errores"]
---

<div id="introduction">
  #### Introducción
</div>

Al consumir datos de streaming, maximizar el tiempo de conexión y recibir todos los datos coincidentes es un objetivo fundamental. Esto significa que es importante aprovechar las conexiones redundantes, detectar automáticamente las desconexiones, reconectarse rápidamente y tener un plan para recuperar los datos perdidos.

En esta guía de integración, hablaremos sobre diferentes características de recuperación y redundancia: conexiones redundantes, backfill y recuperación.
 

**Conexiones redundantes**

Una conexión redundante simplemente te permite establecer más de una conexión simultánea al flujo filtrado. Esto proporciona redundancia al permitirte conectarte al mismo flujo con dos consumidores separados, recibiendo los mismos datos a través de ambas conexiones. Así, tu aplicación cuenta con una conmutación por error activa para varias situaciones, como si un flujo se desconecta o si falla el servidor principal de tu aplicación.

Actualmente, el flujo filtrado solo permite que los Proyectos con acceso Enterprise se conecten hasta a dos conexiones redundantes. Para usar un flujo redundante, simplemente conéctate a la misma URL que se utiliza para tu conexión principal. Los datos de tu flujo se enviarán a través de ambas conexiones.

<div id="recovering-missed-data-after-a-disconnection-backfill">
  #### Recuperación de datos perdidos después de una desconexión: Backfill
</div>

Después de detectar una desconexión, tu sistema debe ser lo suficientemente inteligente como para reconectarse al flujo. Si es posible, tu sistema debe registrar cuánto tiempo duró la desconexión para que puedas usar la función de recuperación adecuada para rellenar (backfill) los datos. 

Si estás usando un Proyecto con acceso Enterprise y has identificado que la desconexión duró cinco minutos o menos, puedes usar el parámetro de backfill, `backfill_minutes`. Si envías este parámetro con tu solicitud [GET /tweets/search/stream](/es/x-api/posts/filtered-stream#get-2-tweets-search-stream), recibirás las Publicaciones que coincidan con tus reglas de entre uno y cinco minutos anteriores. En general, entregamos primero estas Publicaciones más antiguas antes que cualquier Publicación nueva que coincida, y tampoco eliminamos las Publicaciones duplicadas. Esto significa que si estuviste desconectado durante 90 segundos, pero solicitas dos minutos de datos de backfill, recibirás 30 segundos de Publicaciones duplicadas, con las que tu sistema debe ser tolerante. Aquí tienes un ejemplo de cómo podría verse una solicitud con el parámetro de backfill:

`curl 'https://api.x.com/2/tweets/search/stream?backfill_minutes=5' -H "Authorization: Bearer $ACCESS_TOKEN"`

Si no tienes acceso Enterprise, o has identificado que el tiempo de desconexión fue superior a cinco minutos, puedes utilizar el [endpoint de búsqueda reciente](/es/x-api/posts/search/introduction) o la función de recuperación para solicitar los datos perdidos. Sin embargo, ten en cuenta que los endpoints de búsqueda de Publicaciones no incluyen los operadores `sample:`, `bio:`, `bio_name:` o `bio_location:`, y presentan ciertas diferencias en el comportamiento de coincidencia al usar acentos y diacríticos con los operadores de palabras clave (`keyword`) y `#hashtag`. Estas diferencias pueden implicar que no recuperes completamente todas las Publicaciones que podrían haberse recibido mediante los endpoints de flujo filtrado (filtered stream). 

**Recuperación de datos perdidos después de una desconexión: Recovery**

Si estás usando un Proyecto con acceso Enterprise, puedes usar la función Recovery para recuperar datos perdidos dentro de las últimas 24 horas si no puedes reconectarte dentro de la ventana de backfill de 5 minutos.

La función de recuperación de streaming te permite disponer de una ventana de backfill ampliada de 24 horas. Recovery te permite &quot;reproducir&quot; el período de tiempo de datos perdidos. Se inicia un flujo de recuperación cuando realizas una solicitud de conexión usando los parámetros de solicitud `start_time` y `end_time`. Una vez conectado, Recovery volverá a transmitir el período de tiempo indicado y luego se desconectará.  

Podrás realizar dos solicitudes concurrentes a Recovery al mismo tiempo, es decir, &quot;dos trabajos de recuperación&quot;. Recovery funciona técnicamente de la misma manera que backfill, excepto que se define una hora de inicio y una de finalización. Un período de recuperación corresponde a un único intervalo de tiempo.

|     |     |     |
| :--- | :--- | :--- |
| **Name** | **Type** | **Description** |
| start&#95;time | date (ISO 8601) | YYYY-MM-DDTHH:mm:ssZ (ISO 8601/RFC 3339).<br /><br />Fecha en UTC que indica la hora de inicio desde la que se va a recuperar. |
| end&#95;time | date (ISO 8601) | YYYY-MM-DDTHH:mm:ssZ (ISO 8601/RFC 3339).<br /><br />Fecha en UTC que indica la hora de finalización hasta la que se va a recuperar. |

URL de solicitud de ejemplo: [https://api.x.com/2/tweets/search/stream?start&#95;time=2022-07-12T15:10:00Z&amp;end&#95;time=2022-07-12T15:20:00Z](https://api.x.com/2/tweets/search/stream?start_time=1985-04-12T23:20:50.52Z\&end_time=1985-04-13T00:20:50.52Z)