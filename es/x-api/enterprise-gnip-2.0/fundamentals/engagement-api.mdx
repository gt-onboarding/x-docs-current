---
title: Engagement API
keywords: ["Engagement API", "Enterprise Engagement API", "métricas de interacción", "datos de interacción", "interacción en Enterprise", "interacción de GNIP"]
---

<div id="overview">
  ## Descripción general
</div>

[`Enterprise`](https://developer.x.com/en/products/x-api/enterprise)

*Esta es una API Enterprise disponible solo dentro de nuestros niveles de acceso gestionados. Para usar esta API, primero debes abrir una cuenta con nuestro equipo de ventas de Enterprise. [Más información](/es/x-api/enterprise-gnip-2.0/enterprise-gnip)*

La Engagement API proporciona acceso a métricas de impresiones e interacción de las Publicaciones. Si bien la mayoría de las métricas y endpoints requieren que te autentiques usando [Contexto de usuario de OAuth 1.0a](/es/resources/fundamentals/authentication), puedes acceder a las métricas públicas de favoritos, Retweets, respuestas y reproducciones de video usando [OAuth 2.0 Bearer Token](/es/resources/fundamentals/authentication#oauth-2-0) y el endpoint /totals.  

**Nota:** Es posible que observes diferencias entre los datos que se muestran en algunos de los paneles web de X y los datos que devuelve la Engagement API. Estas diferencias se producen porque los paneles web normalmente solo muestran interacciones y/o impresiones que ocurrieron dentro del rango de tiempo seleccionado. Por ejemplo, un panel web puede mostrar las interacciones en Publicaciones dentro del lapso de un mes calendario, mientras que la Engagement API puede mostrar interacciones que queden fuera del lapso de ese mes, pero dentro del rango de tiempo solicitado. En estos casos, la Engagement API debe considerarse la fuente de referencia.
 

<div id="request-endpoints">
  ### Puntos de conexión de solicitud
</div>

La Engagement API tiene tres puntos de conexión:

<div id="current-totals-totals">
  #### Totales actuales: [/totals]
</div>

* Las solicitudes devuelven una métrica total de impresiones y otra métrica total de interacciones para las Publicaciones deseadas
* Se limita a las siguientes métricas: impresiones, interacciones, Me gusta, respuestas, Retweets, Publicaciones citadas y reproducciones de video
* Permite recuperar métricas de **Impresiones** e **Interacciones** para Publicaciones creadas **en los últimos 90 días** usando Contexto de usuario de OAuth 1.0a
* Permite recuperar métricas de **Me gusta, Retweets, Publicaciones citadas, respuestas** y **reproducciones de video** para **cualquier Publicación** usando OAuth 2.0 Bearer Token
* Los resultados se basan en el total actual de impresiones e interacciones en el momento en que se realiza la solicitud
* Ideal para alimentar un panel y para calcular tasas de interacción en una variedad de cuentas (@handles)
* Permite solicitar métricas para hasta 250 Publicaciones por solicitud
   

<div id="last-28-hours-28hr">
  #### Últimas 28 horas: [/28hr]
</div>

* Las solicitudes pueden devolver una métrica total de impresiones, una métrica total de interacciones y un desglose de las métricas de interacción individuales que se hayan producido en las últimas 28 horas
* Los datos se pueden agrupar por Post ID y, en series temporales agregadas, por día o por hora
* Ideal para el seguimiento del rendimiento del contenido creado recientemente
* Admite todas las métricas disponibles
* Admite solicitar métricas para hasta 25 Publicaciones por solicitud
   

<div id="historical-historical">
  #### Histórico: [/historical]
</div>

* Las solicitudes pueden devolver impresiones, interacciones y un desglose de cada métrica de interacción individual del último año, según el momento de la interacción (no el momento de creación de la Publicación).
* Las solicitudes admiten parámetros de fecha de inicio y fecha de finalización, lo que ofrece flexibilidad para acotar un período de tiempo específico de hasta 4 semanas de duración.
* Los datos de interacción de la Publicación están limitados a los 365 días anteriores.
* Los datos se pueden agrupar por id de la Publicación y, en series temporales agregadas, por día o por hora.
* Ideal para evaluar el rendimiento reciente frente a un punto de referencia histórico o elaborar una visión histórica del rendimiento de un @handle.
* Admite todas las métricas disponibles.
* Admite solicitar métricas para hasta 25 Publicaciones por solicitud.

<div id="available-metrics">
  ### Métricas disponibles
</div>

La siguiente tabla describe los tipos de métricas a los que puedes acceder a través de la Engagement API.

Consulta nuestra página [Interpretación de las métricas](/es/x-api/enterprise-gnip-2.0/fundamentals/engagement-api#interpreting-the-metrics) para obtener más información sobre las métricas que se indican a continuación.

| Métrica                                                                                                                                                            | Disponibilidad en endpoints | Requiere contexto de usuario                          | Descripción                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| :----------------------------------------------------------------------------------------------------------------------------------------------------------------- | :-------------------------- | :---------------------------------------------------- | :---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| impresiones                                                                                                                                                        | Todos                       | Sí                                                    | Número de veces que se ha visto la Publicación. Esta métrica solo está disponible para Publicaciones que se han publicado en los últimos 90 días.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| interacciones                                                                                                                                                      | Todos                       | Sí                                                    | Cantidad de veces que un usuario ha interactuado con la Publicación. Esta métrica solo está disponible para Publicaciones realizadas en los últimos 90 días.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| Me gusta                                                                                                                                                           | Todos                       | Sí - /28hrs &amp; /Historical<br /><br />No - /totals | Cantidad de veces que la Publicación se ha marcado como favorita.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| Retweets                                                                                                                                                           | Todos                       | Sí - /28hrs &amp; /Historical<br /><br />No - /totals | Cantidad de veces que se ha hecho Retweet de la Publicación.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| quote&#95;tweets                                                                                                                                                   | /totals                     | No - /totals                                          | Cantidad de veces que una Publicación ha sido retuiteada con un comentario (también conocida como cita).                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| respuestas                                                                                                                                                         | Todos                       | Sí - /28hrs &amp; /Historical<br /><br />No - /totals | Número de veces que se ha respondido a la Publicación.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| video&#95;views                                                                                                                                                    | Todos                       | Sí - /28hrs &amp; /Historical<br /><br />No - /totals | Un recuento de cuántas veces un video en la Publicación dada ha estado visible al 50 % durante al menos dos segundos.<br /><br />Las visualizaciones de video solo están disponibles para Publicaciones que tengan 1800 días de antigüedad o menos. Si intentas solicitar visualizaciones de video para cualquier Publicación con más de 1800 días de antigüedad, recibirás el siguiente objeto en tu respuesta, junto con un objeto separado que contiene cualquier otra métrica que hayas solicitado:<br /><br />&quot;unsupported&#95;for&#95;video&#95;views&#95;tweet&#95;ids&quot;: [&quot;TWEET&#95;ID&quot;]<br /><br />**Ten en cuenta:** Puedes ver una discrepancia entre la métrica de visualizaciones de video mostrada en las plataformas propiedad de X y operadas por esta (aplicación móvil y sitio web) y el número que recibes a través de los endpoints /28hr y /historical.  <br /><br />*   Las visualizaciones de video mostradas en la interfaz de usuario de X y con el endpoint /totals mostrarán la métrica de visualizaciones de video agregada en todas las Publicaciones en las que se haya publicado el video en cuestión. Esto significa que la métrica mostrada en la IU incluye las visualizaciones combinadas de cualquier instancia en la que el video haya sido Retuiteado o vuelto a publicar en Publicaciones separadas. Esta métrica no incluye visualizaciones de video en GIFs.<br />*   Las visualizaciones de video proporcionadas por los endpoints /28hr y /historical solo incluirán aquellas visualizaciones generadas por la Publicación específica para la que estás obteniendo métricas. Esta métrica no incluye visualizaciones de video en GIFs. |
| media&#95;views                                                                                                                                                    | /28hr /historical           | Sí                                                    | Cantidad total de visualizaciones (reproducción automática y por clic) de tu contenido multimedia, sumadas entre videos, GIF y fotos.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| media&#95;engagements<br /><br />([antes conocido como Media Clicks](/es/x-api/enterprise-gnip-2.0/fundamentals/engagement-api#recent-changes-to-the-engagement-api)) | /28hr /historical           | Sí                                                    | Cantidad de veces que se ha hecho clic en contenido multimedia, como una imagen o un video, en la Publicación.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| url&#95;clicks                                                                                                                                                     | /28hr /historical           | Sí                                                    | Cantidad de veces que se ha hecho clic en una URL incluida en la Publicación.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| hashtag&#95;clicks                                                                                                                                                 | /28hr /historical           | Sí                                                    | Cantidad de veces que se ha hecho clic en un hashtag de la Publicación.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| detail&#95;expands                                                                                                                                                 | /28hr /historical           | Sí                                                    | Cantidad de veces que se ha hecho clic en la Publicación para ver más detalles.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| permalink&#95;clicks                                                                                                                                               | /28hr /historical           | Sí                                                    | Cantidad de veces que se ha hecho clic en el enlace permanente de la Publicación (la página web individual dedicada a esta Publicación).                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| app&#95;install&#95;attempts                                                                                                                                       | /28hr /historical           | Sí                                                    | Número de veces que se ha producido un evento de instalación de la Aplicación desde la Publicación                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| app&#95;opens                                                                                                                                                      | /28hr /historical           | Sí                                                    | Cantidad de veces que se ha producido un evento de Apertura de Aplicación desde la Publicación.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| email&#95;tweet                                                                                                                                                    | /28hr /historical           | Sí                                                    | Cantidad de veces que se ha compartido la Publicación por correo electrónico.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| user&#95;follows                                                                                                                                                   | /28hr /historical           | Sí                                                    | Cantidad de veces que el Usuario (autor de la Publicación) ha sido seguido desde esta Publicación.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| user&#95;profile&#95;clicks                                                                                                                                        | /28hr /historical           | Sí                                                    | Cantidad de veces que se ha hecho clic en el perfil del Usuario (autor de la Publicación) desde esta Publicación.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |

<div id="engagement-groupings">
  ### Agrupaciones de interacción
</div>

Las agrupaciones permiten una organización personalizada de las métricas de interacción que se devuelven. Puedes incluir un máximo de 3 agrupaciones por solicitud. Puedes elegir agrupar las métricas por uno o más de los siguientes valores:

*Los tres endpoints admiten:*

* tweet.id
* engagement.type
   

*Los endpoints `/28hr` y `/historical` pueden proporcionar métricas de series temporales y, por lo tanto, admiten:*

* engagement.day
* engagement.hour

Para obtener más información sobre las agrupaciones, visita la página [Agrupaciones de la Engagement API](/es/x-api/enterprise-gnip-2.0/fundamentals/engagement-api#engagement-api-groupings) dentro de la sección Guías.

<div id="guides">
  ## Guías
</div>

<div id="developer-getting-started-guide">
  ### Guía de inicio rápido para desarrolladores
</div>

<div id="introduction">
  #### Introducción
</div>

El objetivo de esta documentación es ofrecer a los desarrolladores una introducción a la integración con la Engagement API. Comenzaremos analizando los “porqués” de la integración y luego entraremos en los detalles técnicos del “cómo”.

<div id="what-does-the-engagement-api-provide">
  ##### **¿Qué proporciona la Engagement API?**
</div>

* La Engagement API proporciona datos de impresiones e interacción para las Publicaciones propias de cualquier cuenta de X de los últimos 90 días, siempre que esa cuenta haya autorizado tu Aplicación para solicitar métricas en su nombre usando [3-legged OAuth](/es/resources/fundamentals/authentication#obtaining-access-tokens-using-3-legged-oauth-flow). Esta solución potente y a la vez fácil de implementar ofrece acceso inmediato a las impresiones y a interacciones detalladas como clics en URL, clics en #hashtags y muchas más.
* La Engagement API proporciona métricas agregadas totales de Me gusta, Retweets, Publicaciones con cita, respuestas y reproducciones de vídeo para cualquier Publicación. Esto se puede usar como una forma potente de obtener datos básicos de interacción sobre cualquier Publicación o colección de Publicaciones.
* La Engagement API aporta nuevo valor a las plataformas de escucha social, marketing y publicación al permitir a los clientes medir el ROI en X midiendo de forma efectiva el rendimiento del contenido mediante más de 15 métricas de rendimiento.
* La Engagement API es una API de solicitud/respuesta que permite a los desarrolladores de aplicaciones enviar solicitudes con identificadores (id) de Publicaciones, las métricas deseadas y un período de tiempo, tras lo cual la API devuelve los datos de forma instantánea.
   

<div id="why-integrate-example-use-cases">
  ##### **¿Por qué integrar? Casos de uso de ejemplo**
</div>

* Comprender el alcance total de tu contenido para ver cuántas personas lo ven. Ver cuántas personas ven videos, hacen clic en enlaces, hacen clic en hashtags o instalan tus aplicaciones.
* Generar métricas de interacción tanto totales como de series temporales.
* Comprender métricas de interacción básicas (Me gusta, Retweets, Quote Tweets, respuestas) sobre cualquier Publicación pública.
* Usar estas métricas para determinar qué tipos de Publicaciones funcionan, de modo que puedas publicarlas con más frecuencia y obtener más impresiones y más interacciones para tu contenido.
* Automatizar comportamientos de marketing (como hacer Retweet de contenido desde otra cuenta propia) cada vez que una de tus Publicaciones alcance 100 Me gusta, u otro umbral.
* Comparar y establecer puntos de referencia entre tus campañas como herramienta para hacer pruebas A/B.
* Analizar qué tipo de contenido conecta con tu departamento de atención al cliente para determinar cómo y cuándo responder.
* Mostrar analíticas para el contenido que se publica desde tu plataforma.
   

La [Engagement API se lanzó en 2016](https://blog.x.com/official/en_us/a/2016/gnip-s-engagement-api-is-now-generally-available.html) y fue la primera X API en proporcionar estas métricas de interacción detalladas a gran escala. La Engagement API es fácil de usar y permite a los clientes automatizar el proceso. Aquí tienes un caso de estudio que describe un ejemplo de integración:

* [Medir el éxito de una campaña con la Cruz Roja](https://blog.x.com/developer/en_us/topics/spotlight/2016/measuring-campaign-success-with-the-red-cross.html)[](https://simplymeasured.com/blog/true-twitter-impressions-and-url-clicks-new-from-simply-measured/#sm.0007werel134td8zqf02m2mduumr6)

Ahora que hemos explorado los motivos de la Engagement API, empecemos a profundizar en los detalles técnicos.

<div id="integrating-the-engagement-api">
  #### Integración de la API de interacción
</div>

<div id="introduction-to-api">
  ##### **Introducción a la API**
</div>

La Engagement API es una API RESTful sencilla que recibe solicitudes codificadas en JSON y responde con métricas de interacción codificadas en JSON. Las solicitudes constan de tres partes principales (consulta los enlaces para obtener más documentación):

* Array de ***ids de Publicación***.
* Array que especifica los [tipos de métricas](https://developer.x.com/en/docs/x-api/v1/metrics/get-tweet-engagement/overview#EngagementTypes) de interés. Entre los tipos se incluyen elementos como `impressions`, `retweets`, `hashtag_clicks` y `user_follows`.
* [Engagement groupings](/es/x-api/enterprise-gnip-2.0/fundamentals/engagement-api#engagement-api-groupings), que es una estructura JSON que indica cómo desea que los datos de interacción se organicen en la respuesta de la API.

En muchas situaciones, los Engagement Types y Groupings se mantendrán relativamente constantes de una solicitud a otra, y solo se actualizarán los ids de Publicación.

La Engagement API proporciona [tres endpoints](https://developer.x.com/en/docs/x-api/v1/metrics/get-tweet-engagement/overview#RequestEndpoints):

* **Totals** - Proporciona los totales generales de interacciones para las Publicaciones. Algunas métricas están disponibles para todas las Publicaciones, mientras que otras solo están disponibles para los últimos 90 días.
* **28 hour** - Proporciona métricas de interacción en series temporales de las últimas 28 horas.
* **Historical** - Proporciona métricas de interacción en series temporales durante hasta cuatro semanas consecutivas para Publicaciones publicadas desde el 1 de septiembre de 2014.

El endpoint **/totals** permite solicitar métricas para hasta **250 Publicaciones por solicitud**. Los endpoints **/28hour** y **/historical** permiten **25 por solicitud**.

Después de explicar cómo obtener acceso a la Engagement API, analizaremos cómo realizar una solicitud a la API, proporcionaremos una descripción general de OAuth y ofreceremos enlaces a otros recursos técnicos.

<div id="getting-api-access">
  ##### **Obtención de acceso a la API**
</div>

Si estás leyendo este documento, lo más probable es que ya tengas acceso a la Engagement API. Si no es así, ponte en contacto con tu gestor de cuenta de Enterprise o solicita acceso a Enterprise [aquí](/es/x-api/enterprise-gnip-2.0/enterprise-gnip).

El primer paso es crear una [aplicación de X](/es/resources/fundamentals/developer-apps) usando una cuenta de desarrollador aprobada a través del [portal para desarrolladores](/es/resources/fundamentals/developer-portal). Tu gestor de cuenta necesitará el App ID numérico asociado a esta aplicación para poder proporcionarte acceso. Si necesitas solicitar una cuenta de desarrollador, puedes hacerlo [aquí](/es/resources/fundamentals/developer-apps).

<div id="making-a-request">
  ##### **Realizar una solicitud**
</div>

La buena noticia es que realizar solicitudes a la Engagement API es sencillo. En nuestra solicitud, pediremos los Retweets totales, las Publicaciones con cita, los Favoritos y las respuestas para las siguientes dos Publicaciones de [@XDevelopers](https://x.com/XDevelopers):

> 1/ Hoy compartimos nuestra visión para el futuro de la plataforma de X API![https://t.co/XweGngmxlP](https://t.co/XweGngmxlP)
>
> — Twitter Dev (@TwitterDev) [6 de abril de 2017](https://x.com/TwitterDev/status/850006245121695744)

> No te pierdas las Publicaciones sobre tu Publicación.
>
> Ahora en iOS, puedes ver los Retweets con comentarios en un mismo lugar. [pic.x.com/oanjZfzC6y](https://t.co/oanjZfzC6y)
>
> — X (@X) [12 de mayo de 2020](https://x.com/status/1260294888811347969?ref_src=twsrc%5Etfw)

El primer paso es construir la solicitud a la API en JSON, que consiste en estos dos id de Publicación colocados en un array, un array de tipos de interacción de interés y un objeto JSON con nombre personalizado, «groupings», que indica cómo queremos que las métricas se organicen en la respuesta. A continuación se muestra cómo se ve nuestra solicitud:

```json
{
  "tweet_ids": [
    1260294888811347969, 850006245121695744
  ],
  "engagement_types": [
    "retweets", "quote_tweets", "favorites", "replies"
  ],
  "groupings": {
    "engagement-types-by-id": {
      "group_by": [
        "Tweet.id", "engagement.type"
      ]
    }
  }
}
```

Para recuperar estas métricas totales, realizamos una solicitud POST con este JSON al endpoint [https://data-api.x.com/insights/engagement/totals](https://data-api.x.com/insights/engagement/totals).

Incluiremos los siguientes encabezados para indicar que nuestra solicitud está codificada en JSON y que está comprimida con Gzip (los cuerpos de las solicitudes pueden llegar a ser grandes):

* Content-Type: application/json
* Accept-Encoding: gzip
   

Al realizar solicitudes, nos autenticamos usando OAuth, tema que trataremos con más detalle en la siguiente sección.

La API devuelve el siguiente cuerpo de respuesta:

```json
{
  "grouping name": {
    "1260294888811347969": {
      "favorites": "17111",
      "quote_tweets": "3254",
      "replies": "1828",
      "retweets": "5218"
    },
    "850006245121695744": {
      "favorites": "492",
      "quote_tweets": "66",
      "replies": "42",
      "retweets": "324"
    }
  }
}
```

Ten en cuenta que la respuesta incluye las métricas solicitadas en la estructura descrita por las definiciones de “agrupaciones”, con las métricas enumeradas primero por id de la Publicación y luego por tipo de interacción en el siguiente nivel.

Eso fue bastante sencillo. Si eres nuevo en la autenticación con OAuth, consulta la siguiente sección.

<div id="authenticating-with-oauth">
  #### Autenticación con OAuth
</div>

OAuth es un estándar de autenticación muy común en la industria tecnológica. Si ya estás usando OAuth (quizás con otras X API), es probable que estés utilizando una biblioteca OAuth específica para tu lenguaje que abstrae todos los detalles complejos. Si eres nuevo en OAuth, visita nuestra página [OAuth con la X API](/es/resources/fundamentals/authentication) o dirígete directamente a [https://oauth.net](https://oauth.net/) para obtener más información. Luego te recomendamos que busques una biblioteca OAuth para el lenguaje de programación que uses en tu integración y comiences por ahí. Con estas bibliotecas, el proceso típico de autenticación consiste en configurar tus claves y tokens, crear algún tipo de objeto HTTP y luego hacer solicitudes con ese objeto.

Por ejemplo, en el mundo de Ruby, el siguiente seudocódigo representa una receta para crear una aplicación compatible con OAuth usando la gema de Ruby ‘oauth’ y realizando una solicitud POST:

```js
require 'oauth'

#Ensamblar la solicitud JSON (como se indicó anteriormente).
request = make_json_request()

#Construir un objeto consumidor de aplicación con mi clave de consumidor y secreto de la aplicación.
consumer = OAuth::Consumer.new(keys['consumer_key'], keys['consumer_secret'], {:site => ‘https://data-api.x.com’})
#Construir un token de usuario con los tokens proporcionados por la cuenta que otorga el permiso. Si se realiza una #solicitud solo de aplicación (verificando Publicaciones que no requieren permiso con el endpoint /totals), este paso se puede #omitir.
token = {:oauth_token => keys['access_token'], :oauth_token_secret => keys['access_token_secret']}

#Crear un objeto de aplicación habilitado para oauth.
app = OAuth::AccessToken.from_hash(consumer, token)
#Realizar la solicitud POST.
result = app.post(“/insights/engagement/totals", request, {"content-type" => "application/json", "Accept-Encoding" => "gzip"})
```

La Engagement API admite autenticación solo de aplicación y con contexto de usuario. Si estás recopilando métricas de interacción para Publicaciones públicas que no son propias con el endpoint /totals, no se requiere permiso de usuario y puedes usar autenticación solo de aplicación. En este caso, usarás únicamente la clave y el secreto de tu aplicación para autenticarte.

OAuth también permite que una aplicación haga una solicitud a la API “en nombre de otro usuario”, usando tokens asociados a ese usuario. Si estás generando métricas de engagement para Publicaciones propias, es decir, Publicaciones que fueron publicadas por un usuario para el cual tienes tokens de usuario, estarás realizando solicitudes con contexto de usuario, lo que significa autenticarte tanto con las claves de tu aplicación como con tokens de acceso específicos del usuario. Estos tokens de acceso de usuario se proporcionan normalmente mediante el proceso &#39;[Sign-in with X](/es/resources/fundamentals/authentication#log-in-with-x)&#39; o se obtienen directamente del usuario (ten en cuenta que debes usar [twurl](https://github.com/xdevplatform/xurl) si obtienes los tokens directamente del usuario). Una vez que el usuario proporciona sus tokens, estos no caducan y se pueden usar con la Engagement API para hacer solicitudes en su nombre, siempre que el usuario no restablezca sus tokens ni cambie su contraseña; en ese caso tendrá que proporcionarte los nuevos tokens.

Puedes revisar qué métricas requieren qué tipo de autenticación en [esta tabla](/es/x-api/enterprise-gnip-2.0/fundamentals/engagement-api#engagement-api-groupings).

<div id="selecting-an-engagement-api-endpoint">
  ### Seleccionar un endpoint de la Engagement API
</div>

La Engagement API proporciona tres endpoints distintos:

* **[Totals](/es/x-api/enterprise-gnip-2.0/fundamentals/engagement-api#post-insights-engagement)** - proporciona totales generales de métricas seleccionadas de Publicaciones &quot;owned&quot; o &quot;unowned&quot;. Algunas métricas están disponibles para todas las Publicaciones, mientras que otras solo están disponibles para Publicaciones publicadas en los últimos 90 días. Admite 250 Publicaciones por solicitud.
* **[28 hour](/es/x-api/enterprise-gnip-2.0/fundamentals/engagement-api#post-insights-engagement)** - proporciona métricas de Engagement en series temporales para Publicaciones &quot;owned&quot; de las últimas 28 horas. Admite 25 Publicaciones por solicitud.
* **[Historical](/es/x-api/enterprise-gnip-2.0/fundamentals/engagement-api#post-insights-engagement-historical)** - proporciona métricas de Engagement en series temporales para hasta cuatro semanas consecutivas para Publicaciones &quot;owned&quot; publicadas desde el 1 de septiembre de 2014. Admite 25 Publicaciones por solicitud.
   

Cada endpoint tiene sus propias características. Ya sea que planees utilizar los tres, o estés tratando de decidir cuál se ajusta mejor a tu caso de uso, es importante entender las diferencias entre ellos.

A continuación presentamos algunos conceptos clave, profundizamos en los tres endpoints y luego mostramos casos de uso de ejemplo que se corresponden de forma general con un endpoint específico. Esperamos que esta información te ayude a integrar los tres de forma más eficiente o a decidir cuál único endpoint se adapta mejor a tu objetivo.
 

<div id="key-concepts">
  #### Conceptos clave
</div>

Hay varios conceptos clave que ayudan a explicar las distintas funcionalidades y los datos que ofrecen los tres endpoints de la Engagement API.
 

<div id="impressions-and-engagement-metrics">
  ##### Impresiones y métricas de interacción
</div>

Las impresiones representan la cantidad de veces que una determinada Publicación se ha mostrado en la plataforma X en un contexto orgánico. Las impresiones generadas a partir de Publicaciones que se ven en un contexto promocionado o de pago no se incluyen. Antes de la Engagement API, las impresiones de una Publicación representaban solo una medida de vistas potenciales. Se basaban en contar los seguidores de la cuenta del autor y de cualquier cuenta que hiciera Retweet del contenido. No se tenía en cuenta la situación común en la que un usuario determinado en realidad no ve la Publicación.

Las métricas de impresiones generadas por la Engagement API constituyen una medida real de la cantidad de veces que una Publicación se ha renderizado para su visualización. Si un seguidor de tu cuenta no ve tu Publicación, no cuenta como una impresión.

La Engagement API proporciona métricas de 14 [tipos de métricas](/es/x-api/enterprise-gnip-2.0/fundamentals/engagement-api#available-metrics) únicos, cada uno de los cuales representa una acción distinta que un usuario puede realizar cuando se le muestra una Publicación. Estas incluyen hacer Retweet, marcar como Me gusta, responder, hacer clic en entidades como #hashtags, enlaces y contenido multimedia, seguir al autor y ver el perfil del autor. Todas estas acciones individuales se agrupan en una única métrica de interacciones.

<div id="owned-and-unowned-x-content">
  ##### Contenido de X propio y ajeno
</div>

La Engagement API establece una clara distinción entre Publicaciones propias y ajenas. Las Publicaciones propias son Publicaciones que se publican desde tu cuenta o Publicaciones para las que has obtenido permiso para solicitar datos de Engagement. Al igual que con otras APIs de X, obtienes permiso cuando otros usuarios/cuentas de X comparten tokens de acceso que te permiten hacer solicitudes a la API en su nombre. Una forma común de obtener estos tokens es mediante el [proceso &quot;Iniciar sesión con X&quot;](/es/resources/fundamentals/authentication#log-in-with-x).

El endpoint /totals proporciona datos de engagement tanto para Publicaciones propias como ajenas. Para las Publicaciones ajenas, puedes solicitar métricas de engagement que están disponibles públicamente al mostrarse una Publicación: Favorite, Retweet y Reply. Para estas métricas, lo que la Engagement API aporta es la capacidad de recuperar estas métricas a gran escala de forma automatizada. Para las Publicaciones propias, el endpoint /totals también proporciona métricas de impresiones y de engagement total.

Los endpoints /28hr y /historical proporcionan métricas solo para Publicaciones propias, lo que significa que debes incluir el contexto de usuario cuando realices la solicitud a estos endpoints.

<div id="total-and-time-series-engagement-data">
  ##### Datos de engagement totales y de series temporales
</div>

El endpoint /totals proporciona, como su nombre indica, únicamente totales globales para sus tipos de engagement. Sus valores representan los totales actualizados desde que se publicó la Publicación. Si una Publicación se acaba de publicar y solicitas repetidamente sus métricas, estos totales normalmente cambiarán con cada solicitud.

Los endpoints /28hr y /historical pueden proporcionar tanto totales globales como datos de series temporales. Al solicitar datos de series temporales, las métricas de engagement se pueden consolidar en datos diarios o por hora.   

Consulta nuestra documentación sobre [agrupaciones de engagement](/es/x-api/enterprise-gnip-2.0/fundamentals/engagement-api#engagement-api-groupings) para saber cómo solicitar datos de series temporales con los endpoints /28hr y /historical.

<div id="endpoints-and-example-use-cases">
  #### Endpoints y ejemplos de casos de uso
</div>

Dadas las características y diferencias comentadas anteriormente, cada endpoint individual suele corresponderse con distintos tipos de casos de uso. Para ayudarte a decidir qué endpoint se adapta mejor a tu caso de uso concreto, a continuación se muestran algunos ejemplos de planteamientos de usuarios y el endpoint que mejor responde a cada uno.

<div id="totals">
  ##### **/totals**
</div>

* Solo necesito acceso a algunos tipos de métricas (impresiones, interacciones, favoritos, Retweets, citas, respuestas y reproducciones de video).
* Necesito acceso a datos básicos de interacción para cualquier Publicación, no solo para Publicaciones propias.
* Quiero comparar el rendimiento con un competidor.
* Quiero hacer un seguimiento de estadísticas básicas de interacción para un hashtag o campaña que incluya Publicaciones que no son de mi propiedad.
* No necesito que los datos se desglosen por día u hora; solo necesito el total actual cuando hago una solicitud.
* Necesito una única métrica para mostrar en un informe o panel de control y no quiero almacenar ningún dato.
* Quiero mostrar datos al cargarse la página y solo necesito hacer una solicitud y obtener una respuesta.
* Necesito poder obtener datos de cientos de miles o millones de Publicaciones por día.
   

<div id="28hr">
  ##### **/28hr**
</div>

* Necesito acceso a los 17 tipos de métricas.
* Quiero mostrar datos de Publicaciones muy recientes de las últimas 28 horas.
* Tengo un proceso que se ejecuta una vez al día para obtener los datos que me interesan y solo necesito obtener datos del último día.
* Necesito tener las métricas desglosadas por día u hora.
* Quiero mostrar desgloses de series temporales de la actividad por hora en un panel.
* Necesito un nivel de acceso elevado para cientos de miles de Publicaciones por día.
* Tengo capacidad de almacenamiento y puedo actualizar los datos una vez al día y mantener un conteo acumulado.
   

<div id="historical">
  ##### **/historical**
</div>

* Necesito acceso a los 17 tipos de métricas.
* Necesito obtener datos históricos de Publicaciones creadas hasta septiembre de 2014.
* Quiero mostrar un análisis histórico detallado que compare campañas.
* Necesito que las métricas estén desglosadas por día u hora.
* No necesito un acceso elevado a la Engagement API y solo necesito obtener datos para unos pocos cientos o miles de Publicaciones por día.

<div id="engagement-api-key-characteristics">
  ### Características clave de la Engagement API
</div>

* **API RESTful** que sirve datos JSON y admite solicitudes POST con cuerpos de datos JSON.
* **Tipos de solicitudes:** Las aplicaciones cliente pueden realizar los siguientes tipos de solicitudes:
  * **Engagements totales** -- solicitud HTTP POST al endpoint /totals
  * **Engagements de las últimas 28 horas** -- solicitud HTTP POST al endpoint /28hr
  * **Engagements históricos** -- solicitud HTTP POST al endpoint /historical
* **Autenticación OAuth:**
  * [OAuth 1.0 User Context](/es/resources/fundamentals/authentication): Todas las métricas están disponibles para las Publicaciones que pertenecen a un usuario que haya autorizado tu Aplicación usando [OAuth de 3 pasos](https://developer.x.com/resources/fundamentals/authentication/obtaining-user-access-tokens). Debes usar los Tokens de acceso de ese usuario al realizar tu solicitud.[](/es/resources/fundamentals/authentication)
  * [OAuth 2.0 Bearer Token](/es/resources/fundamentals/authentication#oauth-2-0): Ciertas métricas (Retweets, Publicaciones citadas, Respuestas, Favoritos y Reproducciones de video) están disponibles para cualquier Publicación pública. 
* **Metadatos y estructura de la solicitud**: Los datos de la solicitud son un objeto JSON que consta de un arreglo de IDs de Publicación, un arreglo de tipos de engagement y una estructura de agrupación de engagement.
* **Publicaciones por solicitud:**
  * Endpoint /totals: 250 IDs de Publicación
  * Endpoint /28hr: 25 IDs de Publicación
  * Endpoint /historical: 25 IDs de Publicación
* **Disponibilidad de métricas de engagement:**
  * **/totals** -- Totales de métricas desde que se publicó la Publicación. Las impresiones y los engagements están disponibles para Publicaciones publicadas en los últimos 90 días, mientras que los Retweets, Publicaciones citadas, Respuestas, Favoritos y Reproducciones de video están disponibles para todas las Publicaciones.
  * **/28hr** -- Últimas 28 horas desde el momento de la solicitud.
  * **/historical** -- Cualquier período de 28 días a partir del 1 de septiembre de 2014.
* **Tipos de métricas**: Cada solicitud incluye un arreglo de [Tipos de métricas](http://support.gnip.com/apis/engagement_api/overview.html#EngagementTypes). Su disponibilidad depende del endpoint y, si se solicita desde el endpoint /totals, de si las Publicaciones cuentan con permisos del usuario.
  * Endpoint /totals:
    * Todas las Publicaciones: Favoritos, Retweets, Publicaciones citadas, Respuestas y Reproducciones de video
    * Requiere OAuth 1.0a User Context: Impresiones, Engagements, Favoritos, Respuestas y Retweets
  * Endpoints /28hr y /historical (Requiere OAuth 1.0a User Context con el Token de acceso del propietario de la Publicación): Impresiones, Engagements, Favoritos, Respuestas, Retweets, Clics en URL, Clics en hashtag, Clic en detalle, Clics en enlace permanente, Clics en contenido multimedia, Intentos de instalación de App, Aperturas de App, Correos electrónicos de la Publicación, Reproducciones de video y Visualizaciones de contenido multimedia
* **Agrupaciones de engagement:** Cada solicitud incluye un arreglo de [Engagement Groupings](/es/x-api/enterprise-gnip-2.0/fundamentals/engagement-api#engagement-api-groupings). Con estas agrupaciones puedes personalizar cómo se organizan las métricas devueltas. Se pueden incluir hasta tres agrupaciones en cada solicitud. Las métricas se pueden organizar según los siguientes valores:
  * Todos los endpoints: ID de la Publicación, Tipo de engagement
  * Endpoints /28hr y /historical: Estos endpoints proporcionan series temporales si se especifican estas agrupaciones adicionales: Día de engagement, Hora de engagement
* **Expectativas de integración:** Tu equipo será responsable de lo siguiente.
  * Crear y mantener una aplicación cliente que pueda enviar solicitudes HTTP a la Engagement API para obtener métricas de engagement para el ID de la Publicación incluido en la solicitud.
* **Limitaciones**
* Las reproducciones de video solo están disponibles para Publicaciones con una antigüedad de 1800 días o menos.

<div id="authenticating-with-the-engagement-api">
  ### Autenticación con la Engagement API
</div>

> **Ten en cuenta lo siguiente**: 
>
> X debe habilitar el acceso a la Engagement API para tu aplicación de desarrollador antes de que puedas empezar a usar la API. Para ello, asegúrate de compartir el App ID que piensas usar con fines de autenticación con tu account manager o equipo de soporte técnico.

Hay dos métodos de autenticación disponibles con la Engagement API: [OAuth 1.0a](/es/resources/fundamentals/authentication#oauth-1-0a-2) y [OAuth 2.0 Bearer Token](/es/resources/fundamentals/authentication#bearer-token-also-known-as-app-only). 

**OAuth 2.0 Bearer Token** (también conocido como «application-only») te permite acceder a métricas de interacción disponibles públicamente. Este método de autenticicación puede utilizarse para obtener la cantidad total de Favorites (también llamados Likes), Retweets, Quote Tweets, Replies y visualizaciones de vídeo para cualquier Publicación disponible públicamente al hacer solicitudes al [/totals endpoint](/es/x-api/enterprise-gnip-2.0/fundamentals/engagement-api#post-insights-engagement-totals). 

**OAuth 1.0a** (también conocido como «user context») te permite hacer solicitudes en nombre de un usuario y acceder a métricas de interacción privadas que pertenecen al usuario en cuestión. 

Este método de autenticación es obligatorio para:

* Todas las solicitudes enviadas al [/28hr endpoint](/es/x-api/enterprise-gnip-2.0/fundamentals/engagement-api#post-insights-engagement-28hr) y al [/historical endpoint](/es/x-api/enterprise-gnip-2.0/fundamentals/engagement-api#post-insights-engagement-historical)
* Acceder a cualquiera de las siguientes métricas privadas: Impressions, Engagements, Media Views, Media Engagements, URL Clicks, Hashtag Clicks, Detail Expands, Permalink Clicks, App Install Attempts, App Opens, Email Post, User Follows y User Profile Clicks

Al enviar una solicitud con OAuth 1.0a, debes incluir los tokens de acceso (Access Token y Secret) del usuario que es propietario de la Publicación o del recurso protegido de interés. Si no proporcionas los tokens de acceso de usuario correctos al solicitar datos de usuario protegidos, la Engagement API devolverá un error `403 Forbidden`.

La Engagement API no te permitirá obtener datos de interacción para [Publicaciones protegidas](https://help.x.com/en/safety-and-security/public-and-protected-tweets), incluso si te estás autenticando en nombre del usuario propietario de dichas Publicaciones. Intentar hacerlo devolverá un error `400 Bad Request`, con el mensaje `"Tweet ID(s) are unavailable"`.

Si estás enviando una solicitud en nombre de tu propia cuenta de X (es decir, la cuenta que es propietaria de la aplicación de desarrollador), puedes generar los tokens de acceso necesarios directamente desde el [portal para desarrolladores](https://developer.x.com/en/portal/projects-and-apps), en la pestaña “Keys and tokens” de la aplicación de desarrollador.

Si estás haciendo una solicitud en nombre de cualquier otro usuario, deberás usar el flujo OAuth de tres patas para obtener los tokens de acceso necesarios. La siguiente documentación contiene más información sobre cómo hacerlo: [OAuth 1.0a: how to obtain a user’s access tokens](/es/resources/fundamentals/authentication#oauth-1-0a-2).

Para ejemplos adicionales, incluido cómo autenticarse usando OAuth 1.0a, consulta el [código de ejemplo en Python para la Engagement API de XDevelopers](https://github.com/xdevplatform/enterprise-scripts-python/tree/master/Engagement-API).

<div id="recent-changes-to-the-engagement-api">
  ### Cambios recientes en la Engagement API
</div>

La Engagement API ofrece valiosas métricas de impresiones e interacción que te permiten supervisar el rendimiento de tu actividad en X. En nuestro esfuerzo continuo por posibilitar decisiones de marketing basadas en nuestros datos, nos complace compartir cambios recientes en la Engagement API que proporcionan una mayor coherencia de las métricas en todo X.  

Recientemente implementamos cambios para modernizar la Engagement API y usar la misma metodología de agregación de métricas que se utiliza en el panel de analytics de X (analytics.x.com). Adoptamos un enfoque cuidadoso para intentar minimizar los cambios incompatibles en la API al implementar estas nuevas métricas y desplegamos el primer conjunto de cambios el 9 de octubre de 2017. Estos cambios mejoran la coherencia entre todos los lugares donde tú o tus clientes pueden supervisar tu rendimiento en X. Consulta a continuación el resumen detallado de los cambios:

|     |     |
| :--- | :--- |
| **Métrica** | **Cambio** |
| engagements | Hemos actualizado las métricas que se incluyen en el total de engagements para que coincidan con el panel de analytics de Publicaciones. Engagements mide “las veces que las personas interactuaron con esta Publicación”.<br /><br />Para las Publicaciones que incluyen contenido multimedia como un video o un GIF, la métrica engagements ya no incluirá visualizaciones del contenido multimedia. Las visualizaciones de contenido multimedia ahora pueden consultarse en una nueva métrica, *media&#95;views*. |
| media&#95;clicks* | Esta métrica se ha sustituido por una nueva métrica llamada “*media&#95;engagements*”. |
| video&#95;views | Desde el 6 de julio de 2018, esta métrica está disponible para Publicaciones &quot;no propias&quot; a través del endpoint [/totals](/es/x-api/enterprise-gnip-2.0/fundamentals/engagement-api#post-insights-engagement). Esto significa que puedes acceder a las visualizaciones de video de **todas** las Publicaciones usando autenticación solo de aplicación (app-only). <br /><br />Solo puedes solicitar visualizaciones de video de Publicaciones de menos de 1800 días de antigüedad. Si intentas solicitar visualizaciones de video de una Publicación con más de 1800 días, recibirás lo siguiente:<br /><br />&quot;unsupported&#95;for&#95;video&#95;views&#95;tweet&#95;ids&quot;: [&quot;TWEET&#95;ID&quot;]<br /><br />**Ten en cuenta** que esta métrica es diferente de media&#95;views, ya que video&#95;views se basa en el estándar MRC de tener el 50% del video en pantalla durante al menos dos segundos.  <br /><br />**Además,** ten en cuenta que puedes observar una discrepancia entre la métrica de visualizaciones de video mostrada en las plataformas propias y operadas por X (aplicación móvil y sitio web) y el número que recibes mediante los endpoints /28hr y /historical.<br /><br />* Las visualizaciones de video mostradas en la interfaz de usuario de X y entregadas mediante el endpoint /totals mostrarán las visualizaciones de video agregadas en todas las Publicaciones en las que se haya publicado ese video. Eso significa que la métrica mostrada en la IU incluye las visualizaciones combinadas de cualquier instancia en la que el video haya sido retuiteado o vuelto a publicar en Publicaciones distintas.<br />* Las visualizaciones de video proporcionadas por los endpoints /28hr y /historical solo incluirán aquellas visualizaciones generadas por la Publicación específica para la cual estás obteniendo métricas. |
| media&#95;views | Esto incluye todas las visualizaciones (reproducción automática y por clic) de tu contenido multimedia contabilizadas en videos, Vines, GIF e imágenes.<br /><br />**Ten en cuenta** que las Publicaciones con imágenes no muestran una métrica media&#95;views en el panel de analytics, pero sí se devolverá en la Engagement API. |
| media&#95;engagements* | Esto incluye la cantidad de clics en tu contenido multimedia en videos, Vines, GIF e imágenes. Esta métrica sustituye a *media&#95;clicks*. |
| quote&#95;tweets | Desde el 7 de julio de 2020, esta métrica está disponible para Publicaciones &quot;no propias&quot; a través del endpoint /totals. Esto significa que puedes acceder a la cantidad de Publicaciones citadas para todas las Publicaciones usando autenticación solo de aplicación (app-only). |

<div id="interpreting-the-metrics">
  ### Interpretación de las métricas
</div>

**Nota:** Es posible que observes diferencias entre los datos reportados en algunos paneles web de X y los datos reportados en la Engagement API. Estas diferencias se producen porque los paneles web normalmente solo muestran interacciones y/o impresiones que ocurrieron dentro del intervalo de tiempo seleccionado. Por ejemplo, un panel web puede mostrar interacciones en Publicaciones dentro del transcurso de un mes calendario, mientras que la Engagement API puede mostrar interacciones que queden fuera del período de ese mes, pero dentro del intervalo de tiempo solicitado. En estos casos, la Engagement API debe considerarse la fuente válida.
 

<div id="impressions-and-engagement-data">
  #### Datos de impresiones e interacción
</div>

La Engagement API proporciona datos de impresiones e interacción **orgánicas**.

Las impresiones representan el número de veces que una determinada Publicación se ha mostrado en la plataforma X en un contexto orgánico. Las impresiones generadas a partir de Publicaciones que se ven en un contexto promocionado o de pago **no** se incluyen.

Las interacciones representan el número de veces que una determinada Publicación ha recibido una interacción por parte de un usuario, tanto en un contexto **orgánico** como **promocionado**. Las interacciones incluyen, entre otras, Retweets, Favoritos, Respuestas, clics en URL, clics en hashtags, clics en menciones y vistas de contenido multimedia. Para ver la lista completa de acciones de interacción incluidas, consulta la sección Engagement Data. 

Para calcular una tasa de interacción de referencia, utiliza el número total de interacciones dividido por el número total de impresiones para una determinada Publicación en el período de tiempo que estés analizando.

Los datos de impresiones e interacción solo se pueden recuperar para Publicaciones de @handles propios o @handles que hayan autorizado tu Aplicación a ver detalles sobre sus Publicaciones. Internamente, la Engagement API hará un seguimiento del número de @handles únicos que se han solicitado en relación con el límite de @handles contratado. Se recomienda también hacer un seguimiento del uso de solicitudes de @handles en el lado del cliente a lo largo del mes.  

<div id="video-metrics">
  #### Métricas de video
</div>

Hay un par de métricas diferentes que representan las impresiones del contenido multimedia dentro de X. La primera es nuestra métrica de visualizaciones de video, que se basa en el estándar MRC de 50% del video visible durante al menos dos segundos. La segunda es Media Views, que incluye todas las visualizaciones (reproducción automática y por clic) de tu contenido multimedia contabilizadas en videos, vines, gifs e imágenes.

La métrica de visualizaciones de video está disponible para Publicaciones propias a través de los endpoints /28hour y /historical, así como para todas las Publicaciones ajenas a través del endpoint /totals. 

Aunque la métrica de visualizaciones de video en la interfaz de usuario de X utiliza el mismo estándar MRC, ten en cuenta que puedes ver una discrepancia entre la métrica de visualizaciones de video que se muestra en las plataformas propiedad de X y operadas por X (aplicación móvil y sitio web) y el número que recibes a través de los diferentes endpoints de la Engagement API.

* Las visualizaciones de video proporcionadas por el endpoint /totals y la interfaz de usuario de X mostrarán las visualizaciones de video agregadas en todas las Publicaciones en las que se haya publicado el video en cuestión. Esto significa que la métrica entregada a través de /totals y mostrada en la interfaz de X incluye las visualizaciones combinadas de cualquier instancia en la que el video haya sido Retwitteado o vuelto a publicar en Publicaciones separadas.
* Las visualizaciones de video proporcionadas por los endpoints /28hour y /historical de la Engagement API solo incluirán aquellas visualizaciones generadas por la Publicación específica para la que estás obteniendo métricas. 
   

Ten en cuenta que no proporcionamos visualizaciones de video para Publicaciones que tienen más de 1800 días de antigüedad. En su lugar, entregamos un objeto que enumera las Publicaciones que tienen más de 1800 días de antigüedad. Seguirás recibiendo todas las demás métricas para las Publicaciones solicitadas en un objeto separado. Aquí tienes un ejemplo de respuesta:

```json
{
  "unsupported_for_video_views_tweet_ids": [
    "479311209565413376",
    "477139122520219648"
  ],
  "grouping name": {
    "479311209565413376": {
      "favorites": "69",
      "impressions": "1692",
      "retweets": "142",
      "video_views": "0"
    },
    "477139122520219648": {
      "favorites": "10",
      "impressions": "1023",
      "retweets": "6",
      "video_views": "0"
    },
    "1397568983931392004": {
      "favorites": "268",
      "impressions": "26803",
      "retweets": "56",
      "video_views": "17902"
    }
  }
}
```

La métrica de visualizaciones de contenido multimedia solo está disponible para las Publicaciones propias en los endpoints /28hour y /historical.

<div id="engagement-api-groupings">
  ### Agrupaciones de Engagement API
</div>

Las agrupaciones permiten organizar de forma personalizada las métricas de engagement que se devuelven. Puedes incluir un máximo de 3 agrupaciones por solicitud. Puedes elegir agrupar las métricas por uno o más de los siguientes valores:

*Los tres endpoints admiten:*

* tweet.id
* engagement.type
   

*Los endpoints `/28hr` y `/historical` pueden proporcionar métricas de series temporales y, por lo tanto, admiten:*

* engagement.day
* engagement.hour

Las agrupaciones se aplican de forma secuencial, de modo que puedes cambiar el formato del resultado deseado modificando el orden de los valores de `group_by`. Las agrupaciones que contienen cuatro valores de `group_by` solo se admitirán en uno de los dos formatos siguientes:

```bash
"group_by": [
    "tweet.id",
    "engagement.type",
    "engagement.day",
    "engagement.hour"
  ]
```

O

```bash
"group_by": [
    "engagement.type",
    "tweet.id",
    "engagement.day",
    "engagement.hour"
]
```

Por ejemplo, si quieres generar totales globales por tipo de métrica, incluye la siguiente especificación de “groupings” como parte de tu solicitud (y consulta la página de [Referencia de la API](/es/x-api/enterprise-gnip-2.0/fundamentals/engagement-api#post-insights-engagement) para obtener más información sobre cómo construir solicitudes):

```json
{
  "engagement_types": [
    "favorites",
    "replies",
    "retweets"
  ],
  "groupings": {
    "Grand Totals": {
      "group_by": [
        "engagement.type"
      ]
    }
  }
}
```

Con esta agrupación, la respuesta JSON de la API de Engagement incluirá un atributo de nivel raíz `"Grand Totals"` que contiene los totales generales por tipo de métricas:

```json
{
  "Grand Totals": {
    "favorites": "12",
    "replies": "2",
    "retweets": "2"
  }
}
```

Para generar una serie temporal de métricas de 4 horas para una sola Publicación, agrupada por IDs de Publicación, la siguiente especificación de Grouping formaría parte de la solicitud:

```json
{
  "start": "2016-02-10T17:00:00Z",
  "end": "2016-02-10T21:00:00Z",
  "tweet_ids": [
    "697506383516729344"
  ],
  "engagement_types": [
    "impressions",
    "engagements"
  ],
  "groupings": {
    "Tweets_MetricType_TimeSeries": {
      "group_by": [
        "tweet.id",
        "engagement.type",
        "engagement.hour"
      ]
    }
  }
}
```

Con esta agrupación, la respuesta JSON de la Engagement API incluirá un atributo en la raíz, `"Tweets_MetricType_TimeSeries"`, que contiene las métricas desglosadas por id de Publicación, luego por tipo de métrica y la correspondiente serie temporal por hora:

```json
{
  "Tweets_MetricType_TimeSeries": {
    "697506383516729344": {
      "impressions": {
        "2016-02-10": {
          "17": "551",
          "18": "412",
          "19": "371",
          "20": "280"
        }
      },
      "engagements": {
        "2016-02-10": {
          "17": "8",
          "18": "6",
          "19": "3",
          "20": "0"
        }
      }
    }
  }
}
```

<div id="frequently-asked-questions">
  ## Preguntas frecuentes
</div>

`Enterprise`

<div id="engagement-api">
  ### Engagement API
</div>

<AccordionGroup>
  <Accordion title="¿Cómo puedo acceder a la Engagement API?">
    El acceso a la Engagement API se proporciona a través de una suscripción Enterprise. Completa [este formulario](/es/x-api/enterprise-gnip-2.0/enterprise-gnip) para ponerte en contacto con nuestro equipo de ventas.
  </Accordion>

  <Accordion title="¿Cómo se realiza el seguimiento de mi uso por «@handle»?">
    Si tu contrato incluye un límite para la cantidad de handles únicos que se pueden usar con la Engagement API, el sistema interno de X hará un seguimiento de la cantidad de usuarios autenticados propietarios de Publicaciones que se consultan con la Engagement API. Los clientes también deben hacer un seguimiento de este número único en el lado del cliente. Actualmente no existe una API de uso ni una interfaz de usuario para comprobar el uso de @handle para la Engagement API. El sistema no bloqueará los excesos si se solicitan más @handles de los contemplados en el contrato. Al final del mes de facturación, el número de @handles únicos consultados se compara con el monto contratado y se cobrará un cargo por exceso de acuerdo con los términos del contrato.
  </Accordion>

  <Accordion title="¿Puedo comprobar mi uso de @handle para la Engagement API?">
    Actualmente no existe una API de uso ni una interfaz de usuario para comprobar el uso de @handle para la Engagement API. El sistema no bloqueará los excesos si se solicitan más @handles de los contemplados en el contrato. Al final del mes de facturación, el número de @handles únicos consultados se compara con el monto contratado y se cobrará un cargo por exceso de acuerdo con los términos del contrato.

    **El campo de metadatos `engagements` devuelto en la carga no es igual a la suma de todos los distintos totales de métricas de interacción. ¿Por qué ocurre esto?**

    Esto es de esperar. Es posible que el campo de metadatos `engagements` no siempre se corresponda con la suma de todas las métricas de interacción individuales que devuelve la API. Esto se debe a que el campo de metadatos `engagements` puede incluir interacciones adicionales que no cuentan con métricas específicas desglosadas en la carga. Dicho de otro modo, sumar todos los distintos totales de métricas de interacción puede no dar como resultado el valor que ves en el campo de métricas `engagements` que se devuelve en la carga.

    Puedes considerar el campo de metadatos `engagements` como cualquier clic o interacción realizada en la Publicación.
     

    **El campo `url_clicks` en la respuesta de la carga está devolviendo un número, cuando en realidad la Publicación no tiene una URL. ¿Cómo es posible?**

    Esto puede deberse a que una Publicación que contenga algo como un hashtag (que crea un enlace a otra página) cuente como un clic en URL si un usuario hace clic en él.
     
  </Accordion>

  <Accordion title="¿Por qué no puedo recibir datos de interacción para una Publicación específica?">
    Hay varias razones por las que es posible que no puedas recuperar datos de interacción para una Publicación específica, entre ellas:

    * El ID o los IDs de la Publicación que has solicitado no están disponibles en función del token de autenticación que estás utilizando para recuperar datos en nombre de un tercero.
    * El ID o los IDs de la Publicación que has solicitado específicamente para el endpoint /totals no son de hace 90 días o menos y, por lo tanto, no están disponibles para devolver las impresiones o las métricas de interacción.
    * El ID o los IDs de la Publicación que has solicitado ya no están disponibles, lo que generalmente indica que se han eliminado o que ya no están disponibles públicamente por otro motivo.

    Revisa los diferentes [mensajes de error](/es/x-api/enterprise-gnip-2.0/fundamentals/engagement-api#error-messages) que probablemente recibirás en cualquiera de los casos anteriores.
  </Accordion>

  <Accordion title="¿Cómo puedo gestionar la limitación de frecuencia con la Engagement API?">
    Puedes usar la información `x-per-minute-limit` y `x-per-minute-remaining` devuelta en el encabezado de la respuesta cuando haces una solicitud a la Engagement API para supervisar tu consumo.

    `x-per-minute-limit` te indica cuál es tu asignación y `x-per-minute-remaining` te indica cuántas llamadas te quedan.
  </Accordion>
</AccordionGroup>

<div id="error-troubleshooting-guide">
  ### Guía de solución de errores
</div>

<AccordionGroup>
  <Accordion title="Tengo problemas para autenticarme">
    Asegúrate de revisar nuestras [directrices sobre autenticación](/es/x-api/enterprise-gnip-2.0/fundamentals/engagement-api#authentication) con la Engagement API.
  </Accordion>

  <Accordion title="He pasado la consumer key y el secret correctos, así como el token de acceso y el access token secret, pero se devuelve el siguiente error. ¿Qué puedo hacer?">
    ```bash
    [
        Your account could not be authenticated. Reason: Unknown Authorization Type;
    ]
    ```

    Asegúrate de no usar ningún token de acceso ni secret cuando intentes autenticarte con el endpoint /totals. Esto se debe a que, si incluyes estos tokens y estás intentando extraer contenido de una Publicación que no esté asociada a esos tokens, es probable que recibas un error como:

    ```bash
    [
        Forbidden to access tweets: 1054424731825229824;
    ]
    ```
  </Accordion>
</AccordionGroup>

<div id="still-cant-find-what-youre-looking-for">
  ### ¿Aún no encuentras lo que buscas?
</div>

<AccordionGroup>
  <Accordion title="Tengo una pregunta que aún no ha sido respondida">
    Ponte en contacto con el soporte técnico y te responderemos lo antes posible.
  </Accordion>
</AccordionGroup>

<div id="api-reference">
  ## Referencia de la API
</div>

<div id="post-insightsengagement">
  ### **POST insights/engagement**
</div>

<div id="methods">
  #### **Métodos**
</div>

| Método | Descripción |
| :--- | :--- |
| [POST /insights/engagement/totals](#Totals) | Recupera las impresiones y las interacciones totales de una colección de Publicaciones. |
| [POST /insights/engagement/historical](#Historical) | Recupera las impresiones y las interacciones de una colección de Publicaciones para un período de hasta 4 semanas, con datos históricos desde el 1 de septiembre de 2014. |
| [POST /insights/engagement/28hr](#api-28hr) | Recupera las impresiones y las interacciones de una colección de Publicaciones durante las últimas 28 horas. |

<div id="authentication">
  #### **Autenticación**
</div>

La Engagement API requiere el uso de HTTPS y admite tanto User Context como Application-Only OAuth. La mayoría de las solicitudes a la Engagement API requieren el uso de 3-Legged OAuth (una versión específica de User Context), lo que significa que utilizas la consumer key y el consumer secret de la aplicación que se haya registrado y se haya aprobado para el acceso a la Engagement API por tu gestor de cuenta de Twitter, así como el access token y el access token secret de los propietarios de las Publicaciones para llamar al endpoint. Las siguientes solicitudes requieren este tipo de OAuth:

* Cualquier solicitud a /totals para obtener los tipos de métricas Impressions y Engagements, que se limitan a Publicaciones propias
* Cualquier solicitud a /28hr
* Cualquier solicitud a /historical

Algunas solicitudes a la Engagement API se pueden realizar utilizando Application-Only OAuth, lo que significa que solo necesitas proporcionar tu consumer key y consumer secret, o un bearer token. La siguiente solicitud se puede realizar con este tipo de OAuth:

* Cualquier solicitud a /totals para obtener los tipos de métricas Favorites, Replies, Retweets o Video Views, que se pueden recuperar para cualquier Publicación

Para cualquier solicitud, deberás configurar una aplicación de Twitter y la correspondiente API key utilizando la consola de administración de aplicaciones disponible en [developer.x.com](https://developer.x.com/en/portal/dashboard).

Ten en cuenta lo siguiente: puedes ver y editar tus [aplicaciones de Twitter](/es/resources/fundamentals/developer-apps) existentes a través del [panel de control de aplicaciones de Twitter](https://developer.x.com/en/apps) si has iniciado sesión en tu cuenta de Twitter en developer.x.com.

Una vez que hayas configurado tu aplicación, el app ID deberá ser aprobado por tu representante de cuenta para que tu aplicación pueda realizar solicitudes a la Engagement API. Se deben usar tokens de acceso (Access Tokens) para representar al “usuario actual”, y las solicitudes realizadas en nombre de un usuario diferente deben firmarse con un token válido. Asegúrate de [codificar los caracteres reservados](https://tools.ietf.org/html/rfc3986) correctamente en las URL y en los cuerpos de las solicitudes POST antes de preparar las cadenas base de firma OAuth.

Para obtener más información sobre cómo empezar con OAuth, visita los siguientes enlaces:

* [Descripción general de OAuth](/es/resources/fundamentals/authentication)
* [Uso de 3-Legged OAuth, también conocido como User Context](/es/resources/fundamentals/authentication#obtaining-access-tokens-using-3-legged-oauth-flow)
* [Uso de Application-Only OAuth](/es/resources/fundamentals/authentication#bearer-token-also-known-as-app-only)

<div id="post-insightsengagementtotals">
  #### **POST /insights/engagement/totals**
</div>

El endpoint `totals` permite obtener el total actual de impresiones e interacciones para una colección de hasta 250 Publicaciones en una sola solicitud.

|                                              |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| :------------------------------------------- | :---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **Método de la solicitud**                   | HTTP POST                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| **URL**                                      | `https://data-api.x.com/insights/engagement/totals`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| **Tipo de contenido**                        | `application/json`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| **Compresión**                               | Gzip. Para realizar una solicitud con compresión Gzip, envía un encabezado Accept-Encoding en la solicitud de conexión.  <br />El encabezado debe tener el siguiente formato:  <br />  <br />`Accept-Encoding: gzip`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| **Formato de la solicitud POST**             | Las solicitudes se pueden enviar mediante una solicitud POST cuyo cuerpo es un objeto JSON que contiene una colección de IDs de Publicaciones y una agrupación determinada. El POST se estructura como un array que contiene los objetos `tweets`, `engagements` y `groupings`. Cada solicitud puede tener un máximo de 250 IDs de Publicaciones.  <br />  <br />Un ejemplo de cuerpo POST es el siguiente:  <br />  <br /><br />  &#123;<br />    &quot;tweet&#95;ids&quot;: [<br />        &quot;Tweet ID 1&quot;,<br />        &quot;Tweet ID 2&quot;,<br />        &quot;Tweet ID 3&quot;<br />    ],<br />      &quot;engagement&#95;types&quot;: [<br />        &quot;impressions&quot;,<br />        &quot;engagements&quot;,<br />        &quot;favorites&quot;,<br />        &quot;quote&#95;tweets&quot;<br />    ],<br />    &quot;groupings&quot;: &#123;<br />      &quot;grouping name&quot;: &#123;<br />        &quot;group&#95;by&quot;: [<br />          &quot;tweet.id&quot;,<br />          &quot;engagement.type&quot;<br />        ]<br />      &#125;<br />    &#125;<br />  &#125;                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| **ID de Publicaciones**                      | Una matriz que incluye los ID de las Publicaciones para las que se consultarán datos de interacción. Ten en cuenta que solo puedes solicitar datos de Publicaciones que hayan sido creadas por el @handle autenticado. Se pueden incluir hasta 250 Publicaciones por solicitud y sus ID deben representarse como cadenas de caracteres.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| **Tipos de interacción**                     | Una matriz que incluye los tipos de métricas de interacción que se van a consultar. El endpoint Totals solo admite los siguientes tipos de interacción: `impressions`, `engagements`, `favorites`, `retweets`, `quote_tweets`, `replies`, `video_views`.  <br />El endpoint `/totals` permite recuperar `impressions` y `engagements` para Publicaciones creadas en los últimos 90 días y `favorites`, `retweets`, `quote_tweets`, `replies` y `video_views` para cualquier Publicación.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| **Agrupaciones**                             | Los resultados de la Engagement API se pueden devolver en distintos grupos para adaptarse mejor a tus necesidades. Puedes incluir un máximo de 3 agrupaciones por solicitud.  <br />  <br />Para cada agrupación, puedes definir un nombre de agrupación personalizado para que sea más fácil hacer referencia a este tipo de agrupación en tu aplicación.  <br />  <br />Una vez que hayas definido un nombre de agrupación, puedes elegir agrupar por `tweet.id` y/o `engagement.type`.  <br />  <br />Las agrupaciones se procesan de forma secuencial, de modo que puedes cambiar el formato de resultado deseado cambiando el orden de tus valores group&#95;by. Un ejemplo de agrupación que mostrará las métricas separadas por ID de la Publicación y tipo de métrica es el siguiente:  <br />  <br /><br />  &quot;groupings&quot;: &#123;<br />      &quot;my grouping name&quot;: &#123;<br />        &quot;group&#95;by&quot;: [<br />          &quot;tweet.id&quot;,<br />          &quot;engagement.type&quot;<br />        ]<br />      &#125;<br />    &#125;                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| **Límite de tamaño de la solicitud POST**    | Se pueden realizar solicitudes con un máximo de 250 ids de Publicación a la vez.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| **Formato de la respuesta**                  | JSON. El encabezado de la solicitud debe especificar JSON como formato de respuesta.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| **Límite de tasa**                           | Se aplicarán límites de frecuencia por minuto, según lo especificado en tu contrato en función de tu nivel de acceso.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| **Ejemplo de solicitud (métricas públicas)** | curl --request POST <br />  --url [https://data-api.x.com/insights/engagement/totals](https://data-api.x.com/insights/engagement/totals) <br />  --header &#39;accept-encoding: gzip&#39; <br />  --header &#39;authorization: Bearer &#39; <br />  --header &#39;content-type: application/json&#39; <br />  --data &#39;&#123;<br />                &quot;tweet&#95;ids&quot;: [<br />                    &quot;1070059276213702656&quot;,&quot;1021817816134156288&quot;,&quot;1067094924124872705&quot;<br />                ],<br />                &quot;engagement&#95;types&quot;: [<br />                    &quot;favorites&quot;,&quot;retweets&quot;,&quot;replies&quot;,&quot;quote&#95;tweets&quot;,&quot;video&#95;views&quot;<br />                ],<br />                &quot;groupings&quot;: &#123;<br />                    &quot;perTweetMetricsUnowned&quot;: &#123;<br />                        &quot;group&#95;by&quot;: [<br />                            &quot;tweet.id&quot;,<br />                            &quot;engagement.type&quot;<br />                        ]<br />                    &#125;<br />                &#125;<br />            &#125; <br />  --verbose <br />  --compressed                                                                                                                                                                                                                                                                                                                                                       |
| **Ejemplo de solicitud**                     | curl --request POST <br />  --url [https://data-api.x.com/insights/engagement/totals](https://data-api.x.com/insights/engagement/totals) <br />  --header &#39;accept-encoding: gzip&#39; <br />  --header &#39;authorization: OAuth oauth&#95;consumer&#95;key=&quot;consumer-key-for-app&quot;,oauth&#95;nonce=&quot;generated-nonce&quot;,oauth&#95;signature=&quot;generated-signature&quot;,oauth&#95;signature&#95;method=&quot;HMAC-SHA1&quot;, oauth&#95;timestamp=&quot;generated-timestamp&quot;,oauth&#95;token=&quot;access-token-for-authed-user&quot;, oauth&#95;version=&quot;1.0&quot;&#39; <br />  --header &#39;content-type: application/json&#39; <br />  --data &#39;&#123;<br />                &quot;tweet&#95;ids&quot;: [<br />                    &quot;1060976163948904448&quot;,&quot;1045709644067471360&quot;<br />                ],<br />                &quot;engagement&#95;types&quot;: [<br />                    &quot;favorites&quot;,&quot;replies&quot;,&quot;retweets&quot;,&quot;video&#95;views&quot;,&quot;impressions&quot;,&quot;engagements&quot;<br />                ],<br />                &quot;groupings&quot;: &#123;<br />                    &quot;perTweetMetricsOwned&quot;: &#123;<br />                        &quot;group&#95;by&quot;: [<br />                            &quot;tweet.id&quot;,<br />                            &quot;engagement.type&quot;<br />                        ]<br />                    &#125;<br />                &#125;<br />            &#125;&#39; <br />  --verbose <br />  --compressed |
| **Ejemplo de respuesta (métricas públicas)** | &#123;<br />  &quot;perTweetMetricsUnowned&quot;: &#123;<br />    &quot;1021817816134156288&quot;: &#123;<br />      &quot;favorites&quot;: &quot;530&quot;,<br />      &quot;quote&#95;tweets&quot;: &quot;79&quot;,<br />      &quot;replies&quot;: &quot;147&quot;,<br />      &quot;retweets&quot;: &quot;323&quot;,<br />      &quot;video&#95;views&quot;: &quot;0&quot;<br />    &#125;,<br />    &quot;1067094924124872705&quot;: &#123;<br />      &quot;favorites&quot;: &quot;1360&quot;,<br />      &quot;quote&#95;tweets&quot;: &quot;29&quot;,<br />      &quot;replies&quot;: &quot;56&quot;,<br />      &quot;retweets&quot;: &quot;178&quot;,<br />      &quot;video&#95;views&quot;: &quot;5754512&quot;<br />    &#125;,<br />    &quot;1070059276213702656&quot;: &#123;<br />      &quot;favorites&quot;: &quot;69&quot;,<br />      &quot;quote&#95;tweets&quot;: &quot;5&quot;,<br />      &quot;replies&quot;: &quot;7&quot;,<br />      &quot;retweets&quot;: &quot;26&quot;,<br />      &quot;video&#95;views&quot;: &quot;0&quot;<br />    &#125;<br />  &#125;<br />&#125;                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| **Ejemplo de respuesta**                     | &#123;<br />  &quot;perTweetMetricsOwned&quot;: &#123;<br />    &quot;1045709644067471360&quot;: &#123;<br />      &quot;engagements&quot;: &quot;2&quot;,<br />      &quot;favorites&quot;: &quot;0&quot;,<br />      &quot;impressions&quot;: &quot;47&quot;,<br />      &quot;replies&quot;: &quot;0&quot;,<br />      &quot;retweets&quot;: &quot;8&quot;,<br />      &quot;quote&#95;tweets&quot;: &quot;5&quot;,<br />      &quot;video&#95;views&quot;: &quot;0&quot;<br />    &#125;,<br />    &quot;1060976163948904448&quot;: &#123;<br />      &quot;engagements&quot;: &quot;4&quot;,<br />      &quot;favorites&quot;: &quot;0&quot;,<br />      &quot;impressions&quot;: &quot;148&quot;,<br />      &quot;replies&quot;: &quot;1&quot;,<br />      &quot;retweets&quot;: &quot;9&quot;,<br />      &quot;quote&#95;tweets&quot;: &quot;2&quot;,<br />      &quot;video&#95;views&quot;: &quot;0&quot;<br />    &#125;<br />  &#125;<br />&#125;                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| **IDs de publicaciones no disponibles**      | Para las consultas que incluyan IDs de publicaciones que hayan dejado de estar disponibles (por ejemplo, porque se hayan eliminado), se devolverán los datos correspondientes para todas las IDs de publicaciones disponibles, y las IDs de publicaciones no disponibles se indicarán en un arreglo llamado `unavailable_tweet_ids`. Por ejemplo:  <br /><br />  &#123;<br />    &quot;start&quot;: &quot;2015-11-17T22:00:00Z&quot;,<br />    &quot;end&quot;: &quot;2015-11-19T02:00:00Z&quot;,<br />    &quot;unavailable&#95;tweet&#95;ids&quot;: [<br />        &quot;323456789&quot;<br />    ],<br />    &quot;group1&quot;: &#123;<br />     &quot;423456789&quot;: &#123;<br />      &quot;favorites&quot;: &quot;67&quot;,<br />      &quot;replies&quot;: &quot;8&quot;,<br />      &quot;retweets&quot;: &quot;26&quot;,<br />      &quot;quote&#95;tweets&quot;: &quot;2&quot;<br />     &#125;<br />    &#125;<br />  &#125;                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |

<div id="post-insightsengagement28hr">
  #### **POST /insights/engagement/28hr**
</div>

El endpoint de 28 horas permite obtener impresiones e interacciones para una colección de hasta 25 Publicaciones durante las últimas 28 horas. El endpoint de 28 horas también permite solicitar todas las métricas individuales compatibles. Para ver la lista completa de métricas compatibles, consulta [Metric Availability](https://developer.x.com/en/docs/x-api/v1/metrics/get-tweet-engagement/overview#EngagementTypes).

|                                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| :---------------------------------------- | :---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **Método de la solicitud**                | HTTP POST                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| **URL**                                   | `https://data-api.x.com/insights/engagement/28hr`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| **Tipo de contenido**                     | `application/json`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| **Compresión**                            | Gzip. Para realizar una solicitud con compresión Gzip, envía un encabezado Accept-Encoding en la solicitud de conexión.  <br />El encabezado debe tener el siguiente aspecto:  <br />  <br />`Accept-Encoding: gzip`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| **Formato de la solicitud POST**          | Las solicitudes se pueden enviar mediante POST, donde el cuerpo es un objeto JSON que contiene una colección de IDs de Publicación y una agrupación deseada. El POST se estructura como un arreglo que contiene los objetos `tweets`, `engagements` y `groupings`. Cada solicitud puede incluir un máximo de 25 IDs de Publicación.  <br />  <br />Un ejemplo de cuerpo POST sería:  <br />  <br /><br />  &#123;<br />    &quot;tweet&#95;ids&quot;: [<br />       &quot;Tweet ID 1&quot;,<br />       &quot;Tweet ID 2&quot;,<br />       &quot;Tweet ID 3&quot;<br />    ],<br />      &quot;engagement&#95;types&quot;: [<br />        &quot;impressions&quot;,<br />        &quot;engagements&quot;,<br />        &quot;url&#95;clicks&quot;,<br />        &quot;detail&#95;expands&quot;<br />    ],<br />    &quot;groupings&quot;: &#123;<br />      &quot;grouping name&quot;: &#123;<br />        &quot;group&#95;by&quot;: [<br />          &quot;tweet.id&quot;,<br />          &quot;engagement.type&quot;,<br />          &quot;engagement.hour&quot;<br />        ]<br />      &#125;<br />    &#125;<br />  &#125;                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| **ID de Publicaciones**                   | Una matriz que incluye los ID de las Publicaciones para las que se consultarán datos de interacción. Ten en cuenta que solo puedes solicitar datos de Publicaciones creadas por el @handle autenticado. El endpoint de 28 horas admite hasta un máximo de 25 Publicaciones por solicitud, y los ID de Publicaciones deben estar representados como cadenas.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| **Tipos de interacción**                  | Una matriz con los tipos de métricas de interacción que se van a consultar.  <br />  <br />Para el endpoint de 28 horas, `impressions`, `engagements` y todos los tipos individuales de interacción están disponibles como métricas. Para ver la lista completa de métricas de interacción compatibles, consulta [Engagement Data](https://developer.x.com/en/docs/x-api/v1/metrics/get-tweet-engagement/overview#AvailableData).                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| **Agrupaciones**                          | Los resultados de la Engagement API se pueden devolver en diferentes grupos para adaptarse mejor a tus necesidades. Puedes incluir un máximo de 3 agrupaciones por solicitud.  <br />  <br />Para cada agrupación, puedes definir un nombre de agrupación personalizado para que sea más fácil hacer referencia a este tipo de agrupación en tu aplicación. Una vez que hayas definido un nombre de agrupación, puedes elegir agrupar por uno o más de los siguientes valores:  <br />`tweet.id`  <br />`engagement.type`  <br />`engagement.day`  <br />`engagement.hour`  <br />Las agrupaciones se aplican en serie, de modo que puedes cambiar el formato de resultado deseado cambiando el orden de tus valores group&#95;by. Un ejemplo de agrupación que mostrará las métricas separadas por id de la Publicación, tipo de métrica y día tiene el siguiente aspecto:<br /><br />  &quot;groupings&quot;: &#123;<br />    &quot;my grouping name&quot;: &#123;<br />      &quot;group&#95;by&quot;: [<br />        &quot;tweet.id&quot;,<br />        &quot;engagement.type&quot;,<br />        &quot;engagement.day&quot;<br />      ]<br />    &#125;<br />  &#125;<br /><br />  <br />Las agrupaciones que tienen 4 elementos `group_by` solo son válidas si utilizan uno de los dos órdenes siguientes. Las solicitudes que tengan 4 elementos `group_by` en una sola agrupación y que no sean uno de los siguientes devolverán un error. Además, solo se permitirá una agrupación con 4 elementos `group_by` por solicitud.  <br /><br />&quot;group&#95;by&quot;: [<br />    &quot;tweet.id&quot;,<br />    &quot;engagement.type&quot;,<br />    &quot;engagement.day&quot;,<br />    &quot;engagement.hour&quot;<br />  ]<br /><br />&quot;group&#95;by&quot;: [<br />    &quot;engagement.type&quot;,<br />    &quot;tweet.id&quot;,<br />    &quot;engagement.day&quot;,<br />    &quot;engagement.hour&quot;<br />  ]                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| **Límite de tamaño de la solicitud POST** | Cada solicitud puede incluir un máximo de 25 IDs de Publicación.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| **Formato de la respuesta**               | JSON. El encabezado de la solicitud debe indicar que el formato de la respuesta es JSON.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| **Límite de solicitudes**                 | Estarás sujeto a un límite de frecuencia por minuto, según lo establecido en tu contrato y de acuerdo con tu nivel de acceso.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| **Solicitud de ejemplo**                  | curl -X POST &quot;[https://data-api.x.com/insights/engagement/28hr](https://data-api.x.com/insights/engagement/28hr)&quot; <br />  -H &#39;Accept-Encoding: gzip&#39; <br />  -H &#39;Authorization OAuth oauth&#95;consumer&#95;key=&quot;consumer-key-for-app&quot;,oauth&#95;nonce=&quot;generated-nonce&quot;,oauth&#95;signature=&quot;generated-signature&quot;,oauth&#95;signature&#95;method=&quot;HMAC-SHA1&quot;, oauth&#95;timestamp=&quot;generated-timestamp&quot;,oauth&#95;token=&quot;access-token-for-authed-user&quot;, oauth&#95;version=&quot;1.0&quot;&#39; <br />  -d &#39;&#123;<br />    &quot;tweet&#95;ids&quot;: [<br />       &quot;123456789&quot;<br />    ],<br />      &quot;engagement&#95;types&quot;: [<br />        &quot;impressions&quot;,<br />        &quot;engagements&quot;<br />    ],<br />    &quot;groupings&quot;: &#123;<br />      &quot;hourly-time-series&quot;: &#123;<br />        &quot;group&#95;by&quot;: [<br />          &quot;tweet.id&quot;,<br />          &quot;engagement.type&quot;,<br />          &quot;engagement.day&quot;,<br />          &quot;engagement.hour&quot;<br />        ]<br />      &#125;<br />    &#125;<br />  &#125;&#39;                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| **Ejemplo de respuesta**                  | &#123;<br />&quot;start&quot;:&quot;2015-09-14T17:00:00Z&quot;,<br />&quot;end&quot;:&quot;2015-09-15T22:00:00Z&quot;,<br />&quot;hourly-time-series&quot;:&#123;<br />&quot;123456789&quot;:&#123;<br />&quot;impresiones&quot;:&#123;<br />&quot;2015-09-14&quot;:&#123;<br />&quot;17&quot;:&quot;551&quot;,<br />&quot;18&quot;:&quot;412&quot;,<br />&quot;19&quot;:&quot;371&quot;,<br />&quot;20&quot;:&quot;280&quot;,<br />&quot;21&quot;:&quot;100&quot;,<br />&quot;22&quot;:&quot;19&quot;,<br />&quot;23&quot;:&quot;6&quot;<br />&#125;,<br />&quot;2015-09-15&quot;:&#123;<br />&quot;00&quot;:&quot;5&quot;,<br />&quot;01&quot;:&quot;2&quot;,<br />&quot;02&quot;:&quot;7&quot;,<br />&quot;03&quot;:&quot;3&quot;,<br />&quot;04&quot;:&quot;1&quot;,<br />&quot;05&quot;:&quot;0&quot;,<br />&quot;06&quot;:&quot;0&quot;,<br />&quot;07&quot;:&quot;0&quot;,<br />&quot;08&quot;:&quot;0&quot;,<br />&quot;09&quot;:&quot;0&quot;,<br />&quot;10&quot;:&quot;0&quot;,<br />&quot;11&quot;:&quot;0&quot;,<br />&quot;12&quot;:&quot;0&quot;,<br />&quot;13&quot;:&quot;0&quot;,<br />&quot;14&quot;:&quot;0&quot;,<br />&quot;15&quot;:&quot;0&quot;,<br />&quot;16&quot;:&quot;0&quot;,<br />&quot;17&quot;:&quot;0&quot;,<br />&quot;18&quot;:&quot;0&quot;,<br />&quot;19&quot;:&quot;0&quot;,<br />&quot;20&quot;:&quot;0&quot;,<br />&quot;21&quot;:&quot;0&quot;<br />&#125;<br />&#125;,<br />&quot;engagements&quot;:&#123;<br />&quot;2015-09-14&quot;:&#123;<br />&quot;17&quot;:&quot;0&quot;,<br />&quot;18&quot;:&quot;0&quot;,<br />&quot;19&quot;:&quot;0&quot;,<br />&quot;20&quot;:&quot;0&quot;,<br />&quot;21&quot;:&quot;0&quot;,<br />&quot;22&quot;:&quot;0&quot;,<br />&quot;23&quot;:&quot;0&quot;<br />&#125;,<br />&quot;2015-09-15&quot;:&#123;<br />&quot;00&quot;:&quot;0&quot;,<br />&quot;01&quot;:&quot;0&quot;,<br />&quot;02&quot;:&quot;0&quot;,<br />&quot;03&quot;:&quot;0&quot;,<br />&quot;04&quot;:&quot;0&quot;,<br />&quot;05&quot;:&quot;0&quot;,<br />&quot;06&quot;:&quot;0&quot;,<br />&quot;07&quot;:&quot;0&quot;,<br />&quot;08&quot;:&quot;0&quot;,<br />&quot;09&quot;:&quot;0&quot;,<br />&quot;10&quot;:&quot;0&quot;,<br />&quot;11&quot;:&quot;0&quot;,<br />&quot;12&quot;:&quot;0&quot;,<br />&quot;13&quot;:&quot;0&quot;,<br />&quot;14&quot;:&quot;0&quot;,<br />&quot;15&quot;:&quot;0&quot;,<br />&quot;16&quot;:&quot;0&quot;,<br />&quot;17&quot;:&quot;0&quot;,<br />&quot;18&quot;:&quot;0&quot;,<br />&quot;19&quot;:&quot;0&quot;,<br />&quot;20&quot;:&quot;0&quot;,<br />&quot;21&quot;:&quot;0&quot;<br />&#125;<br />&#125;<br />&#125;<br />&#125;<br />&#125; |
| **ID de publicaciones no disponibles**    | Para las consultas que incluyan ID de Publicaciones que ya no estén disponibles (por ejemplo, porque se hayan eliminado), se devolverán los datos correspondientes para todas las ID de Publicaciones disponibles y las ID de Publicaciones no disponibles aparecerán en un array llamado `unavailable_tweet_ids`. Por ejemplo:  <br /><br />  &#123;<br />    &quot;start&quot;: &quot;2015-11-17T22:00:00Z&quot;,<br />    &quot;end&quot;: &quot;2015-11-19T02:00:00Z&quot;,<br />    &quot;unavailable&#95;tweet&#95;ids&quot;: [<br />        &quot;323456789&quot;<br />    ],<br />    &quot;group1&quot;: &#123;<br />     &quot;423456789&quot;: &#123;<br />      &quot;favorites&quot;: &quot;67&quot;,<br />      &quot;replies&quot;: &quot;8&quot;,<br />      &quot;retweets&quot;: 26<br />     &#125;<br />    &#125;<br />  &#125;                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |

<div id="post-insightsengagementhistorical">
  #### **POST /insights/engagement/historical**
</div>

El endpoint histórico permite recuperar impresiones e interacciones para una colección de hasta 25 Publicaciones durante cualquier período de hasta 4 semanas. Actualmente, no se pueden solicitar desde la API datos anteriores al 1 de septiembre de 2014. El endpoint histórico también permite solicitar métricas para todas las métricas individuales admitidas. Para ver la lista completa de métricas admitidas, consulta [Disponibilidad de métricas](https://developer.x.com/en/docs/x-api/v1/metrics/get-tweet-engagement/overview#EngagementTypes).

|                                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| :---------------------------------------- | :------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **Método de la solicitud**                | HTTP POST                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| **URL**                                   | `https://data-api.x.com/insights/engagement/historical`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| **Tipo de contenido**                     | `application/json`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| **Compresión**                            | Gzip. Para realizar una solicitud con compresión Gzip, envía un encabezado Accept-Encoding en la solicitud de conexión.  <br />El encabezado debe tener el siguiente formato:  <br />  <br />`Accept-Encoding: gzip`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| **Formato de la solicitud POST**          | Las solicitudes se pueden enviar como una solicitud POST en la que el cuerpo es un objeto JSON que contiene una colección de ids de Publicación y una agrupación deseada. El POST se estructura como un array con un objeto `tweets`, `engagements` y `groupings`. Cada solicitud puede incluir un máximo de 25 ids de Publicación. En cada solicitud se puede especificar una fecha de inicio y fin personalizada de hasta cuatro semanas de duración.  <br />  <br /><br />  &#123;<br />    &quot;tweet&#95;ids&quot;: [<br />       &quot;Tweet ID 1&quot;,<br />       &quot;Tweet ID 2&quot;,<br />       &quot;Tweet ID 3&quot;<br />    ],<br />      &quot;engagement&#95;types&quot;: [<br />        &quot;impressions&quot;,<br />        &quot;engagements&quot;,<br />        &quot;url&#95;clicks&quot;,<br />        &quot;detail&#95;expands&quot;<br />    ],<br />    &quot;groupings&quot;: &#123;<br />      &quot;grouping name&quot;: &#123;<br />        &quot;group&#95;by&quot;: [<br />          &quot;tweet.id&quot;,<br />          &quot;engagement.type&quot;,<br />          &quot;engagement.hour&quot;<br />        ]<br />      &#125;<br />    &#125;<br />  &#125;                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| **Fechas de inicio y fin**                | Se puede especificar una fecha de inicio y una de fin personalizadas mediante los valores `start` y `end` como parte de la solicitud. Debes especificar una fecha de inicio y una de fin cuya duración no sea superior a 4 semanas. La fecha de inicio más antigua posible en este momento es el 1 de septiembre de 2014. No se admiten fechas de fin en el futuro. Si no se proporciona una fecha de inicio y una de fin, la API usará por defecto las 4 semanas inmediatamente anteriores.  <br />  <br />La granularidad mínima con la que se pueden devolver datos en la Engagement API es por hora. Para cualquier solicitud realizada con valores de inicio o fin que no se ajusten exactamente a un límite de hora, las solicitudes se ajustarán a la hora inclusiva más cercana. Por ejemplo, una solicitud con &quot;start&quot;:&quot;2015-07-01T12:24:00Z&quot; y &quot;end&quot;:&quot;2015-07-10T08:37:00Z&quot; se ajustará a &quot;start&quot;:&quot;2015-07-01T12:00:00Z&quot;,&quot;end&quot;:&quot;2015-07-10T09:00:00Z&quot;.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| **ID de publicaciones**                   | Una matriz que incluye los id de las Publicaciones sobre las que se consultarán datos de interacción. Ten en cuenta que solo puedes solicitar datos de Publicaciones que hayan sido creadas por el @handle que se está autenticando. El endpoint histórico de 4 semanas admite hasta un máximo de 25 Publicaciones por solicitud, y los id de las Publicaciones deben representarse como cadenas de texto.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| **Tipos de interacciones**                | una matriz que incluye los tipos de métricas de interacción que se van a consultar.  <br />  <br />Para el endpoint histórico de 4 semanas, `impressions`, `engagements` y todos los tipos de interacción individuales son métricas admitidas. Para obtener la lista completa de métricas de interacción admitidas, consulta [Engagement Data](https://developer.x.com/en/docs/x-api/v1/metrics/get-tweet-engagement/overview#AvailableData).  <br />  <br />**Nota:** Actualmente hay tres métricas que se mostrarán como cero para las consultas realizadas antes del 15 de septiembre de 2015: `favorites`, `replies` y `retweets`.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| **Agrupaciones**                          | Los resultados de la Engagement API se pueden devolver en diferentes grupos para adaptarse mejor a tus necesidades. Puedes incluir un máximo de 3 agrupaciones por solicitud.  <br />  <br />Para cada agrupación, puedes definir un nombre de agrupación personalizado para que sea más fácil hacer referencia a este tipo de agrupación en tu aplicación. Una vez que hayas definido un nombre de agrupación, puedes optar por agrupar por uno o más de los siguientes valores:  <br />`tweet.id`  <br />`engagement.type`  <br />`engagement.day`  <br />`engagement.hour`  <br />Las agrupaciones se procesan de forma secuencial, de modo que puedes cambiar el formato de resultado deseado cambiando el orden de tus valores de group&#95;by. Un ejemplo de agrupación que mostrará las métricas separadas por ID de la Publicación, tipo de métrica y día sería:<br /><br />  &quot;groupings&quot;: &#123;<br />    &quot;my grouping name&quot;: &#123;<br />      &quot;group&#95;by&quot;: [<br />        &quot;tweet.id&quot;,<br />        &quot;engagement.type&quot;,<br />        &quot;engagement.day&quot;<br />      ]<br />    &#125;<br />  &#125;<br /><br />  <br />Las agrupaciones que tienen 4 elementos `group_by` solo son válidas si utilizan uno de los dos órdenes siguientes. Las solicitudes que tengan 4 elementos `group_by` en una sola agrupación y que no coincidan con uno de los siguientes devolverán un error. Además, solo se permitirá una agrupación con 4 elementos `group_by` por solicitud.  <br /><br />&quot;group&#95;by&quot;: [<br />    &quot;tweet.id&quot;,<br />    &quot;engagement.type&quot;,<br />    &quot;engagement.day&quot;,<br />    &quot;engagement.hour&quot;<br />  ]<br /><br />&quot;group&#95;by&quot;: [<br />    &quot;engagement.type&quot;,<br />    &quot;tweet.id&quot;,<br />    &quot;engagement.day&quot;,<br />    &quot;engagement.hour&quot;<br />  ] |
| **Límite de tamaño de la solicitud POST** | Se pueden realizar solicitudes de hasta 25 IDs de Publicación a la vez.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| **Formato de la respuesta**               | JSON. El encabezado de la solicitud debe especificar JSON como formato de la respuesta.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| **Límite de uso**                         | Estarás sujeto a límites de frecuencia por minuto, según lo establecido en tu contrato en función de tu nivel de acceso.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| **Ejemplo de solicitud**                  | curl -XPOST &quot;[https://data-api.x.com/insights/engagement/historical](https://data-api.x.com/insights/engagement/historical)&quot; <br />  -H &#39;Accept-Encoding: gzip&#39; <br />  -H &#39;Authorization OAuth oauth&#95;consumer&#95;key=&quot;consumer-key-for-app&quot;,oauth&#95;nonce=&quot;generated-nonce&quot;,oauth&#95;signature=&quot;generated-signature&quot;,oauth&#95;signature&#95;method=&quot;HMAC-SHA1&quot;, oauth&#95;timestamp=&quot;generated-timestamp&quot;,oauth&#95;token=&quot;access-token-for-authed-user&quot;, oauth&#95;version=&quot;1.0&quot;&#39; <br />  -d &#39;&#123;<br />    &quot;start&quot;: &quot;2015-08-01&quot;,<br />    &quot;end&quot;: &quot;2015-08-15&quot;,<br />    &quot;tweet&#95;ids&quot;: [<br />       &quot;123456789&quot;,<br />       &quot;223456789&quot;,<br />       &quot;323456789&quot;<br />    ],<br />      &quot;engagement&#95;types&quot;: [<br />        &quot;impressions&quot;,<br />        &quot;engagements&quot;,<br />        &quot;url&#95;clicks&quot;,<br />        &quot;detail&#95;expands&quot;<br />    ],<br />    &quot;groupings&quot;: &#123;<br />      &quot;types-by-tweet-id&quot;: &#123;<br />        &quot;group&#95;by&quot;: [<br />          &quot;tweet.id&quot;,<br />          &quot;engagement.type&quot;<br />        ]<br />      &#125;<br />    &#125;<br />  &#125;&#39;                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| **Ejemplo de respuesta**                  | &#123;<br />    &quot;start&quot;: &quot;2015-08-01T00:00:00Z&quot;,<br />    &quot;end&quot;: &quot;2015-08-15T00:00:00Z&quot;,<br />    &quot;types-by-tweet-id&quot;: &#123;<br />      &quot;123456789&quot;: &#123;<br />        &quot;impressions&quot;: &quot;0&quot;,<br />        &quot;engagements&quot;: &quot;0&quot;,<br />        &quot;url&#95;clicks&quot;: &quot;0&quot;,<br />        &quot;detail&#95;expands&quot;: &quot;0&quot;<br />      &#125;,<br />      &quot;223456789&quot;: &#123;<br />        &quot;impressions&quot;: &quot;788&quot;,<br />        &quot;engagements&quot;: &quot;134&quot;,<br />        &quot;url&#95;clicks&quot;: &quot;30&quot;,<br />        &quot;detail&#95;expands&quot;: &quot;1323&quot;<br />      &#125;,<br />      &quot;323456789&quot;: &#123;<br />        &quot;impressions&quot;: &quot;4&quot;,<br />        &quot;engagements&quot;: &quot;0&quot;,<br />        &quot;url&#95;clicks&quot;: &quot;2&quot;,<br />        &quot;detail&#95;expands&quot;: &quot;0&quot;<br />      &#125;<br />    &#125;<br />  &#125;                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| **ID de publicaciones no disponibles**    | Para las consultas que incluyan IDs de Publicación que ya no estén disponibles (por ejemplo, porque se hayan eliminado), se devolverán los datos correspondientes para todas las IDs de Publicación disponibles y las IDs de Publicación no disponibles se indicarán en un array llamado `unavailable_tweet_ids`. Por ejemplo:<br /><br />&#123;<br />    &quot;start&quot;: &quot;2015-11-17T22:00:00Z&quot;,<br />    &quot;end&quot;: &quot;2015-11-19T02:27:50Z&quot;,<br />    &quot;unavailable&#95;tweet&#95;ids&quot;: [<br />        &quot;323456789&quot;<br />    ],<br />    &quot;group1&quot;: &#123;<br />     &quot;423456789&quot;: &#123;<br />      &quot;favorites&quot;: &quot;67&quot;,<br />      &quot;replies&quot;: &quot;8&quot;,<br />      &quot;retweets&quot;: 26<br />     &#125;<br />    &#125;<br />  &#125;                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |

<div id="response-codes">
  #### **Códigos de respuesta**
</div>

| Status | Text | Description |
| :--- | :--- | :--- |
| 200 | OK  | La solicitud se completó correctamente. |
| 400 | Bad Request | Generalmente, esta respuesta se produce porque la solicitud contiene JSON no válido o porque no envió ningún cuerpo JSON. |
| 401 | Unauthorized | La autenticación HTTP falló debido a credenciales no válidas. Verifica tus claves y tokens de OAuth. |
| 404 | Not Found | El recurso no se encontró en la URL a la que se envió la solicitud, probablemente porque se usó una URL incorrecta. |
| 429 | Too Many Requests | Tu aplicación superó el límite de solicitudes a la API. |
| 500 | Internal Server Error | Se produjo un error del lado de Gnip. Vuelve a intentar tu solicitud usando un patrón de retroceso exponencial. |
| 502 | Proxy Error | Se produjo un error del lado de Gnip. Vuelve a intentar tu solicitud usando un patrón de retroceso exponencial. |
| 503 | Service Unavailable | Se produjo un error del lado de Gnip. Vuelve a intentar tu solicitud usando un patrón de retroceso exponencial. |

<div id="error-messages">
  #### **Mensajes de error**
</div>

En distintos escenarios, la Engagement API generará mensajes de error específicos según la situación, que tu aplicación debe estar preparada para manejar. La siguiente tabla incluye ejemplos comunes de estos mensajes de error y cómo debes interpretarlos. Ten en cuenta que, en muchos casos, la Engagement API devolverá resultados parciales para los datos disponibles junto con mensajes de error específicos como parte de una respuesta 200 OK con más información.

| Mensaje de error | Descripción |
| :--- | :--- |
| `"errors":["Your account could not be authenticated. Reason: Access token not found"]` | Error en el componente de autenticación de la solicitud. El &quot;Reason&quot; debería proporcionar información útil para solucionar el error. En los casos en que no puedas resolverlo, envía el error completo, incluido el &quot;Reason&quot;, a nuestro equipo de soporte. |
| `"errors":["1 Tweet ID(s) are unavailable"],"unavailable_tweet_ids": ["TWEET_IDS"]` | El id o los id de la Publicación que has solicitado ya no están disponibles, lo que normalmente indica que se han eliminado o que ya no están disponibles públicamente por otro motivo. |
| `"errors":["Impressions & engagements for tweets older than 90 days (*TIME_PERIOD*) are not supported"],"unsupported_for_impressions_engagements_tweet_ids":[*TWEET_IDS*]` | El id o los id de la Publicación que has solicitado específicamente para el endpoint /totals tienen más de 90 días de antigüedad y, por lo tanto, no están disponibles para devolver las métricas de impresiones o de interacción. |
| `"errors":["Forbidden to access tweets: *TWEET_IDS*"]` | El id o los id de la Publicación que has solicitado no están disponibles en función del token de autenticación que estás utilizando para recuperar datos en nombre de un tercero. |