---
title: API de interacción
keywords: ["Engagement API", "Enterprise Engagement API", "métricas de interacción", "datos de interacción", "interacción de Enterprise", "interacción de GNIP"]
---

<div id="overview">
  ## Descripción general
</div>

[`Enterprise`](https://developer.x.com/en/products/x-api/enterprise)

*Esta es una API Enterprise disponible únicamente dentro de nuestros niveles de acceso gestionado. Para usar esta API, primero debe abrir una cuenta con nuestro equipo de ventas de Enterprise. [Más información](/es/x-api/enterprise-gnip-2.0/enterprise-gnip)*

La Engagement API proporciona acceso a métricas de impresiones y de interacción de Publicaciones. Aunque la mayoría de las métricas y endpoints requieren autenticarse usando [Contexto de usuario de OAuth 1.0a](/es/resources/fundamentals/authentication), puede acceder a las métricas públicas de Favoritos, Retweets, respuestas y visualizaciones de video usando [OAuth 2.0 Bearer Token](/es/resources/fundamentals/authentication#oauth-2-0) y el endpoint /totals.  

**Nota:** Es posible que observe diferencias entre los datos informados en algunos de los paneles web de X y los datos informados en la Engagement API. Estas diferencias se producen porque los paneles web normalmente solo muestran interacciones y/o impresiones que se produjeron dentro del intervalo de tiempo seleccionado. Por ejemplo, un panel web puede mostrar interacciones en Publicaciones dentro del período de un mes calendario, mientras que la Engagement API puede mostrar interacciones que se encuentran fuera del período de ese mes, pero dentro del intervalo de tiempo solicitado. En estos casos, la Engagement API debe considerarse la fuente de referencia.
 

<div id="request-endpoints">
  ### Endpoints de solicitud
</div>

La API de Engagement tiene tres endpoints:

<div id="current-totals-totals">
  #### Totales actuales: [/totals]
</div>

* Las solicitudes devuelven una métrica total de impresiones y una métrica total de interacciones para las Publicaciones deseadas
* Se limita a las siguientes métricas: Impressions, Engagements, Favorites, Replies, Retweets, Quote Tweets y Video Views
* Permite recuperar las métricas de **Impressions** y **Engagements** para Publicaciones creadas **en los últimos 90 días** usando el Contexto de usuario de OAuth 1.0a
* Permite recuperar las métricas de **Favorites, Retweets, Quote Tweets, Replies** y **Video Views** para **cualquier Publicación** usando un Bearer Token de OAuth 2.0
* Los resultados se basan en el total actual de impresiones e interacciones en el momento en que se realiza la solicitud
* Ideal para alimentar un panel de control y para calcular tasas de interacción en una variedad de cuentas (@handles)
* Permite solicitar métricas para hasta 250 Publicaciones por cada solicitud
   

<div id="last-28-hours-28hr">
  #### Últimas 28 horas: [/28hr]
</div>

* Las solicitudes pueden devolver métricas totales de impresiones y de interacciones, así como un desglose de las métricas de interacción individuales que se hayan producido en las últimas 28 horas
* Los datos se pueden agrupar por id de la Publicación y, en series temporales agregadas, por día o por hora
* Ideal para hacer seguimiento del rendimiento del contenido creado recientemente
* Admite todas las métricas disponibles
* Permite solicitar métricas para hasta 25 Publicaciones por solicitud
   

<div id="historical-historical">
  #### Histórico: [/historical]
</div>

* Las solicitudes pueden devolver impresiones, interacciones y un desglose de las métricas de interacción individuales correspondientes al último año, según el momento de la interacción (no el momento de creación de la Publicación).
* Las solicitudes admiten parámetros de fecha de inicio y de fin, lo que proporciona flexibilidad para acotar un intervalo de tiempo específico de hasta 4 semanas de duración.
* Los datos de interacción de la Publicación se limitan a los últimos 365 días.
* Los datos pueden agruparse por id de la Publicación y, en series temporales agregadas, por día o por hora.
* Ideal para evaluar el rendimiento reciente frente a un punto de referencia histórico o para desarrollar una visión histórica del rendimiento de un @handle.
* Admite todas las métricas disponibles.
* Admite solicitar métricas para hasta 25 Publicaciones por solicitud.

<div id="available-metrics">
  ### Métricas disponibles
</div>

La siguiente tabla describe los tipos de métricas a las que puedes acceder a través de la Engagement API.

Consulta nuestra [página de interpretación de las métricas](/es/x-api/enterprise-gnip-2.0/fundamentals/engagement-api#interpreting-the-metrics) para obtener más información sobre estas métricas.

| Métrica                                                                                                                                                      | Disponibilidad en el endpoint | Requiere contexto de usuario                          | Descripción                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| :----------------------------------------------------------------------------------------------------------------------------------------------------------- | :---------------------------- | :---------------------------------------------------- | :---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| impresiones                                                                                                                                                  | Todos                         | Sí                                                    | Cantidad de veces que se ha visto la Publicación. Esta métrica solo está disponible para Publicaciones que se hayan publicado en los últimos 90 días.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| interacciones                                                                                                                                                | Todos                         | Sí                                                    | Cantidad de veces que un usuario ha interactuado con la Publicación. Esta métrica solo está disponible para Publicaciones que se hayan publicado en los últimos 90 días.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| favoritos                                                                                                                                                    | Todos                         | Sí - /28hrs &amp; /Historical<br /><br />No - /totals | Cantidad de veces que se ha marcado la Publicación como favorita.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| retweets                                                                                                                                                     | Todos                         | Sí - /28hrs &amp; /Historical<br /><br />No - /totals | Cantidad de veces que la Publicación ha sido retuiteada.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| citas                                                                                                                                                        | /totals                       | No - /totals                                          | Cantidad de veces que una Publicación ha sido retuiteada con un comentario (también conocida como cita).                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| respuestas                                                                                                                                                   | Todos                         | Sí - /28hrs &amp; /Historical<br /><br />No - /totals | Número de veces que se ha respondido a la Publicación.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| video&#95;views                                                                                                                                              | Todos                         | Sí - /28hrs y /Historical<br /><br />No - /totals     | La cantidad de veces que un video en la Publicación dada ha estado visible al 50% durante al menos dos segundos.<br /><br />Las visualizaciones de video solo están disponibles para Publicaciones que tengan 1800 días o menos. Si intentas solicitar visualizaciones de video para cualquier Publicación con más de 1800 días, recibirás el siguiente objeto en tu respuesta, junto con un objeto separado que contiene cualquier otra métrica que hayas solicitado:<br /><br />&quot;unsupported&#95;for&#95;video&#95;views&#95;tweet&#95;ids&quot;: [&quot;TWEET&#95;ID&quot;]<br /><br />**Ten en cuenta:** Puedes observar una discrepancia entre la métrica de visualizaciones de video que se muestra en las plataformas propiedad de X y operadas por esta (aplicación móvil y sitio web) y el número que recibes a través de los endpoints /28hr y /historical.  <br /><br />*   Las visualizaciones de video mostradas en la interfaz de usuario de X y con el endpoint /totals mostrarán el total de visualizaciones de video agregadas en todas las Publicaciones en las que se haya publicado el video dado. Esto significa que la métrica mostrada en la interfaz incluye las visualizaciones combinadas de cualquier instancia en la que el video haya sido retuiteado o vuelto a publicar en Publicaciones separadas. Esta métrica no incluye visualizaciones de video en GIFs.<br />*   Las visualizaciones de video proporcionadas por los endpoints /28hr y /historical solo incluirán aquellas visualizaciones generadas por la Publicación específica para la que estás obteniendo métricas. Esta métrica no incluye visualizaciones de video en GIFs. |
| media&#95;views                                                                                                                                              | /28hr /historical             | Sí                                                    | Cantidad total de visualizaciones (reproducción automática y por clic) de tu contenido multimedia, sumadas en videos, GIF y imágenes.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| media&#95;engagements<br /><br />([anteriormente Media Clicks](/es/x-api/enterprise-gnip-2.0/fundamentals/engagement-api#recent-changes-to-the-engagement-api)) | /28hr /historical             | Sí                                                    | Cantidad de veces que se ha hecho clic en contenido multimedia, como una imagen o un video, de la Publicación.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| url&#95;clicks                                                                                                                                               | /28hr /historical             | Sí                                                    | La cantidad de veces que se ha hecho clic en una URL de la Publicación.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| hashtag&#95;clicks                                                                                                                                           | /28hr /historical             | Sí                                                    | Cantidad de veces que se ha hecho clic en un hashtag de la Publicación.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| detail&#95;expands                                                                                                                                           | /28hr /historical             | Sí                                                    | Cantidad de veces que se ha hecho clic en la Publicación para ver más detalles.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| permalink&#95;clicks                                                                                                                                         | /28hr /historical             | Sí                                                    | Número de veces que se ha hecho clic en el enlace permanente de la Publicación (la página web individual dedicada a esta Publicación).                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| app&#95;install&#95;attempts                                                                                                                                 | /28hr /historical             | Sí                                                    | Número de veces que se ha producido un evento de instalación de la aplicación desde la Publicación                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| app&#95;opens                                                                                                                                                | /28hr /historical             | Sí                                                    | Cantidad de veces que se ha producido un evento de apertura de la Aplicación desde la Publicación.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| email&#95;tweet                                                                                                                                              | /28hr /historical             | Sí                                                    | Cantidad de veces que la Publicación se ha compartido por correo electrónico.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| user&#95;follows                                                                                                                                             | /28hr /historical             | Sí                                                    | Cantidad de veces que el Usuario (autor de la Publicación) ha sido seguido desde esta Publicación.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| user&#95;profile&#95;clicks                                                                                                                                  | /28hr /histórico              | Sí                                                    | Cantidad de veces que se ha hecho clic en el perfil del Usuario (autor de la Publicación) desde esta Publicación.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |

<div id="engagement-groupings">
  ### Agrupaciones de engagement
</div>

Las agrupaciones permiten organizar de forma personalizada las métricas de engagement devueltas. Puedes incluir hasta 3 agrupaciones por solicitud. Puedes elegir agrupar las métricas por uno o más de los siguientes valores:

*Los tres endpoints admiten:*

* tweet.id
* engagement.type
   

*Los endpoints `/28hr` y `/historical` pueden proporcionar métricas de series temporales y, por lo tanto, admiten:*

* engagement.day
* engagement.hour

Para obtener más información sobre la agrupación, visita la página [Engagement API Grouping](/es/x-api/enterprise-gnip-2.0/fundamentals/engagement-api#engagement-api-groupings) dentro de la sección Guías.

<div id="guides">
  ## Guías
</div>

<div id="developer-getting-started-guide">
  ### Guía de inicio para desarrolladores
</div>

<div id="introduction">
  #### Introducción
</div>

El propósito de esta documentación es proporcionar a los desarrolladores una introducción a la integración con la Engagement API. Comenzaremos hablando de los “porqués” de la integración y luego entraremos en los detalles técnicos del “cómo”.

<div id="what-does-the-engagement-api-provide">
  ##### **¿Qué ofrece la Engagement API?**
</div>

* La Engagement API proporciona datos de impresiones e interacción para las Publicaciones propias de cualquier cuenta de X de los últimos 90 días, siempre que dicha cuenta haya autorizado tu Aplicación para solicitar métricas en su nombre mediante [OAuth de 3 partes (3-legged OAuth)](/es/resources/fundamentals/authentication#obtaining-access-tokens-using-3-legged-oauth-flow). Esta solución, potente pero fácil de implementar, ofrece acceso inmediato a las impresiones y a interacciones detalladas como clics en URLs, clics en #hashtags y muchas más.
* La Engagement API proporciona métricas agregadas totales de favoritos, Retweets, Quote Tweets, respuestas y reproducciones de video para cualquier Publicación. Esto se puede utilizar como una forma potente de obtener datos básicos de interacción sobre cualquier Publicación o colección de Publicaciones.
* La Engagement API aporta un nuevo valor a las plataformas de social listening, marketing y publicación al permitir que los clientes midan el ROI en X al evaluar de forma eficaz el rendimiento del contenido usando más de 15 métricas de rendimiento.
* La Engagement API es una API de solicitud/respuesta que permite a los desarrolladores de aplicaciones enviar solicitudes con id de Publicaciones, métricas deseadas y un intervalo de tiempo, para lo cual la API devuelve datos de forma instantánea.
   

<div id="why-integrate-example-use-cases">
  ##### **¿Por qué integrar? Casos de uso de ejemplo**
</div>

* Comprender el alcance total de tu contenido para ver cuántas personas lo ven y cuántas personas ven videos, hacen clic en enlaces, hacen clic en hashtags o instalan mis aplicaciones.
* Generar métricas de interacción tanto totales como de series temporales.
* Comprender métricas básicas de interacción (favoritos, Retweets, Publicaciones con cita, respuestas) sobre cualquier Publicación pública.
* Utilizar estas métricas para determinar qué tipos de Publicaciones funcionan, de modo que pueda publicarlas con más frecuencia y obtener más impresiones y más interacciones para mi contenido.
* Automatizar acciones de marketing (como hacer Retweet de contenido desde otra cuenta de mi propiedad) cada vez que una de mis Publicaciones alcance 100 Me gusta u otro umbral.
* Comparar y evaluar mis campañas entre sí como herramienta para realizar pruebas A/B.
* Analizar qué tipo de contenido genera más impacto para mi equipo de atención al cliente y así determinar cómo y cuándo responder.
* Mostrar analíticas del contenido que se publica desde mi plataforma.
   

La [Engagement API se lanzó en 2016](https://blog.x.com/official/en_us/a/2016/gnip-s-engagement-api-is-now-generally-available.html) y fue la primera X API en ofrecer estas métricas de interacción detalladas a escala. La Engagement API es fácil de usar y permite a los clientes automatizar el proceso. Aquí se incluye un estudio de caso que describe una integración de ejemplo:

* [Medir el éxito de una campaña con la Cruz Roja](https://blog.x.com/developer/en_us/topics/spotlight/2016/measuring-campaign-success-with-the-red-cross.html)[](https://simplymeasured.com/blog/true-twitter-impressions-and-url-clicks-new-from-simply-measured/#sm.0007werel134td8zqf02m2mduumr6)

Ahora que hemos analizado los “porqués” de la Engagement API, empecemos a profundizar en los detalles técnicos.

<div id="integrating-the-engagement-api">
  #### Integrar la Engagement API
</div>

<div id="introduction-to-api">
  ##### **Introducción a la API**
</div>

La Engagement API es una API REST sencilla que recibe solicitudes codificadas en JSON y responde con métricas de interacción codificadas en JSON. Las solicitudes constan de tres partes principales (consulta los enlaces para obtener más documentación):

* Matriz de ***IDs de Publicaciones***.
* Matriz que especifica los [tipos de métricas](https://developer.x.com/en/docs/x-api/v1/metrics/get-tweet-engagement/overview#EngagementTypes) de interés. Los tipos incluyen elementos como “impressions”, “retweets”, “hashtag&#95;clicks” y “user&#95;follows”.
* [Agrupaciones de interacción](/es/x-api/enterprise-gnip-2.0/fundamentals/engagement-api#engagement-api-groupings), que es una estructura JSON que indica cómo deseas que los datos de interacción se organicen en la respuesta de la API.

En muchas situaciones, los Tipos de interacción y las Agrupaciones se mantendrán relativamente constantes de una solicitud a otra, y solo se actualizarán los IDs de Publicaciones.

La Engagement API proporciona [tres endpoints](https://developer.x.com/en/docs/x-api/v1/metrics/get-tweet-engagement/overview#RequestEndpoints):

* **Totals** - Proporciona totales generales de interacciones para Publicaciones. Algunas métricas están disponibles para todas las Publicaciones, mientras que otras solo están disponibles para los últimos 90 días.
* **28 hour** - Proporciona métricas de interacción en series temporales de las últimas 28 horas.
* **Historical** - Proporciona métricas de interacción en series temporales de hasta cuatro semanas consecutivas para Publicaciones publicadas desde el 1 de septiembre de 2014.

El endpoint **/totals** permite solicitar métricas para hasta **250 Publicaciones por solicitud**. Los endpoints **/28hour** y **/historical** permiten **25 por solicitud**.

Después de explicar cómo obtener acceso a la Engagement API, veremos cómo hacer una solicitud de API, ofreceremos una descripción general de OAuth y proporcionaremos enlaces a otros recursos técnicos.

<div id="getting-api-access">
  ##### **Obtener acceso a la API**
</div>

Si estás leyendo este documento, lo más probable es que ya tengas acceso a la Engagement API. Si no es así, comunícate con tu gerente de cuenta de Enterprise o solicita acceso a Enterprise [aquí](/es/x-api/enterprise-gnip-2.0/enterprise-gnip).

El primer paso es crear una [Aplicación de X](/es/resources/fundamentals/developer-apps) usando una cuenta de desarrollador aprobada a través del [portal para desarrolladores](/es/resources/fundamentals/developer-portal). Tu gerente de cuenta necesitará el App ID numérico asociado con esta aplicación para proporcionarte acceso. Si necesitas solicitar una cuenta de desarrollador, puedes hacerlo [aquí](/es/resources/fundamentals/developer-apps).

<div id="making-a-request">
  ##### **Realizar una solicitud**
</div>

La buena noticia es que realizar solicitudes a la Engagement API es sencillo. En nuestra solicitud, le pediremos el total de Retweets, Publicaciones con cita, Favoritos y respuestas para las siguientes dos Publicaciones de [@XDevelopers](https://x.com/XDevelopers):

> 1/ Hoy compartimos nuestra visión para el futuro de la plataforma X API.[https://t.co/XweGngmxlP](https://t.co/XweGngmxlP)
>
> — Twitter Dev (@TwitterDev) [6 de abril de 2017](https://x.com/TwitterDev/status/850006245121695744)

> No te pierdas las Publicaciones sobre tu Publicación.
>
> Ahora, en iOS, puedes ver los Retweets con comentarios en un solo lugar. [pic.x.com/oanjZfzC6y](https://t.co/oanjZfzC6y)
>
> — X (@X) [12 de mayo de 2020](https://x.com/status/1260294888811347969?ref_src=twsrc%5Etfw)

![Tweet image](https://t.co/oanjZfzC6y)

El primer paso es construir la solicitud a la API en JSON, que consiste en estos dos ids de Publicaciones colocados en un array, un array de tipos de interacción de interés y un objeto JSON “groupings” con nombre personalizado que indica cómo queremos que las métricas se organicen en la respuesta. Así se ve nuestra solicitud:

```json
{
  "tweet_ids": [
    1260294888811347969, 850006245121695744
  ],
  "engagement_types": [
    "retweets", "quote_tweets", "favorites", "replies"
  ],
  "groupings": {
    "engagement-types-by-id": {
      "group_by": [
        "Tweet.id", "engagement.type"
      ]
    }
  }
}
```

Para recuperar estas métricas totales, realizamos una solicitud POST con este JSON al endpoint [https://data-api.x.com/insights/engagement/totals](https://data-api.x.com/insights/engagement/totals).

Incluiremos los siguientes encabezados para indicar que nuestra solicitud está codificada en JSON y que está comprimida con Gzip (los cuerpos de las solicitudes pueden ser muy grandes):

* Content-Type: application/json
* Accept-Encoding: gzip
   

Al hacer solicitudes, nos autenticamos usando OAuth, sobre lo cual hablaremos con más detalle en la siguiente sección.

La API devuelve la siguiente carga útil:

```json
{
  "grouping name": {
    "1260294888811347969": {
      "favorites": "17111",
      "quote_tweets": "3254",
      "replies": "1828",
      "retweets": "5218"
    },
    "850006245121695744": {
      "favorites": "492",
      "quote_tweets": "66",
      "replies": "42",
      "retweets": "324"
    }
  }
}
```

Ten en cuenta que la respuesta incluye nuestras métricas solicitadas en la estructura descrita por las definiciones de «agrupaciones», con las métricas enumeradas primero por id de la Publicación y luego por tipo de interacción en el siguiente nivel.

Eso fue muy sencillo. Si eres nuevo en la autenticación con OAuth, consulta la siguiente sección.

<div id="authenticating-with-oauth">
  #### Autenticación con OAuth
</div>

OAuth es un estándar de autenticación muy común en la industria tecnológica. Si ya estás usando OAuth (quizá con otras API de X), es probable que estés utilizando un paquete OAuth específico de tu lenguaje que abstrae todos los detalles complejos. Si eres nuevo en OAuth, visita nuestra página [Oauth with the X API](/es/resources/fundamentals/authentication) o dirígete directamente a [https://oauth.net](https://oauth.net/) para obtener más información. Luego te recomendamos que busques un paquete OAuth para el lenguaje de integración que prefieras y comiences por ahí. Con estos paquetes, el proceso de autenticación normalmente implica configurar tus claves y tokens, crear algún tipo de objeto HTTP y luego hacer solicitudes con ese objeto.

Por ejemplo, en el mundo de Ruby, el siguiente seudocódigo representa una receta para crear una aplicación habilitada para OAuth usando la gema de Ruby «oauth» y haciendo una solicitud POST:

```js
require 'oauth'

#Ensamblar la solicitud JSON (como se indicó anteriormente).
request = make_json_request()

#Construir un objeto consumidor de aplicación con mi clave de consumidor y secreto de la aplicación.
consumer = OAuth::Consumer.new(keys['consumer_key'], keys['consumer_secret'], {:site => ‘https://data-api.x.com’})
#Construir un token de usuario con los tokens proporcionados por la cuenta que otorga el permiso. Si se realiza una #solicitud solo de aplicación (verificando Publicaciones que no requieren permiso con el endpoint /totals), este paso se puede #omitir.
token = {:oauth_token => keys['access_token'], :oauth_token_secret => keys['access_token_secret']}

#Crear un objeto de aplicación habilitado para oauth.
app = OAuth::AccessToken.from_hash(consumer, token)
#Realizar la solicitud POST.
result = app.post(“/insights/engagement/totals", request, {"content-type" => "application/json", "Accept-Encoding" => "gzip"})
```

La Engagement API admite tanto autenticación de solo aplicación como autenticación con contexto de usuario. Si estás recopilando métricas de interacción para Publicaciones públicas que no son de tu propiedad con el endpoint /totals, no se requiere permiso de usuario y puedes usar autenticación de solo aplicación. En este caso, usarás únicamente la clave y el secreto de tu aplicación para autenticarte.

OAuth también permite que una aplicación realice una solicitud a la API “en nombre de otro usuario”, usando tokens asociados a ese usuario. Si estás generando métricas de Engagement para Publicaciones propias, es decir, Publicaciones que fueron publicadas por un usuario para el cual tienes tokens de usuario, estarás realizando solicitudes con contexto de usuario, lo que significa autenticarte tanto con las claves de tu aplicación como con tokens de acceso específicos del usuario. Estos tokens de usuario normalmente se suministran mediante el proceso &#39;[Sign-in with X](/es/resources/fundamentals/authentication#log-in-with-x)&#39; o se obtienen directamente del usuario (ten en cuenta que debes usar [twurl](https://github.com/xdevplatform/xurl) si obtienes los tokens directamente del usuario). Una vez que el usuario proporciona sus tokens, estos no caducan y se pueden usar con la Engagement API para realizar solicitudes en su nombre, siempre y cuando el usuario no restablezca sus tokens ni cambie su contraseña, en cuyo caso deberá proporcionarte los nuevos tokens.

Puedes revisar qué métricas requieren qué tipo de autenticación en [esta tabla](/es/x-api/enterprise-gnip-2.0/fundamentals/engagement-api#engagement-api-groupings).

<div id="selecting-an-engagement-api-endpoint">
  ### Seleccionar un endpoint de Engagement API
</div>

La Engagement API proporciona tres endpoints distintos:

* **[Totals](/es/x-api/enterprise-gnip-2.0/fundamentals/engagement-api#post-insights-engagement)**: proporciona totales generales de determinadas métricas de Publicaciones &quot;propias&quot; o &quot;no propias&quot;. Algunas métricas están disponibles para todas las Publicaciones, mientras que otras solo están disponibles para Publicaciones publicadas en los últimos 90 días. Admite 250 Publicaciones por solicitud.
* **[28 hour](/es/x-api/enterprise-gnip-2.0/fundamentals/engagement-api#post-insights-engagement)**: proporciona métricas de Engagement en series temporales para Publicaciones &quot;propias&quot; de las últimas 28 horas. Admite 25 Publicaciones por solicitud.
* **[Historical](/es/x-api/enterprise-gnip-2.0/fundamentals/engagement-api#post-insights-engagement-historical)** - proporciona métricas de Engagement en series temporales para hasta cuatro semanas consecutivas para Publicaciones &quot;propias&quot; publicadas desde el 1 de septiembre de 2014. Admite 25 Publicaciones por solicitud.
   

Cada endpoint tiene sus propias características. Tanto si planeas usar los tres como si intentas decidir cuál se ajusta mejor a tu caso de uso, es importante entender las diferencias entre ellos.

A continuación presentamos algunos conceptos clave, profundizamos en los tres endpoints y luego mostramos ejemplos de casos de uso que, en general, se asocian a un endpoint específico. Esperamos que esta información te ayude a integrar los tres endpoints de forma más eficiente o a decidir cuál único endpoint se adapta mejor a tu objetivo.
 

<div id="key-concepts">
  #### Conceptos clave
</div>

Hay varios conceptos clave que ayudan a ilustrar las distintas funcionalidades y los datos que proporcionan los tres endpoints de la Engagement API.
 

<div id="impressions-and-engagement-metrics">
  ##### Impresiones y métricas de interacción
</div>

Las impresiones representan el número de veces que una determinada Publicación se ha visto en la plataforma X en un contexto orgánico. No se incluyen las impresiones generadas a partir de Publicaciones que se muestran en un contexto promocionado o de pago. Antes de la Engagement API, las impresiones de una Publicación representaban solo una medida de vistas potenciales. Se basaban en contar a los seguidores de la cuenta del autor y de cualquier cuenta que hiciera Retweet del contenido. No tenían en cuenta la situación común en la que un usuario determinado en realidad no ve la Publicación.

Las métricas de impresiones generadas por la Engagement API son una medida real del número de veces que una Publicación se ha renderizado para mostrarse. Si un seguidor de tu cuenta no ve tu Publicación, no cuenta como una impresión.

La Engagement API proporciona métricas sobre 14 tipos únicos de [métricas de interacción](/es/x-api/enterprise-gnip-2.0/fundamentals/engagement-api#available-metrics), cada una de las cuales representa una acción distinta que un usuario puede realizar cuando se le presenta una Publicación. Estas incluyen hacer Retweet, indicar que le gusta, responder, hacer clic en entidades como #hashtags, enlaces y contenido multimedia, seguir al autor y ver el perfil del autor. Todas estas acciones individuales se agrupan en una única métrica de interacciones (Engagements).

<div id="owned-and-unowned-x-content">
  ##### Contenido de X propio y no propio
</div>

La Engagement API establece una distinción clara entre Publicaciones propias y no propias. Las Publicaciones propias son Publicaciones que se publican desde tu cuenta, o Publicaciones para las que has obtenido permiso para solicitar datos de engagement. Como con otras API de X, obtienes permiso cuando otros usuarios/cuentas de X comparten tokens de acceso que te permiten realizar solicitudes a la API en su nombre. Una forma habitual de obtener estos tokens es mediante el [proceso de «Iniciar sesión con X»](/es/resources/fundamentals/authentication#log-in-with-x).

El endpoint /totals proporciona datos de engagement tanto para Publicaciones propias como no propias. Para Publicaciones no propias, puedes solicitar métricas de engagement que están disponibles públicamente en la interfaz de una Publicación: Me gusta, Retweet y Respuesta. Para estas métricas, lo que la Engagement API aporta es la posibilidad de recuperar estas métricas de forma automatizada y a escala. Para Publicaciones propias, el endpoint /totals también proporciona métricas de Impresiones y de engagement total.

Los endpoints /28hr y /historical proporcionan métricas solo para Publicaciones propias, lo que significa que debes incluir el contexto de usuario cuando haces la solicitud a estos endpoints.

<div id="total-and-time-series-engagement-data">
  ##### Datos de interacción totales y de series temporales
</div>

El endpoint /totals proporciona, como su nombre indica, únicamente totales generales para sus tipos de interacción. Sus cifras representan los totales actualizados desde que se publicó la Publicación. Si una Publicación se acaba de publicar y solicitas sus métricas repetidamente, es habitual que estos totales cambien con cada solicitud.

Los endpoints /28hr y /historical pueden proporcionar tanto totales generales como datos de series temporales. Al solicitar datos de series temporales, las métricas de interacción se pueden agrupar en datos diarios u horarios.   

Consulta nuestra documentación sobre [agrupaciones de interacción](/es/x-api/enterprise-gnip-2.0/fundamentals/engagement-api#engagement-api-groupings) para saber cómo solicitar datos de series temporales con los endpoints /28hr y /historical.

<div id="endpoints-and-example-use-cases">
  #### Endpoints y ejemplos de casos de uso
</div>

Dadas las características y diferencias comentadas anteriormente, cada endpoint individual suele corresponderse con distintos tipos de casos de uso. Para ayudarte a decidir qué endpoint se adapta mejor a tu caso de uso específico, a continuación encontrarás algunos ejemplos de enunciados de usuario y el endpoint que mejor responde a cada uno.

<div id="totals">
  ##### **/totals**
</div>

* Solo necesito acceso a algunos tipos de métricas (Impressions, Engagements, Favorites, Retweets, Quote Tweets, Replies y Video Views).
* Necesito acceso a datos básicos de interacción para cualquier Publicación, no solo para Publicaciones propias.
* Quiero comparar el rendimiento con un competidor.
* Quiero hacer seguimiento de estadísticas básicas de interacción para un hashtag o campaña que incluya Publicaciones que no son de mi propiedad.
* No necesito que los datos estén desglosados por día u hora, solo necesito el total actual cuando hago una solicitud.
* Necesito una única métrica para mostrar en un informe o panel de control y no quiero almacenar ningún dato.
* Quiero mostrar datos al cargar la página y solo necesito hacer una solicitud y recibir una respuesta.
* Necesito acceso para obtener datos de cientos de miles o millones de Publicaciones por día.
   

<div id="28hr">
  ##### **/28hr**
</div>

* Necesito acceso a los 17 tipos de métricas.
* Quiero mostrar datos de Publicaciones muy recientes, publicadas en las últimas 28 horas.
* Tengo un proceso que se ejecuta una vez al día para obtener los datos que me interesan y solo necesito obtener datos del último día.
* Necesito que las métricas estén desglosadas por día u hora.
* Quiero mostrar series temporales desglosadas de la actividad por hora en un panel.
* Necesito un nivel de acceso elevado para cientos de miles de Publicaciones por día.
* Tengo capacidad de almacenamiento y puedo actualizar los datos una vez al día y mantener un recuento acumulado.
   

<div id="historical">
  ##### **/historical**
</div>

* Necesito acceder a los 17 tipos de métricas.
* Necesito obtener datos históricos de Publicaciones creadas hasta septiembre de 2014.
* Quiero mostrar un análisis histórico detallado que compare campañas.
* Necesito que las métricas estén desglosadas por día u hora.
* No necesito un acceso elevado a la Engagement API y solo necesito obtener datos para unos cientos o miles de Publicaciones por día.

<div id="engagement-api-key-characteristics">
  ### Características clave de la Engagement API
</div>

* **API RESTful** que proporciona datos JSON y admite solicitudes POST con cuerpos de datos JSON.
* **Tipos de solicitudes:** Las aplicaciones cliente pueden realizar los siguientes tipos de solicitudes:
  * **Interacciones totales** -- Solicitud HTTP POST al endpoint /totals
  * **Interacciones de las últimas 28 horas** -- Solicitud HTTP POST al endpoint /28hr
  * **Interacciones históricas** -- Solicitud HTTP POST al endpoint /historical
* **Autenticación OAuth:**
  * [Contexto de usuario de OAuth 1.0](/es/resources/fundamentals/authentication): Todas las métricas disponibles están disponibles para Publicaciones propiedad de un usuario que haya autorizado tu aplicación mediante [OAuth de 3 pasos](https://developer.x.com/resources/fundamentals/authentication/obtaining-user-access-tokens). Debes usar los Tokens de acceso de ese usuario al realizar tu solicitud.[](/es/resources/fundamentals/authentication)
  * [Bearer Token de OAuth 2.0](/es/resources/fundamentals/authentication#oauth-2-0): Determinadas métricas (Retweets, Publicaciones citadas, Respuestas, Favoritos y Reproducciones de video) están disponibles para cualquier Publicación pública. 
* **Metadatos y estructura de la solicitud**: Los datos de la solicitud son un objeto JSON que consta de un array de ID de Publicación, un array de tipos de interacción y una estructura de agrupación de interacciones.
* **Publicaciones por solicitud:**
  * Endpoint /totals: 250 ID de Publicación
  * Endpoint /28hr: 25 ID de Publicación
  * Endpoint /historical: 25 ID de Publicación
* **Disponibilidad de métricas de interacción:**
  * **/totals** -- Totales de métricas desde que se publicó la Publicación. Las Impresiones y las Interacciones están disponibles para Publicaciones publicadas en los últimos 90 días, mientras que los Retweets, las Publicaciones citadas, las Respuestas, los Favoritos y las Reproducciones de video están disponibles para todas las Publicaciones.
  * **/28hr** -- Últimas 28 horas desde el momento de la solicitud.
  * **/historical** -- Cualquier período de 28 días a partir del 1 de septiembre de 2014.
* **Tipos de métricas**: Cada solicitud incluye un array de [Tipos de métricas](http://support.gnip.com/apis/engagement_api/overview.html#EngagementTypes). Su disponibilidad depende del endpoint y, si se solicita desde el endpoint /totals, de si las Publicaciones cuentan con permiso del usuario.
  * Endpoint /totals:
    * Todas las Publicaciones: Favoritos, Retweets, Publicaciones citadas, Respuestas y Reproducciones de video
    * Requiere Contexto de usuario de OAuth 1.0a: Impresiones, Interacciones, Favoritos, Respuestas y Retweets
  * Endpoints /28hr y /historical (requiere Contexto de usuario de OAuth 1.0a con el Token de acceso del propietario de la Publicación): Impresiones, Interacciones, Favoritos, Respuestas, Retweets, Clics en URL, Clics en hashtag, Clic en detalle, Clics en enlace permanente, Clics en contenido multimedia, Intentos de instalación de aplicación, Aperturas de aplicación, Correos electrónicos de Publicación, Reproducciones de video y Visualizaciones de contenido multimedia
* **Agrupaciones de interacciones:** Cada solicitud incluye un array de [Agrupaciones de interacciones](/es/x-api/enterprise-gnip-2.0/fundamentals/engagement-api#engagement-api-groupings). Con estas agrupaciones puedes personalizar cómo se organizan las métricas devueltas. Se pueden incluir hasta tres agrupaciones en cada solicitud. Las métricas se pueden organizar según los siguientes valores:
  * Todos los endpoints: ID de Publicación, Tipo de interacción
  * Endpoints /28hr y /historical: Estos endpoints proporcionan series temporales si se especifican estas agrupaciones adicionales: Día de interacción, Hora de interacción
* **Expectativas de integración:** Tu equipo será responsable de lo siguiente:
  * Crear y mantener una aplicación cliente que pueda enviar solicitudes HTTP a la Engagement API y que devuelva métricas de interacción para el ID de Publicación incluido en la solicitud.
* **Limitaciones**
* Las Reproducciones de video solo están disponibles para Publicaciones con una antigüedad de 1800 días o menos.

<div id="authenticating-with-the-engagement-api">
  ### Autenticación con la Engagement API
</div>

> **Ten en cuenta lo siguiente**: 
>
> X debe habilitar el acceso a la Engagement API para tu aplicación de desarrollador antes de que puedas empezar a usar la API. Para ello, asegúrate de compartir el App ID que tienes previsto usar para fines de autenticación con tu account manager o equipo de soporte técnico.

Hay dos métodos de autenticación disponibles con la Engagement API: [OAuth 1.0a](/es/resources/fundamentals/authentication#oauth-1-0a-2) y [OAuth 2.0 Bearer Token](/es/resources/fundamentals/authentication#bearer-token-also-known-as-app-only). 

**OAuth 2.0 Bearer Token** (también conocido como “application-only”) te permite acceder a métricas de interacción disponibles públicamente. Este método de autenticación se puede usar para obtener los recuentos totales de Favorites (también llamados Likes), Retweets, Quote Tweets, Replies y visualizaciones de video para cualquier Publicación disponible públicamente cuando realices solicitudes al [/totals endpoint](/es/x-api/enterprise-gnip-2.0/fundamentals/engagement-api#post-insights-engagement-totals). 

**OAuth 1.0a** (también conocido como “user context”) te permite realizar solicitudes en nombre de un usuario y acceder a métricas de interacción privadas que pertenecen al usuario en cuestión. 

Este método de autenticación es necesario para:

* Todas las solicitudes enviadas al [/28hr endpoint](/es/x-api/enterprise-gnip-2.0/fundamentals/engagement-api#post-insights-engagement-28hr) y [/historical endpoint](/es/x-api/enterprise-gnip-2.0/fundamentals/engagement-api#post-insights-engagement-historical)
* Acceder a cualquiera de las siguientes métricas privadas: Impresiones, Interacciones, Visualizaciones de contenido multimedia, Interacciones con contenido multimedia, Clics en URL, Clics en hashtag, Despliegues de detalles, Clics en enlace permanente, Intentos de instalación de aplicación, Aperturas de aplicación, Publicación por correo electrónico, Seguimientos de usuarios y Clics en el perfil de usuario.

Al enviar una solicitud con OAuth 1.0a, debes incluir los Tokens de acceso (Access Token y Secret) del usuario que es propietario de la Publicación o del recurso protegido de interés. Si no proporcionas los Tokens de acceso de usuario correctos cuando solicites datos de usuario protegidos, la Engagement API devolverá un error `403 Forbidden`.

La Engagement API no te permitirá recuperar datos de interacción de [Publicaciones protegidas](https://help.x.com/en/safety-and-security/public-and-protected-tweets), incluso si estás autenticándote en nombre del usuario propietario de estas Publicaciones. Si lo intentas, se devolverá un error `400 Bad Request`, con el mensaje `"Tweet ID(s) are unavailable"`.

Si estás enviando una solicitud en nombre de tu propia cuenta de X (es decir, la cuenta que es propietaria de la aplicación de desarrollador), puedes generar los Tokens de acceso necesarios directamente desde el [portal para desarrolladores](https://developer.x.com/en/portal/projects-and-apps), en la pestaña “Keys and tokens” de la aplicación de desarrollador.

Si estás realizando una solicitud en nombre de otro usuario, deberás utilizar el flujo OAuth de tres patas para obtener los Tokens de acceso necesarios. La siguiente documentación contiene más información sobre cómo hacerlo: [OAuth 1.0a: how to obtain a user’s access tokens](/es/resources/fundamentals/authentication#oauth-1-0a-2).

Para obtener ejemplos adicionales, incluido cómo autenticarse usando OAuth 1.0a, consulta el [código de ejemplo en Python de XDevelopers para la Engagement API](https://github.com/xdevplatform/enterprise-scripts-python/tree/master/Engagement-API).

<div id="recent-changes-to-the-engagement-api">
  ### Cambios recientes en la Engagement API
</div>

La Engagement API proporciona valiosas métricas de impresiones e interacción que te permiten supervisar el rendimiento de tu actividad en X. En nuestro esfuerzo continuo por facilitar decisiones de marketing basadas en nuestros datos, nos complace compartir cambios recientes en la Engagement API que aportan una mayor coherencia de las métricas en todo X.  

Recientemente implementamos cambios para modernizar la Engagement API y utilizar la misma metodología de agregación de métricas que se usa en el panel de analytics de X (analytics.x.com). Adoptamos un enfoque cuidadoso para intentar minimizar los cambios incompatibles en la API al implementar estas nuevas métricas y desplegamos el primer conjunto de cambios el 9 de octubre de 2017. Estos cambios mejoran la coherencia entre todos los lugares donde tú o tus clientes puedan supervisar tu rendimiento en X. Consulta a continuación la descripción detallada de los cambios:

|     |     |
| :--- | :--- |
| **Metric** | **Change** |
| engagements | Hemos actualizado las métricas que se agrupan en el total de engagements para que coincidan con el panel de analytics de la Publicación. Engagements mide las “veces que las personas interactuaron con esta Publicación”.<br /><br />Para Publicaciones que incluyen contenido multimedia como un video o un GIF, la métrica engagements ya no incluirá visualizaciones de contenido multimedia. Las visualizaciones de contenido multimedia ahora pueden consultarse mediante una nueva métrica, *media&#95;views*. |
| media&#95;clicks* | Esta métrica ha sido reemplazada por una nueva métrica llamada “*media&#95;engagements*”. |
| video&#95;views | Desde el 6 de julio de 2018, esta métrica está disponible para Publicaciones “no propias” a través del endpoint [/totals](/es/x-api/enterprise-gnip-2.0/fundamentals/engagement-api#post-insights-engagement). Esto significa que puedes acceder a las visualizaciones de video para **todas** las Publicaciones usando autenticación solo de aplicación. <br /><br />Solo puedes solicitar visualizaciones de video de hasta 1800 días de antigüedad. Si intentas solicitar visualizaciones de video para una Publicación con más de 1800 días de antigüedad, recibirás lo siguiente:<br /><br />&quot;unsupported&#95;for&#95;video&#95;views&#95;tweet&#95;ids&quot;: [&quot;TWEET&#95;ID&quot;]<br /><br />**Ten en cuenta** que diferirá de media&#95;views en que video&#95;views se basa en el estándar MRC de tener el 50% del video en pantalla durante al menos dos segundos.  <br /><br />**Además,** ten en cuenta que puedes observar una discrepancia entre la métrica de visualizaciones de video mostrada en las plataformas propiedad de X y operadas por X (aplicación móvil y sitio web) y el número que recibes a través de los endpoints /28hr y /historical.<br /><br />* Las visualizaciones de video mostradas en la interfaz de usuario de X y que se entregan usando el endpoint /totals mostrarán las visualizaciones de video agregadas en todas las Publicaciones en las que se haya publicado el video en cuestión. Esto significa que la métrica mostrada en la IU incluye las visualizaciones combinadas de cualquier instancia en la que el video haya sido Retwitteado o vuelto a publicar en Publicaciones independientes.<br />* Las visualizaciones de video proporcionadas por los endpoints /28hr y /historical solo incluirán aquellas visualizaciones generadas por la Publicación específica para la que estás obteniendo métricas. |
| media&#95;views | Esto incluye todas las visualizaciones (reproducción automática y por clic) de tu contenido multimedia contabilizadas en videos, vines, gifs e imágenes.<br /><br />**Ten en cuenta** que las Publicaciones con imágenes no muestran una métrica media&#95;views en el panel de analytics, pero sí se devolverá en la Engagement API. |
| media&#95;engagements* | Esto incluye la cantidad de clics en tu contenido multimedia en videos, vines, gifs e imágenes. Esta métrica está reemplazando a *media&#95;clicks*. |
| quote&#95;tweets | Desde el 7 de julio de 2020, esta métrica está disponible para Publicaciones “no propias” a través del endpoint /totals. Esto significa que puedes acceder al número de Publicaciones con cita para todas las Publicaciones usando autenticación solo de aplicación. |

<div id="interpreting-the-metrics">
  ### Interpretación de las métricas
</div>

**Nota:** Es posible que observes diferencias entre los datos reportados en algunos de los paneles web de X y los datos reportados en la Engagement API. Estas diferencias se deben a que los paneles web normalmente solo muestran interacciones y/o impresiones que se produjeron dentro del intervalo de tiempo seleccionado. Por ejemplo, un panel web puede mostrar interacciones en Publicaciones durante un mes calendario, mientras que la Engagement API puede mostrar interacciones que se producen fuera del lapso de ese mes, pero dentro del intervalo de tiempo solicitado. En estos casos, la Engagement API debe considerarse la fuente autorizada.
 

<div id="impressions-and-engagement-data">
  #### Datos de impresiones e interacción
</div>

La Engagement API proporciona datos de impresiones e interacción **orgánicas**.

Las impresiones representan la cantidad de veces que una determinada Publicación se ha visto en la plataforma X en un contexto orgánico. Las impresiones generadas a partir de Publicaciones que se ven en un contexto promocionado o de pago **no** se incluyen.

Las interacciones representan la cantidad de veces que un espectador interactuó con una determinada Publicación tanto en un contexto **orgánico** como **promocionado**. Las interacciones incluyen, entre otras, Retweets, Me gusta, respuestas, clics en URL, clics en hashtags, clics en menciones y visualizaciones de contenido multimedia. Para obtener la lista completa de acciones de interacción incluidas, consulta la sección Engagement Data. 

Para calcular una tasa de interacción básica, utiliza el número total de interacciones dividido por el número total de impresiones de una determinada Publicación para el período de tiempo que estés analizando.

Los datos de impresiones e interacción solo se pueden obtener para Publicaciones de @handles propios o de @handles que hayan autorizado tu Aplicación para ver detalles sobre sus Publicaciones. Internamente, la Engagement API registrará la cantidad de @handles únicas que se hayan solicitado con respecto al límite de @handles contratado. Se recomienda también hacer un seguimiento del uso de solicitudes de @handle en el lado del cliente durante todo el mes.  

<div id="video-metrics">
  #### Métricas de video
</div>

Hay un par de métricas diferentes que representan impresiones de contenido multimedia dentro de X. La primera es nuestra métrica de vistas de video, que se basa en el estándar MRC de que al menos el 50% del video esté visible durante un mínimo de dos segundos. La segunda es Media Views, que incluye todas las vistas (reproducción automática y por clic) de tu contenido multimedia contabilizadas en videos, Vines, GIFs e imágenes.

La métrica de vistas de video está disponible para Publicaciones propias mediante los endpoints /28hour y /historical, así como para todas las Publicaciones de terceros mediante el endpoint /totals. 

Aunque la métrica de vistas de video dentro de la interfaz de usuario de X utiliza el mismo estándar MRC, ten en cuenta que puedes ver una discrepancia entre la métrica de vistas de video mostrada en las plataformas propias y operadas por X (aplicación móvil y sitio web) y la cifra que recibes a través de los distintos endpoints de Engagement API.

* Las vistas de video proporcionadas por el endpoint /totals y la interfaz de usuario de X mostrarán las vistas de video agregadas en todas las Publicaciones en las que se haya publicado el video en cuestión. Esto significa que la métrica entregada mediante /totals y mostrada en la UI de X incluye las vistas combinadas de cualquier instancia en la que el video haya sido Retwitteado o vuelto a publicar en Publicaciones separadas.
* Las vistas de video proporcionadas por los endpoints /28hour y /historical de Engagement API solo incluirán aquellas vistas generadas por la Publicación específica para la que estás obteniendo métricas. 
   

Ten en cuenta que no entregamos vistas de video para Publicaciones con una antigüedad superior a 1800 días. En su lugar, entregamos un objeto que enumera las Publicaciones que son más antiguas que 1800 días. Seguirás recibiendo todas las demás métricas de las Publicaciones que solicites en un objeto aparte. Aquí tienes un ejemplo de respuesta:

```json
{
  "unsupported_for_video_views_tweet_ids": [
    "479311209565413376",
    "477139122520219648"
  ],
  "grouping name": {
    "479311209565413376": {
      "favorites": "69",
      "impressions": "1692",
      "retweets": "142",
      "video_views": "0"
    },
    "477139122520219648": {
      "favorites": "10",
      "impressions": "1023",
      "retweets": "6",
      "video_views": "0"
    },
    "1397568983931392004": {
      "favorites": "268",
      "impressions": "26803",
      "retweets": "56",
      "video_views": "17902"
    }
  }
}
```

La métrica Media Views solo está disponible para Publicaciones propias en los endpoints /28hour y /historical.

<div id="engagement-api-groupings">
  ### Agrupaciones de Engagement API
</div>

Las agrupaciones permiten organizar de forma personalizada las métricas de engagement devueltas. Puedes incluir un máximo de 3 agrupaciones por solicitud. Puedes elegir agrupar las métricas por uno o más de los siguientes valores:

*Los tres endpoints admiten:*

* tweet.id
* engagement.type
   

*Los endpoints `/28hr` y `/historical` pueden proporcionar métricas de series temporales y, por lo tanto, admiten:*

* engagement.day
* engagement.hour

Las agrupaciones se aplican de forma secuencial, de modo que puedes cambiar el formato de resultado deseado modificando el orden de los valores de `group_by`. Las agrupaciones que contienen cuatro valores de `group_by` solo se admitirán en uno de los siguientes dos formatos:

```bash
"group_by": [
    "tweet.id",
    "engagement.type",
    "engagement.day",
    "engagement.hour"
  ]
```

O

```bash
"group_by": [
    "engagement.type",
    "tweet.id",
    "engagement.day",
    "engagement.hour"
]
```

Por ejemplo, si quieres generar totales generales por tipo de métrica, incluye la siguiente especificación de «groupings» como parte de tu solicitud (y consulta la página de [Referencia de la API](/es/x-api/enterprise-gnip-2.0/fundamentals/engagement-api#post-insights-engagement) para obtener más información sobre cómo construir solicitudes):

```json
{
  "engagement_types": [
    "favorites",
    "replies",
    "retweets"
  ],
  "groupings": {
    "Grand Totals": {
      "group_by": [
        "engagement.type"
      ]
    }
  }
}
```

Con esta agrupación, la respuesta JSON de la Engagement API incluirá un atributo de nivel raíz `"Grand Totals"` que contiene los totales generales por tipo de métricas:

```json
{
  "Grand Totals": {
    "favorites": "12",
    "replies": "2",
    "retweets": "2"
  }
}
```

Para generar una serie temporal de 4 horas de métricas para una sola Publicación agrupadas por id de Publicación, la siguiente especificación de Grouping se incluiría en la solicitud:

```json
{
  "start": "2016-02-10T17:00:00Z",
  "end": "2016-02-10T21:00:00Z",
  "tweet_ids": [
    "697506383516729344"
  ],
  "engagement_types": [
    "impressions",
    "engagements"
  ],
  "groupings": {
    "Tweets_MetricType_TimeSeries": {
      "group_by": [
        "tweet.id",
        "engagement.type",
        "engagement.hour"
      ]
    }
  }
}
```

Con esta agrupación, la respuesta JSON de la Engagement API incluirá un atributo en la raíz `"Tweets_MetricType_TimeSeries"` que contiene las métricas desglosadas por id de la Publicación, luego por tipo de métrica y la correspondiente serie temporal por horas:

```json
{
  "Tweets_MetricType_TimeSeries": {
    "697506383516729344": {
      "impressions": {
        "2016-02-10": {
          "17": "551",
          "18": "412",
          "19": "371",
          "20": "280"
        }
      },
      "engagements": {
        "2016-02-10": {
          "17": "8",
          "18": "6",
          "19": "3",
          "20": "0"
        }
      }
    }
  }
}
```

<div id="frequently-asked-questions">
  ## Preguntas frecuentes
</div>

`Enterprise`

<div id="engagement-api">
  ### Engagement API
</div>

<AccordionGroup>
  <Accordion title="¿Cómo puedo acceder a la Engagement API?">
    El acceso a la Engagement API se proporciona mediante una suscripción Enterprise. Completa [este formulario](/es/x-api/enterprise-gnip-2.0/enterprise-gnip) para ponerte en contacto con nuestro equipo de ventas.
  </Accordion>

  <Accordion title="¿Cómo se realiza el seguimiento de mi uso por '@handle'?">
    Si tu contrato incluye un límite para la cantidad de handles únicos que se pueden usar con la Engagement API, el sistema interno de X llevará un registro de la cantidad de usuarios autenticados propietarios de Publicaciones que se consultan con la Engagement API. Los clientes también deben realizar el seguimiento de este número único en el lado del cliente. Actualmente, no existe una API de uso ni una interfaz para comprobar el uso de @handle para la Engagement API. El sistema no bloqueará excesos si se solicitan más @handles de los contratados. Al final del mes de facturación, el número de @handles únicos consultados se compara con la cantidad contratada y se cobrará un recargo por exceso de acuerdo con los términos del contrato.
  </Accordion>

  <Accordion title="¿Puedo comprobar mi uso de @handle para la Engagement API?">
    Actualmente, no existe una API de uso ni una interfaz para comprobar el uso de @handle para la Engagement API. El sistema no bloqueará excesos si se solicitan más @handles de los contratados. Al final del mes de facturación, el número de @handles únicos consultados se compara con la cantidad contratada y se cobrará un recargo por exceso de acuerdo con los términos del contrato.

    **El campo de metadatos `engagements` que se devuelve en el payload no es igual a la suma de todos los distintos totales de métricas de interacción. ¿Por qué ocurre esto?**

    Esto es lo esperado. El campo de metadatos `engagements` puede no correlacionarse siempre con la suma de todas las métricas de interacción individuales que devuelve la API. Esto se debe a que el campo de metadatos `engagements` puede incluir interacciones adicionales que no tienen métricas específicas desglosadas en el payload. Dicho de otro modo, sumar todos los distintos totales de métricas de interacción puede no ser igual al valor que ves en el campo de métricas `engagements` que se te devuelve en el payload.

    Puedes pensar en el campo de metadatos `engagements` como cualquier clic o interacción realizada en la Publicación.
     

    **El campo `url_clicks` en la respuesta del payload devuelve un número, cuando en realidad la Publicación no tiene una URL. ¿Cómo es posible?**

    Esto puede deberse a que una Publicación que contiene algo como un hashtag (que crea un enlace a otra página) se contará como un clic de URL si un usuario hace clic en él.
     
  </Accordion>

  <Accordion title="¿Por qué no puedo recibir datos de interacción para una Publicación específica?">
    Hay varios motivos por los que es posible que no puedas recuperar datos de interacción para una Publicación específica, entre ellos:

    * El Post ID o los Post IDs que has solicitado no están disponibles en función del token de autenticación que estás usando para recuperar datos en nombre de un tercero.
    * El Post ID o los Post IDs que has solicitado específicamente para el endpoint /totals no tienen 90 días o menos y, por lo tanto, no están disponibles para devolver impresiones o métricas de interacción.
    * El Post ID o los Post IDs que has solicitado ya no están disponibles, lo que normalmente indica que se han eliminado o que ya no están disponibles públicamente por otro motivo.

    Revisa los diferentes [mensajes de error](/es/x-api/enterprise-gnip-2.0/fundamentals/engagement-api#error-messages) que probablemente recibirás en cualquiera de los casos anteriores.
  </Accordion>

  <Accordion title="¿Cómo puedo gestionar la limitación de frecuencia con la Engagement API?">
    Puedes usar la información `x-per-minute-limit` y `x-per-minute-remaining` que se devuelve en el encabezado de la respuesta cuando haces una solicitud a la Engagement API para supervisar tu consumo.

    `x-per-minute-limit` te indica cuál es tu asignación y `x-per-minute-remaining` te indica cuántas llamadas te quedan.
  </Accordion>
</AccordionGroup>

<div id="error-troubleshooting-guide">
  ### Guía para la resolución de errores
</div>

<AccordionGroup>
  <Accordion title="Tengo problemas para autenticarme">
    Asegúrate de revisar nuestras [instrucciones sobre autenticación](/es/x-api/enterprise-gnip-2.0/fundamentals/engagement-api#authentication) con la Engagement API.
  </Accordion>

  <Accordion title="He proporcionado la clave y el secreto de consumidor correctos, así como el token de acceso y el secreto del token de acceso, pero se devuelve el siguiente error. ¿Qué puedo hacer?">
    ```bash
    [
        Your account could not be authenticated. Reason: Unknown Authorization Type;
    ]
    ```

    Asegúrate de no usar ningún token de acceso ni secretos cuando intentes autenticarte con el endpoint /totals. Esto se debe a que, si incluyes estos tokens y estás intentando extraer contenido de una Publicación que no está asociada a estos tokens, probablemente recibirás un error como:

    ```bash
    [
        Forbidden to access tweets: 1054424731825229824;
    ]
    ```
  </Accordion>
</AccordionGroup>

<div id="still-cant-find-what-youre-looking-for">
  ### ¿Aún no encuentras lo que buscas?
</div>

<AccordionGroup>
  <Accordion title="Tengo una pregunta que aún no ha sido respondida">
    Ponte en contacto con el soporte técnico y te responderemos lo antes posible.
  </Accordion>
</AccordionGroup>

<div id="api-reference">
  ## Referencia de la API
</div>

<div id="post-insightsengagement">
  ### **POST insights/engagement**
</div>

<div id="methods">
  #### **Métodos**
</div>

| Método | Descripción |
| :--- | :--- |
| [POST /insights/engagement/totals](#Totals) | Recupera las impresiones y las interacciones totales de una colección de Publicaciones. |
| [POST /insights/engagement/historical](#Historical) | Recupera las impresiones y las interacciones de una colección de Publicaciones durante un período de hasta 4 semanas de duración, desde el 1 de septiembre de 2014. |
| [POST /insights/engagement/28hr](#api-28hr) | Recupera las impresiones y las interacciones de una colección de Publicaciones de las últimas 28 horas. |

<div id="authentication">
  #### **Autenticación**
</div>

La Engagement API requiere el uso de HTTPS y admite tanto User Context como Application-Only OAuth. La mayoría de las solicitudes a la Engagement API requieren el uso de 3-Legged OAuth (una versión específica de User Context), lo que significa que debes usar la consumer key y secret de la aplicación que haya sido registrada y aprobada para el acceso a la Engagement API por tu account manager de Twitter, así como el access token y el access token secret de los propietarios de la Publicación para llamar al endpoint. Las siguientes solicitudes requieren este tipo de OAuth:

* Cualquier solicitud a /totals para obtener los tipos de métricas de Impresiones e Interacciones (Engagements), que se limitan a Publicaciones propias
* Cualquier solicitud a /28hr
* Cualquier solicitud a /historical

Algunas solicitudes a la Engagement API se pueden realizar usando Application-Only OAuth, lo que significa que solo necesitas proporcionar tu consumer key y secret, o un Bearer Token. La siguiente solicitud se puede realizar con este tipo de OAuth:

* Cualquier solicitud a /totals para obtener los tipos de métricas de Favoritos, Respuestas, Retweets o Vistas de video, que se pueden recuperar para cualquier Publicación

Para cualquier solicitud, deberás configurar una aplicación de Twitter y la correspondiente API key usando la consola de administración de aplicaciones disponible en [developer.x.com](https://developer.x.com/en/portal/dashboard).

Ten en cuenta: puedes ver y editar tus [aplicaciones de Twitter](/es/resources/fundamentals/developer-apps) existentes a través del [panel de control de aplicaciones de Twitter](https://developer.x.com/en/apps) si has iniciado sesión en tu cuenta de Twitter en developer.x.com.

Una vez que hayas configurado tu aplicación, el id de la aplicación deberá ser aprobado por tu account representative para que tu aplicación pueda realizar solicitudes a la Engagement API. Los tokens de acceso deben utilizarse para representar al “usuario actual”, y las solicitudes realizadas en nombre de otro usuario deben firmarse con un token válido. Asegúrate de [codificar los caracteres reservados](https://tools.ietf.org/html/rfc3986) adecuadamente dentro de las URL y los cuerpos de las solicitudes POST antes de preparar las cadenas base de firma (signature base strings) de OAuth.

Para obtener más información sobre cómo comenzar con OAuth, visita los siguientes enlaces:

* [Descripción general de OAuth](/es/resources/fundamentals/authentication)
* [Uso de 3-Legged OAuth, también conocido como User Context](/es/resources/fundamentals/authentication#obtaining-access-tokens-using-3-legged-oauth-flow)
* [Uso de Application-Only OAuth](/es/resources/fundamentals/authentication#bearer-token-also-known-as-app-only)

<div id="post-insightsengagementtotals">
  #### **POST /insights/engagement/totals**
</div>

El endpoint de totales permite obtener las impresiones y las interacciones totales actuales de una colección de hasta 250 Publicaciones a la vez.

|                                              |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| :------------------------------------------- | :---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **Método de la solicitud**                   | POST HTTP                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| **URL**                                      | `https://data-api.x.com/insights/engagement/totals`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| **Tipo de contenido**                        | `application/json`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| **Compresión**                               | Gzip. Para realizar una solicitud con compresión Gzip, incluye un encabezado Accept-Encoding en la solicitud de conexión.  <br />El encabezado debería verse de la siguiente manera:  <br />  <br />`Accept-Encoding: gzip`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| **Formato de la solicitud POST**             | Las solicitudes se pueden enviar como una petición POST cuyo cuerpo es un objeto JSON que contiene una colección de ID de Publicación y una agrupación deseada. La petición POST se formatea como un arreglo que incluye los objetos `tweets`, `engagements` y `groupings`. Cada solicitud puede tener un máximo de 250 ID de Publicación.  <br />  <br />Un ejemplo de cuerpo de la petición POST es:  <br />  <br /><br />  &#123;<br />    &quot;tweet&#95;ids&quot;: [<br />        &quot;ID de Publicación 1&quot;,<br />        &quot;ID de Publicación 2&quot;,<br />        &quot;ID de Publicación 3&quot;<br />    ],<br />      &quot;engagement&#95;types&quot;: [<br />        &quot;impressions&quot;,<br />        &quot;engagements&quot;,<br />        &quot;favorites&quot;,<br />        &quot;quote&#95;tweets&quot;<br />    ],<br />    &quot;groupings&quot;: &#123;<br />      &quot;nombre de agrupación&quot;: &#123;<br />        &quot;group&#95;by&quot;: [<br />          &quot;tweet.id&quot;,<br />          &quot;engagement.type&quot;<br />        ]<br />      &#125;<br />    &#125;<br />  &#125;                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| **ID de publicaciones**                      | Una matriz (array) que incluye los ids de las Publicaciones cuya información de interacción se va a consultar. Ten en cuenta que solo puedes solicitar datos de Publicaciones que hayan sido creadas por el @handle que se está autenticando. Se pueden incluir hasta 250 Publicaciones por solicitud y los ids de las Publicaciones deben estar representados como cadenas.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| **Tipos de métricas de interacción**         | Una matriz que incluye los tipos de métricas de interacción que se desean consultar. El endpoint Totals solo admite los siguientes tipos de interacción: `impressions`, `engagements`, `favorites`, `retweets`, `quote_tweets`, `replies`, `video_views`.  <br />El endpoint `/totals` permite recuperar `impressions` y `engagements` para Publicaciones creadas en los últimos 90 días, y `favorites`, `retweets`, `quote_tweets`, `replies` y `video_views` para cualquier Publicación.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| **Agrupaciones**                             | Los resultados de la Engagement API pueden devolverse en distintos grupos para adaptarse mejor a tus necesidades. Puedes incluir un máximo de 3 agrupaciones por solicitud.  <br />  <br />Para cada agrupación, puedes definir un nombre de agrupación personalizado para que sea más fácil hacer referencia a este tipo de agrupación en tu aplicación.  <br />  <br />Una vez que hayas definido un nombre de agrupación, puedes elegir agrupar por `tweet.id` y/o `engagement.type`.  <br />  <br />Las agrupaciones se aplican de forma secuencial, de modo que puedes cambiar el formato de resultado deseado modificando el orden de tus valores de group&#95;by. Un ejemplo de agrupación que mostrará las métricas separadas por id de Publicación y tipo de métrica se ve así:  <br />  <br /><br />  &quot;groupings&quot;: &#123;<br />      &quot;my grouping name&quot;: &#123;<br />        &quot;group&#95;by&quot;: [<br />          &quot;tweet.id&quot;,<br />          &quot;engagement.type&quot;<br />        ]<br />      &#125;<br />    &#125;                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| **Límite de tamaño de la solicitud POST**    | Se pueden hacer solicitudes de hasta 250 IDs de Publicaciones a la vez.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| **Formato de la respuesta**                  | JSON. El encabezado de tu solicitud debe indicar que la respuesta será en formato JSON.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| **Límite de solicitudes**                    | Tendrás un límite de uso por minuto, según lo especificado en tu contrato de acuerdo con tu nivel de acceso.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| **Ejemplo de solicitud (métricas públicas)** | curl --request POST <br />  --url [https://data-api.x.com/insights/engagement/totals](https://data-api.x.com/insights/engagement/totals) <br />  --header &#39;accept-encoding: gzip&#39; <br />  --header &#39;authorization: Bearer &#39; <br />  --header &#39;content-type: application/json&#39; <br />  --data &#39;&#123;<br />                &quot;tweet&#95;ids&quot;: [<br />                    &quot;1070059276213702656&quot;,&quot;1021817816134156288&quot;,&quot;1067094924124872705&quot;<br />                ],<br />                &quot;engagement&#95;types&quot;: [<br />                    &quot;favorites&quot;,&quot;retweets&quot;,&quot;replies&quot;,&quot;quote&#95;tweets&quot;,&quot;video&#95;views&quot;<br />                ],<br />                &quot;groupings&quot;: &#123;<br />                    &quot;perTweetMetricsUnowned&quot;: &#123;<br />                        &quot;group&#95;by&quot;: [<br />                            &quot;tweet.id&quot;,<br />                            &quot;engagement.type&quot;<br />                        ]<br />                    &#125;<br />                &#125;<br />            &#125; <br />  --verbose <br />  --compressed                                                                                                                                                                                                                                                                                                                                                       |
| **Ejemplo de solicitud**                     | curl --request POST <br />  --url [https://data-api.x.com/insights/engagement/totals](https://data-api.x.com/insights/engagement/totals) <br />  --header &#39;accept-encoding: gzip&#39; <br />  --header &#39;authorization: OAuth oauth&#95;consumer&#95;key=&quot;consumer-key-for-app&quot;,oauth&#95;nonce=&quot;generated-nonce&quot;,oauth&#95;signature=&quot;generated-signature&quot;,oauth&#95;signature&#95;method=&quot;HMAC-SHA1&quot;, oauth&#95;timestamp=&quot;generated-timestamp&quot;,oauth&#95;token=&quot;access-token-for-authed-user&quot;, oauth&#95;version=&quot;1.0&quot;&#39; <br />  --header &#39;content-type: application/json&#39; <br />  --data &#39;&#123;<br />                &quot;tweet&#95;ids&quot;: [<br />                    &quot;1060976163948904448&quot;,&quot;1045709644067471360&quot;<br />                ],<br />                &quot;engagement&#95;types&quot;: [<br />                    &quot;favorites&quot;,&quot;replies&quot;,&quot;retweets&quot;,&quot;video&#95;views&quot;,&quot;impressions&quot;,&quot;engagements&quot;<br />                ],<br />                &quot;groupings&quot;: &#123;<br />                    &quot;perTweetMetricsOwned&quot;: &#123;<br />                        &quot;group&#95;by&quot;: [<br />                            &quot;tweet.id&quot;,<br />                            &quot;engagement.type&quot;<br />                        ]<br />                    &#125;<br />                &#125;<br />            &#125;&#39; <br />  --verbose <br />  --compressed |
| **Ejemplo de respuesta (métricas públicas)** | &#123;<br />  &quot;perTweetMetricsUnowned&quot;: &#123;<br />    &quot;1021817816134156288&quot;: &#123;<br />      &quot;favorites&quot;: &quot;530&quot;,<br />      &quot;quote&#95;tweets&quot;: &quot;79&quot;,<br />      &quot;replies&quot;: &quot;147&quot;,<br />      &quot;retweets&quot;: &quot;323&quot;,<br />      &quot;video&#95;views&quot;: &quot;0&quot;<br />    &#125;,<br />    &quot;1067094924124872705&quot;: &#123;<br />      &quot;favorites&quot;: &quot;1360&quot;,<br />      &quot;quote&#95;tweets&quot;: &quot;29&quot;,<br />      &quot;replies&quot;: &quot;56&quot;,<br />      &quot;retweets&quot;: &quot;178&quot;,<br />      &quot;video&#95;views&quot;: &quot;5754512&quot;<br />    &#125;,<br />    &quot;1070059276213702656&quot;: &#123;<br />      &quot;favorites&quot;: &quot;69&quot;,<br />      &quot;quote&#95;tweets&quot;: &quot;5&quot;,<br />      &quot;replies&quot;: &quot;7&quot;,<br />      &quot;retweets&quot;: &quot;26&quot;,<br />      &quot;video&#95;views&quot;: &quot;0&quot;<br />    &#125;<br />  &#125;<br />&#125;                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| **Ejemplo de respuesta**                     | &#123;<br />  &quot;perTweetMetricsOwned&quot;: &#123;<br />    &quot;1045709644067471360&quot;: &#123;<br />      &quot;engagements&quot;: &quot;2&quot;,<br />      &quot;favorites&quot;: &quot;0&quot;,<br />      &quot;impressions&quot;: &quot;47&quot;,<br />      &quot;replies&quot;: &quot;0&quot;,<br />      &quot;retweets&quot;: &quot;8&quot;,<br />      &quot;quote&#95;tweets&quot;: &quot;5&quot;,<br />      &quot;video&#95;views&quot;: &quot;0&quot;<br />    &#125;,<br />    &quot;1060976163948904448&quot;: &#123;<br />      &quot;engagements&quot;: &quot;4&quot;,<br />      &quot;favorites&quot;: &quot;0&quot;,<br />      &quot;impressions&quot;: &quot;148&quot;,<br />      &quot;replies&quot;: &quot;1&quot;,<br />      &quot;retweets&quot;: &quot;9&quot;,<br />      &quot;quote&#95;tweets&quot;: &quot;2&quot;,<br />      &quot;video&#95;views&quot;: &quot;0&quot;<br />    &#125;<br />  &#125;<br />&#125;                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| **IDs de publicaciones no disponibles**      | En las consultas que incluyan IDs de Publicaciones que ya no estén disponibles (por ejemplo, porque se hayan eliminado), se devolverán los datos correspondientes para todas las IDs de Publicaciones disponibles y las IDs de Publicaciones no disponibles se incluirán en un arreglo llamado `unavailable_tweet_ids`. Por ejemplo:  <br /><br />  &#123;<br />    &quot;start&quot;: &quot;2015-11-17T22:00:00Z&quot;,<br />    &quot;end&quot;: &quot;2015-11-19T02:00:00Z&quot;,<br />    &quot;unavailable&#95;tweet&#95;ids&quot;: [<br />        &quot;323456789&quot;<br />    ],<br />    &quot;group1&quot;: &#123;<br />     &quot;423456789&quot;: &#123;<br />      &quot;favorites&quot;: &quot;67&quot;,<br />      &quot;replies&quot;: &quot;8&quot;,<br />      &quot;retweets&quot;: &quot;26&quot;,<br />      &quot;quote&#95;tweets&quot;: &quot;2&quot;<br />     &#125;<br />    &#125;<br />  &#125;                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |

<div id="post-insightsengagement28hr">
  #### **POST /insights/engagement/28hr**
</div>

El endpoint de 28 horas permite obtener impresiones e interacciones para una colección de hasta 25 publicaciones de las últimas 28 horas. El endpoint de 28 horas también permite solicitar todas las métricas individuales admitidas. Para ver la lista completa de métricas admitidas, consulta [Disponibilidad de métricas](https://developer.x.com/en/docs/x-api/v1/metrics/get-tweet-engagement/overview#EngagementTypes).

|                                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| :---------------------------------------- | :---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **Método de la solicitud**                | HTTP POST                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| **URL**                                   | `https://data-api.x.com/insights/engagement/28hr`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| **Tipo de contenido**                     | `application/json`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| **Compresión**                            | Gzip. Para realizar una solicitud con compresión Gzip, incluye un encabezado Accept-Encoding en la solicitud de conexión.  <br />El encabezado debe tener el siguiente aspecto:  <br />  <br />`Accept-Encoding: gzip`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| **Formato de la solicitud POST**          | Las solicitudes se pueden enviar como solicitudes POST, en las que el cuerpo es un objeto JSON que contiene una colección de IDs de Publicación y una agrupación deseada. El POST se formatea como un array con los objetos `tweets`, `engagements` y `groupings`. Cada solicitud puede tener un máximo de 25 IDs de Publicación.  <br />  <br />Un ejemplo de cuerpo de la solicitud POST es el siguiente:  <br />  <br /><br />  &#123;<br />    &quot;tweet&#95;ids&quot;: [<br />       &quot;Tweet ID 1&quot;,<br />       &quot;Tweet ID 2&quot;,<br />       &quot;Tweet ID 3&quot;<br />    ],<br />      &quot;engagement&#95;types&quot;: [<br />        &quot;impressions&quot;,<br />        &quot;engagements&quot;,<br />        &quot;url&#95;clicks&quot;,<br />        &quot;detail&#95;expands&quot;<br />    ],<br />    &quot;groupings&quot;: &#123;<br />      &quot;grouping name&quot;: &#123;<br />        &quot;group&#95;by&quot;: [<br />          &quot;tweet.id&quot;,<br />          &quot;engagement.type&quot;,<br />          &quot;engagement.hour&quot;<br />        ]<br />      &#125;<br />    &#125;<br />  &#125;                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| **ID de Publicación**                     | Una matriz que incluye los id de las Publicaciones cuya información de interacción se va a consultar. Ten en cuenta que solo puedes solicitar datos de Publicaciones que hayan sido creadas por el @handle autenticado. El endpoint de 28 horas admite un máximo de 25 Publicaciones por solicitud y los id de las Publicaciones deben representarse como cadenas.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| **Tipos de interacción**                  | Una matriz de tipos de métricas de interacción que se van a consultar.  <br />  <br />Para el endpoint de 28 horas, `impressions`, `engagements` y todos los tipos individuales de interacción son métricas compatibles. Para ver la lista completa de métricas de interacción compatibles, consulta [Engagement Data](https://developer.x.com/en/docs/x-api/v1/metrics/get-tweet-engagement/overview#AvailableData).                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| **Agrupaciones**                          | Los resultados de la Engagement API pueden devolverse en diferentes grupos para adaptarse mejor a tus necesidades. Puedes incluir un máximo de 3 agrupaciones por solicitud.  <br />  <br />Para cada agrupación, puedes definir un nombre de agrupación personalizado para que sea más fácil hacer referencia a este tipo de agrupación en tu aplicación. Una vez que hayas definido un nombre de agrupación, puedes elegir agrupar por uno o más de los siguientes valores:  <br />`tweet.id`  <br />`engagement.type`  <br />`engagement.day`  <br />`engagement.hour`  <br />Las agrupaciones se procesan de forma secuencial, de modo que puedes cambiar el formato de resultado deseado cambiando el orden de tus valores group&#95;by. Un ejemplo de agrupación que mostrará las métricas separadas por ID de Publicación, tipo de métrica y día de interacción, y tendrá este aspecto:<br /><br />  &quot;groupings&quot;: &#123;<br />    &quot;my grouping name&quot;: &#123;<br />      &quot;group&#95;by&quot;: [<br />        &quot;tweet.id&quot;,<br />        &quot;engagement.type&quot;,<br />        &quot;engagement.day&quot;<br />      ]<br />    &#125;<br />  &#125;<br /><br />  <br />Las agrupaciones que tienen 4 elementos `group_by` solo son válidas si usan uno de los dos órdenes siguientes. Las solicitudes que tengan 4 elementos `group_by` en una sola agrupación que no sean uno de los siguientes devolverán un error. Además, solo se permitirá una agrupación con 4 elementos `group_by` por solicitud.  <br /><br />&quot;group&#95;by&quot;: [<br />    &quot;tweet.id&quot;,<br />    &quot;engagement.type&quot;,<br />    &quot;engagement.day&quot;,<br />    &quot;engagement.hour&quot;<br />  ]<br /><br />&quot;group&#95;by&quot;: [<br />    &quot;engagement.type&quot;,<br />    &quot;tweet.id&quot;,<br />    &quot;engagement.day&quot;,<br />    &quot;engagement.hour&quot;<br />  ]                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| **Límite de tamaño de la solicitud POST** | Se pueden realizar solicitudes de hasta 25 ids de publicaciones a la vez.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| **Formato de la respuesta**               | JSON. El encabezado de tu solicitud debe indicar que la respuesta se devuelva en formato JSON.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| **Límite de frecuencia**                  | Se aplicarán límites de uso por minuto, según lo especificado en tu contrato en función de tu nivel de acceso.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| **Ejemplo de solicitud**                  | curl -X POST &quot;[https://data-api.x.com/insights/engagement/28hr](https://data-api.x.com/insights/engagement/28hr)&quot; <br />  -H &#39;Accept-Encoding: gzip&#39; <br />  -H &#39;Authorization OAuth oauth&#95;consumer&#95;key=&quot;consumer-key-for-app&quot;,oauth&#95;nonce=&quot;generated-nonce&quot;,oauth&#95;signature=&quot;generated-signature&quot;,oauth&#95;signature&#95;method=&quot;HMAC-SHA1&quot;, oauth&#95;timestamp=&quot;generated-timestamp&quot;,oauth&#95;token=&quot;access-token-for-authed-user&quot;, oauth&#95;version=&quot;1.0&quot;&#39; <br />  -d &#39;&#123;<br />    &quot;tweet&#95;ids&quot;: [<br />       &quot;123456789&quot;<br />    ],<br />      &quot;engagement&#95;types&quot;: [<br />        &quot;impressions&quot;,<br />        &quot;engagements&quot;<br />    ],<br />    &quot;groupings&quot;: &#123;<br />      &quot;hourly-time-series&quot;: &#123;<br />        &quot;group&#95;by&quot;: [<br />          &quot;tweet.id&quot;,<br />          &quot;engagement.type&quot;,<br />          &quot;engagement.day&quot;,<br />          &quot;engagement.hour&quot;<br />        ]<br />      &#125;<br />    &#125;<br />  &#125;&#39;                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| **Ejemplo de respuesta**                  | &#123;<br />&quot;start&quot;:&quot;2015-09-14T17:00:00Z&quot;,<br />&quot;end&quot;:&quot;2015-09-15T22:00:00Z&quot;,<br />&quot;hourly-time-series&quot;:&#123;<br />&quot;123456789&quot;:&#123;<br />&quot;impresiones&quot;:&#123;<br />&quot;2015-09-14&quot;:&#123;<br />&quot;17&quot;:&quot;551&quot;,<br />&quot;18&quot;:&quot;412&quot;,<br />&quot;19&quot;:&quot;371&quot;,<br />&quot;20&quot;:&quot;280&quot;,<br />&quot;21&quot;:&quot;100&quot;,<br />&quot;22&quot;:&quot;19&quot;,<br />&quot;23&quot;:&quot;6&quot;<br />&#125;,<br />&quot;2015-09-15&quot;:&#123;<br />&quot;00&quot;:&quot;5&quot;,<br />&quot;01&quot;:&quot;2&quot;,<br />&quot;02&quot;:&quot;7&quot;,<br />&quot;03&quot;:&quot;3&quot;,<br />&quot;04&quot;:&quot;1&quot;,<br />&quot;05&quot;:&quot;0&quot;,<br />&quot;06&quot;:&quot;0&quot;,<br />&quot;07&quot;:&quot;0&quot;,<br />&quot;08&quot;:&quot;0&quot;,<br />&quot;09&quot;:&quot;0&quot;,<br />&quot;10&quot;:&quot;0&quot;,<br />&quot;11&quot;:&quot;0&quot;,<br />&quot;12&quot;:&quot;0&quot;,<br />&quot;13&quot;:&quot;0&quot;,<br />&quot;14&quot;:&quot;0&quot;,<br />&quot;15&quot;:&quot;0&quot;,<br />&quot;16&quot;:&quot;0&quot;,<br />&quot;17&quot;:&quot;0&quot;,<br />&quot;18&quot;:&quot;0&quot;,<br />&quot;19&quot;:&quot;0&quot;,<br />&quot;20&quot;:&quot;0&quot;,<br />&quot;21&quot;:&quot;0&quot;<br />&#125;<br />&#125;,<br />&quot;engagements&quot;:&#123;<br />&quot;2015-09-14&quot;:&#123;<br />&quot;17&quot;:&quot;0&quot;,<br />&quot;18&quot;:&quot;0&quot;,<br />&quot;19&quot;:&quot;0&quot;,<br />&quot;20&quot;:&quot;0&quot;,<br />&quot;21&quot;:&quot;0&quot;,<br />&quot;22&quot;:&quot;0&quot;,<br />&quot;23&quot;:&quot;0&quot;<br />&#125;,<br />&quot;2015-09-15&quot;:&#123;<br />&quot;00&quot;:&quot;0&quot;,<br />&quot;01&quot;:&quot;0&quot;,<br />&quot;02&quot;:&quot;0&quot;,<br />&quot;03&quot;:&quot;0&quot;,<br />&quot;04&quot;:&quot;0&quot;,<br />&quot;05&quot;:&quot;0&quot;,<br />&quot;06&quot;:&quot;0&quot;,<br />&quot;07&quot;:&quot;0&quot;,<br />&quot;08&quot;:&quot;0&quot;,<br />&quot;09&quot;:&quot;0&quot;,<br />&quot;10&quot;:&quot;0&quot;,<br />&quot;11&quot;:&quot;0&quot;,<br />&quot;12&quot;:&quot;0&quot;,<br />&quot;13&quot;:&quot;0&quot;,<br />&quot;14&quot;:&quot;0&quot;,<br />&quot;15&quot;:&quot;0&quot;,<br />&quot;16&quot;:&quot;0&quot;,<br />&quot;17&quot;:&quot;0&quot;,<br />&quot;18&quot;:&quot;0&quot;,<br />&quot;19&quot;:&quot;0&quot;,<br />&quot;20&quot;:&quot;0&quot;,<br />&quot;21&quot;:&quot;0&quot;<br />&#125;<br />&#125;<br />&#125;<br />&#125;<br />&#125; |
| **ID de publicaciones no disponibles**    | Para las consultas que incluyan IDs de Publicaciones que ya no estén disponibles (por ejemplo, porque se hayan eliminado), se devolverán los datos correspondientes para todas las IDs de Publicaciones disponibles, y las IDs de Publicaciones no disponibles se indicarán en un array llamado `unavailable_tweet_ids`. Por ejemplo:  <br /><br />  &#123;<br />    &quot;start&quot;: &quot;2015-11-17T22:00:00Z&quot;,<br />    &quot;end&quot;: &quot;2015-11-19T02:00:00Z&quot;,<br />    &quot;unavailable&#95;tweet&#95;ids&quot;: [<br />        &quot;323456789&quot;<br />    ],<br />    &quot;group1&quot;: &#123;<br />     &quot;423456789&quot;: &#123;<br />      &quot;favorites&quot;: &quot;67&quot;,<br />      &quot;replies&quot;: &quot;8&quot;,<br />      &quot;retweets&quot;: 26<br />     &#125;<br />    &#125;<br />  &#125;                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |

<div id="post-insightsengagementhistorical">
  #### **POST /insights/engagement/historical**
</div>

El endpoint histórico permite recuperar impresiones e interacciones para una colección de hasta 25 Publicaciones durante cualquier período de hasta 4 semanas de duración. Actualmente, no se pueden solicitar a la API datos anteriores al 1 de septiembre de 2014. El endpoint histórico también permite solicitar todas las métricas individuales admitidas. Para ver la lista completa de métricas admitidas, consulta [Disponibilidad de métricas](https://developer.x.com/en/docs/x-api/v1/metrics/get-tweet-engagement/overview#EngagementTypes).

|                                                     |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| :-------------------------------------------------- | :-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **Método de la solicitud**                          | HTTP POST                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| **URL**                                             | `https://data-api.x.com/insights/engagement/historical`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| **Tipo de contenido**                               | `application/json`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| **Compresión**                                      | Gzip. Para realizar una solicitud con compresión gzip, incluye un encabezado Accept-Encoding en la solicitud de conexión.  <br />El encabezado debe tener el siguiente formato:  <br />  <br />`Accept-Encoding: gzip`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| **Formato de la solicitud POST**                    | Las solicitudes se pueden enviar como una solicitud POST donde el cuerpo es un objeto JSON que contiene una colección de IDs de Publicación y una agrupación deseada. El POST se formatea como un array con los objetos `tweets`, `engagements` y `groupings`. Cada solicitud puede incluir hasta 25 IDs de Publicación. Cada solicitud puede especificarse con una fecha de inicio y de fin personalizadas de hasta cuatro semanas de duración.  <br />  <br /><br />  &#123;<br />    &quot;tweet&#95;ids&quot;: [<br />       &quot;Tweet ID 1&quot;,<br />       &quot;Tweet ID 2&quot;,<br />       &quot;Tweet ID 3&quot;<br />    ],<br />      &quot;engagement&#95;types&quot;: [<br />        &quot;impressions&quot;,<br />        &quot;engagements&quot;,<br />        &quot;url&#95;clicks&quot;,<br />        &quot;detail&#95;expands&quot;<br />    ],<br />    &quot;groupings&quot;: &#123;<br />      &quot;grouping name&quot;: &#123;<br />        &quot;group&#95;by&quot;: [<br />          &quot;tweet.id&quot;,<br />          &quot;engagement.type&quot;,<br />          &quot;engagement.hour&quot;<br />        ]<br />      &#125;<br />    &#125;<br />  &#125;                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| **Fechas de inicio y fin**                          | Se puede especificar una fecha de inicio y de fin personalizada con los valores `start` y `end` como parte de la solicitud. Debe especificar una fecha de inicio y una fecha de fin cuya duración no sea superior a 4 semanas. La fecha de inicio más antigua posible en este momento es el 1 de septiembre de 2014. No se admiten fechas de finalización en el futuro. Si no se proporcionan fechas de inicio y fin, la API usará por defecto las 4 semanas inmediatamente anteriores.  <br />  <br />El nivel de granularidad mínimo con el que se pueden devolver datos desde la Engagement API es por hora. Para cualquier solicitud realizada con valores de inicio o fin que no caigan exactamente en un límite horario, las solicitudes se ajustarán a la hora inclusiva más cercana. Por ejemplo, una solicitud con &quot;start&quot;:&quot;2015-07-01T12:24:00Z&quot; y &quot;end&quot;:&quot;2015-07-10T08:37:00Z&quot; se ajustará a &quot;start&quot;:&quot;2015-07-01T12:00:00Z&quot;,&quot;end&quot;:&quot;2015-07-10T09:00:00Z&quot;.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| **id de las publicaciones**                         | Una matriz que incluye los id de Publicación para las Publicaciones sobre las que se consultarán datos de interacción. Ten en cuenta que solo puedes solicitar datos de Publicaciones que hayan sido creadas por el @handle autenticado. El endpoint histórico de 4 semanas admite hasta un máximo de 25 Publicaciones por solicitud, y los id de Publicación deben representarse como cadenas de texto.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| **Tipos de métricas de interacción**                | un array que incluye los tipos de métricas de interacción que se van a consultar.  <br />  <br />Para el endpoint histórico de 4 semanas, `impressions`, `engagements` y todos los tipos individuales de interacción son métricas admitidas. Para ver la lista completa de métricas de interacción admitidas, consulta [Engagement Data](https://developer.x.com/en/docs/x-api/v1/metrics/get-tweet-engagement/overview#AvailableData).  <br />  <br />**Nota:** Actualmente hay tres métricas que se mostrarán como cero para las consultas realizadas antes del 15 de septiembre de 2015: `favorites`, `replies` y `retweets`.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| **Agrupaciones**                                    | Los resultados de la Engagement API se pueden obtener en diferentes grupos para adaptarse mejor a tus necesidades. Puedes incluir un máximo de 3 agrupaciones por solicitud.  <br />  <br />Para cada agrupación, puedes definir un nombre de agrupación personalizado para que sea más fácil hacer referencia a este tipo de agrupación en tu aplicación. Una vez que hayas definido un nombre de agrupación, puedes elegir agrupar por uno o más de los siguientes valores:  <br />`tweet.id`  <br />`engagement.type`  <br />`engagement.day`  <br />`engagement.hour`  <br />Las agrupaciones se procesan de forma secuencial, de modo que puedes cambiar el formato de resultado deseado cambiando el orden de tus valores group&#95;by. Un ejemplo de agrupación que mostrará las métricas separadas por ID de Publicación, tipo de métrica y día tendrá el siguiente aspecto:<br /><br />  &quot;groupings&quot;: &#123;<br />    &quot;my grouping name&quot;: &#123;<br />      &quot;group&#95;by&quot;: [<br />        &quot;tweet.id&quot;,<br />        &quot;engagement.type&quot;,<br />        &quot;engagement.day&quot;<br />      ]<br />    &#125;<br />  &#125;<br /><br />  <br />Las agrupaciones que tienen 4 elementos `group_by` solo son válidas si utilizan uno de los dos órdenes siguientes. Las solicitudes que tengan 4 elementos `group_by` en una sola agrupación que no sean uno de los siguientes devolverán un error. Además, solo se permitirá una agrupación con 4 elementos `group_by` por solicitud.  <br /><br />&quot;group&#95;by&quot;: [<br />    &quot;tweet.id&quot;,<br />    &quot;engagement.type&quot;,<br />    &quot;engagement.day&quot;,<br />    &quot;engagement.hour&quot;<br />  ]<br /><br />&quot;group&#95;by&quot;: [<br />    &quot;engagement.type&quot;,<br />    &quot;tweet.id&quot;,<br />    &quot;engagement.day&quot;,<br />    &quot;engagement.hour&quot;<br />  ] |
| **Límite de tamaño de la solicitud POST**           | Las solicitudes pueden incluir un máximo de 25 ids de Publicación a la vez.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| **Formato de la respuesta**                         | JSON. El encabezado de la solicitud debe indicar JSON como formato de la respuesta.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| **Límite de uso**                                   | Se aplicarán límites de frecuencia por minuto, según lo especificado en tu contrato y de acuerdo con tu nivel de acceso.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| **Ejemplo de solicitud**                            | curl -XPOST &quot;[https://data-api.x.com/insights/engagement/historical](https://data-api.x.com/insights/engagement/historical)&quot; <br />  -H &#39;Accept-Encoding: gzip&#39; <br />  -H &#39;Authorization OAuth oauth&#95;consumer&#95;key=&quot;consumer-key-for-app&quot;,oauth&#95;nonce=&quot;generated-nonce&quot;,oauth&#95;signature=&quot;generated-signature&quot;,oauth&#95;signature&#95;method=&quot;HMAC-SHA1&quot;, oauth&#95;timestamp=&quot;generated-timestamp&quot;,oauth&#95;token=&quot;access-token-for-authed-user&quot;, oauth&#95;version=&quot;1.0&quot;&#39; <br />  -d &#39;&#123;<br />    &quot;start&quot;: &quot;2015-08-01&quot;,<br />    &quot;end&quot;: &quot;2015-08-15&quot;,<br />    &quot;tweet&#95;ids&quot;: [<br />       &quot;123456789&quot;,<br />       &quot;223456789&quot;,<br />       &quot;323456789&quot;<br />    ],<br />      &quot;engagement&#95;types&quot;: [<br />        &quot;impressions&quot;,<br />        &quot;engagements&quot;,<br />        &quot;url&#95;clicks&quot;,<br />        &quot;detail&#95;expands&quot;<br />    ],<br />    &quot;groupings&quot;: &#123;<br />      &quot;types-by-tweet-id&quot;: &#123;<br />        &quot;group&#95;by&quot;: [<br />          &quot;tweet.id&quot;,<br />          &quot;engagement.type&quot;<br />        ]<br />      &#125;<br />    &#125;<br />  &#125;&#39;                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| **Ejemplo de respuesta**                            | &#123;<br />    &quot;start&quot;: &quot;2015-08-01T00:00:00Z&quot;,<br />    &quot;end&quot;: &quot;2015-08-15T00:00:00Z&quot;,<br />    &quot;types-by-tweet-id&quot;: &#123;<br />      &quot;123456789&quot;: &#123;<br />        &quot;impressions&quot;: &quot;0&quot;,<br />        &quot;engagements&quot;: &quot;0&quot;,<br />        &quot;url&#95;clicks&quot;: &quot;0&quot;,<br />        &quot;detail&#95;expands&quot;: &quot;0&quot;<br />      &#125;,<br />      &quot;223456789&quot;: &#123;<br />        &quot;impressions&quot;: &quot;788&quot;,<br />        &quot;engagements&quot;: &quot;134&quot;,<br />        &quot;url&#95;clicks&quot;: &quot;30&quot;,<br />        &quot;detail&#95;expands&quot;: &quot;1323&quot;<br />      &#125;,<br />      &quot;323456789&quot;: &#123;<br />        &quot;impressions&quot;: &quot;4&quot;,<br />        &quot;engagements&quot;: &quot;0&quot;,<br />        &quot;url&#95;clicks&quot;: &quot;2&quot;,<br />        &quot;detail&#95;expands&quot;: &quot;0&quot;<br />      &#125;<br />    &#125;<br />  &#125;                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| **Identificadores de Publicaciones no disponibles** | Para las consultas que incluyan IDs de Publicación que hayan dejado de estar disponibles (por ejemplo, porque se hayan eliminado), se devolverán los datos correspondientes para todas las IDs de Publicación disponibles y las IDs de Publicación no disponibles se incluirán en un arreglo llamado `unavailable_tweet_ids`. Por ejemplo:<br /><br />&#123;<br />    &quot;start&quot;: &quot;2015-11-17T22:00:00Z&quot;,<br />    &quot;end&quot;: &quot;2015-11-19T02:27:50Z&quot;,<br />    &quot;unavailable&#95;tweet&#95;ids&quot;: [<br />        &quot;323456789&quot;<br />    ],<br />    &quot;group1&quot;: &#123;<br />     &quot;423456789&quot;: &#123;<br />      &quot;favorites&quot;: &quot;67&quot;,<br />      &quot;replies&quot;: &quot;8&quot;,<br />      &quot;retweets&quot;: 26<br />     &#125;<br />    &#125;<br />  &#125;                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |

<div id="response-codes">
  #### **Códigos de respuesta**
</div>

| Estado | Texto | Descripción |
| :--- | :--- | :--- |
| 200 | OK  | La solicitud se realizó correctamente. |
| 400 | Bad Request | Generalmente, esta respuesta se debe a la presencia de JSON no válido en la solicitud o a que la solicitud no envió ningún cuerpo (payload) JSON. |
| 401 | Unauthorized | La autenticación HTTP falló debido a credenciales no válidas. Verifica tus claves y tokens OAuth. |
| 404 | Not Found | El recurso no se encontró en la URL a la que se envió la solicitud, probablemente porque se usó una URL incorrecta. |
| 429 | Too Many Requests | Tu aplicación superó el límite de solicitudes a la API. |
| 500 | Internal Server Error | Hubo un error del lado de Gnip. Vuelve a intentar tu solicitud usando un patrón de reintentos con retroceso exponencial. |
| 502 | Proxy Error | Hubo un error del lado de Gnip. Vuelve a intentar tu solicitud usando un patrón de reintentos con retroceso exponencial. |
| 503 | Service Unavailable | Hubo un error del lado de Gnip. Vuelve a intentar tu solicitud usando un patrón de reintentos con retroceso exponencial. |

<div id="error-messages">
  #### **Mensajes de error**
</div>

En distintos escenarios, la Engagement API generará mensajes de error específicos de la situación para los cuales tu Aplicación debe estar preparada. La siguiente tabla incluye ejemplos comunes de estos mensajes de error y cómo deberías interpretarlos. Ten en cuenta que, en muchos casos, la Engagement API devolverá resultados parciales para los datos disponibles con mensajes de error específicos como parte de una respuesta 200 OK con más información.

| Mensaje de error | Descripción |
| :--- | :--- |
| `"errors":["Your account could not be authenticated. Reason: Access token not found"]` | Un error en el componente de autenticación de la solicitud. El campo &quot;Reason&quot; debería proporcionar información útil para solucionar el error. En los casos en los que no puedas resolverlo, envía el error completo, incluido el &quot;Reason&quot;, a nuestro equipo de soporte. |
| `"errors":["1 Tweet ID(s) are unavailable"],"unavailable_tweet_ids": ["TWEET_IDS"]` | El o los id de Publicación que has solicitado ya no están disponibles, lo que suele indicar que se han eliminado o que ya no están disponibles públicamente por algún otro motivo. |
| `"errors":["Impressions & engagements for tweets older than 90 days (*TIME_PERIOD*) are not supported"],"unsupported_for_impressions_engagements_tweet_ids":[*TWEET_IDS*]` | El o los id de Publicación que has solicitado específicamente para el endpoint /totals no tienen 90 días o menos y, por lo tanto, no están disponibles para devolver las métricas de impresiones o interacciones. |
| `"errors":["Forbidden to access tweets: *TWEET_IDS*"]` | El o los id de Publicación que has solicitado no están disponibles según el token de autenticación que estás usando para recuperar datos en nombre de un tercero. |