---
keywords: ["Account Activity API", "AAA", "webhooks", "eventos de la cuenta", "actividad de usuario", "eventos en tiempo real", "suscripciones a la actividad", "eventos de webhook"]
---

<div id="v2-account-activity-api">
  # API de actividad de la cuenta v2
</div>

<Note>
  La API de actividad de la cuenta v2 ya está disponible en [**Pro**](https://developer.x.com/en/portal/products).
</Note>

<div id="overview">
  ## Descripción general
</div>

La API Account Activity (AAA) ofrece una forma de recibir eventos en tiempo real relacionados con cuentas de usuario de X mediante webhooks. Al suscribir cuentas de usuario específicas a un webhook preconfigurado, tu aplicación puede recibir notificaciones de diversas actividades, como Publicaciones, Mensajes Directos, Me gusta, seguimientos, bloqueos y más, de una o varias de tus cuentas propias o suscritas a través de una única conexión.\
Esta API se usa comúnmente para crear aplicaciones que necesitan reaccionar de forma instantánea a las acciones de los usuarios o mantener un estado actualizado en función de la actividad del usuario. Recibirás todas las actividades relacionadas que se indican a continuación para cada suscripción de usuario en el webhook que hayas registrado:

<div id="activity-types">
  ## Tipos de actividad
</div>

* **Publicaciones** (del usuario)
* **Eliminaciones de Publicaciones** (del usuario)
* **@menciones** (al usuario)
* **Respuestas** (al usuario o del usuario)
* **Republicaciones** (del usuario o relacionadas con el usuario)
* **Publicaciones citadas** (del usuario o relacionadas con el usuario)
* **Republicaciones de Publicaciones citadas** (del usuario o relacionadas con el usuario)
* **Me gusta** (del usuario o relacionados con el usuario)
* **Nuevos seguimientos** (del usuario o hacia el usuario)
* **Dejar de seguir** (del usuario o hacia el usuario)
* **Bloqueos** (del usuario o hacia el usuario)
* **Desbloqueos** (del usuario o hacia el usuario)
* **Silenciamientos** (del usuario o hacia el usuario)
* **Anulaciones de silencio** (del usuario o hacia el usuario)
* **Mensajes Directos enviados** (por el usuario)
* **Mensajes Directos recibidos** (por el usuario)
* **Indicadores de escritura** (para el usuario)
* **Confirmaciones de lectura** (para el usuario)
* **Revocaciones de suscripción** (por el usuario)

**Nota**: No entregamos datos de la cronología de inicio (home timeline) a través de la Account Activity API. Usa el endpoint de cronología de Publicaciones de usuario por ID de usuario para obtener estos datos.

<div id="feature-summary">
  ## Resumen de características
</div>

| Nivel | Precio | Número de suscripciones únicas | Número de webhooks |
| :----- | :----- | :----- | :----- |
| Pro | 5000 USD / mes | 3 | 1 |
| Enterprise | [Comunícate con el equipo de ventas](/es/enterprise/forms/enterprise-api-interest) | 5000+ | 5+ |

Este documento se centra en gestionar las suscripciones de usuarios asociadas con tus webhooks mediante los endpoints de la Account Activity API v2.

<div id="manage-subscriptions">
  ## Administrar suscripciones
</div>

La Account Activity API proporciona mensajes JSON a través de webhooks cada vez que se produzcan eventos asociados con cuentas de X suscritas a tu servicio. X envía esas actividades a tu webhook registrado. En los siguientes pasos, aprenderás cómo configurar y administrar suscripciones para cuentas de usuario.

<Warning>
  Actualmente, Account Activity API v2 no es compatible con User Auth 2.0. Estamos trabajando para resolverlo y actualizaremos nuestra documentación cuando sea compatible con OAuth 2.0.
</Warning>

<div id="1-create-an-x-app">
  ### 1. Crea una aplicación de X
</div>

Crea una aplicación de X con una cuenta de desarrollador aprobada desde el [portal para desarrolladores](https://developer.x.com/en/portal/products/enterprise). Si creas la aplicación en nombre de tu empresa, utiliza una cuenta corporativa de X.

* Habilita “Read, Write, and Access direct messages” en la pestaña de permisos de la página de tu aplicación.
* En la pestaña &quot;Keys and Access Tokens&quot;, anota la **Consumer Key (API Key)**, **Consumer Token (API Secret)** y **Bearer Token** de tu aplicación.
* Genera el **Access Token** y el **Access Token Secret** de tu aplicación. Estos son necesarios para suscribirte a cuentas de usuario.
* Consulta [Obtaining Access Tokens](https://developer.x.com/en/docs/authentication) si no estás familiarizado con X Sign-in y los contextos de usuario.
* Anota el id numérico de tu aplicación en la página &quot;Apps&quot; del portal para desarrolladores. Este es necesario al solicitar acceso a la Account Activity API.

<div id="2-get-account-activity-api-access">
  ### 2. Obtener acceso a Account Activity API
</div>

La Account Activity API está disponible únicamente en el nivel Enterprise. Envía una solicitud de acceso a Enterprise a través del [portal para desarrolladores](https://developer.x.com/en/portal/products/enterprise).

<div id="3-register-a-webhook">
  ### 3. Registrar un webhook
</div>

Para recibir eventos de Account Activity, debes registrar un webhook con una URL HTTPS accesible públicamente. Consulta la documentación de la API de Webhooks v2 para obtener detalles sobre cómo desarrollar una aplicación consumidora de webhooks, registrar un webhook, protegerlo y gestionar los Challenge-Response Checks (CRC).

* Asegúrate de que tu webhook esté configurado para manejar solicitudes POST con cargas de eventos codificadas en JSON.
* Obtén el **webhook&#95;id** de la respuesta de registro del webhook, ya que se requiere para gestionar las suscripciones.

<div id="4-validate-setup">
  ### 4. Validar la configuración
</div>

Para validar que tu aplicación y webhook estén configurados correctamente:

* Suscribe una cuenta de usuario a tu webhook (consulta &quot;Adding a Subscription&quot; más abajo).
* Marca como favorita una Publicación de una de las cuentas de X a las que tu aplicación está suscrita.
* Deberías recibir un payload favorite&#95;events mediante una solicitud POST a la URL de tu webhook.
* **Nota**: La entrega de eventos puede tardar hasta 10 segundos en comenzar después de agregar una suscripción.

<div id="important-notes">
  ### Notas importantes
</div>

* **Autenticación**: Al suscribir usuarios, usa la consumer key, consumer secret, el access token y el access token secret de la cuenta del usuario.
* **Mensajes directos**: Todos los Mensajes directos entrantes y salientes (enviados mediante POST /2/dm&#95;conversations/with/:participant&#95;id/messages) se entregan a través de webhooks para mantener tu aplicación informada de toda la actividad de MD.
* **Duplicación de eventos**:
  * Si dos usuarios suscritos están en la misma conversación de MD, tu webhook recibe eventos duplicados (uno por usuario). Usa el campo for&#95;user&#95;id para distinguirlos.
  * Si varias aplicaciones comparten la misma URL de webhook y el mismo usuario, los eventos se envían varias veces (una por aplicación).
  * Tu aplicación debe deduplicar los eventos utilizando el event ID para manejar duplicados ocasionales.
* **Código de ejemplo**: Consulta [Account Activity API Setup](https://github.com/xdevplatform/account-activity-dashboard-enterprise/tree/master) para ver una aplicación web que muestra eventos de webhook.

<div id="managing-subscribed-users-v2-api">
  ## Administración de usuarios suscritos (API v2)
</div>

Una vez que tengas registrado un webhook con un `webhook_id` válido, puedes administrar las suscripciones de usuarios para recibir la actividad de sus cuentas. Usa los siguientes endpoints para añadir, ver o eliminar suscripciones.

<div id="adding-a-subscription">
  ### [Agregar una suscripción](https://docs.x.com/x-api/account-activity/subscribes-the-provided-application-to-all-events-for-the-provided-user-context-for-all-message-types)
</div>

**Endpoint**: POST /2/account&#95;activity/webhooks/:webhook&#95;id/subscriptions/all
**Description**: Suscribe al usuario autenticado para que reciba eventos a través del webhook especificado.
**Authentication**: OAuthUser (se requiere flujo OAuth de tres patas, que representa al usuario que se suscribe).

* **Consumer Key**: p. ej., xvz1evFS...
* **Access Token**: p. ej., 370773112-GmHxMAgYyLbN...

**Path Parameters**:

| Parameter      | Description                                              |
| :------------- | :------------------------------------------------------- |
| webhook&#95;id | El ID del webhook con el que se asociará la suscripción. |

**Request**:
bash

```
curl --request POST --url 'https://api.twitter.com/2/account_activity/webhooks/:WEBHOOK_ID/subscriptions/all' \
--header 'authorization: OAuth oauth_consumer_key="<CONSUMER_KEY>", oauth_nonce="GENERATED", oauth_signature="GENERATED", oauth_signature_method="HMAC-SHA1", oauth_timestamp="GENERATED", oauth_token="<ACCESS_TOKEN>", oauth_version="1.0"'
```

**Respuestas**:

* **Correcto (200 OK)**:
* json

```
{
  "data": {
    "subscribed": true
  }
}
```

* **Error (400 Bad Request)**:

| Motivo                      | Descripción                                                                          |
| :-------------------------- | :----------------------------------------------------------------------------------- |
| WebhookIdInvalid            | El webhook&#95;id proporcionado no se encontró o no está asociado con la aplicación. |
| DuplicateSubscriptionFailed | Ya existe una suscripción para este usuario con el webhook&#95;id especificado.      |
| SubscriptionLimitExceeded   | La aplicación ha alcanzado su límite de suscripciones entre todos los webhooks.      |

###

<div id="checking-a-subscription">
  ### [Comprobar una suscripción](https://docs.x.com/x-api/account-activity/check-if-a-subscription-exists-for-a-given-webhook-and-user)
</div>

**Endpoint**: GET /2/account&#95;activity/webhooks/:webhook&#95;id/subscriptions/all
**Description**: Verifica si el usuario autenticado está suscrito al webhook especificado.
**Authentication**: OAuthUser (se requiere flujo OAuth de tres patas).
**Path Parameters**:

| Parameter      | Description                              |
| :------------- | :--------------------------------------- |
| webhook&#95;id | El ID del webhook que se va a comprobar. |

**Request**:
bash

```
curl --request GET --url 'https://api.twitter.com/2/account_activity/webhooks/:WEBHOOK_ID/subscriptions/all' \
--header 'authorization: OAuth oauth_consumer_key="<CONSUMER_KEY>", oauth_nonce="GENERATED", oauth_signature="GENERATED", oauth_signature_method="HMAC-SHA1", oauth_timestamp="GENERATED", oauth_token="<ACCESS_TOKEN>", oauth_version="1.0"'
```

**Respuestas**:

* **Correcto (200 OK)**:
* json

```
{
  "data": {
    "subscribed": true // o false
  }
}
```

* **Error (400 Bad Request)**:

| Motivo           | Descripción                                                                               |
| :--------------- | :---------------------------------------------------------------------------------------- |
| WebhookIdInvalid | El webhook&#95;id proporcionado no se ha encontrado o no está asociado con la aplicación. |

###

<div id="removing-subscriptions">
  ### [Removing Subscriptions](https://docs.x.com/x-api/account-activity/deactivates-a-subscription-for-the-specified-webhook-and-user-id)
</div>

**Endpoint**: DELETE /2/account&#95;activity/webhooks/:webhook&#95;id/subscriptions/:user&#95;id/all
**Description**: Desactiva la suscripción para un ID de usuario específico, lo que detiene la entrega de eventos al webhook.
**Authentication**: OAuth2 de solo Aplicación (Bearer Token).

* **Bearer Token**: p. ej., AAAAAAAAAAAA0%2EUifi76ZC9Ub0wn...

**Parámetros de ruta**:

| Parameter      | Description                                        |
| :------------- | :------------------------------------------------- |
| webhook&#95;id | El ID del webhook que contiene la suscripción.     |
| user&#95;id    | El ID numérico del usuario al que se dará de baja. |

**Request**:
bash

```
curl --request DELETE --url 'https://api.twitter.com/2/account_activity/webhooks/:WEBHOOK_ID/subscriptions/:USER_ID/all' \
--header 'authorization: Bearer <BEARER_TOKEN>'
```

**Respuestas**:

* **Éxito (200 OK)**:
* json

```
{
  "data": {
    "subscribed": false
  }
}
```

* **Error (400 Solicitud no válida)**:

| Reason               | Description                                                                                   |
| :------------------- | :-------------------------------------------------------------------------------------------- |
| SubscriptionNotFound | No existe ninguna suscripción para el user&#95;id especificado en el webhook&#95;id indicado. |
| WebhookIdInvalid     | El webhook&#95;id proporcionado no se encontró o no está asociado a la aplicación.            |

<div id="viewing-all-subscriptions">
  ### [Ver todas las suscripciones](https://docs.x.com/x-api/account-activity/get-a-list-of-the-current-all-activity-type-subscriptions-for-the-specified-webhook)
</div>

**Endpoint**: GET /2/account&#95;activity/webhooks/:webhook&#95;id/subscriptions/all/list
**Description**: Obtiene una lista de todos los id de usuario que actualmente están suscritos al webhook especificado.
**Authentication**: OAuth2 App Only Bearer Token.
**Path Parameters**:

| Parameter      | Description                                            |
| :------------- | :----------------------------------------------------- |
| webhook&#95;id | El id del webhook cuyas suscripciones se van a listar. |

**Request**:
bash

```
curl --request GET --url 'https://api.twitter.com/2/account_activity/webhooks/:WEBHOOK_ID/subscriptions/all/list' \
--header 'authorization: Bearer <BEARER_TOKEN>'
```

**Respuestas**:

* **Éxito (200 OK)**:
* json

```
{
  "data": {
    "application_id": "<your app id>",
    "webhook_id": "<webhook id>",
    "webhook_url": "<the webhook's callback url>",
    "subscriptions": [
      { "user_id": "<user_id_1>" },
      { "user_id": "<user_id_2>" }
    ]
  }
}
```

* **Error (400 Bad Request)**:

| Reason           | Description                                                                          |
| :--------------- | :----------------------------------------------------------------------------------- |
| WebhookIdInvalid | El webhook&#95;id proporcionado no se encontró o no está asociado con la aplicación. |

###

<div id="subscriptions-count">
  ### [Subscriptions Count](https://docs.x.com/x-api/account-activity/get-a-count-of-subscriptions-that-are-currently-active-on-your-account)
</div>

**Endpoint**: GET /2/account&#95;activity/subscriptions/count
**Description**: Devuelve la cantidad total de suscripciones activas y el límite aprovisionado para la aplicación que se está autenticando.
**Authentication**: OAuth2 App Only Bearer Token.
**Request**:
bash

```
curl --request GET --url 'https://api.twitter.com/2/account_activity/subscriptions/count' \
--header 'authorization: Bearer <BEARER_TOKEN>'
```

**Respuestas**:

* **Correcto (200 OK)**:
* JSON

```
{
  "data": {
    "account_name": "<your application name>",
    "provisioned_count": "<subscription limit allocated>",
    "subscriptions_count_all": "<current active subscription count>",
    "subscriptions_count_direct_messages": "0" // Las suscripciones exclusivas de MD ya no son compatibles
  }
}
```

<div id="replay">
  ## [Repetición](https://docs.x.com/x-api/account-activity/request-activity-replay)
</div>

AAAv2 proporciona funcionalidad de repetición que te permite recuperar eventos pasados para un intervalo de tiempo especificado y volver a enviarlos a tu webhook. Esto es útil para recuperar eventos perdidos debido a tiempos de inactividad.

**Endpoint**: POST /2/account&#95;activity/replay/webhooks/:webhook&#95;id/subscriptions/all

**Descripción**: Inicia una tarea de repetición

**Autenticación**: OAuth2 Bearer Token de solo aplicación (App-only)

**Parámetros de ruta**:

| Parámetro      | Descripción                                           |
| :------------- | :---------------------------------------------------- |
| webhook&#95;id | El ID del webhook en el que se iniciará la repetición |

**Parámetros de consulta**:

| Parámetro     | Descripción                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| :------------ | :--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| from&#95;date | La marca de tiempo UTC más antigua (de inicio) a partir de la cual se proporcionarán los eventos; debe estar en el formato &quot;yyyymmddhhmm&quot;. La marca de tiempo tiene granularidad de minutos y es inclusiva (es decir, 12:00 incluye el minuto 00). Los tiempos válidos deben estar dentro de las últimas 24 horas, en hora UTC, y no ser más recientes que 31 minutos antes del momento actual. Se recomienda que from&#95;date y to&#95;date estén dentro de un intervalo de aproximadamente 2 horas. |
| to&#95;date   | La marca de tiempo UTC más reciente (de fin) hasta la cual se proporcionarán los eventos; debe estar en el formato &quot;yyyymmddhhmm&quot;. La marca de tiempo tiene granularidad de minutos y es exclusiva (es decir, 12:30 no incluye el minuto 30 de la hora). Los tiempos válidos deben estar dentro de las últimas 24 horas, en hora UTC, y no ser más recientes que 10 minutos antes del momento actual.                                                                                                  |

**Respuestas**:

Éxito:

```
200

{
  "for_user_id": "<USER_ID>"
  "replay_event": {
    "job_id": <REPLAY_JOB_ID>",
    "created_at: "yyyy-mm-ddThh:mm:ss.000Z"
  }
}
```

Errores:

| Reason              | Description                                                                          |
| :------------------ | :----------------------------------------------------------------------------------- |
| QueryParamInvalid   | from&#95;date es anterior en más de 24 horas a la hora actual.                       |
| QueryParamInvalid   | from&#95;date es más reciente que to&#95;date.                                       |
| QueryParamInvalid   | from&#95;date está en el futuro.                                                     |
| QueryParamInvalid   | to&#95;date está en el futuro.                                                       |
| QueryParamInvalid   | from&#95;date o to&#95;date no tienen el formato correcto.                           |
| CrcValidationFailed | Se recibió una respuesta incorrecta de la URL del webhook durante la validación CRC. |
| ReplayConflictError | Ya hay un trabajo de repetición en curso para el webhook especificado.               |
| WebhookIdInvalid    | El webhook&#95;id proporcionado no es válido o no está asociado con la aplicación.   |

<div id="job-completed-messages">
  ### Mensajes de trabajos completados
</div>

Cuando tu trabajo de reproducción se complete correctamente, X enviará el siguiente evento de finalización del trabajo. En cuanto recibas este evento, el trabajo habrá terminado de ejecutarse y podrás enviar otro.

```
{
  "replay_job_status": {
    "webhook_id": "<WEBHOOK_ID>",
    "job_state": "Complete",
    "job_state_description": "Job completed successfully",
    "job_id": "<JOB_ID>"
  }
}
```

En caso de que tu job no se complete correctamente, devolveremos el siguiente mensaje para indicarte que vuelvas a intentar tu Replay Job. Una vez que recibas este evento, el job habrá terminado de ejecutarse y podrás enviar otro.

```
{
  "replay_job_status": {
    "webhook_id": "<WEBHOOK_ID>",
    "job_state": "Incomplete",
    "job_state_description": "El trabajo no pudo entregar todos los eventos, vuelva a intentar su trabajo de reproducción",
    "job_id": "<JOB_ID>"
  }
}
```

<div id="account-activity-data-object-structure">
  ## Estructura del objeto de datos de actividad de la cuenta
</div>

| Objeto | Detalles |
| :----- | :----- |
| for&#95;user&#95;id | Identifica la suscripción de usuario a la que está asociado el evento. |
| is&#95;blocked&#95;by | (Condicional) Solo se muestra para eventos de mención de Publicación si el usuario que menciona está bloqueado por el usuario suscrito. |
| source | El usuario que realiza la actividad (por ejemplo, el usuario que sigue, bloquea o silencia). |
| target | El usuario al que se aplica la actividad (por ejemplo, el usuario al que siguen, bloquean o silencian). |

<div id="available-activities">
  ### Actividades disponibles
</div>

| Tipo de mensaje | Detalles |
| :----- | :----- |
| tweet&#95;create&#95;events | Evento de creación de Publicación para Publicaciones, Retweets, respuestas, @menciones, Publicaciones citadas o Retweets de Publicaciones citadas. |
| favorite&#95;events | Evento de Me gusta con usuario y destinatario. |
| follow&#95;events | Evento de seguir con usuario y destinatario. |
| unfollow&#95;events | Evento de dejar de seguir con usuario y destinatario. |
| block&#95;events | Evento de bloqueo con usuario y destinatario. |
| unblock&#95;events | Evento de desbloqueo con usuario y destinatario. |
| mute&#95;events | Evento de silenciar con usuario y destinatario. |
| unmute&#95;events | Evento de dejar de silenciar con usuario y destinatario. |
| user&#95;event | Evento de revocación cuando un usuario elimina la autorización de la Aplicación (la suscripción se elimina automáticamente). |
| direct&#95;message&#95;events | Estado de DM para mensajes enviados o recibidos. |
| direct&#95;message&#95;indicate&#95;typing&#95;events | Evento de indicación de escritura en DM con usuario y destinatario. |
| direct&#95;message&#95;mark&#95;read&#95;events | Evento de lectura de DM con usuario y destinatario. |
| tweet&#95;delete&#95;events | Notificación de Publicaciones eliminadas para fines de cumplimiento. |
| spaces&#95;events | Actualmente no es compatible. Próximamente. |

<div id="payload-examples">
  ## Ejemplos de payloads
</div>

A continuación se muestran ejemplos de payload para cada evento de Account Activity.

<div id="tweet_create_events-posts-retweets-replies-quotetweets">
  ### tweet&#95;create&#95;events (Publicaciones, Retweets, Respuestas, Citas de publicaciones)
</div>

```json
{
  "for_user_id": "2244994945",
  "tweet_create_events": [
    {
      <Tweet Object>
    }
  ]
}
```

###

<div id="tweet_create_events-mentions">
  ### tweet&#95;create&#95;events (@menciones)
</div>

```json
{
  "for_user_id": "2244994945",
  "user_has_blocked": "false",
  "tweet_create_events": [
    {
      <Tweet Object>
    }
  ]
}
```

<div id="favorite_events">
  ### favorite&#95;events
</div>

```json
{
  "for_user_id": "2244994945",
  "favorite_events": [{
    "id": "a7ba59eab0bfcba386f7acedac279542",
    "created_at": "Mon Mar 26 16:33:26 +0000 2018",
    "timestamp_ms": 1522082006140,
    "favorited_status": {
      <Tweet Object>
    },
    "user": {
      <User Object>
    }
  }]
}
```

<div id="follow_events">
  ### follow&#95;events
</div>

```json
{
  "for_user_id": "2244994945",
  "follow_events": [{
    "type": "follow",
    "created_timestamp": "1517588749178",
    "target": {
      <User Object>
    },
    "source": {
      <User Object>
    }
  }]
}
```

<div id="unfollow_events">
  ### unfollow&#95;events
</div>

```json
{
  "for_user_id": "2244994945",
  "follow_events": [{
    "type": "unfollow",
    "created_timestamp": "1517588749178",
    "target": {
      <User Object>
    },
    "source": {
      <User Object>
    }
  }]
}
```

<div id="block_events">
  ### block&#95;events
</div>

```json
{
  "for_user_id": "2244994945",
  "block_events": [{
    "type": "block",
    "created_timestamp": "1518127020304",
    "source": {
      <User Object>
    },
    "target": {
      <User Object>
    }
  }]
}
```

<div id="unblock_events">
  ### unblock&#95;events
</div>

```json
{
  "for_user_id": "2244994945",
  "block_events": [{
    "type": "unblock",
    "created_timestamp": "1518127020304",
    "source": {
      <User Object>
    },
    "target": {
      <User Object>
    }
  }]
}
```

<div id="mute_events">
  ### mute&#95;events
</div>

```json
{
  "for_user_id": "2244994945",
  "mute_events": [
    {
      "type": "mute",
      "created_timestamp": "1518127020304",
      "source": {
        <User Object>
      },
      "target": {
        <User Object>
      }
    }
  ]
}
```

<div id="unmute_events">
  ### unmute&#95;events
</div>

```json
{
  "for_user_id": "2244994945",
  "mute_events": [
    {
      "type": "unmute",
      "created_timestamp": "1518127020304",
      "source": {
        <User Object>
      },
      "target": {
        <User Object>
      }
    }
  ]
}
```

<div id="user_event">
  ### user&#95;event
</div>

```json
{
  "user_event": {
    "revoke": {
      "date_time": "2018-05-24T09:48:12+00:00",
      "target": {
        "app_id": "13090192"
      },
      "source": {
        "user_id": "63046977"
      }
    }
  }
}
```

<div id="direct_message_events">
  ### direct&#95;message&#95;events
</div>

```json
{
  "for_user_id": "4337869213",
  "direct_message_events": [{
    "type": "message_create",
    "id": "954491830116155396",
    "created_timestamp": "1516403560557",
    "message_create": {
      "target": {
        "recipient_id": "4337869213"
      },
      "sender_id": "3001969357",
      "source_app_id": "13090192",
      "message_data": {
        "text": "Hello World!",
        "entities": {
          "hashtags": [],
          "symbols": [],
          "user_mentions": [],
          "urls": []
        }
      }
    }
  }],
  "apps": {
    "13090192": {
      "id": "13090192",
      "name": "FuriousCamperTestApp1",
      "url": "https://x.com/furiouscamper"
    }
  },
  "users": {
    "3001969357": {
      "id": "3001969357",
      "created_timestamp": "1422556069340",
      "name": "Jordan Brinks",
      "screen_name": "furiouscamper",
      "location": "Boulder, CO",
      "description": "Alter Ego - X PE las-opiniones-son-mías",
      "url": "https://t.co/SnxaA15ZuY",
      "protected": false,
      "verified": false,
      "followers_count": 22,
      "friends_count": 45,
      "statuses_count": 494,
      "profile_image_url_https": "https://pbs.twimg.com/profile_images/851526626785480705/cW4WTi7C_normal.jpg"
    },
    "4337869213": {
      "id": "4337869213",
      "created_timestamp": "1448312972328",
      "name": "Harrison Test",
      "screen_name": "Harris_0ff",
      "location": "Burlington, MA",
      "protected": false,
      "verified": false,
      "followers_count": 8,
      "friends_count": 8,
      "statuses_count": 240,
      "profile_image_url_https": "https://abs.twimg.com/sticky/default_profile_images/default_profile_normal.png"
    }
  }
}
```

<div id="direct_message_indicate_typing_events">
  ### direct&#95;message&#95;indicate&#95;typing&#95;events
</div>

```json
{
  "for_user_id": "4337869213",
  "direct_message_indicate_typing_events": [{
    "created_timestamp": "1518127183443",
    "sender_id": "3284025577",
    "target": {
      "recipient_id": "3001969357"
    }
  }],
  "users": {
    "3001969357": {
      "id": "3001969357",
      "created_timestamp": "1422556069340",
      "name": "Jordan Brinks",
      "screen_name": "furiouscamper",
      "location": "Boulder, CO",
      "description": "Alter Ego - X PE opinions-are-my-own",
      "url": "https://t.co/SnxaA15ZuY",
      "protected": false,
      "verified": false,
      "followers_count": 23,
      "friends_count": 47,
      "statuses_count": 509,
      "profile_image_url_https": "https://pbs.twimg.com/profile_images/851526626785480705/cW4WTi7C_normal.jpg"
    },
    "3284025577": {
      "id": "3284025577",
      "created_timestamp": "1437281176085",
      "name": "Bogus Bogart",
      "screen_name": "bogusbogart",
      "protected": true,
      "verified": false,
      "followers_count": 1,
      "friends_count": 4,
      "statuses_count": 35,
      "profile_image_url_https": "https://pbs.twimg.com/profile_images/763383202857779200/ndvZ96mE_normal.jpg"
    }
  }
}
```

<div id="direct_message_mark_read_events">
  ### direct&#95;message&#95;mark&#95;read&#95;events
</div>

```json
{
  "for_user_id": "4337869213",
  "direct_message_mark_read_events": [{
    "created_timestamp": "1518452444662",
    "sender_id": "199566737",
    "target": {
      "recipient_id": "3001969357"
    },
    "last_read_event_id": "963085315333238788"
  }],
  "users": {
    "199566737": {
      "id": "199566737",
      "created_timestamp": "1286429788000",
      "name": "Le Braat",
      "screen_name": "LeBraat",
      "location": "Denver, CO",
      "description": "data by day @X, design by dusk",
      "protected": false,
      "verified": false,
      "followers_count": 299,
      "friends_count": 336,
      "statuses_count": 752,
      "profile_image_url_https": "https://pbs.twimg.com/profile_images/936652894371119105/YHEozVAg_normal.jpg"
    },
    "3001969357": {
      "id": "3001969357",
      "created_timestamp": "1422556069340",
      "name": "Jordan Brinks",
      "screen_name": "furiouscamper",
      "location": "Boulder, CO",
      "description": "Alter Ego - X PE opinions-are-my-own",
      "url": "https://t.co/SnxaA15ZuY",
      "protected": false,
      "verified": false,
      "followers_count": 23,
      "friends_count": 48,
      "statuses_count": 510,
      "profile_image_url_https": "https://pbs.twimg.com/profile_images/851526626785480705/cW4WTi7C_normal.jpg"
    }
  }
}
```

<div id="tweet_delete_events">
  ### tweet&#95;delete&#95;events
</div>

```json
{
  "for_user_id": "930524282358325248",
  "tweet_delete_events": [
    {
      "status": {
        "id": "1045405559317569537",
        "user_id": "930524282358325248"
      },
      "timestamp_ms": "1432228155593"
    }
  ]
}
```

<div id="support-for-longform-posts">
  ## Compatibilidad con publicaciones de formato largo
</div>

La V2 Account Activity API ahora admite publicaciones de **formato largo**, que son publicaciones que superan los 280 caracteres. Cuando una publicación de formato largo se incluye en un payload de tweet&#95;create&#95;events, el campo text contiene los primeros 140 caracteres (o menos) y el campo truncated se establece en true. El contenido completo de la publicación se entrega en el objeto extended&#95;tweet, que incluye:

* full&#95;text: El texto completo de la publicación, incluidos todos los caracteres más allá del límite de 280 caracteres.
* entities: Cualquier entidad (por ejemplo, hashtags, URLs, menciones de usuarios, símbolos) que aparezca en el texto completo, incluidas las que aparezcan después del carácter 280.
* display&#95;text&#95;range: El rango de caracteres que se debe mostrar, teniendo en cuenta el texto completo.

Esto garantiza que las aplicaciones puedan procesar todo el contenido de las publicaciones de formato largo, incluidas las menciones u otras entidades que aparezcan más adelante en el texto. A continuación se muestra un ejemplo de payload de tweet&#95;create&#95;events para una publicación de formato largo:

```json
{
  "for_user_id": "1603419180975409153",
  "tweet_create_events": [
    {
      "created_at": "Mon May 19 14:01:46 +0000 2025",
      "id": 1924465506158879000,
      "id_str": "1924465506158878979",
      "text": "The Antikythera Mechanism: A Window into Ancient Ingenuity Discovered in 1901 among the wreckage of a Roman ship of… https://t.co/bzbEKj8cd8",
      "display_text_range": [
        0,
        140
      ],
      ...
      "user": {
        ...
      },
      ...
      "extended_tweet": {
        "full_text": "El Mecanismo de Anticitera: Una Ventana a la Ingenuidad Antigua Descubierto en 1901 entre los restos de un barco romano frente a la isla griega de Anticitera, el Mecanismo de Anticitera es a menudo aclamado como la primera computadora analógica del mundo. Este intrincado dispositivo de bronce, que data de alrededor del 100 a.C., ha cautivado a historiadores, arqueólogos y científicos con su diseño sofisticado y propósito misterioso. El mecanismo consiste en un complejo sistema de engranajes, meticulosamente elaborado para realizar cálculos que siguen siendo asombrosamente avanzados para su época. Su descubrimiento desafió suposiciones arraigadas sobre las capacidades tecnológicas del mundo antiguo. La función principal del Mecanismo de Anticitera parece haber sido astronómica. Podía predecir las posiciones del sol, la luna y posiblemente los planetas, rastrear eclipses lunares y solares, e incluso calcular las fechas de los Juegos Olímpicos. Los diales y punteros del dispositivo, junto con inscripciones en griego antiguo, sugieren que era una herramienta tanto para la investigación científica como para eventos culturales. Su nivel de precisión, comparable al de la relojería del siglo XIX, subraya el notable ingenio de sus creadores, probablemente del mundo helenístico. A pesar de décadas de estudio, muchas preguntas permanecen. ¿Quién lo construyó y para quién? ¿Era una obra maestra singular o parte de una tradición más amplia de dispositivos mecánicos perdidos en la historia? Las imágenes de rayos X y las técnicas computacionales modernas han revelado mucho sobre su funcionamiento interno, pero el alcance completo de sus capacidades aún se debate. Algunos proponen que se usó para predicciones astrológicas, mientras que otros lo ven como una herramienta de enseñanza para astrónomos. El Mecanismo de Anticitera se erige como un testimonio de la curiosidad e innovación humanas, uniendo los mundos antiguo y moderno. Nos recuerda que incluso en la antigüedad, las personas buscaban comprender el cosmos con herramientas que rivalizan con la complejidad de la tecnología actual. Su misterio perdurable continúa inspirando asombro e investigación, convirtiéndolo en uno de los artefactos más notables jamás desenterrados.\n@xai\n@HistoryInPics",
        "display_text_range": [
          0,
          2051
        ],
        "entities": {
          "hashtags": [],
          "urls": [],
          "user_mentions": [
            {
              "screen_name": "xai",
              "name": "xAI",
              "id": 1661523610111193000,
              "id_str": "1661523610111193088",
              "indices": [
                2032,
                2036
              ]
            },
            {
              "screen_name": "HistoryInPics",
              "name": "History Photographed",
              "id": 1582853809,
              "id_str": "1582853809",
              "indices": [
                2037,
                2051
              ]
            }
          ],
          "symbols": []
        }
      },
      ...
      "entities": {
        "hashtags": [],
        "urls": [
          {
            "url": "https://t.co/bzbEKj8cd8",
            "expanded_url": "https://twitter.com/i/web/status/1924465506158878979",
            "display_url": "twitter.com/i/web/status/1…",
            "indices": [
              117,
              140
            ]
          }
        ],
        "user_mentions": [],
        "symbols": []
      },
      ...
    }
  ]
}
```

<div id="account-activity-api-migrating-from-legacy-enterprise-to-v2">
  ## Migración de la API de actividad de la cuenta de Legacy Enterprise a v2
</div>

Consulta nuestra [guía de migración](https://docs.x.com/x-api/account-activity/migrate/overview)!

<div id="frequently-asked-questions">
  ## Preguntas frecuentes
</div>

**¿Cuáles son las ventajas de usar la Account Activity API?**

La Account Activity API usa webhooks, lo que entrega datos en tiempo real sin requerir una conexión abierta (a diferencia de las API de streaming) ni sondeos frecuentes (a diferencia de las API REST). Los beneficios incluyen:

* **Velocidad**: Entrega datos a la velocidad de X.
* **Simplicidad**: Proporciona todos los eventos de la cuenta a través de una única conexión de webhook, incluidas Publicaciones, @menciones, Respuestas, Reposts, Quote Tweets, Me gusta, DM, Follows, Blocks y Mutes.
* **Escala**: Admite todas las actividades para cuentas gestionadas sin límites de frecuencia ni topes de eventos (nivel Enterprise).

**Necesito entornos de desarrollo, staging y producción para la Account Activity API, ¿es esto posible?**

¡Sí! Puedes registrar varias URL de webhook y administrar las suscripciones por separado a través de la [V2 Webhooks API](https://docs.x.com/x-api/webhooks/introduction).

**¿Tienen alguna guía paso a paso sobre cómo comenzar a usar la Account Activity API?**

¡Sí! Consulta la [guía de introducción a Webhooks](https://docs.x.com/x-api/webhooks/introduction) y la [Account Activity API Sample Application](https://github.com/m-rosinsky/XWebhookTest/blob/main/app.py).

**¿Qué autenticación debo usar con la Account Activity API?**

Los requisitos de autenticación se especifican por endpoint. Consulta la [sección de Autenticación](https://developer.x.com/en/docs/authentication) para obtener más detalles.

**¿Recibiré actividades duplicadas si estoy suscrito a usuarios que interactúan entre sí?**

Sí. Si tu aplicación tiene suscripciones para el Usuario A y el Usuario B, y el Usuario A menciona al Usuario B en una Publicación, tu webhook recibe dos eventos (uno por usuario). Usa el campo for&#95;user&#95;id para identificar la suscripción.

**Cuando creo una suscripción a mi webhook, ¿puedo reemplazar la** /all/ **parte del endpoint con otros objetos de datos de actividad de la cuenta para limitar las actividades entregadas?**

No. El producto /all/ es la única opción y entrega todos los tipos de eventos compatibles.

**Si tengo acceso a tres webhooks, ¿puedo usar tres webhooks para cada una de las apps que he registrado para uso Enterprise?**

El límite de webhooks se establece a nivel de cuenta, no por aplicación. Por ejemplo, con tres webhooks y dos aplicaciones, podrías usar dos webhooks para una aplicación y uno para la otra, pero no tres por aplicación.

<div id="account-activity-api-reference-index">
  ## Índice de referencia de la API Account Activity
</div>

| Propósito | Endpoint V2 |
| :----- | :----- |
| Suscribe una aplicación a los eventos de una cuenta | POST /2/account&#95;activity/webhooks/:webhook&#95;id/subscriptions/all |
| Devuelve la cantidad actual de suscripciones activas | GET /2/account&#95;activity/subscriptions/count |
| Verifica si un webhook está suscrito a una cuenta | GET /2/account&#95;activity/webhooks/:webhook&#95;id/subscriptions/all |
| Devuelve una lista de las suscripciones activas actuales | GET /2/account&#95;activity/webhooks/:webhook&#95;id/subscriptions/all/list |
| Desactiva una suscripción usando OAuth solo de la aplicación | DELETE /2/account&#95;activity/webhooks/:webhook&#95;id/subscriptions/:user&#95;id/all |
| Crea un trabajo de reproducción (replay) | POST /2/account&#95;activity/replay/webhooks/:webhook&#95;id/subscriptions/all |

Para los endpoints de gestión de webhooks (registrar, ver, validar, eliminar), consulta la [documentación de la API Webhooks V2](https://docs.x.com/x-api/webhooks/introduction)