---
title: Inicio rápido
sidebarTitle: Inicio rápido
keywords: ["inicio rápido de mensajes directos", "inicio rápido de DM", "inicio rápido de búsqueda de DM", "tutorial de mensajes directos", "tutorial de DM"]
---

import { Button } from '/snippets/es/button.mdx';

<div id="getting-started-with-the-manage-direct-message-endpoints">
  ## Introducción al uso de los endpoints de gestión de Mensajes Directos
</div>

Esta guía de inicio rápido te ayudará a realizar tu primera solicitud a los endpoints de Mensajes Directos usando Postman, una herramienta para gestionar y realizar solicitudes HTTP. Para obtener más información sobre nuestras colecciones de Postman, visita nuestra guía [Uso de Postman](/es/tutorials/postman-getting-started).

Visita el repositorio de GitHub [X API v2 sample code](https://github.com/xdevplatform/Twitter-API-v2-sample-code) si quieres revisar ejemplos basados en Python. Además, los [kits de desarrollo de software (SDKs) de la plataforma para desarrolladores de X](/es/x-api/tools-and-libraries/sdks) se actualizarán para dar soporte a estos endpoints de Mensajes Directos.  

<Note>
  **Requisitos previos**

  Para completar esta guía, necesitarás un conjunto de [claves y tokens](/es/resources/fundamentals/authentication) para autenticar tu solicitud. Puedes generar estas claves y tokens siguiendo estos pasos:

  * [Regístrate para obtener una cuenta de desarrollador](https://developer.x.com/en/apply-for-access) y obtén la aprobación.
  * Crea un [Proyecto](/es/resources/fundamentals/projects) y una [aplicación de desarrollador](/es/resources/fundamentals/developer-apps) asociada en el portal para desarrolladores.
  * Navega a la página «Keys and tokens» de tu App para generar las credenciales necesarias. Asegúrate de guardar todas las credenciales en un lugar seguro.
</Note>

<div id="steps-to-building-direct-message-lookup-requests">
  ### Pasos para crear solicitudes de búsqueda de Mensajes Directos
</div>

En este ejemplo, con una sola solicitud crearemos una nueva conversación de grupo y añadiremos nuestro primer mensaje a ella. Luego, añadiremos un segundo mensaje a la conversación creada.

<div id="step-one-start-with-a-tool-or-library">
  #### Paso uno: Comienza con una herramienta o biblioteca
</div>

Para empezar a trabajar con los endpoints de administración de Mensajes Directos vamos a utilizar la herramienta Postman para simplificar el proceso. Se usará una colección, creada por XDevelopers, de ejemplos de solicitudes a X API v2 para explorar seis endpoints que se utilizan para crear nuevos Mensajes Directos y para listar eventos de conversaciones de Mensajes Directos.

Aunque la mayor parte de la colección está preconfigurada, hay algunos detalles que tendrás que proporcionar basados en la Aplicación de X creada para alojar estas solicitudes de API. Primero, carguemos o actualicemos la colección.

Para cargar la colección de X API v2 en Postman en tu entorno, haz clic en el siguiente botón:

<Button href="https://app.getpostman.com/run-collection/9956214-784efcda-ed4c-4491-a4c0-a26470a67400">
  Agregar X API v2 a Postman
</Button>

Una vez que tengas la colección de X API v2 cargada en Postman, navega a la carpeta “Manage Direct Messages”. La pestaña &quot;Authorization&quot; de esta carpeta se ha rellenado previamente cuando ha sido posible. Tendrás que actualizar algunos ajustes para compartir los detalles de autenticación de tu Aplicación de X.

Esta carpeta también contiene tres endpoints para crear nuevos Mensajes Directos. Ten en cuenta que también hay una carpeta &quot;Direct Message lookup&quot; con tres endpoints disponibles para recuperar eventos de conversaciones de Mensajes Directos, incluidos el envío y la recepción de mensajes, así como cuándo los participantes de la conversación se unen y la abandonan.

Dado que la creación de conversaciones de grupo es una función nueva de X API v2, este ejemplo se centrará en eso. Trabajaremos con el ejemplo &quot;New group DM and conversation&quot;. Usaremos esta solicitud para crear una conversación de grupo de Mensajes Directos.

El siguiente paso es autenticarte en el endpoint.

<div id="step-two-authenticate-your-request">
  #### Paso dos: Autenticar tu solicitud
</div>

Para realizar correctamente una solicitud a la X API, debes verificar que tienes permiso para hacerlo. Para realizar una solicitud correcta a este endpoint, usaremos el [flujo de código de autorización de OAuth 2.0 con PKCE](resources/fundamentals/authentication#oauth-2-0-authorization-code-flow-with-pkce-2). Puedes generar un token de acceso dentro de Postman. 

Con Postman puedes configurar el método de autenticación a nivel de carpeta o a nivel de solicitud. Aquí configuraremos los detalles de autenticación a nivel de carpeta. Navega a la carpeta &quot;Mange Direct Messages&quot;, selecciona la pestaña &quot;Authorization&quot; y confirma que el Type esté configurado en “OAuth 2.0”, y que &quot;Add auth data to&quot; esté configurado en &quot;Request Headers&quot;. En la sección &quot;Current Token&quot;, asegúrate de que el &quot;header Prefix&quot; esté configurado en Bearer.  

Para configurar y generar un token nuevo:

1. Crea un Token Name, como &quot;DM lookup&quot;.

2. Confirma que **Grant Type** esté configurado en Authorization Code (with PKCE).

3. Configura tu **Callback URL**. Deberás actualizar tu Callback URL para que coincida exactamente con la Callback URL asociada a tu Aplicación en el [v2 Dev Portal](https://developer.x.com/en/portal/dashboard). Con la X App utilizada en este ejemplo, la Callback URL se configura como: [https://www.example.com.](https://www.example.com/) (Ten en cuenta que, como debe coincidir exactamente, [https://example.com](https://example.com) no funcionaría). 

4. Confirma que **Auth URL** esté configurada en [https://x.com/i/oauth2/authorize](https://x.com/i/oauth2/authorize)

5. Confirma que **Access Token URL** esté configurada en [https://api.x.com/2/oauth2/token.](https://api.x.com/2/oauth2/token)\
   **Client ID** - Copia y pega el OAuth 2.0 client ID desde el portal para desarrolladores\
   **Client Secret** - Solo lo necesitarás si estás usando un tipo de App que sea un confidential client. Si es así, copia y pega el OAuth 2.0 Client Secret desde el portal para desarrolladores. 

6. Confirma que **Scope** esté configurado en dm.read dm.write tweet.read users.read.

7. Confirma que **State** esté configurado en “state”.

8. Confirma que **Client Authentication** esté configurado en Send as Basic Auth header.

9. Haz clic donde dice “Get New Access Token” y haz clic en &quot;Authorize app&quot; como parte del proceso &quot;Sign-in with X&quot;.

10. Haz clic en el botón &quot;Proceed&quot; y luego en &quot;Use Token&quot; para generar un token. 

11. Haz clic en el botón &quot;Save&quot; para guardar estos detalles de configuración.

Es posible que recibas un mensaje indicando que no has iniciado sesión en X. Si recibes este error, deberás iniciar sesión en la cuenta de X en nombre de la cual intentas publicar dentro de Postman.

Ahora que estos detalles de OAuth 2.0 se han configurado a nivel de carpeta, navega a cada uno de los ejemplos y a su pestaña &quot;Authorization&quot; y confirma que tengan su Type configurado en &quot;Inherit auth from parent&quot;. 

Ten en cuenta que este token expirará pronto y tendrás que regenerarlo haciendo clic en el botón &quot;Get New Access Token&quot;. Al hacer clic, se iniciará el proceso &quot;Sign-in with X&quot; y se generará un token nuevo para realizar solicitudes.

<div id="step-three-retrieve-direct-messages-conversation-events">
  #### Paso tres: recuperar eventos de conversaciones de Mensajes Directos
</div>

Al recuperar eventos de conversaciones de Mensajes Directos con este endpoint, debes especificar un ID de conversación. El ID de conversación forma parte de la ruta del endpoint: [https://api.x.com/2/dm&#95;conversations/:dm&#95;conversation&#95;id/dm&#95;events](https://api.x.com/2/dm\\_conversations/:dm\\_conversation\\_id/dm\\_events)

En Postman, ve a la pestaña “Params” e introduce el ID de la conversación desde la que quieres recuperar eventos en la sección &quot;Path Variables&quot;.

La configuración sería:

|                      |                       |
| :------------------- | :-------------------- |
| **Key**              | **Value**             |
| `dm_conversation_id` | `1228393702244134912` |

Con esta conversación especificada, la ruta resultante pasa a ser [https://api.x.com/2/dm&#95;conversations/1582103724607971328/dm&#95;events](https://api.x.com/2/dm\\_conversations/1582103724607971328/dm\\_events)

Si haces clic en el botón &quot;Send&quot;, recibirás en tu respuesta los campos predeterminados del objeto de Mensaje Directo: id, text y event&#95;type. También habrá un objeto &quot;meta&quot; con el número de resultados, junto con los tokens de paginación que se utilizan para recuperar más eventos si están disponibles.

```
{
   "data": [
       {
           "event_type": "MessageCreate",
           "id": "1580705921830768647",
           "text": "hello to you two, this is a new group conversation."
       }
   ],
   "meta": {
       "result_count": 1,
       "next_token": "18LAA5FFPEKJA52G0G00ZZZZ",
       "previous_token": "1BLC45FFPEKJA52G0S00ZZZZ"
   }
}
```

Si deseas recibir campos adicionales, tendrás que especificar esos campos en tu solicitud con los parámetros [field](/es/x-api/fundamentals/fields) y/o [expansion](/es/x-api/fundamentals/expansions).

Para este ejercicio, solicitaremos conjuntos adicionales de campos del objeto dm&#95;event:

1. Los campos predeterminados del objeto de Mensaje Directo: id, text y event&#95;type.

2. Campos adicionales del objeto de Mensaje Directo: dm&#95;conversation&#95;id, created&#95;at, sender&#95;id, attachments, participant&#95;ids, referenced&#95;tweets

En Postman, ve a la pestaña &quot;Params&quot; y agrega el siguiente par clave:valor a la tabla &quot;Query Params&quot;:

|                     |                                                                                                               |
| :------------------ | :------------------------------------------------------------------------------------------------------------ |
| Key                 | Value                                                                                                         |
| dm&#95;event.fields | dm&#95;conversation&#95;id,created&#95;at,sender&#95;id,attachments,participant&#95;ids,referenced&#95;tweets |

Ahora deberías ver la siguiente URL junto al botón &quot;Send&quot;:

[https://api.x.com/2/dm&#95;conversations/:dm&#95;conversation&#95;id/dm&#95;events?dm&#95;event.fields=id,text,event&#95;type,dm&#95;conversation&#95;id,created&#95;at,sender&#95;id,attachments,participant&#95;ids,referenced&#95;tweets](https://api.x.com/2/dm\\_conversations/:dm\\_conversation\\_id/dm\\_events?dm\\_event.fields=id,text,event\\_type,dm\\_conversation\\_id,created\\_at,sender\\_id,attachments,participant\\_ids,referenced\\_tweets)

<div id="step-four-make-your-request-and-review-your-response">
  #### Paso cuatro: realiza la solicitud y revisa la respuesta
</div>

Una vez que tengas todo configurado, haz clic de nuevo en el botón «Send» y recibirás una respuesta similar a la que se muestra a continuación. Ten en cuenta que esta respuesta incluye todos los campos disponibles de dm&#95;event.

```
{
   "data": [
       {
           "text": "hello to you two, this is a new group conversation.",
           "id": "1580705921830768647",
           "dm_conversation_id": "1580705921830768643",
           "event_type": "MessageCreate",
           "sender_id": "17200003",
           "created_at": "2022-10-13T23:43:54.000Z"
       }
   ],
   "meta": {
       "result_count": 1,
       "next_token": "18LAA5FFPEKJA52G0G00ZZZZ",
       "previous_token": "1BLC45FFPEKJA52G0S00ZZZZ"
   }
}
```
