---
title: Guía de integración
sidebarTitle: Guía de integración
keywords: ["integración de mensajes directos", "integración de MD", "integración de consulta de MD", "guía de integración de mensajes directos", "configuración de MD"]
---

import { Button } from '/snippets/es/button.mdx';

Los endpoints de Direct Messages v2 introducen las conversaciones y los eventos de conversación como objetos fundamentales de la X API y establecen una distinción entre conversaciones 1-1 y de grupo. Las conversaciones 1-1 siempre tienen dos, y solo dos, participantes, mientras que las conversaciones de grupo pueden tener dos o más participantes y una lista de miembros que puede cambiar.   

Esta página contiene información sobre varias herramientas y conceptos clave que debes conocer al integrar los endpoints de consulta de Direct Messages en tu sistema. Hemos dividido la página en dos secciones:

* Conceptos clave
  * [Conversaciones de Direct Messages](#direct-message-conversations)
  * [ID de conversación y de evento compartidas entre v1.1 y v2](#shared-conversation-and-event-ids)
  * [Campos y expansiones de eventos de Direct Messages](#direct-message-event-fields-and-expansions)
  * [Tipos de eventos de conversación](#conversation-event-types)
  * [Autenticación](#authentication)
  * [Portal para desarrolladores, Proyectos y Aplicaciones](#developer-portal-projects-and-apps)
  * [Límites de frecuencia](#rate-limits)
  * [Paginación](#pagination)
* [Herramientas útiles](#helpful-tools)

<div id="key-concepts">
  ### Conceptos clave
</div>

<div id="direct-message-conversations">
  ### Conversaciones de Mensajes Directos
</div>

Todos los Mensajes Directos forman parte de una conversación de Mensajes Directos. Estas conversaciones pueden ser uno a uno o de grupo. Este lanzamiento proporciona los endpoints fundamentales necesarios para crear Mensajes Directos y recuperar eventos asociados con conversaciones de Mensajes Directos. Todas las conversaciones tienen un dm&#95;conversation&#95;id único, y los eventos que componen esa conversación tienen todos un dm&#95;event&#95;id único.  

Los endpoints de consulta de Mensajes Directos proporcionan métodos para recuperar eventos asociados con conversaciones. Estos endpoints GET se utilizan para recuperar los mensajes que conforman una conversación y, en el caso de conversaciones de grupo, se pueden usar para saber quién se ha unido y quién ha salido de las conversaciones de grupo.

Esta versión inicial de la consulta de Mensajes Directos incluye tres métodos GET:

* **GET /2/dm&#95;conversations/with/:participant&#95;id/dm&#95;events** - Recupera eventos de Mensajes Directos asociados con una conversación uno a uno. El parámetro de ruta :participant&#95;id es el User ID numérico de la cuenta que mantiene la conversación con el usuario autenticado que realiza esta solicitud.  

* **GET /2/dm&#95;conversations/:dm&#95;conversation&#95;id/dm&#95;events** - Recupera eventos de Mensajes Directos asociados con un ID de conversación específico, según lo indicado por el parámetro de ruta :dm&#95;conversation&#95;id. Se admiten tanto los ID de conversaciones uno a uno como de grupo.  

* **GET /2/dm&#95;events** - Recupera eventos de Mensajes Directos asociados con el usuario que se autentica, incluidas tanto conversaciones uno a uno como de grupo. Hay disponibles eventos de hasta 30 días de antigüedad.  

Todos estos endpoints GET admiten la recuperación de dm&#95;events por tipo de evento mediante el parámetro de consulta de la solicitud event&#95;types. Actualmente, se admiten tres tipos de eventos de conversación:

* **MessageCreate** - Se crea cuando se genera un nuevo Mensaje Directo. Este objeto de evento puede incluir la hora y el texto del mensaje, junto con el ID de la cuenta que envió el mensaje, y los ID de la conversación y del evento. 

* **ParticipantsJoin** - Se crea cuando un nuevo participante se une a una conversación de grupo. Este objeto dm&#95;event incluye el ID del participante que se une, junto con la hora created&#95;at y el sender&#95;id del evento de &quot;invitación&quot;. 

* **ParticipantsLeave** - Se crea cuando un participante abandona una conversación. Este objeto de evento incluye el ID del participante que se va, junto con la hora del evento. 

Para obtener más información, consulta las [Referencias de la API de consulta de Mensajes Directos](/es/x-api/direct-messages/get-dm-events-for-a-dm-conversation).

<div id="shared-conversation-and-event-ids-across-v11-and-v2">
  ### IDs de conversación y de evento compartidos entre v1.1 y v2
</div>

Un concepto importante es que los IDs de conversación y de evento se comparten entre las versiones v1.1 y v2 de la Plataforma X. Esto significa que se pueden usar ambas versiones a la vez. Por ejemplo, los endpoints de Direct Messages v1.1 proporcionan métodos para obtener un único evento y para eliminar eventos, métodos que aún no están disponibles con v2. Dado que los IDs son comunes entre v1.1 y v2, puedes realizar solicitudes a v1.1 basadas en IDs proporcionados por v2 o haciendo referencia a los IDs de conversación que se muestran en las URLs de conversación en la aplicación de X.  

<div id="direct-message-event-fields-and-expansions">
  ### Campos y expansiones de eventos de Mensaje Directo
</div>

La X API v2 permite a los usuarios seleccionar exactamente qué datos quieren que se devuelvan por la API usando un conjunto de herramientas denominado campos y expansiones. Por ejemplo, los endpoints de consulta de Mensajes Directos admiten los siguientes campos de dm&#95;events: 

* id, event&#95;type y text son los valores predeterminados para los eventos MessageCreate. 

* id, event&#95;type y participant&#95;ids son los valores predeterminados para los eventos ParticipantsJoin y ParticipantsLeave.

* dm&#95;conversation&#95;id y created&#95;at están disponibles para todos los eventos.

* attachments y referenced&#95;tweets están disponibles para eventos de tipo MessageCreate. 

* sender&#95;id está disponible para eventos MessageCreate y ParticipantsJoin. 

* participant&#95;ids está disponible para eventos ParticipantsJoin y ParticipantsLeave. 

Además, los endpoints de consulta de Mensajes Directos admiten las siguientes [expansiones](/es/x-api/fundamentals/expansions):

* sender&#95;id - expande el objeto User asociado con quien envió el mensaje o quien invitó a alguien a la conversación. 

* referenced&#95;tweets.id - expande el objeto Post si el texto del Mensaje Directo incluye un enlace a una Publicación. 

* attachments.media&#95;keys - expande el objeto Media si el Mensaje Directo incluye un archivo adjunto de contenido multimedia. 

* participant&#95;ids - expande el objeto User asociado con quien se unió o salió de una conversación de grupo.

Dado que las expansiones incluyen objetos de tipo Post, User y Media, también puedes usar los parámetros de consulta de la solicitud tweet.fields, user.fields y media.fields. Consulta nuestra guía sobre cómo [usar campos y expansiones](/es/x-api/fundamentals/data-dictionary#how-to-use-fields-and-expansions) para obtener más información.

<div id="conversation-event-types">
  ### Tipos de eventos de conversación
</div>

A continuación se muestran objetos JSON de ejemplo para los tipos de eventos de Mensajes Directos MessageCreate, ParticipantsJoin y ParticipantsLeave. 

Campos disponibles del objeto dm&#95;event: id, text, event&#95;type, dm&#95;conversation&#95;id, created&#95;at, sender&#95;id, attachments, referenced&#95;tweets, participant&#95;ids. Consulta la sección Fields and Expansion para obtener más detalles sobre cómo seleccionar estos campos en tus solicitudes. 

Ejemplo de evento MessageCreate: 

Con todos los campos de dm&#95;event especificados, esta es la respuesta para un Mensaje Directo de texto sencillo: 

`{
    "text": "Hi everyone.",
    "sender_id": "944480690",
    "dm_conversation_id": "1578398451921985538",
    "id": "1582838499983564806",
    "event_type": "MessageCreate",
    "created_at": "2022-10-19T20:58:00.000Z"
}`

Ejemplo de evento ParticipantsJoin:

Con todos los campos de dm&#95;event especificados, esta es la respuesta para un participante que se une a una conversación:

`{
    "participant_ids": [
        "944480690"
    ],
    "sender_id": "17200003",
    "dm_conversation_id": "1578398451921985538",
    "id": "1582835469712138240",
    "event_type": "ParticipantsJoin",
    "created_at": "2022-10-19T20:45:58.000Z"
}`

Ejemplo de evento ParticipantsLeave:

Con todos los campos de dm&#95;event especificados, esta es la respuesta para un participante que abandona una conversación:

`{
    "participant_ids": [
        "944480690"
    ],
    "dm_conversation_id": "1578398451921985538",
    "id": "1582838535115067392",
    "event_type": "ParticipantsLeave",
    "created_at": "2022-10-19T20:58:09.000Z"
    }`

<div id="authentication">
  ### Autenticación
</div>

Todos los endpoints de X API v2 requieren que autentiques tus solicitudes con un conjunto de credenciales, también conocidas como claves y tokens. Todos los mensajes directos son privados y requieren autorización de usuario para acceder a ellos. 

Estos endpoints de mensajes directos requieren el uso de [OAuth 2.0 Authorization Flow with PKCE](/es/x-api/posts/manage-tweets) o [1.0a User Context](/es/resources/fundamentals/authentication), lo que significa que debes usar un conjunto de claves de API y tokens de acceso de usuario para realizar una solicitud exitosa. Los tokens de acceso deben estar asociados con el usuario en cuyo nombre estás realizando la solicitud. Si quieres generar un conjunto de tokens de acceso para otro usuario, ese usuario debe autorizar o autenticar tu Aplicación usando el [flujo OAuth de tres patas](/es/resources/fundamentals/authentication#obtaining-access-tokens-using-3-legged-oauth-flow).

Ten en cuenta que el contexto de usuario de OAuth puede ser complicado de usar. Si no estás familiarizado con este método de autenticación, te recomendamos usar una [biblioteca](/es/x-api/tools-and-libraries/overview) o una herramienta como Postman para autenticar correctamente tus solicitudes. 

[OAuth 2.0 Authorization Code with PKCE](resources/fundamentals/authentication#oauth-2-0-authorization-code-flow-with-pkce-2) permite un mayor control sobre el alcance de una Aplicación y los flujos de autorización en múltiples dispositivos. OAuth 2.0 te permite elegir scopes específicos y detallados que te otorgan permisos concretos en nombre de un usuario. Los endpoints de consulta de mensajes directos requieren estos scopes: dm.read, post.read, user.read

Para habilitar OAuth 2.0 en tu Aplicación, debes activarlo en la configuración de autenticación de tu Aplicación, que se encuentra en la sección de configuración de la Aplicación en el portal para desarrolladores.

<div id="developer-portal-projects-and-developer-apps">
  ### Portal para desarrolladores, Proyectos y aplicaciones de desarrollador
</div>

Para obtener un conjunto de credenciales de autenticación que funcionen con los endpoints de X API v2, debes tener una cuenta de desarrollador aprobada, crear un Proyecto en esa cuenta y crear una aplicación de desarrollador dentro de ese Proyecto. Luego podrás encontrar tus claves y tokens dentro de tu aplicación de desarrollador. 

<div id="rate-limits">
  ### Límites de frecuencia
</div>

Cada día, muchos miles de desarrolladores realizan solicitudes a la X API. Para ayudar a gestionar el gran volumen de estas solicitudes, se aplican límites de frecuencia a cada endpoint que restringen la cantidad de solicitudes que puedes realizar en nombre de tu Aplicación o de un usuario autenticado. 

Los endpoints de consulta de Mensajes Directos tienen límites de frecuencia a nivel de usuario, lo que significa que el usuario autenticado en cuyo nombre realizas la solicitud solo puede hacer una cierta cantidad de solicitudes con tu Aplicación de X. Hay un límite de frecuencia por usuario de 300 solicitudes cada 15 minutos para los métodos GET. Estos límites de frecuencia se comparten entre los endpoints GET. 

<div id="pagination">
  ### Paginación
</div>

Estos endpoints utilizan paginación para que las respuestas se devuelvan rápidamente. En los casos en que haya más resultados de los que se pueden enviar en una sola respuesta (hasta 100 eventos), tendrás que paginar. Usa el parámetro max&#95;results para indicar cuántos resultados se devolverán por página y el parámetro pagination&#95;token para obtener la siguiente página de resultados. Puedes obtener más información consultando nuestra [guía de paginación](/es/x-api/fundamentals/pagination).

**Herramientas útiles**

A continuación se muestran algunas herramientas útiles que te recomendamos explorar mientras trabajas con los endpoints de consulta de Mensajes Directos: 

****Postman****

Postman es una excelente herramienta que puedes usar para probar un endpoint. Cada solicitud de Postman incluye todos los parámetros de ruta y de cuerpo para ayudarte a comprender rápidamente qué tienes disponible. Para obtener más información sobre nuestras colecciones de Postman, visita nuestra página [Uso de Postman](/es/tutorials/postman-getting-started). 

****Código de ejemplo****

El código de ejemplo en Python para los endpoints v2 de Mensajes Directos está disponible en nuestro repositorio de [código de ejemplo de X API v2 en GitHub](https://github.com/xdevplatform/Twitter-API-v2-sample-code). La carpeta &quot;Manage-Direct-Messages&quot; contiene ejemplos para los métodos POST y la carpeta &quot;Direct-Messages-lookup&quot; contiene ejemplos para los métodos GET.

****XDev Software Development Kits (SDKs)****

Estas [bibliotecas](/es/x-api/tools-and-libraries/overview) se están actualizando para los endpoints v2 de Mensajes Directos y deberían estar listas pronto:

* [X API Java SDK](https://github.com/xdevplatform/twitter-api-java-sdk) - SDK oficial de Java para la X API v2
* [X API TypeScript/JavaScript SDK](https://github.com/xdevplatform/twitter-api-typescript-sdk) - SDK oficial de TS/JS para la X API v2

**Bibliotecas de terceros**

Hay un número cada vez mayor de [bibliotecas de terceros](/es/x-api/tools-and-libraries/overview#community-tools-and-libraries-for-v2) desarrolladas por nuestra comunidad. Estas bibliotecas están diseñadas para ayudarte a comenzar, y se espera que varias de ellas admitan pronto los endpoints v2 de Mensajes Directos. Puedes encontrar una biblioteca que funcione con los endpoints v2 buscando la etiqueta de versión adecuada.