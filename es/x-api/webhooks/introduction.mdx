---
title: API de Webhooks v2
sidebarTitle: Introducción
keywords: ["webhooks", "API de webhooks", "eventos de webhooks", "webhooks en tiempo real", "notificaciones de webhooks", "suscripciones de webhooks", "gestión de webhooks"]
---

<div id="overview">
  ## Descripción general
</div>

La API Webhooks V2 permite que los desarrolladores reciban notificaciones de eventos en tiempo real de cuentas de X a través de mensajes JSON enviados mediante webhooks. Estas API te permiten registrar y administrar webhooks, desarrollar aplicaciones cliente para procesar eventos y garantizar una comunicación segura mediante comprobaciones de desafío-respuesta (CRC) y encabezados de firma.

<div id="feature-summary">
  ## Resumen de características
</div>

| Nivel | Precio | Número de webhooks |
| :---: | :---: | :---: |
| Self-Serve Pro | $5000/mes | 1 |
| Enterprise | [Contactar con ventas](/es/resources/enterprise/forms/enterprise-api-interest#enterprise-access-form) | 5+ |

<div id="products-that-support-webhooks">
  ## Productos compatibles con webhooks
</div>

Estos son los productos que actualmente admiten el envío de eventos a través de webhooks:

* [Account Activity API (AAA)](/es/x-api/account-activity/introduction)
* [Filtered Stream](/es/x-api/webhooks/stream/introduction)

<div id="manage-webhooks">
  ## Administrar webhooks
</div>

La Account Activity API te proporciona mensajes JSON basados en webhooks cada vez que se producen eventos asociados con cuentas de X suscritas a tu servicio. X entrega esas actividades a tu webhook registrado. En los siguientes pasos, aprenderás cómo administrar webhooks y usuarios suscritos.

Aprenderás cómo registrar, ver y eliminar tanto webhooks como usuarios suscritos. Usaremos comandos sencillos de cURL para hacer solicitudes a los distintos endpoints de la API. cURL es una herramienta de línea de comandos para enviar o recibir solicitudes utilizando la sintaxis de URL.

Hay varios detalles que requieren atención antes de que puedas comenzar a recibir eventos de webhooks en tu aplicación consumidora de eventos. Como se describe a continuación, necesitarás crear una aplicación de X, obtener acceso a la Account Activity API y desarrollar una aplicación web que consuma eventos de webhooks. 

<div id="1-develop-a-webhook-consumer-app">
  ### 1. Desarrollar una aplicación consumidora de webhooks
</div>

Para registrar un nuevo webhook asociado con tu aplicación de X, deberás desarrollar, desplegar y alojar una aplicación web que reciba eventos de webhook de X y responda a nuestras solicitudes de seguridad.

*Antes de comenzar, te recomendamos consultar nuestras [aplicaciones de ejemplo](https://github.com/xdevplatform/account-activity-dashboard-enterprise/tree/master)!*

* Crea una aplicación web con una URL HTTPS accesible públicamente que actuará como endpoint de webhook para recibir eventos.
  * La *ruta* del URI queda totalmente a tu elección. El siguiente ejemplo sería válido: [https://mydomain.com/service/listen](https://mydomain.com/service/listen)
  * Si recibes webhooks de distintas fuentes, un patrón común es: [https://mydomain.com/webhook/twitter](https://mydomain.com/webhook/twitter)
  * Ten en cuenta que la URL especificada no puede incluir una especificación de puerto ([https://mydomain.com:5000/NoWorkie](https://mydomain.com:5000/NoWorkie)).
* Un primer paso es escribir código que reciba una solicitud GET de X Challenge Response Check (CRC) y responda con una respuesta JSON correctamente formateada.
* Registra la URL de tu webhook. Harás una solicitud POST a un endpoint /2/webhooks con la URL en el cuerpo JSON. Cuando realices esta solicitud, X enviará una solicitud CRC a tu aplicación web.
* Cuando un webhook se registra correctamente, la respuesta incluirá un id de webhook. Este id de webhook se necesitará más adelante al realizar solicitudes a productos que admiten webhooks.
* X enviará solicitudes POST que contienen eventos a la URL que registraste. Estos eventos se codificarán en JSON. Consulta [este enlace](/es/x-api/account-activity/introduction#account-activity-data-object-structure) para ver ejemplos de cargas JSON de webhooks.

<div id="optional-use-xurl-for-testing">
  #### Opcional: Usa xurl para pruebas
</div>

Con fines de prueba, la herramienta xurl ahora admite webhooks temporales. Instala la versión más reciente del [proyecto `xurl`](https://github.com/xdevplatform/xurl) desde GitHub, configura tu autorización y luego ejecuta:

```
xurl webhook start
```

Esto generará una URL pública temporal de webhook, gestionará automáticamente todas las comprobaciones de CRC y registrará cualquier evento de suscripción entrante. Es una excelente manera de verificar tu configuración antes de desplegarla. Salida de ejemplo:

```
Starting webhook server with ngrok...
Enter your ngrok authtoken (leave empty to try NGROK_AUTHTOKEN env var):

Attempting to use NGROK_AUTHTOKEN environment variable for ngrok authentication.
Configuring ngrok to forward to local port: 8080
Ngrok tunnel established!
  Forwarding URL: https://<your-ngrok-subdomain>.ngrok-free.app -> localhost:8080

Use this URL for your X API webhook registration: https://<your-ngrok-subdomain>.ngrok-free.app/webhook

Starting local HTTP server to handle requests from ngrok tunnel (forwarded from https://<your-ngrok-subdomain>.ngrok-free.app)...
```

**Notas importantes**

* Al registrar tu URL de webhook, tu aplicación web debe usar el consumer secret de tu Aplicación para el cifrado de la comprobación CRC.

* Todos los Mensajes Directos entrantes se entregarán a través de webhooks. Todos los Mensajes Directos enviados mediante [POST /2/dm&#95;conversations/with/:participant&#95;id/messages](/es/x-api/direct-messages/send-a-new-message-to-a-user) también se entregarán mediante webhooks. Esto es para que tu aplicación web pueda detectar los Mensajes Directos enviados desde un cliente diferente.

* Si tienes más de una aplicación web que comparte la misma URL de webhook y el mismo usuario asignado a cada aplicación, el mismo evento se enviará a tu webhook varias veces (una vez por cada aplicación web).

* En algunos casos, tu webhook puede recibir eventos duplicados. Tu aplicación de webhook debe tolerar esto y eliminar los duplicados según el id del evento.

* Consulta el código de ejemplo:

  * [Account Activity API Setup](https://github.com/m-rosinsky/XWebhookTest), una aplicación web Node.js que muestra eventos de webhook usando el nivel Enterprise de la Account Activity API.

<div id="2-securing-webhooks">
  ### 2. Proteger los webhooks
</div>

Las API basadas en webhooks de X proporcionan dos métodos para confirmar la seguridad de tu servidor de webhooks:

1. Las comprobaciones de desafío-respuesta permiten a X confirmar la propiedad de la aplicación web que recibe eventos de webhook.
2. El encabezado de firma en cada solicitud POST te permite confirmar que X es la fuente de los webhooks entrantes.

Consulta la sección CRC Check para obtener los requisitos de implementación.

<div id="3-the-webhooks-api">
  ### 3. La API de Webhooks
</div>

Los webhooks se gestionan a través de la Webhook Management API. Todos los endpoints requieren autenticación OAuth2 con Bearer Token de solo aplicación (App Only).

<div id="adding-a-webhook">
  #### [Adding a webhook](/es/x-api/webhooks/create-webhook-config)
</div>

**POST /2/webhooks**

**Descripción:**

Crea una configuración de webhook. Tu URL de callback `https` accesible públicamente debe pasarse en el cuerpo JSON.
Comencemos registrando una nueva URL de webhook para el contexto de aplicación dado.

**Autenticación:**

OAuth2 solo de aplicación Bearer Token

* **Bearer token** `<BEARER_TOKEN>` p. ej. `AAAAAAAAAAAA0%2EUifi76ZC9Ub0wn...`

**Parámetros (cuerpo JSON):**

```
{
    "url": "<your publicly accessible https callback url>"
}
```

* **URL** `<URL>` por ejemplo, `https://yourdomain.com/webhooks/twitter/`

**Solicitud:** Copia la siguiente solicitud cURL en tu línea de comandos tras realizar los siguientes cambios:

````
  ```
  curl --request POST --url 'https://api.twitter.com/2/webhooks?url=<URL>' --header 'authorization: Bearer <BEARER_TOKEN>'
  --data '{
"url": "https://yourdomain.com/webhooks/twitter"
          }'
  ```
````

**Respuestas:**

**Éxito (200 OK)**

Una respuesta satisfactoria indica que el webhook se creó y que la comprobación inicial de CRC se superó correctamente.

```
{
  "data": {
    "id": "<webhook_id>",
    "url": "<your callback url>",
    "valid": true,
    "created_at": "YYYY-mm-DDTHH:MM:ss.000Z"
  }
}
```

**Error (400 Bad Request)**

En caso de error, se devuelve un objeto de error estándar.

```
{
    "errors": [
      {
        "message": "<Reason>: <Details>"
      }
    ],
    "title": "Invalid Request",
    "detail": "One or more parameters to your request was invalid.",
    "type": "https://api.twitter.com/2/problems/invalid-request"
}
```

Entre los motivos de error más comunes se incluyen:

| Reason                 | Description                                                                                                                             |
| :--------------------- | :-------------------------------------------------------------------------------------------------------------------------------------- |
| `CrcValidationFailed`  | La URL de callback no respondió correctamente a la comprobación CRC (por ejemplo, por tiempo de espera agotado o respuesta incorrecta). |
| `UrlValidationFailed`  | La URL de callback proporcionada no cumple los requisitos (por ejemplo, no es `https` o tiene un formato no válido).                    |
| `DuplicateUrlFailed`   | Ya hay un webhook registrado por tu aplicación para la URL de callback proporcionada.                                                   |
| `WebhookLimitExceeded` | Tu aplicación ha alcanzado el número máximo de configuraciones de webhooks permitidas.                                                  |

<div id="viewing-a-webhook">
  #### [Ver un webhook](/es/x-api/webhooks/get-a-list-of-webhook-configs-associated-with-a-client-app)
</div>

**GET /2/webhooks**

**Description:** Recupera todas las configuraciones de webhook asociadas con tu aplicación (cuenta de desarrollador).

**Authentication:**

OAuth2 App Only Bearer Token

* **Bearer token** `<BEARER_TOKEN>` por ejemplo, `AAAAAAAAAAAA0%2EUifi76ZC9Ub0wn...`

* **URL** `<URL>` por ejemplo, `https://yourdomain.com/webhooks/twitter/`

**Request:** Ejecuta el siguiente comando para recuperar todas las URL de webhook registradas y sus estados para la aplicación indicada.

Copia la siguiente solicitud cURL en tu línea de comandos después de realizar los siguientes cambios:

````
  ```
  curl --request GET --url 'https://api.twitter.com/2/webhooks' --header 'authorization: Bearer <BEARER_TOKEN>'
  ```
````

**Éxito (200 OK)**

Devuelve una lista de configuraciones de webhooks. La lista estará vacía si no hay webhooks configurados.

*Ejemplo (con un webhook configurado):*

```
{
  "data": [
    {
      "created_at": "YYYY-mm-DDTHH:MM:ss.000Z",
      "id": "<webhook_id>",
      "url": "<callback url>",
      "valid": true
    }
  ],
  "meta": {
    "result_count": 1
  }
}
```

*Ejemplo (sin ningún webhook configurado):*

```
{
  "data": [],
  "meta": {
    "result_count": 0
  }
}
```

<div id="removing-a-webhook">
  #### [Eliminar un webhook](/es/x-api/webhooks/delete-webhook-config)
</div>

DELETE /2/webhooks/:webhook&#95;id

**Descripción:** Elimina una configuración de webhook usando su `webhook_id` específico. El ID se puede obtener de la respuesta de creación `POST /2/webhooks` o de la respuesta de listado `GET /2/webhooks`.

**Autenticación:**

OAuth2 de solo Aplicación con Bearer Token

* **Bearer token** `<BEARER_TOKEN>` por ejemplo: `AAAAAAAAAAAA0%2EUifi76ZC9Ub0wn...`

**Parámetros de ruta:**

| Parámetro    | Descripción                             |
| :----------- | :-------------------------------------- |
| `webhook_id` | El ID del webhook que se va a eliminar. |

**Solicitud:** Ejecuta el siguiente comando para eliminar el webhook de la configuración de la aplicación proporcionada.

Copia la siguiente solicitud cURL en tu línea de comandos después de realizar los siguientes cambios:

````
  ```
  curl --request DELETE --url 'https://api.twitter.com/2/webhooks/:WEBHOOK_ID' --header 'authorization: Bearer <BEARER_TOKEN>'
  ```

  **Respuestas:**
````

**Éxito (200 OK)**

Devuelve una respuesta JSON con el estado &quot;deleted&quot; establecido en true si se eliminó correctamente.

*Ejemplo (con la eliminación correcta del webhook):*

```
{
  "data": {
    "deleted": true
  }
}
```

**Error (400 Bad Request)**

| Motivo             | Descripción                                                                             |
| :----------------- | :-------------------------------------------------------------------------------------- |
| `WebhookIdInvalid` | El `webhook_id` proporcionado no se ha encontrado o no está asociado con tu aplicación. |

<div id="validate-and-reenable-webhook">
  #### [Validar y volver a habilitar el webhook](/es/x-api/webhooks/webhook-crc-check)
</div>

**PUT /2/webhooks/:webhook&#95;id**

**Descripción:** Activa la verificación de respuesta al desafío (CRC) para la URL del webhook indicado. Si la verificación es exitosa, devuelve 200 y vuelve a habilitar el webhook estableciendo su estado en `valid`.

**Autenticación:**

OAuth2 App Only Bearer Token

* **Bearer token** `<BEARER_TOKEN>` por ejemplo: `AAAAAAAAAAAA0%2EUifi76ZC9Ub0wn...`

**Parámetros de ruta:**

| Parameter    | Description                            |
| :----------- | :------------------------------------- |
| `webhook_id` | El ID del webhook que se va a validar. |

**Solicitud:** Ejecuta el siguiente comando para validar el webhook a partir de la configuración de la Aplicación proporcionada.

Copia la siguiente solicitud cURL en tu línea de comandos después de realizar los siguientes cambios:

````
  ```
  curl --request PUT --url 'https://api.twitter.com/2/webhooks/:WEBHOOK_ID' --header 'authorization: Bearer <BEARER_TOKEN>'
  ```

  **Respuestas:**
````

**Éxito (200 OK)**

Una respuesta 200 OK indica que se ha *iniciado* la solicitud de verificación CRC. **No** garantiza que la verificación CRC haya sido exitosa. El campo `valid` en la respuesta refleja el estado *después* del intento de verificación. Si la verificación CRC se realiza correctamente, el estado del webhook se actualizará a válido. Puedes verificar el estado actual usando `GET /2/webhooks`.

```
{
  "data": {
    "valid": true // Indica el estado después de que se complete el intento de verificación CRC
  }
}
```

**Error (400 Bad Request)**

| Motivo                | Descripción                                                                          |
| :-------------------- | :----------------------------------------------------------------------------------- |
| `WebhookIdInvalid`    | El `webhook_id` proporcionado no se encontró o no está asociado con tu aplicación.   |
| `CrcValidationFailed` | La URL de callback no respondió correctamente a la solicitud de verificación de CRC. |

<div id="4-the-crc-check">
  ### 4. La verificación CRC
</div>

La verificación de desafío y respuesta (CRC, por sus siglas en inglés) es el mecanismo mediante el cual X comprueba que la URL de callback que proporcionaste es válida y que tú la controlas.

**Cuándo se activa la CRC:**

* En el registro inicial del webhook (`POST /2/webhooks`)
* Cada hora, por parte de X, para validarla
* Manualmente mediante `PUT /2/webhooks/:id`

Ejemplo:

```
GET https://your-webhook-url.com/webhook?crc_token=challenge_string
```

Ejemplo de cuerpo de respuesta JSON:

```
{
  "response_token": "sha256=<base64_encoded_hmac_hash>"
}
```

**Cómo generar la respuesta:**

* Usa crc&#95;token como mensaje
* Usa el **Consumer Secret** de la aplicación como clave
* Genera un hash HMAC SHA-256
* Codifica el resultado en Base64

<div id="sample-apps">
  ## Aplicaciones de ejemplo
</div>

* [Simple webhook server](https://github.com/m-rosinsky/XWebhookTest/blob/main/app.py)
  * Un único script de Python que muestra cómo responder a la comprobación CRC y aceptar eventos POST.
* [Account Activity API sample dashboard](https://github.com/xdevplatform/account-activity-dashboard-enterprise/tree/master)
  * Una aplicación web desarrollada con [bun.sh](https://bun.sh) que te permite gestionar webhooks, suscripciones y recibir eventos en tiempo real directamente en la aplicación.