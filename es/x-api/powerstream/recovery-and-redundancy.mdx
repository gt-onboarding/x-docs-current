---
title: Recuperación y redundancia
sidebarTitle: Recuperación y redundancia
keywords: ["recuperación de powerstream", "redundancia de powerstream", "funciones de recuperación", "funciones de redundancia", "tolerancia a fallos", "recuperación de errores"]
---

Al consumir datos de streaming, maximizar el tiempo de conexión y recibir todos los datos coincidentes es un objetivo fundamental. Esto significa que es importante aprovechar las conexiones redundantes, detectar automáticamente las desconexiones para reconectar rápidamente y contar con un plan para recuperar los datos perdidos.

En esta guía de integración, trataremos diferentes funciones de recuperación y redundancia: conexiones redundantes, backfill y recuperación.
 

<div id="redundant-connections">
  ## Conexiones redundantes
</div>

Una conexión redundante te permite establecer más de una conexión simultánea al stream. Esto proporciona redundancia al permitirte conectarte al mismo stream con dos consumidores distintos, recibiendo los mismos datos a través de ambas conexiones. De este modo, tu aplicación cuenta con un sistema de conmutación por error en caliente para diversas situaciones, como cuando un stream se desconecta o falla el servidor principal de tu aplicación.

Para usar un stream redundante, simplemente conéctate a la misma URL que usas para tu conexión principal. Los datos de tu stream se enviarán a través de ambas conexiones.

<div id="backfill">
  ## Backfill
</div>

Después de detectar una desconexión, tu sistema debe ser capaz de volver a conectarse al stream. Si es posible, tu sistema debe registrar cuánto tiempo duró la desconexión para que puedas usar la función de recuperación adecuada y rellenar los datos que faltan. 

Si identificaste que la desconexión duró cinco minutos o menos, puedes usar el parámetro de backfill, `backfillMinutes`. Si pasas este parámetro con tu solicitud `GET /powerstream`, recibirás las Publicaciones que coincidan con tus reglas de entre uno y cinco minutos anteriores. Por lo general, entregamos primero estas Publicaciones más antiguas antes que cualquier Publicación nueva que coincida y tampoco eliminamos las Publicaciones duplicadas. Esto significa que si estuviste desconectado durante 90 segundos, pero solicitas dos minutos de datos de backfill, recibirás 30 segundos de Publicaciones duplicadas, lo cual tu sistema debe ser capaz de tolerar. Aquí tienes un ejemplo de cómo podría verse una solicitud con el parámetro de backfill:

`curl 'https://api.x.com/2/powerstream?backfillMinutes=5' -H "Authorization: Bearer $ACCESS_TOKEN"`

Si identificaste que la desconexión duró más de cinco minutos, puedes usar el [endpoint de búsqueda reciente](/es/x-api/posts/search/introduction) o la función de recuperación para solicitar los datos que faltan. 

<div id="recovery">
  ## Recuperación
</div>

Puedes usar la función de Recuperación para recuperar datos perdidos de las últimas 24 horas si no puedes volver a conectarte dentro de la ventana de backfill de 5 minutos.

La función de recuperación de streaming te permite disponer de una ventana de backfill extendida de 24 horas. Recuperación te permite “reproducir” el periodo de tiempo de los datos que faltan. Se inicia un flujo de recuperación cuando realizas una solicitud de conexión usando los parámetros de solicitud `startTime` y `endTime`. Una vez conectado, Recuperación volverá a transmitir el periodo de tiempo indicado y luego se desconectará.  

|     |     |     |
| :--- | :--- | :--- |
| **Nombre** | **Tipo** | **Descripción** |
| `startTime` | date (ISO 8601) | YYYY-MM-DDTHH:mm:ssZ (ISO 8601/RFC 3339).<br /><br />Fecha en UTC que indica la hora de inicio desde la cual recuperar. |
| `endTime` | date (ISO 8601) | YYYY-MM-DDTHH:mm:ssZ (ISO 8601/RFC 3339).<br /><br />Fecha en UTC que indica la hora de finalización hasta la cual recuperar. |

URL de ejemplo de la solicitud: `https://api.x.com/2/powerstream?startTime=2022-07-12T15:10:00Z&endTime=2022-07-12T15:20:00Z`