---
title: V2 Webhooks API
sidebarTitle: 소개
keywords: ["웹훅", "웹훅 API", "웹훅 이벤트", "실시간 웹훅", "웹훅 알림", "웹훅 구독", "웹훅 관리"]
---

<div id="overview">
  ## 개요
</div>

v2 Webhooks API를 사용하면 개발자가 웹훅 기반 JSON 메시지를 통해 X 계정에서 발생하는 이벤트 알림을 실시간으로 수신할 수 있습니다. 이 API를 통해 웹훅을 등록·관리하고, 이벤트를 처리하는 컨슈머 애플리케이션을 개발하며, CRC(Challenge-Response Check) 및 서명 헤더를 통해 통신을 안전하게 보호할 수 있습니다.

<div id="feature-summary">
  ## 기능 요약
</div>

| 티어 | 가격 | 웹훅 수 |
| :---: | :---: | :---: |
| Self-Serve Pro | $5,000/월 | 1 |
| Enterprise | [영업팀에 문의](/ko/resources/enterprise/forms/enterprise-api-interest#enterprise-access-form) | 5+ |

<div id="products-that-support-webhooks">
  ## Webhook을 지원하는 제품
</div>

현재 webhook을 통해 이벤트를 전달하는 제품은 다음과 같습니다:

* [Account Activity API (AAA)](/ko/x-api/account-activity/introduction)
* [Filtered Stream](/ko/x-api/webhooks/stream/introduction)

<div id="manage-webhooks">
  ## Webhook 관리
</div>

Account Activity API는 서비스에 구독된 X 계정과 관련된 이벤트가 발생할 때마다 webhook 기반 JSON 메시지를 제공합니다. X는 이러한 활동을 등록해 둔 webhook으로 전송합니다. 다음 단계에서는 webhook과 구독 사용자(사용자 구독)를 관리하는 방법을 알아봅니다.

webhook과 구독 사용자를 등록, 조회, 제거하는 방법을 배우게 됩니다. 다양한 API 엔드포인트에 요청을 보내기 위해 간단한 cURL 명령어를 사용할 것입니다. cURL은 URL 문법을 사용해 요청을 보내거나 가져오는 커맨드라인(명령줄) 도구입니다.

이벤트 컨슈머 애플리케이션에서 webhook 이벤트를 수신하기 시작하기 전에 신경 써야 할 세부 사항이 몇 가지 있습니다. 아래에 설명된 대로 X 앱을 생성하고 Account Activity API 액세스를 받은 다음, webhook 이벤트를 처리하는 웹 앱을 개발해야 합니다. 

<div id="1-develop-a-webhook-consumer-app">
  ### 1. Webhook Consumer 앱 개발
</div>

X 앱과 연결된 새 webhook을 등록하려면, X webhook 이벤트를 수신하고 보안 요청에 응답하는 웹 앱을 개발·배포·호스팅해야 합니다.

*시작하기 전에 [샘플 앱](https://github.com/xdevplatform/account-activity-dashboard-enterprise/tree/master)을 먼저 살펴보는 것을 권장합니다!*

* 이벤트를 수신할 webhook 엔드포인트 역할을 하는, 공개적으로 접근 가능한 HTTPS URL을 가진 웹 앱을 만듭니다. 
  * URI *path*는 자유롭게 결정하면 됩니다. 예를 들어, 다음 예시는 유효합니다: [https://mydomain.com/service/listen](https://mydomain.com/service/listen)
  * 여러 소스의 webhook을 수신하는 경우 일반적인 패턴은 다음과 같습니다: [https://mydomain.com/webhook/twitter](https://mydomain.com/webhook/twitter)
  * 지정한 URL에는 포트 번호를 포함할 수 없습니다([https://mydomain.com:5000/NoWorkie](https://mydomain.com:5000/NoWorkie)).
* 먼저, X Challenge Response Check (CRC) GET 요청을 수신하고 올바르게 형식화된 JSON 응답을 반환하는 코드를 작성합니다. 
* 이후 webhook URL을 등록합니다. URL을 JSON 본문에 포함해 /2/webhooks 엔드포인트로 POST 요청을 보내야 합니다. 이 요청을 보내면 X가 CRC 요청을 웹 앱으로 전송합니다.
* webhook이 성공적으로 등록되면 응답에 webhook id가 포함됩니다. 이 webhook id는 나중에 webhook을 지원하는 제품에 요청을 보낼 때 필요합니다. 
* X는 등록한 URL로 이벤트를 포함한 POST 요청을 전송합니다. 이러한 이벤트는 JSON으로 인코딩됩니다. 예시 webhook JSON 페이로드는 [여기](/ko/x-api/account-activity/introduction#account-activity-data-object-structure)를 참고하세요.

<div id="optional-use-xurl-for-testing">
  #### 선택 사항: 테스트에 xurl 사용하기
</div>

테스트용으로 이제 xurl 도구가 임시 웹훅을 지원합니다! GitHub에서 최신 버전의 [`xurl` 프로젝트](https://github.com/xdevplatform/xurl)를 설치하고, 인증을 설정한 다음 다음 명령을 실행하세요:

```
xurl webhook start
```

이 작업은 임시 공개용 webhook URL을 생성하고, 모든 CRC 검사를 자동으로 처리하며, 들어오는 구독 이벤트를 모두 로그로 남깁니다. 배포 전에 설정을 확인하기에 아주 유용합니다. 예시 출력:

```
Starting webhook server with ngrok...
Enter your ngrok authtoken (leave empty to try NGROK_AUTHTOKEN env var):

Attempting to use NGROK_AUTHTOKEN environment variable for ngrok authentication.
Configuring ngrok to forward to local port: 8080
Ngrok tunnel established!
  Forwarding URL: https://<your-ngrok-subdomain>.ngrok-free.app -> localhost:8080

Use this URL for your X API webhook registration: https://<your-ngrok-subdomain>.ngrok-free.app/webhook

Starting local HTTP server to handle requests from ngrok tunnel (forwarded from https://<your-ngrok-subdomain>.ngrok-free.app)...
```

**중요 사항**

* 웹훅 URL을 등록할 때 웹 앱은 CRC 검사 암호화를 위해 앱의 consumer secret을 사용해야 합니다.

* 모든 수신 다이렉트 메시지는 웹훅을 통해 전달됩니다. [POST /2/dm&#95;conversations/with/:participant&#95;id/messages](/ko/x-api/direct-messages/send-a-new-message-to-a-user)로 전송되는 모든 다이렉트 메시지도 웹훅을 통해 전달됩니다. 이렇게 하면 다른 클라이언트를 통해 전송된 다이렉트 메시지도 웹 앱에서 파악할 수 있습니다.

* 동일한 웹훅 URL을 공유하는 웹 앱이 둘 이상이고 각 앱에 동일한 사용자가 매핑되어 있는 경우, 동일한 이벤트가 웹 앱마다 한 번씩, 여러 번 웹훅으로 전송됩니다.

* 일부 경우에는 웹훅이 중복된 이벤트를 수신할 수 있습니다. 웹훅 앱은 이러한 상황을 허용할 수 있도록 구현되어야 하며, 이벤트 ID를 기준으로 중복을 제거해야 합니다.

* 예제 코드를 참고하세요:

  * [Account Activity API Setup](https://github.com/m-rosinsky/XWebhookTest) — Account Activity API의 Enterprise 티어를 사용하여 웹훅 이벤트를 표시하는 Node.js 웹 앱입니다.

<div id="2-securing-webhooks">
  ### 2. Webhook 보안
</div>

X의 webhook 기반 API는 webhook 서버의 보안을 검증하기 위한 두 가지 방법을 제공합니다:

1. challenge-response 검사를 통해 webhook 이벤트를 수신하는 웹 앱의 소유권을 X가 확인할 수 있습니다.
2. 각 POST 요청의 signature 헤더를 통해 수신된 webhook이 X에서 전송된 것인지 확인할 수 있습니다.

구현 요구 사항은 CRC Check 섹션을 참조하세요.

<div id="3-the-webhooks-api">
  ### 3. Webhooks API
</div>

Webhook은 Webhook Management API를 통해 관리됩니다. 모든 엔드포인트는 OAuth 2 앱 전용 Bearer Token 인증이 필요합니다.

<div id="adding-a-webhook">
  #### [Webhook 추가](/ko/x-api/webhooks/create-webhook-config)
</div>

**POST /2/webhooks**

**설명:**

Webhook 구성을 생성합니다. 공개적으로 접근 가능한 `https` 콜백 URL을 JSON 본문에 포함해 전달해야 합니다.
주어진 애플리케이션 컨텍스트에 대해 새로운 webhook URL을 등록하는 것부터 시작합니다.

**인증:**

OAuth2 앱 전용 Bearer Token

* **Bearer token** `<BEARER_TOKEN>` 예: `AAAAAAAAAAAA0%2EUifi76ZC9Ub0wn...`

**매개변수 (JSON Body):**

```
{
    "url": "<your publicly accessible https callback url>"
}
```

* **URL** `<URL>` 예: `https://yourdomain.com/webhooks/twitter/`

**요청:** 다음 항목을 변경한 후, 아래 cURL 요청을 명령줄에 붙여넣어 실행하십시오.

````
  ```
  curl --request POST --url 'https://api.twitter.com/2/webhooks?url=<URL>' --header 'authorization: Bearer <BEARER_TOKEN>'
  --data '{
"url": "https://yourdomain.com/webhooks/twitter"
          }'
  ```
````

**응답:**

**성공 (200 OK)**

성공적인 응답은 웹훅이 생성되었고 초기 CRC 검사를 통과했음을 나타냅니다.

```
{
  "data": {
    "id": "<webhook_id>",
    "url": "<your callback url>",
    "valid": true,
    "created_at": "YYYY-mm-DDTHH:MM:ss.000Z"
  }
}
```

**실패 (400 Bad Request)**

요청이 실패하면 표준 오류 객체가 반환됩니다.

```
{
    "errors": [
      {
        "message": "<Reason>: <Details>"
      }
    ],
    "title": "Invalid Request",
    "detail": "One or more parameters to your request was invalid.",
    "type": "https://api.twitter.com/2/problems/invalid-request"
}
```

실패의 일반적인 원인은 다음과 같습니다.

| Reason                 | Description                                           |
| :--------------------- | :---------------------------------------------------- |
| `CrcValidationFailed`  | 콜백 URL이 CRC 검사에 올바르게 응답하지 않았습니다(예: 타임아웃, 잘못된 응답).     |
| `UrlValidationFailed`  | 제공된 콜백 URL이 요구사항을 충족하지 않습니다(예: `https`가 아님, 형식이 잘못됨). |
| `DuplicateUrlFailed`   | 제공된 콜백 URL에 대해 애플리케이션에서 이미 webhook이 등록되어 있습니다.        |
| `WebhookLimitExceeded` | 애플리케이션이 허용된 webhook 구성 수의 최대치에 도달했습니다.                |

<div id="viewing-a-webhook">
  #### [Viewing a webhook](/ko/x-api/webhooks/get-a-list-of-webhook-configs-associated-with-a-client-app)
</div>

**GET /2/webhooks**

**Description:** 애플리케이션(개발자 계정)에 연관된 모든 웹훅 구성을 조회합니다.

**Authentication:**

OAuth2 App Only Bearer Token

* **Bearer token** `<BEARER_TOKEN>` 예: `AAAAAAAAAAAA0%2EUifi76ZC9Ub0wn...`

* **URL** `<URL>` 예: `https://yourdomain.com/webhooks/twitter/`

**Request:** 해당 애플리케이션에 대해 등록된 모든 웹훅 URL과 그 상태를 조회하려면 다음 명령을 실행합니다.

아래 cURL 요청에서 필요한 값을 수정한 다음, 명령줄에 복사해 실행합니다.

````
  ```
  curl --request GET --url 'https://api.twitter.com/2/webhooks' --header 'authorization: Bearer <BEARER_TOKEN>'
  ```
````

**성공 (200 OK)**

웹훅 구성 목록을 반환합니다. 웹훅이 하나도 구성되어 있지 않으면 이 목록은 비어 있습니다.

*예시(웹훅 1개가 구성된 경우):*

```
{
  "data": [
    {
      "created_at": "YYYY-mm-DDTHH:MM:ss.000Z",
      "id": "<webhook_id>",
      "url": "<callback url>",
      "valid": true
    }
  ],
  "meta": {
    "result_count": 1
  }
}
```

*예시(웹훅이 구성되어 있지 않은 경우):*

```
{
  "data": [],
  "meta": {
    "result_count": 0
  }
}
```

<div id="removing-a-webhook">
  #### [웹훅 제거](/ko/x-api/webhooks/delete-webhook-config)
</div>

DELETE /2/webhooks/:webhook&#95;id

**설명:** 특정 `webhook_id`를 사용하여 웹훅 구성을 삭제합니다. 이 ID는 `POST /2/webhooks` 생성 응답이나 `GET /2/webhooks` 목록 응답에서 얻을 수 있습니다.

**인증:**

OAuth2 앱 전용 Bearer Token

* **Bearer token** `<BEARER_TOKEN>` 예: `AAAAAAAAAAAA0%2EUifi76ZC9Ub0wn...`

**경로 매개변수:**

| Parameter    | Description    |
| :----------- | :------------- |
| `webhook_id` | 삭제할 웹훅의 ID입니다. |

**요청:** 지정된 앱 구성에서 웹훅을 제거하려면 다음 명령을 실행합니다.

아래 cURL 요청에서 필요한 부분을 수정한 후 명령줄에 복사하여 실행합니다:

````
  ```
  curl --request DELETE --url 'https://api.twitter.com/2/webhooks/:WEBHOOK_ID' --header 'authorization: Bearer <BEARER_TOKEN>'
  ```

  **응답:**
````

**성공 (200 OK)**

성공적으로 삭제되면 &quot;deleted&quot; 상태 값이 true인 JSON 응답을 반환합니다.

*예시 (웹훅이 성공적으로 삭제된 경우):*

```
{
  "data": {
    "deleted": true
  }
}
```

**실패 (400 Bad Request)**

| Reason             | Description                                         |
| :----------------- | :-------------------------------------------------- |
| `WebhookIdInvalid` | 제공된 `webhook_id`를 찾을 수 없거나, 해당 id가 앱과 연결되어 있지 않습니다. |

<div id="validate-and-reenable-webhook">
  #### [웹훅 검증 및 재활성화](/ko/x-api/webhooks/webhook-crc-check)
</div>

**PUT /2/webhooks/:webhook&#95;id**

**설명:** 지정된 웹훅의 URL에 대해 CRC(Challenge Response Check)를 실행합니다. 검사가 성공하면 200을 반환하고 상태를 `valid`로 설정하여 웹훅을 다시 활성화합니다.

**인증:**

OAuth2 앱 전용 Bearer Token

* **Bearer token** `<BEARER_TOKEN>` 예: `AAAAAAAAAAAA0%2EUifi76ZC9Ub0wn...`

**경로 매개변수:**

| Parameter    | Description    |
| :----------- | :------------- |
| `webhook_id` | 검증할 웹훅의 id입니다. |

**요청:** 제공된 앱 구성에서 웹훅을 검증하려면 다음 명령을 실행합니다.

아래 cURL 요청에서 필요한 값을 수정한 후 명령줄에 복사해 실행합니다.

````
  ```
  curl --request PUT --url 'https://api.twitter.com/2/webhooks/:WEBHOOK_ID' --header 'authorization: Bearer <BEARER_TOKEN>'
  ```

  **응답:**
````

**성공 (200 OK)**

200 OK 응답은 CRC 체크 요청이 *시작되었음을* 나타냅니다. 이는 CRC 체크가 통과되었다는 것을 보장하지는 **않습니다**. 응답의 `valid` 필드는 체크 시도 *이후*의 상태를 반영합니다. CRC 체크가 성공하면 webhook의 상태가 `valid`로 업데이트됩니다. 현재 상태는 `GET /2/webhooks`를 사용하여 확인할 수 있습니다.

```
{
  "data": {
    "valid": true // CRC 확인 시도가 완료된 후의 상태를 나타냅니다
  }
}
```

**실패 (400 Bad Request)**

| Reason                | Description                                 |
| :-------------------- | :------------------------------------------ |
| `WebhookIdInvalid`    | 제공된 `webhook_id`를 찾을 수 없거나 앱과 연결되어 있지 않습니다. |
| `CrcValidationFailed` | 콜백 URL이 CRC 확인 요청에 올바르게 응답하지 않았습니다.         |

<div id="4-the-crc-check">
  ### 4. CRC 검사
</div>

Challenge Response Check(CRC)는 X가 제공한 callback URL이 유효하며, 해당 URL을 여러분이 제어하고 있음을 검증하는 방식입니다.

**CRC가 발생하는 시점:**

* 초기 webhook 등록 시(`POST /2/webhooks`)
* X에서 매시간 검증을 위해
* `PUT /2/webhooks/:id`를 통해 수동으로

예시:

```
GET https://your-webhook-url.com/webhook?crc_token=challenge_string
```

예제 JSON 응답 본문:

```
{
  "response_token": "sha256=<base64_encoded_hmac_hash>"
}
```

**응답을 구성하는 방법:**

* crc&#95;token을 메시지로 사용합니다.
* 앱의 **consumer secret**을 키로 사용합니다.
* HMAC SHA-256 해시를 생성합니다.
* 결과를 Base64로 인코딩합니다.

<div id="sample-apps">
  ## 샘플 앱
</div>

* [Simple webhook server](https://github.com/m-rosinsky/XWebhookTest/blob/main/app.py)
  * CRC 체크에 응답하고 POST 이벤트를 수신하는 방법을 보여 주는 단일 Python 스크립트입니다.
* [Account Activity API sample dashboard](https://github.com/xdevplatform/account-activity-dashboard-enterprise/tree/master)
  * [bun.sh](https://bun.sh)로 구현된 웹 앱으로, 웹훅과 구독을 관리하고 라이브 이벤트를 앱에서 직접 수신할 수 있습니다.