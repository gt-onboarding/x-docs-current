---
title: 게시물과 규칙 매칭
sidebarTitle: 게시물과 규칙 매칭
keywords: ["매칭 규칙", "필터 규칙", "규칙 매칭", "스트림 규칙", "Filtered Stream 규칙", "규칙 태그"]
---

<div id="matching-returned-posts-to-their-associated-rule">
  ### 반환된 게시물을 해당 규칙과 매칭하기
</div>

필터링 스트림 엔드포인트를 사용하면 단일 연결을 통해 여러 규칙을 적용할 수 있습니다. 스트림에서 게시물을 수신하기 시작하기 전에, 먼저 어떤 유형의 게시물에 관심이 있는지 지정하는 규칙을 생성해야 합니다. 

사용자 속성, 지리 위치, 언어 등 다양한 속성을 기준으로 게시물을 매칭하기 위한 규칙을 지정할 때, 이 규칙을 상위 수준에서 구분할 수 있도록 태그를 연결할 수 있습니다. 태그는 특히 많은 규칙을 사용하고 있는 경우 규칙에 컨텍스트를 부여하는 좋은 방법입니다. 필터링 규칙은 어떤 게시물 활동이 연결을 통해 전송될지를 결정합니다.

다른 유형의 게시물을 포착하기 위해 새 필터링 규칙을 추가하거나 기존 규칙을 제거해야 하는 경우, 앱에서 [POST tweets/search/stream/rules](/ko/x-api/posts/filtered-stream#post-2-tweets-search-stream-rules) 엔드포인트로 요청을 보내 처리할 수 있습니다. 이 요청이 전송되면 필터링 규칙이 자동으로 수정되고, 다시 연결할 필요 없이 데이터 스트림에 변경 사항이 바로 적용됩니다. 대부분의 규칙 추가는 약 20초 이내에 반영됩니다. 드문 경우지만, 외부 요인(예: 네트워크 연결 상태)에 따라 일치하는 게시물을 수신하기까지 더 오래 걸릴 수 있습니다. 규칙 목록 조회 엔드포인트에서 규칙을 찾을 수 없다면, 규칙 생성 요청이 성공했는지 확인해야 합니다. 이는 로그에서 오류 메시지가 있는지 확인하여 점검할 수 있습니다.

<div id="matching-rules">
  #### 매칭 규칙
</div>

활동이 filtered stream 연결을 통해 전달될 때, `matching_rules` 배열에는 전달된 게시물과 일치한 필터 목록이 포함됩니다.

게시물 페이로드에는 특정 게시물이 전달되도록 한 규칙의 id와 태그를 포함하는 추가 문자열 메타데이터가 있습니다. 여러 규칙이 하나의 게시물과 일치하는 경우, 활동은 이 메타데이터에 각 일치 규칙이 모두 포함된 상태로 한 번만 전달됩니다. 매칭 규칙은 특정 게시물을 특정 규칙과 쉽게 연결할 수 있게 해 주며, 특히 서로 다른 규칙을 많이 가지고 있는 경우에 유용합니다. 이와 같이 데이터가 단일 스트림을 통해 전달되므로, 고유한 `id`와 태그를 갖도록 하는 것이 매칭을 위해 필수적입니다. 

**다음은 게시물 페이로드에서 `matching_rules` 배열이 어떻게 표시되는지에 대한 예시입니다.**

```"matching_rules": [
    {
      "id": "1166916266197536768",
      "tag": "test-rule-tag-00000"
    },
    {
      "id": "1166916266197536769",
      "tag": "test-rule-tag-12345"
    }
  ]
```

<div id="rule-tags">
  #### 규칙 태그
</div>

각 필터링 규칙은 생성 시점에 태그와 함께 생성될 수 있습니다. 규칙 태그 자체에는 별도의 의미가 없으며, 규칙과 함께 전달되는 단순한 문자열(opaque string)로만 취급됩니다. 이러한 태그는 반환된 activity의 `matching_rules` 메타데이터에 포함되며, 상위 레벨에서 규칙을 더 쉽게 식별할 수 있도록 하는 데 목적이 있습니다. 

태그는 필터링 규칙을 논리적으로 그룹화하는 간편한 방법을 제공합니다. 예를 들어, 특정 규칙에 대해 고유한 ID를 생성해 해당 규칙의 태그로 사용할 수 있으며, 앱이 처리하는 activity 내에서 그 ID를 참조해 결과를 특정 고객, 캠페인, 카테고리 또는 기타 관련 그룹과 연관시킬 수 있습니다.

기존 규칙의 태그는 업데이트할 수 없으며, 규칙이 생성될 때에만 태그를 포함할 수 있다는 점에 유의하세요. 태그를 “업데이트”하거나 “이름을 바꾸기” 위해서는 먼저 해당 규칙을 삭제한 후, 원하는 태그와 함께 다시 추가해야 합니다. 가장 좋은 방법은 태그로 고유 식별자를 사용하는 것이며, 이를 통해 시스템이 자체 앱 내에서 다양한 다른 데이터 포인트와 연관시킬 수 있으므로 규칙 집합을 변경할 필요 없이 운용할 수 있습니다.

<div id="filtered-stream-recovery-and-redundancy-features">
  ### Filtered stream - 복구 및 이중화 기능
</div>

<Note>
  참고: 이러한 복구 및 이중화 기능은 Enterprise 액세스 권한이 있는 사용자만 이용할 수 있습니다.
</Note>