---
title: 빠른 시작
sidebarTitle: 빠른 시작
keywords: ["filtered stream 빠른 시작", "스트리밍 빠른 시작", "filtered stream 튜토리얼", "스트림 가이드", "스트리밍 예제"]
---

import { Button } from '/snippets/ko/button.mdx';

<div id="getting-started-with-the-filtered-stream-endpoints">
  ## 필터링 스트림 엔드포인트 시작하기
</div>

이 퀵스타트 가이드는 cURL 요청을 사용해 필터링 스트림 엔드포인트 그룹에 처음으로 요청을 보내는 방법을 안내합니다. cURL은 최소한의 설정만으로 HTTP 요청을 보낼 수 있는 커맨드 라인 도구입니다.

여러 언어의 샘플 코드를 보고 싶다면 [X API v2 sample code](https://github.com/xdevplatform/Twitter-API-v2-sample-code) GitHub 리포지토리를 방문하세요. 

<Note>
  **사전 준비 사항**

  이 가이드를 완료하려면 요청 인증에 사용할 [keys and tokens](/ko/resources/fundamentals/authentication) 묶음이 필요합니다. 다음 단계를 따라 이러한 키와 토큰을 생성할 수 있습니다.

  * [개발자 계정에 가입](https://developer.x.com/en/apply-for-access)하고 승인을 받으세요.
  * developer portal에서 [Project](/ko/resources/fundamentals/projects)와 연결된 [developer App](/ko/resources/fundamentals/developer-apps)을 생성하세요.
  * App의 “Keys and tokens” 페이지로 이동하여 필요한 자격 증명을 생성하세요. 모든 자격 증명은 반드시 안전한 위치에 보관하세요.
</Note>

<div id="steps-to-build-a-filtered-stream-request-using-curl">
  ### cURL을 사용해 필터링 스트림 요청을 만드는 단계
</div>

**1단계: 규칙 생성**

규칙은 하나 이상의 다양한 [operators](/ko/x-api/posts/filtered-stream#building-rules-for-filtered-stream)로 구성되며, 불리언 논리와 괄호를 사용해 조합하여 어떤 게시물이 스트림으로 전달될지 정의하는 데 도움이 됩니다. 이 가이드에서는 스트림을 필터링해 키워드 &quot;cat&quot;과 이미지를 모두 포함하는 게시물을 찾습니다. 규칙은 다음과 같습니다.

```cat has:images
```

**2단계: 규칙에 태그 추가하기**

스트림에는 여러 개의 규칙을 동시에 추가할 수 있습니다. 스트리밍 연결을 열면, 이 규칙들 중 어느 하나와 일치하는 게시물은 모두 동일한 스트리밍 연결을 통해 전송됩니다. 어떤 게시물이 어떤 규칙과 일치했는지 알 수 있도록, 규칙 생성 요청에 태그를 함께 전달할 수 있습니다. 해당 규칙과 일치하는 각 게시물에는 어떤 규칙과 일치했는지를 나타내는 태그 필드가 게시물 페이로드 내에 포함됩니다. 이 규칙에는 다음 태그를 지정하겠습니다:

```cats with images
```

**3단계: 규칙을 스트림에 추가하기**

이 엔드포인트를 호출할 때는 규칙과 태그가 포함된 `application/json` 형식의 바디를 함께 전달해야 합니다. 또한 이 규칙을 스트림에 추가하려고 하기 때문에, 규칙 값과 태그를 `add` 객체 안에 넣어 둔 것을 확인할 수 있습니다. 이 JSON 바디는 다음과 같은 형태입니다:

```json
{
  "add": [
    {
      "value": "cat has:images",
      "tag": "이미지가 포함된 고양이"
    }
  ]
}
```

이제 이 JSON 본문 구성을 마쳤으므로, 이를 cURL 요청에 추가하면 아래와 같은 형태가 됩니다. 이 요청은 아직 완성되지 않았으니, 이후 단계에 도달할 때까지 전송하지 마세요.

```json
curl -X POST 'https://api.x.com/2/tweets/search/stream/rules' \
-H "Content-type: application/json" \
-H "Authorization: Bearer $APP_ACCESS_TOKEN" -d \
'{
  "add": [
    {"value": "cat has:images", "tag": "cats with images"}
  ]
}'`
```

**4단계: 요청 인증하기**

filtered stream 규칙 엔드포인트는 [OAuth 2.0 App-Only 인증](/ko/resources/fundamentals/authentication#app-only-authentication-and-oauth-2-0-bearer-token)이 필요하므로, 3단계의 cURL 명령에서 사용한 $APP&#95;ACCESS&#95;TOKEN을 사전 준비 단계에서 생성한 [App Access Token](/ko/resources/fundamentals/authentication#using-and-generating-an-app-only-bearer-token)으로 바꿔야 합니다. 

**5단계: 스트림에 규칙 추가하기**

이제 cURL 요청을 실행하여 규칙을 스트림에 추가합니다. cURL 명령을 명령줄 인터페이스에 복사해 붙여넣고 “return” 키를 누르세요. 

cURL 요청이 성공하면 value, tag, id(규칙의 고유 식별자 역할을 합니다)에 대한 데이터가 포함된 응답을 받게 됩니다. 이 응답은 다음 예시와 비슷한 형태입니다:

```json
{
  "data": [
    {
      "value": "cat has:images",
      "tag": "이미지가 포함된 고양이",
      "id": "1273026480692322304"
    }
  ],
  "meta": {
    "sent": "2020-06-16T22:55:39.356Z",
    "summary": {
      "created": 1,
      "not_created": 0,
      "valid": 1,
      "invalid": 0
    }
  }
}
```

다음 GET 요청을 rules 엔드포인트로 보내서 규칙이 성공적으로 추가되었는지 확인할 수 있습니다. 이때 다시 한 번 $APP&#95;ACCESS&#95;TOKEN을 자신의 토큰으로 바꿔야 합니다. 이 요청은 스트림에 추가된 모든 규칙의 전체 목록을 반환합니다.

```bash
curl -X GET 'https://api.x.com/2/tweets/search/stream/rules' \
-H "Authorization: Bearer $APP_ACCESS_TOKEN"
```

cURL 요청이 성공적으로 완료되었다면 다음과 같은 응답을 받게 됩니다:

```json
{
	"data": [{
		"id": "1273028376882589696",
		"value": "cat has:images",
		"tag": "cats with images"
	}],
	"meta": {
		"sent": "2020-06-16T23:14:06.498Z"
	}
}
```

**6단계: 조회할 필드를 선택하고 지정합니다**

5단계 이후에 스트림에 연결하면 응답에서 기본 [Post object](/ko/x-api/fundamentals/data-dictionary#tweet) 필드인 id, text, edit&#95;history&#95;tweet&#95;ids를 받게 됩니다. 이 외에 추가 필드를 받고 싶다면 요청에서 [field](/ko/x-api/fundamentals/fields) 및/또는 [expansion](/ko/x-api/fundamentals/expansions) 매개변수로 해당 필드를 지정해야 합니다.

이 연습에서는 서로 다른 객체에서 세 가지 서로 다른 필드 세트를 요청해 보겠습니다.

1. 기본 Post 객체의 추가 tweet.created&#95;at 필드
2. 반환된 게시물의 작성자에 해당하는 [user object](/ko/x-api/fundamentals/data-dictionary#user)의 기본 필드: id, name, username
3. 해당 user 객체의 추가 user.created&#95;at 필드
    

이 필드를 요청하려면 요청에 다음 값을 전달해야 합니다:

|              |                |                                                                 |
| :----------- | :------------- | :-------------------------------------------------------------- |
| Key          | Value          | Returned fields                                                 |
| tweet.fields | created&#95;at | tweets.created&#95;at                                           |
| expansions   | author&#95;id  | includes.users.id, includes.users.name, includes.users.username |
| user.fields  | created&#95;at | includes.users.created&#95;at                                   |

이제 이를 알게 되었으므로, 스트림에 연결하기 위한 요청 URL을 다음과 같은 형태로 조합할 수 있습니다:

```bash
https://api.x.com/2/tweets/search/stream?tweet.fields=created_at&expansions=author_id&user.fields=created_at
```

**7단계: 스트림에 연결하고 응답을 확인합니다**

이제 규칙이 설정되었고 반환받을 필드를 지정했으므로, 제출한 규칙과 일치하는 Post 객체를 전송하는 스트림에 연결할 준비가 되었습니다. 아래는 6단계에서 만든 URL을 요청에 추가한 후의 cURL 명령 예시입니다:

```bash
curl -X GET -H "Authorization: Bearer $APP_ACCESS_TOKEN" "https://api.x.com/2/tweets/search/stream?tweet.fields=created_at&expansions=author_id&user.fields=created_at"
```

다시 말씀드리지만, 이 요청은 OAuth 2.0 앱 전용(App-Only) 방식으로 인증해야 하므로, 명령줄 도구에 복사해 붙여넣기 전에 $APP&#95;ACCESS&#95;TOKEN을(를) 본인의 자격 증명으로 바꾸었는지 확인하세요.

필터링 스트림에 연결되면, 설정한 규칙과 일치하는 게시물을 다음과 같은 JSON 형식으로 받기 시작합니다:

```json
{
  "data": [
    {
      "author_id": "2244994945",
      "created_at": "2022-09-14T19:00:55.000Z",
      "id": "1228393702244134912",
      "edit_history_tweet_ids": ["1228393702244134912"],
      "text": "개발자가 발렌타인 카드에 뭐라고 썼을까요?\n  \nwhile(true) {\n    I = Love(You);  \n}"
    },
    {
      "author_id": "2244994945",
      "created_at": "2022-09-12T17:09:56.000Z",
      "id": "1227640996038684673",
       "edit_history_tweet_ids": ["1227640996038684673"],
      "text": "Doctors: Googling stuff online does not make you a doctor\n\nDevelopers: https://t.co/mrju5ypPkb"
    },
    {
      "author_id": "2244994945",
      "created_at": "2022-09-27T20:26:41.000Z",
      "id": "1199786642791452673",
      "edit_history_tweet_ids": ["1199786642791452673"],
      "text": "C#"
    }
  ],
  "includes": {
    "users": [
      {
        "created_at": "2013-12-14T04:35:55.000Z",
        "id": "2244994945",
        "name": "Twitter Dev",
        "username": "TwitterDev"
      }
    ]
  }
}
```

연결을 종료하려면 Mac 또는 Windows에서 사용 중인 명령줄 도구에서 Ctrl+C를 눌러 연결을 끊거나, 창을 닫으면 됩니다.
