---
title: "데이터 보강: Enterprise"
keywords: ["데이터 보강", "Enterprise 보강", "GNIP 보강", "데이터 보강", "보강된 데이터", "Enterprise 데이터 보강"]
---

<div id="introduction">
  ## Introduction
</div>

`Enterprise`

Enterprise 보강 기능은 일부 데이터 API의 응답 페이로드에 포함되는 추가 메타데이터입니다. 유료 구독 요금제에서만 사용할 수 있습니다.

아래 표는 각 보강 기능에 대한 간단한 설명을 제공합니다:

| Enrichment: | Description: |
| :--- | :--- |
| Expanded and Enhanced URLs | 게시물 본문에 포함된 단축 URL(예: bitly)을 자동으로 확장하고, 대상 페이지의 HTML 제목 및 설명 메타데이터를 제공합니다. |
| Matching rules object | 수신된 게시물에 어떤 규칙이 일치했는지를 나타냅니다. 이 객체는 응답 객체에서 rule tag와 rule ID를 반환합니다. |
| Poll metadata | 게시물에 투표가 포함되어 있는지 표시하고, 투표 선택지 목록과 함께 투표 기간 및 만료 시간을 포함합니다. |
| Profile geo | 사용자 프로필 위치에서 추출한 데이터로, 가능한 경우 [경도, 위도] 좌표와 관련 장소 메타데이터를 제공합니다. |

<div id="expanded-and-enhanced-urls">
  ### 확장 및 향상된 URL
</div>

Expanded and Enhanced URL 보강 기능은 게시물 본문에 포함된 단축 URL을 자동으로 확장하고, 이렇게 확장된 URL을 payload 내 메타데이터로 포함합니다. 추가로, 이 보강 기능은 목적지 페이지의 `title` 및 `description`에서 가져온 HTML 페이지 메타데이터도 제공합니다.

**중요 사항:**

* 단축 링크를 원래 URL로 해제하기 위해, 시스템은 제공된 URL에 대해 HTTP HEAD 요청을 보내고 최종 URL에 도달할 때까지 모든 리다이렉트를 따라갑니다. 이 최종 URL(페이지 콘텐츠 자체가 아님)만 응답 payload에 포함됩니다.

* URL 보강 기능은 실시간 스트림에 약 5~10초의 지연 시간을 추가합니다.

* Full Archive Search API에 대한 요청의 경우, 확장된 URL 보강 데이터는 게시된 지 13개월 이내인 게시물에 대해서만 제공됩니다.

* URL 보강 기능은 게시물 링크(인용 트윗을 포함), Moments 링크, 그리고 게시물에 포함된 프로필 링크에는 제공되지 않습니다. 
   

<div id="post-payload">
  #### 게시물 페이로드
</div>

Expanded and Enhanced URL 보강 정보는 게시물 페이로드의 `entities` 객체 내, 특히 `entitites.urls.unwound` 객체에 포함되어 있습니다. 여기에는 다음과 같은 메타데이터 필드가 제공됩니다:

* 확장된 URL - `unwound.url`
* 확장된 HTTP 상태 코드 - `unwound.status`
* 확장된 URL HTML 제목 - 300자 제한 - `unwound.title`
* 확장된 URL HTML 설명 - 1000자 제한 - `unwound.description`

**다음은 URL 보강 정보가 포함된 [entities 객체](/ko/x-api/enterprise-gnip-2.0/fundamentals/data-dictionary#x-entities)의 예시입니다.**

```
"entities": {
    "hashtags": [

    ],
    "urls": [
      {
        "url": "https:\/\/t.co\/HkTkwFq8UT",
        "expanded_url": "http:\/\/bit.ly\/2wYTb9y",
        "display_url": "bit.ly\/2wYTb9y",
        "unwound": {
          "url": "https:\/\/www.forbes.com\/sites\/laurencebradford\/2016\/12\/08\/11-websites-to-learn-to-code-for-free-in-2017\/",
          "status": 200,
          "title": "11 Websites To Learn To Code For Free In 2017",
          "description": "It\u2019s totally possible to learn to code for free...but what are the best resources to achieve that? Here are 11 websites where you can get started."
        },
        "indices": [
          10,
          33
        ]
      }
    ],
    "user_mentions": [

    ],
    "symbols": [

    ]
  },
```

**다음은 확장 정보가 추가되지 않은 게시물 링크를 포함한 entities 객체의 예시입니다:
**

```
"entities": {
  "urls": [{
    "url": "https://t.co/SywNbZdDmb",
    "expanded_url": "https://x.com/XDevelopers/status/1050118621198921728",
    "display_url": "x.com/XDevelopers/s…",
     "indices": [
        142,
        165
     ]
   }
  ]
}
```

<div id="filtering-operators">
  #### 필터링 연산자
</div>

다음 연산자는 URL 메타데이터의 관련 필드에서 토큰 단위 일치를 기반으로 필터링합니다.

**url:**

* 예: “url:tennis”
* Expanded URL 중 “tennis”라는 단어를 포함하는 항목에 대해 토큰 단위로 일치 여부를 검사합니다.
* 또한 “url:npr.org”과 같이 사용하여 특정 웹사이트의 링크를 포함하거나 제외하는 필터로 사용할 수도 있습니다.

**url&#95;title:**

* 예: “url&#95;title:tennis”
* Expanded URL의 HTML title 중 “tennis”라는 단어를 포함하는 항목에 대해 토큰 단위로 일치 여부를 검사합니다.
* payload에 포함된 HTML title 데이터에 대해 일치 여부를 검사하며, title 데이터는 최대 300자까지 제공됩니다.

**url&#95;description:**

* 예: “url&#95;description:tennis”
* Expanded URL의 HTML description 중 “tennis”라는 단어를 포함하는 항목에 대해 토큰 단위로 일치 여부를 검사합니다.
* payload에 포함된 HTML description에 대해 일치 여부를 검사하며, description은 최대 1000자까지 제공됩니다.
   

<div id="http-status-codes">
  #### HTTP Status Codes
</div>

확장된 URL 인리치먼트는 언와인드(unwind)하려는 최종 URL에 대한 HTTP 상태 코드도 제공합니다. 일반적인 경우에는 200 값이 됩니다. 다른 400번대 상태 코드는 URL을 해석(해결)하는 데 문제가 있음을 나타냅니다.

URL을 언와인드하려고 시도할 때 여러 가지 상태 코드가 반환될 수 있습니다. URL을 언와인드하는 과정에서 리다이렉트를 받게 되면, 다음 중 하나가 발생할 때까지 이를 계속 따라갑니다.

* 200번대 코드에 도달한 경우(성공)
* 리다이렉트가 아닌 코드에 도달한 경우(실패)
* 최종 URL을 합리적인 시간 안에 해석할 수 없어 타임아웃이 발생한 경우(408 - timeout 반환)
* 어떤 형태로든 예외가 발생한 경우
   

예외가 발생한 경우, 다음과 같이 사유와 반환되는 상태 코드 간의 매핑을 사용합니다.

| Reason | Status Code Returned |
| :--- | :--- |
| SSL Exceptions | 403 (Forbidden) |
| Unwinding not allowed by URL | 405 |
| Socket Timeout | 408 (Timeout) |
| Unknown Host Exception | 404 (Not Found) |
| Unsupported Operation | 404 (Not Found) |
| Connect Exception | 404 (Not Found) |
| Illegal Argument | 400 (Bad Request) |
| Everything else | 400 (Bad Request) |

<div id="matching-rules">
  ### 매칭 규칙
</div>

매칭 규칙 enrichment는 수신된 게시물에 대해 어떤 규칙이 일치했는지를 나타내는 메타데이터 객체입니다. 이는 주로 PowerTrack 스트림에서 사용됩니다.

매칭은 규칙에 포함된 용어와의 정확한 일치로 수행되며, activity 콘텐츠를 구두점이 있을 때와 없을 때 모두 스캔합니다. 대소문자는 구분하지 않습니다. 콘텐츠에 규칙에 정의된 모든 용어가 포함된 것으로 확인되면, 어떤 규칙으로 인해 매칭이 발생했는지를 나타내는 루트 수준의 matching&#95;rules 객체가 포함됩니다.

**PowerTrack**

PowerTrack(실시간, Replay, Historical)을 통해 전달되는 게시물에는 다음과 같이 matching&#95;rules 객체가 포함됩니다:

```
"matching_rules": [{
        "tag": null,
        "id": 907728589029646336,
        "id_str": "907728589029646336"
    }]
```

PowerTrack에서 `matching_rules` 객체는 해당 결과와 일치한 *모든* 규칙을 나타냅니다. 즉, 하나의 게시물에 둘 이상의 규칙이 일치하더라도 해당 게시물은 한 번만 전달되지만, `matching_rules` 요소에는 일치한 모든 규칙이 포함됩니다.

<div id="poll-metadata">
  ### 투표 메타데이터
</div>

투표 메타데이터는 강화된 네이티브 형식 페이로드 전반에서 모든 제품(Realtime 및 Historical API)에 무료로 제공되는 보강 정보입니다. 이 메타데이터는 게시물에 투표가 포함되어 있음을 나타내고, 투표 선택지 목록을 포함하며, 투표 기간과 만료 시간도 포함합니다. 이 보강 정보를 사용하면 투표의 존재를 쉽게 파악할 수 있고, 표시를 위해 투표 게시물을 올바르게 렌더링할 수 있습니다.

<div id="important-details">
  ##### 중요한 세부 정보:
</div>

* 모든 Enterprise API(PowerTrack, Replay, Search, Historical PowerTrack)에서 제공됨
  * *참고:* Replay 및 Historical PowerTrack의 경우, 이 메타데이터는 02/22/17에 처음 제공되었습니다.
* 투표 정보나 투표 결과는 포함되지 않음
* 현재는 필터나 연산자를 지원하지 않음
* **enriched native format**에서만 제공됨
  * Enriched native format은 Console에서 언제든지 변경할 수 있는 사용자 제어 설정입니다: *Select a Product (PowerTrack, Replay, Search) &gt; Settings tab &gt; Output Format (Leave data in its original format)*

<div id="post-payload">
  #### 게시물 페이로드
</div>

투표 게시물에는 페이로드의 “entities.polls” 객체 내에 다음 메타데이터가 포함됩니다:

* 최대 네 개의 옵션이 포함된 “options” 배열 (각 옵션에는 위치(1-4)와 옵션 텍스트 포함)
* 투표 종료 일시
* 투표 기간

추가 참고를 위해 아래의 샘플 페이로드를 확인하세요.

<div id="sample-payload">
  #### 예시 페이로드
</div>

아래는 추가된 투표 메타데이터가 포함된 네이티브 형식 페이로드의 일부입니다:

```json
"entities":{
          "hashtags":[],
          "urls":[],
          "user_mentions":[],
          "symbols":[],
          "polls":[
             {
                "options":[
                   {
                      "position":1,
                      "text":"The better answer"
                   },
                   {
                      "position":2,
                      "text":"The best answer"
                   }
                ],
                "end_datetime":"Sat Feb 04 15:33:11 +0000 2017",
                "duration_minutes":1440
             }
          ]
       },
```

<div id="profile-geo">
  ### 프로필 위치 정보
</div>

#### 소개

많은 X 사용자 프로필에는 사용자가 제공한 공개 위치 정보가 포함되어 있습니다. 이 데이터는 user.location에서 일반 문자열로 반환됩니다([User object data dictionary](/ko/x-api/enterprise-gnip-2.0/fundamentals/data-dictionary#native-enriched-user-object) 참조). Profile Geo Enrichment는 가능한 경우 위치 문자열을 지오코딩하고 정규화하여 user.location 값과 관련된 구조화된 지오데이터를 추가합니다. 위도/경도 좌표와 관련 장소 메타데이터는 Enterprise API 제품에서 Post payload의 일부로 포함된 경우에만 user.derived.locations에 *추가됩니다*. 이 데이터는 [enriched native format](/ko/x-api/enterprise-gnip-2.0/fundamentals/data-dictionary)을 사용할 때 제공되며, [PowerTrack rules](/ko/x-api/enterprise-gnip-2.0/fundamentals/rules-filtering#enterprise-operators)를 조합하여 필터링할 수 있습니다.

<Note>
  **참고:** Profile Geo Enrichment를 생성하는 데 사용되는 일부 보조 지오데이터는 GeoNames.org에서 제공되며, X는 이를 [Creative Commons Attribution 3.0 License](https://creativecommons.org/licenses/by/3.0/us/legalcode)에 따라 사용합니다.
</Note>

Profile Geo 데이터는 X의 PowerTrack, Replay, Volume Stream, Search 및 Historical PowerTrack API에 포함됩니다.

<div id="profile-geo-data">
  #### Profile Geo 데이터
</div>

| Enriched native field name | Example value | Description |
| :--- | :--- | :--- |
| user.derived.locations.country | United States | 게시물을 작성한 사용자의 국가입니다. |
| user.derived.locations.country&#95;code | US  | 게시물을 작성한 사용자의 국가에 해당하는 두 글자의 ISO-3166 국가 코드입니다. |
| user.derived.locations.locality | Birmingham | 게시물을 작성한 사용자의 로컬리티(일반적으로 도시)입니다. |
| user.derived.locations.region | Alabama | 게시물을 작성한 사용자의 지역(일반적으로 주/도)입니다. |
| user.derived.locations.sub&#95;region | Jefferson County | 게시물을 작성한 사용자의 하위 지역(일반적으로 카운티)입니다. |
| user.derived.locations.full&#95;name | Birmingham, Alabama, United States | 게시물을 작성한 사용자의 위치(하위 지역 제외)를 나타내는 전체 이름입니다. |
| User.derived.locations.geo | See Below | 게시물을 작성한 사용자의 위치 중 가장 세분화된 위치에 해당하는 좌표의 위도/경도 값을 포함하는 배열입니다. |

Historical PowerTrack, Search 및 PowerTrack API는 Profile Geo 데이터를 기반으로 한 필터링을 지원합니다. Profile Geo 데이터 필터링에 사용할 수 있는 연산자에 대한 자세한 내용은 해당 제품 설명서를 참조하세요.

<div id="sample-payload">
  #### 예시 페이로드
</div>

```
{
    "user": {
        "derived": {
            "locations": \[
                {
                    "country": "United States",
                    "country_code": "US",
                    "locality": "Birmingham",
                    "region": "Alabama",
                    "sub_region": "Jefferson County",
                    "full_name": "Birmingham, Alabama, United States",
                    "geo": {
                        "coordinates": \[
                            -86.80249,
                            33.52066
                        \],
                        "type": "point"
                    }
                }
            \]
        }
    }
}
```

<div id="limitations">
  #### 제한 사항
</div>

* Profile Geo enrichment는 프로필 위치 문자열로 설명된 지리적 장소 가운데 가장 적절한 장소를 판별하려고 합니다. 비슷한 이름을 가진 여러 장소가 있거나 이름 자체가 모호한 경우 등 여러 요인으로 인해 결과가 항상 정확하지 않을 수 있습니다.
* 사용자의 프로필 위치 필드(actor.location)에 값이 없는 경우에는 분류를 시도하지 않습니다.
* 정밀도 수준(Precision Level): Profile Geo Enrichment를 신뢰할 수 있는 수준으로 국가 또는 지역 단위까지만 판별할 수 있는 경우, subRegion 및 locality와 같은 더 낮은 수준의 지리 정보는 payload에서 생략됩니다.
* Profile Geo enrichment는 enrichment 결과의 정밀도 수준에 해당하는 위도/경도 좌표(단일 지점)를 제공합니다. 이 좌표는 enrichment 위치 결과의 지리적 중심을 나타냅니다. 예를 들어 정밀도 수준이 국가 단위인 경우, 해당 좌표는 그 국가의 지리적 중심으로 설정됩니다.
* 주소 속성(locality/region/country/country code)에 대해 제공되는 PowerTrack 연산자는 다양한 규칙 조합을 가능하게 하기 위해 의도적으로 세분화되어 있습니다. 이름이 같은 여러 위치 중 특정 위치만을 타깃팅하려는 경우, 주소 규칙을 조합하는 방식을 고려하십시오. 예를 들어 다음과 같이 하면 “San Francisco, Philippines”에 대한 매치를 피할 수 있습니다: profile&#95;locality:&quot;San Francisco&quot; profile&#95;region:California 개별 Profile Geo 필드를 타깃팅하는 규칙을 작성할 때는, 세분화 수준이 높아질수록 조회되는 결과가 더 제한된다는 점을 유의하십시오. 어떤 경우에는 특정 도시의 데이터를 보려고 할 때, 해당 도시와 상당 부분 겹치는 region 규칙만 사용하는 편이 나을 수 있습니다. 예를 들어 스위스 취리히 시의 경우 profile&#95;region:&quot;Zurich&quot;을 사용하면 주변 지역까지 포함하여 효과적으로 타깃팅할 수 있습니다.
* 네이티브 geo가 포함된 게시물과 함께 사용하기: Profile Geo enrichment는 payload 내 네이티브 geo 값과는 다른, 게시물에 대한 대체 유형의 지리 정보를 제공합니다. 이 두 가지 유형의 지리 정보를 함께 사용하면 특정 영역과 관련된 가능한 모든 게시물(사용 가능한 지리 데이터 기준)을 포착할 수 있지만, 개념적으로 동일한 것은 아닙니다.