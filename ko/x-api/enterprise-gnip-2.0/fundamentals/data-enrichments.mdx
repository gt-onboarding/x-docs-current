---
title: "데이터 인리치먼트: Enterprise"
keywords: ["데이터 인리치먼트", "Enterprise 인리치먼트", "GNIP 인리치먼트", "데이터 인리치먼트", "인리치된 데이터", "Enterprise 데이터 인리치먼트"]
---

<div id="introduction">
  ## Introduction
</div>

`Enterprise`

Enterprise 보강 기능은 일부 데이터 API의 응답 페이로드에 추가로 포함되는 메타데이터입니다. 유료 구독 플랜에서만 제공됩니다.

아래 표에서는 각 보강 기능에 대한 간략한 설명을 제공합니다:

| Enrichment: | Description: |
| :--- | :--- |
| Expanded and Enhanced URLs | 게시물 본문에 포함된 단축 URL(예: bitly)을 자동으로 확장하고, 대상 페이지의 HTML Title 및 Description 메타데이터를 제공합니다. |
| Matching rules object | 어떤 규칙이 수신된 게시물과 일치했는지를 나타냅니다. 이 객체는 응답 객체에서 규칙 태그와 규칙 ID를 반환합니다. |
| Poll metadata | 게시물에 설문조사가 존재하는지를 표시하고, 설문 선택지 목록을 포함하며, 설문 기간과 만료 시간을 모두 포함합니다. |
| Profile geo | 가능한 경우 사용자 프로필 위치 데이터에서 파생된 [경도, 위도] 좌표와 관련 장소 메타데이터를 포함합니다. |

<div id="expanded-and-enhanced-urls">
  ### 확장 및 향상된 URL
</div>

Expanded and Enhanced URL 보강 기능은 게시물 본문에 포함된 단축 URL을 자동으로 확장하고, 이렇게 얻은 최종 URL을 페이로드 내 메타데이터로 포함합니다. 추가로, 이 보강 기능은 목적지 페이지의 `title` 및 `description`에서 가져온 HTML 페이지 메타데이터도 제공합니다.

**중요 세부 정보:**

* 단축 링크를 해석하기 위해, 시스템은 제공된 URL에 대해 HTTP HEAD 요청을 보내고 최종 URL에 도달할 때까지 모든 리다이렉트를 따라갑니다. 이때 페이지 콘텐츠 자체가 아닌, 이 최종 URL만 응답 페이로드에 포함됩니다.

* URL 보강 기능은 실시간 스트림에 약 5~10초의 지연 시간을 추가합니다.

* Full Archive Search API에 대한 요청의 경우, 확장된 URL 보강 데이터는 게시된 지 13개월 이내인 게시물에 대해서만 제공됩니다.

* URL 보강 기능은 게시물에 포함된 게시물 링크(인용 트윗 포함), Moments 링크 및 프로필 링크에는 제공되지 않습니다. 
   

#### 게시물 페이로드

Expanded and Enhanced URL enrichment 데이터는 게시물 페이로드의 `entities` 객체, 보다 구체적으로는 `entitites.urls.unwound` 객체 안에 있습니다. 여기에는 다음과 같은 메타데이터 필드가 제공됩니다:

* 확장된 URL - `unwound.url`
* 확장된 HTTP 상태 - `unwound.status`
* 확장된 URL HTML 제목 - 300자 제한 - `unwound.title`
* 확장된 URL HTML 설명 - 1000자 제한 - `unwound.description`

**다음은 URL enrichment가 포함된 [entities object](/ko/x-api/enterprise-gnip-2.0/fundamentals/data-dictionary#x-entities)의 예시입니다.**

```
"entities": {
    "hashtags": [

    ],
    "urls": [
      {
        "url": "https:\/\/t.co\/HkTkwFq8UT",
        "expanded_url": "http:\/\/bit.ly\/2wYTb9y",
        "display_url": "bit.ly\/2wYTb9y",
        "unwound": {
          "url": "https:\/\/www.forbes.com\/sites\/laurencebradford\/2016\/12\/08\/11-websites-to-learn-to-code-for-free-in-2017\/",
          "status": 200,
          "title": "11 Websites To Learn To Code For Free In 2017",
          "description": "It\u2019s totally possible to learn to code for free...but what are the best resources to achieve that? Here are 11 websites where you can get started."
        },
        "indices": [
          10,
          33
        ]
      }
    ],
    "user_mentions": [

    ],
    "symbols": [

    ]
  },
```

**다음은 확장되지 않은 게시물 링크를 포함한 entities 객체의 예시입니다:
**

```
"entities": {
  "urls": [{
    "url": "https://t.co/SywNbZdDmb",
    "expanded_url": "https://x.com/XDevelopers/status/1050118621198921728",
    "display_url": "x.com/XDevelopers/s…",
     "indices": [
        142,
        165
     ]
   }
  ]
}
```

<div id="filtering-operators">
  #### 필터링 연산자
</div>

다음 연산자는 URL 메타데이터의 관련 필드에서 토큰화된 일치 결과를 기준으로 필터링을 수행합니다.

**url:**

* 예: “url:tennis”
* 단어 tennis를 포함하는 모든 Expanded URL에 대한 토큰화된 일치
* 또한 “url:npr.org”와 같이 사용하여 특정 웹사이트의 링크를 포함하거나 제외하는 필터로 사용할 수 있습니다.

**url&#95;title:**

* 예: “url&#95;title:tennis”
* 단어 tennis를 포함하는 모든 Expanded URL의 HTML 제목에 대한 토큰화된 일치
* payload에 포함된 HTML 제목 데이터에서 일치 항목을 찾으며, 이 데이터는 최대 300자까지 허용됩니다.

**url&#95;description:**

* 예: “url&#95;description:tennis”
* 단어 tennis를 포함하는 모든 Expanded URL의 HTML 설명에 대한 토큰화된 일치
* payload에 포함된 HTML 설명에서 일치 항목을 찾으며, 이 데이터는 최대 1000자까지 허용됩니다.
   

<div id="http-status-codes">
  #### HTTP 상태 코드
</div>

확장된 URL 인리치먼트는 언와인드(unwind)하려는 최종 URL에 대한 HTTP 상태 코드도 제공합니다. 정상적인 경우에는 200 값이 됩니다. 기타 400대 값은 URL을 해결하는 데 문제가 있음을 나타냅니다.

URL을 언와인드하려고 시도할 때 다양한 상태 코드가 반환될 수 있습니다. URL을 언와인드하는 과정에서 리다이렉트가 발생하면, 다음 중 하나가 발생할 때까지 계속 따라갑니다.

* 200대 코드에 도달했을 때 (성공)
* 리다이렉트가 아닌 코드에 도달했을 때 (실패)
* 최종 URL을 합리적인 시간 안에 해결할 수 없어 타임아웃된 경우 (408 - timeout 반환)
* 어떤 종류의 예외가 발생했을 때
   

예외가 발생하는 경우, 아래와 같이 이유와 반환되는 상태 코드 간 매핑을 사용합니다.

| 이유 | 반환되는 상태 코드 |
| :--- | :--- |
| SSL 예외 | 403 (Forbidden) |
| URL에서 언와인드가 허용되지 않음 | 405 |
| 소켓 타임아웃 | 408 (Timeout) |
| 알 수 없는 호스트 예외 | 404 (Not Found) |
| 지원되지 않는 작업 | 404 (Not Found) |
| 연결 예외 | 404 (Not Found) |
| 잘못된 인수 | 400 (Bad Request) |
| 그 외 모든 경우 | 400 (Bad Request) |

<div id="matching-rules">
  ### 규칙 일치
</div>

matching rules enrichment는 수신된 게시물과 어떤 규칙이 일치했는지를 나타내는 메타데이터 객체입니다. 이는 주로 PowerTrack 스트림에서 사용됩니다.

일치는 규칙에 포함된 용어(term)에 대해 정확히 일치하는 방식으로, activity 콘텐츠에서 문장 부호가 있는 경우와 없는 경우를 모두 스캔하여 수행됩니다. 일치는 대소문자를 구분하지 않습니다. 콘텐츠에 해당 규칙에 정의된 모든 용어가 포함되어 있다고 판단되면, 일치가 발생한 규칙을 나타내는 루트 레벨의 matching&#95;rules 객체가 포함됩니다.

**PowerTrack**

PowerTrack(실시간, Replay, Historical)을 통해 전달되는 게시물에는 다음과 같이 matching&#95;rules 객체가 포함됩니다:

```
"matching_rules": [{
        "tag": null,
        "id": 907728589029646336,
        "id_str": "907728589029646336"
    }]
```

PowerTrack에서 `matching_rules` 객체는 해당 결과에 일치한 *모든* 규칙을 반영합니다. 즉, 하나의 게시물에 두 개 이상의 규칙이 일치하더라도 그 게시물은 한 번만 전달되지만, `matching_rules` 요소에는 일치한 모든 규칙이 포함됩니다.

<div id="poll-metadata">
  ### 설문 메타데이터
</div>

설문 메타데이터는 모든 제품(실시간 및 이력 API)의 강화된 네이티브 형식 페이로드에서 제공되는 무료 보강 정보입니다. 이 메타데이터는 게시물에 설문이 포함되어 있는지 여부를 표시하고, 설문 선택지 목록을 포함하며, 설문의 진행 기간과 만료 시간도 함께 제공합니다. 이 보강 정보를 통해 설문의 존재를 쉽게 파악할 수 있고, 표시용으로 설문 게시물을 적절하게 렌더링할 수 있습니다.

<div id="important-details">
  ##### 중요 사항:
</div>

* 모든 Enterprise API(PowerTrack, Replay, Search, Historical PowerTrack)에서 사용 가능
  * *참고:* Replay 및 Historical PowerTrack의 경우 이 메타데이터는 2017년 2월 22일에 처음 제공되었습니다.
* 투표 정보나 투표 결과는 포함하지 않음
* 현재는 필터/연산자 지원 없음
* **enriched native format**에서만 사용 가능
  * Enriched native format은 사용자가 제어할 수 있는 설정으로, 언제든지 Console을 통해 변경할 수 있습니다: *Select a Product (PowerTrack, Replay, Search) &gt; Settings tab &gt; Output Format (Leave data in its original format)*

<div id="post-payload">
  #### 게시물 Payload
</div>

투표 게시물에는 payload 내의 “entities.polls” 객체에 다음 메타데이터가 포함됩니다:

* 위치(1–4)와 선택지 텍스트를 포함하는 최대 네 개의 선택지가 들어 있는 “options” 배열
* 투표 종료 시각
* 투표 유효 기간

자세한 내용은 아래 샘플 payload를 참고하세요.

<div id="sample-payload">
  #### 샘플 페이로드
</div>

아래는 추가된 투표 메타데이터를 보여 주는 확장된 네이티브 형식 페이로드의 예시 스니펫입니다.

```json
"entities":{
          "hashtags":[],
          "urls":[],
          "user_mentions":[],
          "symbols":[],
          "polls":[
             {
                "options":[
                   {
                      "position":1,
                      "text":"The better answer"
                   },
                   {
                      "position":2,
                      "text":"The best answer"
                   }
                ],
                "end_datetime":"Sat Feb 04 15:33:11 +0000 2017",
                "duration_minutes":1440
             }
          ]
       },
```

<div id="profile-geo">
  ### 프로필 위치 정보
</div>

#### 소개

많은 X 사용자 프로필에는 사용자가 제공한 공개 위치 정보가 포함되어 있습니다. 이 데이터는 user.location의 일반 문자열 형태로 반환됩니다([User object data dictionary](/ko/x-api/enterprise-gnip-2.0/fundamentals/data-dictionary#native-enriched-user-object) 참고). Profile Geo Enrichment는 가능한 경우 위치 문자열을 지오코딩하고 정규화하여 user.location 값과 관련된 구조화된 지리 정보를 추가합니다. 위도/경도 좌표와 관련 장소 메타데이터는 Enterprise API 제품에서 게시물 페이로드의 일부로 포함된 경우에만 user.derived.locations에 *추가됩니다*. 이 데이터는 [enriched native format](/ko/x-api/enterprise-gnip-2.0/fundamentals/data-dictionary)을 사용할 때 제공되며, [PowerTrack rules](/ko/x-api/enterprise-gnip-2.0/fundamentals/rules-filtering#enterprise-operators)를 조합해 필터링할 수 있습니다.

<Note>
  **참고:** Profile Geo Enrichment를 생성하는 데 사용되는 일부 보조 지리 데이터는 GeoNames.org에서 제공되며, X는 이를 [Creative Commons Attribution 3.0 License](https://creativecommons.org/licenses/by/3.0/us/legalcode)에 따라 사용합니다.
</Note>

Profile Geo 데이터는 X의 PowerTrack, Replay, Volume Stream, Search, Historical PowerTrack API에 포함됩니다.

<div id="profile-geo-data">
  #### 프로필 Geo 데이터
</div>

| Enriched native field name | Example value | Description |
| :--- | :--- | :--- |
| user.derived.locations.country | United States | 게시물을 작성한 사용자의 국가입니다. |
| user.derived.locations.country&#95;code | US  | 게시물을 작성한 사용자의 국가에 해당하는 두 글자의 ISO-3166 국가 코드입니다. |
| user.derived.locations.locality | Birmingham | 게시물을 작성한 사용자의 지역(locality, 일반적으로 도시)입니다. |
| user.derived.locations.region | Alabama | 게시물을 작성한 사용자의 지역(region, 일반적으로 주/도)입니다. |
| user.derived.locations.sub&#95;region | Jefferson County | 게시물을 작성한 사용자의 하위 지역(sub-region, 일반적으로 카운티)입니다. |
| user.derived.locations.full&#95;name | Birmingham, Alabama, United States | 게시물을 작성한 사용자의 전체 위치 이름(하위 지역 제외)입니다. |
| User.derived.locations.geo | See Below | 게시물을 작성한 사용자의 가장 세부적인 위치에 해당하는 좌표의 위도/경도(lat/long) 값을 포함하는 배열입니다. |

Historical PowerTrack, Search 및 PowerTrack API는 프로필 Geo 데이터를 기반으로 한 필터링을 지원합니다. 프로필 Geo 데이터에 대해 어떤 연산자를 사용해 필터링할 수 있는지에 대한 자세한 내용은 해당 제품 문서를 참조하십시오.

#### 예시 페이로드

```
{
    "user": {
        "derived": {
            "locations": \[
                {
                    "country": "United States",
                    "country_code": "US",
                    "locality": "Birmingham",
                    "region": "Alabama",
                    "sub_region": "Jefferson County",
                    "full_name": "Birmingham, Alabama, United States",
                    "geo": {
                        "coordinates": \[
                            -86.80249,
                            33.52066
                        \],
                        "type": "point"
                    }
                }
            \]
        }
    }
}
```

<div id="limitations">
  #### 제한 사항
</div>

* Profile Geo 보강 기능은 프로필 위치 문자열에 기재된 지리적 위치에 대해 가장 적절한 후보를 식별하려고 시도합니다. 유사한 이름을 가진 여러 위치나 애매한 이름 등과 같은 요인으로 인해 결과가 모든 경우에 정확하지 않을 수 있습니다.
* 사용자의 프로필 위치 필드(actor.location)에 값이 없는 경우에는 분류를 시도하지 않습니다.
* 정밀도 수준(Precision Level): Profile Geo 보강 기능으로 신뢰할 수 있는 정밀도 수준이 국가 또는 지역 수준에서만 결정되는 경우, subRegion 및 locality와 같은 더 하위 수준의 지리 정보는 페이로드에서 생략됩니다.
* Profile Geo 보강 기능은 보강 결과의 정밀도 수준에 해당하는 위도/경도 좌표(단일 지점)를 제공합니다. 이 좌표는 보강된 위치 결과의 지리적 중심을 나타냅니다. 예를 들어, 정밀도 수준이 국가(Country) 수준인 경우 해당 좌표는 그 국가의 지리적 중심으로 설정됩니다.
* 주소 속성(locality/region/country/country code)에 대해 제공되는 PowerTrack 연산자는 다양한 규칙 조합을 지원할 수 있도록 의도적으로 세분화되어 있습니다. 동일한 이름을 공유하는 특정 위치를 타깃팅하려 할 때는 주소 규칙을 함께 사용하는 것을 고려하십시오. 예를 들어, 다음과 같이 작성하면 “San Francisco, Philippines”에 대한 매치를 피할 수 있습니다: profile&#95;locality:&quot;San Francisco&quot; profile&#95;region:California 개별 Profile Geo 필드를 타깃팅하는 규칙을 작성할 때는, 세분화 수준이 높아질수록 확인할 수 있는 결과가 제한된다는 점을 유의하십시오. 어떤 경우에는 특정 도시의 데이터를 보려고 할 때, 그 도시와 상당 부분 겹치는 region이 있다면 region 규칙만 사용하는 편이 더 적절할 수 있습니다. 예를 들어, 스위스 취리히(Zurich) 시의 경우 profile&#95;region:&quot;Zurich&quot;으로 취리히 시와 주변 지역을 효과적으로 타깃팅할 수 있습니다.
* Native Geo 게시물과 함께 사용: Profile Geo 보강 기능은 페이로드의 기본 geo 값과는 다른 유형의 지리 정보를 게시물에 대해 제공합니다. 이 두 종류의 지리 정보는 (사용 가능한 지리 데이터에 기반하여) 특정 영역과 관련된 가능한 모든 게시물을 포착하기 위해 함께 사용할 수 있지만, 개념적으로 동일한 것은 아닙니다.