---
title: Engagement API
keywords: ["Engagement API", "enterprise Engagement API", "참여 메트릭", "참여 데이터", "Enterprise Engagement", "GNIP 참여"]
---

<div id="overview">
  ## 개요
</div>

[`Enterprise`](https://developer.x.com/en/products/x-api/enterprise)

*이 API는 관리형 액세스 레벨에서만 제공되는 Enterprise API입니다. 이 API를 사용하려면 먼저 Enterprise 영업팀을 통해 계정을 개설해야 합니다. [자세히 알아보기](/ko/x-api/enterprise-gnip-2.0/enterprise-gnip)*

Engagement API는 게시물 노출수(impression)와 참여(engagement) 메트릭에 대한 액세스를 제공합니다. 대부분의 메트릭과 엔드포인트는 [OAuth 1.0a 사용자 컨텍스트](/ko/resources/fundamentals/authentication)를 사용해 인증해야 하지만, 공개 Favorite, Retweet, Reply, Video Views 메트릭은 [OAuth 2.0 Bearer Token](/ko/resources/fundamentals/authentication#oauth-2-0)과 /totals 엔드포인트를 사용해 액세스할 수 있습니다.  

**참고:** 일부 X 웹 대시보드에 보고되는 데이터와 Engagement API에 보고되는 데이터 사이에 차이가 보일 수 있습니다. 이러한 차이는 웹 대시보드가 일반적으로 선택한 시간 범위 내에서 발생한 참여 및/또는 노출수만 표시하기 때문에 발생합니다. 예를 들어, 웹 대시보드는 달력상의 한 달 동안의 게시물 참여만 표시하는 반면, Engagement API는 해당 달의 범위를 넘어가더라도 요청한 시간 범위에 속하는 참여를 표시할 수 있습니다. 이러한 경우에는 Engagement API를 정식 데이터 소스로 간주해야 합니다.
 

<div id="request-endpoints">
  ### 요청 엔드포인트
</div>

Engagement API에는 다음과 같은 세 가지 엔드포인트가 있습니다.

<div id="current-totals-totals">
  #### 현재 합계: [/totals]
</div>

* 요청은 원하는 게시물에 대해 노출 수와 참여 수의 총 메트릭을 반환합니다
* 다음 메트릭으로 제한됩니다: Impressions, Engagements, Favorites, Replies, Retweets, Quote Tweets, Video Views
* OAuth 1.0a 사용자 컨텍스트를 사용해 **지난 90일 이내**에 생성된 게시물에 대한 **Impressions** 및 **Engagements** 메트릭 조회를 지원합니다
* OAuth 2.0 Bearer Token을 사용해 **어떤 게시물이든**에 대한 **Favorites, Retweets, Quote Tweets, Replies** 및 **Video Views** 메트릭 조회를 지원합니다
* 결과는 요청이 수행된 시점의 최신 노출 수 및 참여 수 합계를 기준으로 합니다
* 대시보드 보고서를 구성하고 다양한 @핸들 전반에 걸친 참여율을 계산하는 데 적합합니다
* 요청당 최대 250개의 게시물에 대한 메트릭 요청을 지원합니다
   

<div id="last-28-hours-28hr">
  #### 최근 28시간: [/28hr]
</div>

* 요청은 노출수에 대한 전체 메트릭, 참여수에 대한 전체 메트릭, 그리고 지난 28시간 동안 발생한 개별 참여 메트릭의 세부 내역을 반환할 수 있습니다
* 데이터는 Post ID별로, 그리고 시계열 기준으로는 총합, 일 단위, 시간 단위로 그룹화할 수 있습니다
* 최근에 생성된 콘텐츠의 성과를 추적하는 데 적합합니다
* 사용 가능한 모든 메트릭을 지원합니다
* 요청당 최대 25개의 게시물에 대해 메트릭을 요청할 수 있습니다
   

<div id="historical-historical">
  #### Historical: [/historical]
</div>

* 요청은 조회수(impressions), 참여(engagements), 그리고 개별 참여 메트릭의 세부 내역을, 게시물 생성 시간이 아닌 참여 발생 시간을 기준으로 가장 최근 1년까지 반환할 수 있습니다.
* 요청은 시작 날짜와 종료 날짜 파라미터를 지원하여, 최대 4주에 이르는 특정 기간으로 범위를 좁힐 수 있는 유연성을 제공합니다.
* 게시물 참여 데이터는 과거 365일까지만 제공합니다.
* 데이터는 게시물 ID별로, 그리고 일 단위 또는 시간 단위의 시계열 집계로 그룹화할 수 있습니다.
* 최근 성과를 과거 기준과 비교 평가하거나, 특정 @handle의 성과에 대한 히스토리컬한 추세를 파악하는 데 적합합니다.
* 사용 가능한 모든 메트릭을 지원합니다.
* 요청당 최대 25개의 게시물에 대한 메트릭 요청을 지원합니다.

<div id="available-metrics">
  ### 사용 가능한 메트릭
</div>

아래 표에서는 Engagement API를 통해 접근할 수 있는 메트릭 유형을 설명합니다.

아래 메트릭에 대해 더 자세히 알아보려면 [메트릭 해석 페이지](/ko/x-api/enterprise-gnip-2.0/fundamentals/engagement-api#interpreting-the-metrics)를 참조하세요.

| 지표                                                                                                                                                    | 엔드포인트 지원 여부       | 사용자 컨텍스트 필요 여부                                        | 설명                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| :---------------------------------------------------------------------------------------------------------------------------------------------------- | :---------------- | :---------------------------------------------------- | :------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| 노출 수                                                                                                                                                  | 전체                | 예                                                     | 게시물이 조회된 횟수입니다. 이 지표는 지난 90일 이내에 게시된 게시물에만 제공됩니다.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| 참여수                                                                                                                                                   | 전체                | 예                                                     | 사용자가 해당 게시물과 상호작용한 총 횟수입니다. 이 지표는 최근 90일 이내에 게시된 게시물에만 제공됩니다.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| 마음에 들어요                                                                                                                                               | 전체                | 예 - /28hrs 및 /Historical<br /><br />아니요 - /totals     | 게시물이 좋아요를 받은 횟수입니다.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| 리트윗 수                                                                                                                                                 | 모든 엔드포인트          | 예 - /28hrs &amp; /Historical<br /><br />아니요 - /totals | 게시물이 리트윗된 횟수입니다.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| quote&#95;tweets                                                                                                                                      | /totals           | 필요 없음 - /totals                                       | 게시물이 댓글을 덧붙여 리트윗(인용)된 횟수.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 답글                                                                                                                                                    | 전체                | 예 - /28hrs 및 /Historical<br /><br />아니요 - /totals     | 해당 게시물에 달린 답글 수.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| video&#95;views                                                                                                                                       | 전체                | 예 - /28hrs 및 /Historical<br /><br />아니요 - /totals     | 주어진 게시물에 포함된 동영상이 최소 2초 동안 화면에서 50% 이상 노출된 횟수입니다.<br /><br />동영상 조회수는 게시물이 생성된 지 1800일 이내인 경우에만 조회할 수 있습니다. 1800일이 지난 게시물에 대해 동영상 조회수를 요청하면, 응답 본문에 요청한 다른 메트릭이 담긴 별도의 객체와 함께 다음 객체가 포함됩니다:<br /><br />&quot;unsupported&#95;for&#95;video&#95;views&#95;tweet&#95;ids&quot;: [&quot;TWEET&#95;ID&quot;]<br /><br />**참고:** X에서 소유·운영하는 플랫폼(모바일 앱과 웹사이트)에 표시되는 동영상 조회수 메트릭과 /28hr 및 /historical 엔드포인트를 통해 받는 값 사이에는 차이가 발생할 수 있습니다.  <br /><br />*   X 사용자 인터페이스와 /totals 엔드포인트에 표시되는 동영상 조회수는, 해당 동영상이 게시된 모든 게시물을 통틀어 집계한 값입니다. 즉, 해당 동영상이 별도의 게시물에서 리트윗되거나 다시 게시(repost)된 모든 경우의 조회수를 합산한 값이 UI에 표시됩니다. 이 메트릭에는 GIF의 동영상 조회수는 포함되지 않습니다.<br />*   /28hr 및 /historical 엔드포인트에서 제공되는 동영상 조회수는, 메트릭을 조회하는 특정 게시물에서 발생한 조회수만을 포함합니다. 이 메트릭에는 GIF의 동영상 조회수는 포함되지 않습니다. |
| media&#95;views                                                                                                                                       | /28hr /historical | 예                                                     | 동영상, GIF, 이미지 전반에서 자동 재생 및 클릭 재생을 모두 포함해 집계한 미디어 조회수 합계입니다.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| media&#95;engagements<br /><br />([이전 이름: Media Clicks](/ko/x-api/enterprise-gnip-2.0/fundamentals/engagement-api#recent-changes-to-the-engagement-api)) | /28hr /historical | 예                                                     | 게시물에 포함된 이미지나 동영상 등의 미디어가 클릭된 총 횟수입니다.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| url&#95;clicks                                                                                                                                        | /28hr /historical | 예                                                     | 게시물에 포함된 URL 링크가 클릭된 총 횟수입니다.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| hashtag&#95;clicks                                                                                                                                    | /28hr /historical | 예                                                     | 게시물 내 해시태그가 클릭된 횟수입니다.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| detail&#95;expands                                                                                                                                    | /28hr /historical | 예                                                     | 게시물을 더 자세히 보기 위해 클릭한 횟수입니다.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| permalink&#95;clicks                                                                                                                                  | /28hr /historical | 예                                                     | 게시물의 permalink(해당 게시물 전용 개별 웹페이지 링크)가 클릭된 횟수입니다.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| app&#95;install&#95;attempts                                                                                                                          | /28hr /historical | 예                                                     | 해당 게시물로부터 발생한 App Install 이벤트 횟수                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| app&#95;opens                                                                                                                                         | /28hr /historical | 예                                                     | 게시물로 인해 앱 열기 이벤트가 발생한 횟수입니다.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| email&#95;tweet                                                                                                                                       | /28hr /historical | 예                                                     | 게시물이 이메일로 공유된 횟수입니다.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| user&#95;follows                                                                                                                                      | /28hr /historical | 예                                                     | 이 게시물로부터 사용자(게시물 작성자)가 팔로우된 횟수입니다.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| user&#95;profile&#95;clicks                                                                                                                           | /28hr /historical | 예                                                     | 이 게시물에서 사용자(게시물 작성자)의 프로필이 클릭된 횟수.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |

<div id="engagement-groupings">
  ### 참여 그룹화
</div>

그룹화는 반환된 참여 메트릭을 사용자 정의 방식으로 정리할 수 있게 해 줍니다. 요청당 최대 3개의 그룹을 포함할 수 있습니다. 메트릭을 다음 값 중 하나 이상으로 그룹화하도록 선택할 수 있습니다.

*세 엔드포인트 모두에서 지원:*

* tweet.id
* engagement.type
   

*`/28hr` 및 `/historical` 엔드포인트는 시계열 메트릭을 제공할 수 있으므로, 다음을 지원합니다:*

* engagement.day
* engagement.hour

그룹화에 대해 더 알아보려면 Guides 섹션의 [Engagement API Grouping](/ko/x-api/enterprise-gnip-2.0/fundamentals/engagement-api#engagement-api-groupings) 페이지를 참조하세요.

<div id="guides">
  ## 가이드
</div>

<div id="developer-getting-started-guide">
  ### 개발자 시작하기 가이드
</div>

<div id="introduction">
  #### 소개
</div>

이 문서의 목적은 개발자들에게 Engagement API 통합에 대한 개요를 제공하는 것입니다. 먼저 왜 통합해야 하는지에 대해 살펴본 뒤, 이어서 기술적으로 어떻게 통합하는지 자세한 내용을 다루겠습니다.

<div id="what-does-the-engagement-api-provide">
  ##### **Engagement API는 무엇을 제공하나요?**
</div>

* Engagement API는, 해당 계정이 [3-legged OAuth](/ko/resources/fundamentals/authentication#obtaining-access-tokens-using-3-legged-oauth-flow)를 사용해 귀하의 앱이 자신을 대신해 메트릭을 요청하도록 승인한 경우, 지난 90일 동안 어떤 X 계정이 작성한 게시물에 대해서든 노출 및 참여 데이터를 제공합니다. 이 강력하면서도 구현이 쉬운 솔루션은 노출 수와 URL 클릭, #해시태그 클릭 등 다양한 심층 참여 정보를 즉시 제공합니다.
* Engagement API는 어떤 게시물이든 좋아요(favorites), 리트윗(Retweets), 인용 트윗(Quote Tweets), 답글, 동영상 조회수에 대한 전체 집계 메트릭을 제공합니다. 이는 개별 게시물 또는 게시물 모음에 대한 기본적인 참여 데이터를 얻는 강력한 방법으로 사용할 수 있습니다.
* Engagement API는 15개가 넘는 성과 메트릭을 활용해 콘텐츠 성과를 효과적으로 측정할 수 있도록 함으로써, 소셜 리스닝, 마케팅, 퍼블리싱 플랫폼이 X에서의 ROI(투자 대비 수익)를 측정할 수 있도록 새로운 가치를 제공합니다.
* Engagement API는 요청/응답 방식 API로, 앱 개발자가 게시물 ID, 원하는 메트릭, 그리고 기간을 포함한 요청을 보내면 API가 해당 데이터를 즉시 반환합니다.
   

<div id="why-integrate-example-use-cases">
  ##### **왜 통합해야 하나요? 예시 사용 사례**
</div>

* 콘텐츠의 전체 도달 범위를 파악해 얼마나 많은 사람이 조회하는지 이해합니다. 얼마나 많은 사람이 동영상을 시청하고, 링크를 클릭하고, 해시태그를 클릭하고, 내 앱을 설치하는지 확인합니다.
* 전체 집계 및 시계열 기반 참여 메트릭을 생성합니다.
* 임의의 공개 게시물에 대한 기본 참여 메트릭(즐겨찾기, 리트윗, 인용 트윗, 답글)을 파악합니다.
* 이러한 메트릭을 활용해 어떤 유형의 게시물이 효과적인지 판단하고, 그런 게시물을 더 자주 게시하여 더 많은 노출 수와 더 많은 참여를 유도합니다.
* 내 게시물 중 하나가 좋아요 100개(또는 다른 임계값)에 도달할 때마다, 다른 소유 계정의 콘텐츠를 리트윗하는 것과 같은 마케팅 활동을 자동화합니다.
* A/B 테스트 도구로 활용하기 위해 캠페인들을 서로 벤치마킹하고 비교합니다.
* 고객 서비스 부서에 어떤 유형의 콘텐츠가 공감을 얻는지 분석하여, 어떻게 그리고 언제 응답할지 결정합니다.
* 내 플랫폼에서 게시된 콘텐츠에 대한 애널리틱스를 표시합니다.
   

[Engagement API는 2016년에 출시되었으며](https://blog.x.com/official/en_us/a/2016/gnip-s-engagement-api-is-now-generally-available.html), 이러한 심층적인 참여 메트릭을 대규모로 제공한 최초의 X API입니다. Engagement API는 사용하기 쉽고 고객이 이 프로세스를 자동화할 수 있도록 해줍니다. 다음은 예시 통합을 설명하는 사례 연구입니다:

* [Measuring campaign success with the Red Cross](https://blog.x.com/developer/en_us/topics/spotlight/2016/measuring-campaign-success-with-the-red-cross.html)[](https://simplymeasured.com/blog/true-twitter-impressions-and-url-clicks-new-from-simply-measured/#sm.0007werel134td8zqf02m2mduumr6)

이제 Engagement API의 ‘이유’를 살펴보았으니, 기술적인 세부 사항을 살펴보겠습니다.

<div id="integrating-the-engagement-api">
  #### Engagement API 통합
</div>

<div id="introduction-to-api">
  ##### **Introduction to API**
</div>

Engagement API는 JSON으로 인코딩된 요청을 받고, JSON으로 인코딩된 참여 메트릭으로 응답하는 간단한 RESTful API입니다. 요청은 세 가지 주요 부분으로 구성됩니다(자세한 내용은 링크를 참고하세요).

* ***Post IDs*** 배열
* 관심 있는 [metric types](https://developer.x.com/en/docs/x-api/v1/metrics/get-tweet-engagement/overview#EngagementTypes)를 지정하는 배열. 여기에 포함되는 타입으로는 ‘impressions’, ‘retweets’, ‘hashtag&#95;clicks’, ‘user&#95;follows’ 등이 있습니다.
* [Engagement groupings](/ko/x-api/enterprise-gnip-2.0/fundamentals/engagement-api#engagement-api-groupings)으로, API 응답에서 참여 데이터가 어떻게 정렬·구성되기를 원하는지 나타내는 JSON 구조입니다.

많은 상황에서 Engagement Types와 Groupings은 요청 간에 비교적 일정하게 유지되며, Post IDs만 변경됩니다.

Engagement API는 [세 가지 endpoint](https://developer.x.com/en/docs/x-api/v1/metrics/get-tweet-engagement/overview#RequestEndpoints)를 제공합니다.

* **Totals** - 게시물에 대한 참여의 총합을 제공합니다. 일부 메트릭은 모든 게시물에 대해 제공되며, 다른 일부는 최근 90일에 대해서만 제공됩니다.
* **28 hour** - 최근 28시간 동안의 시계열 참여 메트릭을 제공합니다.
* **Historical** - 2014년 9월 1일 이후 게시된 게시물에 대해 최대 연속 4주 동안의 시계열 참여 메트릭을 제공합니다.

**/totals** endpoint는 요청 하나당 최대 **250개의 게시물**에 대한 메트릭 요청을 지원합니다. **/28hour** 및 **/historical** endpoint는 요청 하나당 **25개**를 지원합니다.

이후에는 Engagement API 액세스 권한을 얻는 방법을 살펴보고, API 요청을 보내는 방법과 OAuth 개요를 설명한 뒤, 기타 기술 리소스에 대한 링크를 제공합니다.

<div id="getting-api-access">
  ##### **API 액세스 받기**
</div>

이 문서를 보고 있다면, 대부분 이미 Engagement API 액세스 권한을 보유하고 있을 것입니다. 그렇지 않다면 Enterprise 계정 관리자에게 문의하시거나, [여기](/ko/x-api/enterprise-gnip-2.0/enterprise-gnip)에서 Enterprise 액세스를 신청해 주세요.

첫 번째 단계는 승인된 개발자 계정을 사용해 [developer portal](/ko/resources/fundamentals/developer-portal)에서 [X 앱](/ko/resources/fundamentals/developer-apps)을 생성하는 것입니다. 계정 관리자는 액세스 권한을 부여하기 위해 이 애플리케이션과 연결된 숫자형 App ID가 필요합니다. 개발자 계정을 새로 신청해야 하는 경우 [여기](/ko/resources/fundamentals/developer-apps)에서 신청할 수 있습니다.

<div id="making-a-request">
  ##### **요청 보내기**
</div>

Engagement API로 요청을 보내는 일은 매우 간단합니다. 이번 예시에서는 다음 두 개의 [@XDevelopers](https://x.com/XDevelopers) 게시물에 대해, 총 리트윗 수, 인용 트윗 수, 좋아요 수, 답글 수를 요청해 보겠습니다:

> 1/ Today we’re sharing our vision for the future of the X API platform![https://t.co/XweGngmxlP](https://t.co/XweGngmxlP)
>
> — Twitter Dev (@TwitterDev) [April 6, 2017](https://x.com/TwitterDev/status/850006245121695744)

> Don’t miss the Posts about your Post.
>
> Now on iOS, you can see Retweets with comments all in one place. [pic.x.com/oanjZfzC6y](https://t.co/oanjZfzC6y)
>
> — X (@X) [May 12, 2020](https://x.com/status/1260294888811347969?ref_src=twsrc%5Etfw)

첫 번째 단계는 JSON 형식의 API 요청을 구성하는 것입니다. 여기에는 배열에 담긴 두 개의 게시물 id, 관심 있는 참여(engagement) 유형들의 배열, 그리고 응답에서 메트릭이 어떻게 구성되길 원하는지 나타내는, 커스텀 이름의 `groupings` JSON 객체가 포함됩니다. 요청은 다음과 같습니다:

```json
{
  "tweet_ids": [
    1260294888811347969, 850006245121695744
  ],
  "engagement_types": [
    "retweets", "quote_tweets", "favorites", "replies"
  ],
  "groupings": {
    "engagement-types-by-id": {
      "group_by": [
        "Tweet.id", "engagement.type"
      ]
    }
  }
}
```

이 전체 메트릭을 조회하기 위해, 이 JSON 요청을 [https://data-api.x.com/insights/engagement/totals](https://data-api.x.com/insights/engagement/totals) 엔드포인트로 POST합니다.

요청이 JSON 형식으로 인코딩되어 있고 gzip으로 압축되었음을 나타내기 위해 다음 헤더를 포함합니다(요청 본문이 매우 커질 수 있습니다):

* Content-Type: application/json
* Accept-Encoding: gzip
   

요청을 보낼 때는 OAuth를 사용해 인증하며, 이에 대해서는 다음 섹션에서 더 자세히 설명합니다.

API는 다음과 같은 페이로드를 반환합니다:

```json
{
  "grouping name": {
    "1260294888811347969": {
      "favorites": "17111",
      "quote_tweets": "3254",
      "replies": "1828",
      "retweets": "5218"
    },
    "850006245121695744": {
      "favorites": "492",
      "quote_tweets": "66",
      "replies": "42",
      "retweets": "324"
    }
  }
}
```

응답에는 요청한 메트릭이 “groupings” 정의에서 설명한 구조로 포함되어 있으며, 최상위에는 게시물 ID별로, 그 다음 단계에는 참여 유형별로 메트릭이 나열됩니다.

방금 살펴본 내용은 비교적 간단합니다. OAuth를 사용한 인증이 처음이라면, 다음 섹션을 확인해 보세요.

<div id="authenticating-with-oauth">
  #### OAuth로 인증하기
</div>

OAuth는 기술 업계에서 매우 널리 사용되는 인증 표준입니다. 이미 OAuth(예를 들어 다른 X API에서)를 사용하고 있다면, 아마도 모든 복잡한 세부 사항을 추상화해 주는 언어별 OAuth 패키지를 사용하고 있을 것입니다. OAuth가 처음이라면 [X API와 함께 사용하는 OAuth](/ko/resources/fundamentals/authentication) 페이지를 방문하시거나 [https://oauth.net](https://oauth.net/)으로 바로 가서 자세한 내용을 확인하시기 바랍니다. 그런 다음, 사용하려는 통합에 맞는 언어로 된 OAuth 패키지를 찾아 그 패키지부터 시작할 것을 권장합니다. 이러한 패키지를 사용하면 일반적으로 키와 토큰을 설정하고, 어떤 형태로든 HTTP 객체를 생성한 다음 그 객체를 사용해 요청을 보내는 방식으로 인증을 수행하게 됩니다.

예를 들어 Ruby 환경에서는 다음 의사 코드가 Ruby gem ‘oauth’를 사용해 OAuth를 사용하는 앱을 만들고 POST 요청을 보내는 방법을 보여 주는 예시가 됩니다:

```js
require 'oauth'

#JSON 요청을 조립합니다(위와 같이).
request = make_json_request()

#내 앱 컨슈머 키와 시크릿으로 앱 컨슈머 객체를 빌드합니다.
consumer = OAuth::Consumer.new(keys['consumer_key'], keys['consumer_secret'], {:site => ‘https://data-api.x.com’})
#권한을 제공하는 계정에서 제공한 토큰으로 사용자 토큰을 빌드합니다. 앱 전용 #요청을 수행하는 경우(권한이 필요하지 않은 게시물을 /totals 엔드포인트로 확인), 이 단계는 #건너뛸 수 있습니다.
token = {:oauth_token => keys['access_token'], :oauth_token_secret => keys['access_token_secret']}

#OAuth가 활성화된 앱 객체를 생성합니다.
app = OAuth::AccessToken.from_hash(consumer, token)
#POST 요청을 수행합니다.
result = app.post(“/insights/engagement/totals", request, {"content-type" => "application/json", "Accept-Encoding" => "gzip"})
```

Engagement API는 애플리케이션 전용 인증과 사용자 컨텍스트 인증을 모두 지원합니다. /totals 엔드포인트로 소유하지 않은 공개 게시물에 대한 참여 메트릭을 수집하는 경우에는 사용자 권한이 필요하지 않으며, 애플리케이션 전용 인증을 사용할 수 있습니다. 이때는 앱 키와 시크릿 키만 사용해 인증합니다.

OAuth를 사용하면 앱이 사용자와 연관된 토큰을 이용해 “다른 사용자를 대신하여” API 요청을 수행할 수도 있습니다. 소유한 게시물, 즉 사용자 토큰을 보유하고 있는 사용자가 게시한 게시물에 대한 Engagement 메트릭을 생성하는 경우에는 사용자 컨텍스트로 요청하게 되며, 이는 앱 키와 사용자별 액세스 토큰을 모두 사용해 인증한다는 의미입니다. 이러한 사용자 액세스 토큰은 일반적으로 &#39;[Sign-in with X](/ko/resources/fundamentals/authentication#log-in-with-x)&#39; 프로세스를 통해 제공되거나 사용자로부터 직접 획득합니다(토큰을 사용자로부터 직접 획득하는 경우에는 반드시 [twurl](https://github.com/xdevplatform/xurl)을 사용해야 합니다). 사용자가 토큰을 제공하면, 토큰을 재설정하거나 비밀번호를 변경하지 않는 한 토큰은 만료되지 않으며, 사용자를 대신해 요청을 수행하기 위해 Engagement API에서 계속 사용할 수 있습니다. 이러한 경우에는 사용자가 새로운 토큰을 다시 제공해야 합니다.

어떤 메트릭에 어떤 인증이 필요한지는 [이 표](/ko/x-api/enterprise-gnip-2.0/fundamentals/engagement-api#engagement-api-groupings)에서 확인할 수 있습니다.

<div id="selecting-an-engagement-api-endpoint">
  ### Engagement API 엔드포인트 선택하기
</div>

Engagement API는 다음과 같은 세 가지 고유한 엔드포인트를 제공합니다:

* **[Totals](/ko/x-api/enterprise-gnip-2.0/fundamentals/engagement-api#post-insights-engagement)** - ‘owned’ 또는 ‘unowned’ 게시물에 대해 선택된 메트릭의 총합을 제공합니다. 일부 메트릭은 모든 게시물에 대해 사용할 수 있지만, 다른 메트릭은 최근 90일 이내에 게시된 게시물에만 사용할 수 있습니다. 요청당 최대 250개의 게시물을 지원합니다.
* **[28 hour](/ko/x-api/enterprise-gnip-2.0/fundamentals/engagement-api#post-insights-engagement)** - 지난 28시간 동안의 ‘owned’ 게시물에 대한 시계열 Engagement 메트릭을 제공합니다. 요청당 최대 25개의 게시물을 지원합니다.
* **[Historical](/ko/x-api/enterprise-gnip-2.0/fundamentals/engagement-api#post-insights-engagement-historical)** - 2014년 9월 1일 이후에 게시된 ‘owned’ 게시물에 대해, 최대 4주 연속 기간의 시계열 Engagement 메트릭을 제공합니다. 요청당 최대 25개의 게시물을 지원합니다.
   

각 엔드포인트는 고유한 특성을 가지고 있습니다. 세 가지 모두를 사용할 계획이든, 어떤 엔드포인트가 사용 사례에 가장 잘 맞는지 결정하려는 중이든, 이들 간의 차이를 이해하는 것이 중요합니다.

아래에서는 몇 가지 핵심 개념을 소개하고, 세 가지 엔드포인트를 좀 더 자세히 살펴본 다음, 일반적으로 특정 엔드포인트에 매핑되는 예시 사용 사례를 제시합니다. 이 정보가 세 가지 모두를 더 효율적으로 통합하거나, 목적에 가장 잘 맞는 단일 엔드포인트를 선택하는 데 도움이 되기를 바랍니다.
 

<div id="key-concepts">
  #### 핵심 개념
</div>

세 가지 Engagement API 엔드포인트가 제공하는 다양한 기능과 데이터의 차이를 이해하는 데 도움이 되는 몇 가지 핵심 개념이 있습니다.
 

<div id="impressions-and-engagement-metrics">
  ##### 노출수 및 참여 메트릭
</div>

노출수는 특정 게시물이 X 플랫폼에서 자연 노출(오가닉) 맥락에서 조회된 횟수를 나타냅니다. 프로모션 또는 유료 노출 맥락에서 표시된 게시물에서 발생한 노출수는 포함되지 않습니다. Engagement API 도입 이전에는 게시물 노출수가 잠재적인 조회수만을 나타내는 지표였습니다. 이는 작성자의 계정 팔로워 수와 해당 콘텐츠를 리트윗한 계정들의 팔로워 수를 합산해 산출되었으며, 특정 사용자가 실제로 해당 게시물을 보지 못하는 일반적인 상황은 반영하지 못했습니다.

Engagement API가 생성하는 노출 메트릭은 게시물이 실제로 화면에 렌더링되어 표시된 횟수를 측정한 값입니다. 귀하의 계정을 팔로잉하는 사용자가 게시물을 놓친 경우, 이는 노출수로 집계되지 않습니다.

Engagement API는 14개의 고유한 참여 [메트릭 유형](/ko/x-api/enterprise-gnip-2.0/fundamentals/engagement-api#available-metrics)에 대한 메트릭을 제공합니다. 각각은 사용자가 게시물을 접했을 때 취할 수 있는 개별 동작을 나타냅니다. 여기에는 리트윗, 좋아요, 답글 달기, #해시태그·링크·미디어와 같은 엔티티를 클릭하는 행위, 작성자를 팔로잉하는 행위, 작성자 프로필을 조회하는 행위 등이 포함됩니다. 이러한 개별 동작은 모두 Engagements라는 단일 메트릭으로 집계됩니다.

<div id="owned-and-unowned-x-content">
  ##### 소유한 X 콘텐츠와 소유하지 않은 X 콘텐츠
</div>

Engagement API는 소유한 게시물과 소유하지 않은 게시물을 명확히 구분합니다. 소유한 게시물은 사용자의 계정에서 게시된 게시물이거나, 해당 게시물의 Engagement 데이터를 요청할 수 있는 권한을 획득한 게시물을 의미합니다. 다른 X API와 마찬가지로, 이러한 권한은 다른 X 사용자/계정이 사용자가 그들을 대신하여 API 요청을 수행할 수 있도록 해주는 액세스 토큰을 공유하도록 함으로써 얻습니다. 이러한 토큰을 얻는 일반적인 방법은 [‘Sign in with X’ 프로세스](/ko/resources/fundamentals/authentication#log-in-with-x)를 사용하는 것입니다.

`/totals` 엔드포인트는 소유한 게시물과 소유하지 않은 게시물 모두에 대한 Engagement 데이터를 제공합니다. 소유하지 않은 게시물의 경우, 게시물 표시에서 공개적으로 확인할 수 있는 Favorite, Retweet, Reply 메트릭을 요청할 수 있습니다. 이러한 메트릭과 관련해 Engagement API가 제공하는 핵심 기능은, 이 메트릭들을 자동화된 방식으로 대규모로 조회할 수 있다는 점입니다. 소유한 게시물의 경우, `/totals` 엔드포인트는 Impression과 (총) Engagement 메트릭도 제공합니다.

`/28hr` 및 `/historical` 엔드포인트는 소유한 게시물에 대한 메트릭만 제공합니다. 이는 이 엔드포인트들에 요청을 보낼 때 사용자 컨텍스트를 함께 전달해야 함을 의미합니다.

<div id="total-and-time-series-engagement-data">
  ##### 전체 및 시계열 참여 데이터
</div>

`/totals` 엔드포인트는 이름에서 알 수 있듯이 각 참여 유형에 대한 총합만 제공합니다. 이 숫자는 게시물이 게시된 이후 현재까지의 최신 누적 합계를 나타냅니다. 게시물이 막 게시된 후 그 메트릭을 반복해서 요청하면, 일반적으로 각 요청마다 이 합계 값이 변경됩니다.

`/28hr` 및 `/historical` 엔드포인트는 총합과 시계열 데이터를 모두 제공할 수 있습니다. 시계열 데이터를 요청할 때, 참여 메트릭은 일별 또는 시간별 데이터로 집계될 수 있습니다.   

`/28hr` 및 `/historical` 엔드포인트로 시계열 데이터를 요청하는 방법은 [engagement groupings](/ko/x-api/enterprise-gnip-2.0/fundamentals/engagement-api#engagement-api-groupings) 문서를 참조하세요.

<div id="endpoints-and-example-use-cases">
  #### 엔드포인트와 예시 사용 사례
</div>

위에서 논의한 특성과 차이점을 고려하면, 각 엔드포인트는 일반적으로 서로 다른 유형의 사용 사례에 대응합니다. 특정 사용 사례에 가장 적합한 엔드포인트를 선택하는 데 도움이 되도록, 아래에 예시 사용자 시나리오와 이를 가장 잘 충족하는 엔드포인트를 제시합니다.

<div id="totals">
  ##### **/totals**
</div>

* 일부 메트릭 유형(노출수, 참여수, 즐겨찾기, 리트윗, 인용 트윗, 답글, 동영상 조회수)에만 액세스하면 된다.
* 내가 소유한 게시물만이 아니라 어떤 게시물이든 기본적인 참여 데이터에 액세스해야 한다.
* 경쟁사와 성과를 비교하고 싶다.
* 내가 소유하지 않은 게시물을 포함하는 해시태그나 캠페인에 대한 기본적인 참여 통계를 추적하고 싶다.
* 일별이나 시간별로 나뉜 데이터는 필요 없고, 요청 시점의 현재 합계만 필요하다.
* 보고서나 대시보드에 표시할 단일 메트릭이 필요하고, 어떤 데이터도 저장하고 싶지 않다.
* 페이지 로드 시점에 데이터를 표시하고 싶고, 요청만 보내서 응답만 받으면 된다.
* 하루에 수십만 개에서 수백만 개의 게시물에 대한 데이터에 액세스할 수 있어야 한다.
   

<div id="28hr">
  ##### **/28hr**
</div>

* 17가지 모든 메트릭 유형에 접근해야 합니다.
* 최근 28시간 이내에 게시된 최신 게시물에 대한 데이터를 보고 싶습니다.
* 하루에 한 번 실행되는 작업이 있어서, 필요한 데이터는 마지막 하루 분만 가져오면 됩니다.
* 메트릭을 일별 또는 시간별로 구분해서 받아야 합니다.
* 대시보드에서 시간 단위로 활동 추이를 시계열로 표시하고 싶습니다.
* 하루에 수십만 개의 게시물에 대해 대량 접근 권한이 필요합니다.
* 스토리지 용량이 있어서 하루에 한 번 데이터를 새로 고치고 누적 집계를 유지할 수 있습니다.
   

<div id="historical">
  ##### **/historical**
</div>

* 17개 모든 메트릭 유형에 대한 액세스가 필요합니다.
* 2014년 9월까지 생성된 게시물에 대한 과거 데이터가 필요합니다.
* 캠페인을 비교하는 상세한 이력 분석을 표시하고 싶습니다.
* 메트릭이 일별 또는 시간별로 구분되어 있어야 합니다.
* Engagement API에 대한 대량 액세스 권한은 필요 없으며, 하루에 수백 개에서 수천 개 정도의 게시물에 대한 데이터만 조회하면 됩니다.

<div id="engagement-api-key-characteristics">
  ### Engagement API 키의 주요 특성
</div>

* JSON 데이터를 제공하고 JSON 데이터 본문을 사용하는 POST 요청을 지원하는 **RESTful API**입니다.
* **요청 유형:** 클라이언트 앱은 다음과 같은 유형의 요청을 보낼 수 있습니다.
  * **전체 참여 수(Total engagements)** -- /totals 엔드포인트에 대한 HTTP POST 요청
  * **최근 28시간 참여 수** -- /28hr 엔드포인트에 대한 HTTP POST 요청
  * **과거 참여 수** -- /historical 엔드포인트에 대한 HTTP POST 요청
* **OAuth 인증:**
  * [OAuth 1.0a 사용자 컨텍스트](/ko/resources/fundamentals/authentication): [3-legged OAuth](https://developer.x.com/resources/fundamentals/authentication/obtaining-user-access-tokens)를 사용해 귀하의 앱을 승인한 사용자가 소유한 게시물에 대해서는 사용 가능한 모든 메트릭을 조회할 수 있습니다. 이때 요청을 보낼 때는 해당 사용자의 액세스 토큰을 사용해야 합니다.[](/ko/resources/fundamentals/authentication)
  * [OAuth 2.0 Bearer Token](/ko/resources/fundamentals/authentication#oauth-2-0): 선택된 일부 메트릭(리트윗, 인용 트윗, 답글, 마음에 들어요, 동영상 조회수)은 모든 공개 게시물에 대해 조회할 수 있습니다.
* **요청 메타데이터 및 구조:** 요청 데이터는 게시물 ID 배열, 참여 유형 배열, 참여 그룹화 구조로 구성된 JSON 객체입니다.
* **요청당 게시물 수:**
  * /totals 엔드포인트: 게시물 ID 250개
  * /28hr 엔드포인트: 게시물 ID 25개
  * /historical 엔드포인트: 게시물 ID 25개
* **참여 메트릭 가용성:**
  * **/totals** -- 게시물이 게시된 시점 이후의 누적 메트릭입니다. 게시 후 90일 이내인 게시물에 대해서는 노출수와 참여수가 제공되며, 리트윗, 인용 트윗, 답글, 마음에 들어요, 동영상 조회수는 모든 게시물에 대해 제공됩니다.
  * **/28hr** -- 요청 시점을 기준으로 최근 28시간입니다.
  * **/historical** -- 2014년 9월 1일부터 시작하는 임의의 28일 기간입니다.
* **메트릭 유형:** 각 요청에는 [Metric Types](http://support.gnip.com/apis/engagement_api/overview.html#EngagementTypes) 배열이 포함됩니다. 사용 가능 여부는 엔드포인트에 따라 다르며, /totals 엔드포인트를 사용하는 경우에는 게시물이 사용자 권한이 부여된 게시물인지에 따라 달라집니다.
  * /totals 엔드포인트:
    * 모든 게시물: 마음에 들어요, 리트윗, 인용 트윗, 답글, 동영상 조회수
    * OAuth 1.0a 사용자 컨텍스트 필요: 노출수, 참여수, 마음에 들어요, 답글, 리트윗
  * /28hr 및 /historical 엔드포인트(OAuth 1.0a 사용자 컨텍스트 및 게시물 소유자의 액세스 토큰 필요): 노출수, 참여수, 마음에 들어요, 답글, 리트윗, URL 클릭, 해시태그 클릭, 상세 보기 클릭, 퍼머링크 클릭, 미디어 클릭, 앱 설치 시도, 앱 열기, 게시물 이메일 공유, 동영상 조회수, 미디어 조회수
* **참여 그룹화:** 각 요청에는 [Engagement Groupings](/ko/x-api/enterprise-gnip-2.0/fundamentals/engagement-api#engagement-api-groupings) 배열이 포함됩니다. 이러한 그룹화를 사용하여 반환되는 메트릭의 구성 방식을 사용자 정의할 수 있습니다. 각 요청에는 최대 세 개의 그룹화를 포함할 수 있습니다. 메트릭은 다음 값으로 구성할 수 있습니다.
  * 모든 엔드포인트: 게시물 ID, 참여 유형(Engagement Type)
  * /28hr 및 /historical 엔드포인트: 다음 추가 그룹화를 지정하면 이들 엔드포인트에서 시계열 데이터를 제공합니다. 참여 일(Engagement Day), 참여 시간(Engagement Hour)
* **통합 시 기대 사항:** 귀하의 팀은 다음 사항에 책임을 집니다.
  * 요청에 포함된 게시물 ID에 대한 참여 메트릭을 반환하는 Engagement API로 HTTP 요청을 전송할 수 있는 클라이언트 앱을 생성하고 유지 관리합니다.
* **제한 사항**
* 동영상 조회수는 게시물이 게시 후 1,800일 이내인 경우에만 제공됩니다.

<div id="authenticating-with-the-engagement-api">
  ### Engagement API로 인증하기
</div>

> **유의 사항**: 
>
> Engagement API를 사용하기 전에 X에서 사용자의 개발자 앱에 대해 Engagement API 접근 권한을 먼저 활성화해야 합니다. 이를 위해 인증에 사용할 App ID를 계정 관리자 또는 기술 지원 팀과 반드시 공유하세요.

Engagement API에서는 두 가지 인증 방식을 사용할 수 있습니다: [OAuth 1.0a](/ko/resources/fundamentals/authentication#oauth-1-0a-2)와 [OAuth 2.0 Bearer Token](/ko/resources/fundamentals/authentication#bearer-token-also-known-as-app-only). 

**OAuth 2.0 Bearer Token**(“application-only”라고도 함)을 사용하면 공개적으로 이용 가능한 참여 메트릭에 접근할 수 있습니다. 이 인증 방식은 [/totals endpoint](/ko/x-api/enterprise-gnip-2.0/fundamentals/engagement-api#post-insights-engagement-totals)에 요청을 보낼 때, 공개된 게시물에 대해 Favorites(Likes라고도 함), Retweets, Quote Tweets, Replies 및 동영상 조회수의 전체 합계를 가져오는 데 사용할 수 있습니다. 

**OAuth 1.0a**(“user context”라고도 함)을 사용하면 사용자를 대신해 요청을 보내고, 해당 사용자에게 속한 비공개 참여 메트릭에 접근할 수 있습니다. 

이 인증 방식은 다음의 경우에 필요합니다.

* [/28hr endpoint](/ko/x-api/enterprise-gnip-2.0/fundamentals/engagement-api#post-insights-engagement-28hr) 및 [/historical endpoint](/ko/x-api/enterprise-gnip-2.0/fundamentals/engagement-api#post-insights-engagement-historical)에 전송되는 모든 요청
* 다음 비공개 메트릭에 접근하는 경우: Impressions, Engagements, Media Views, Media Engagements, URL Clicks, Hashtag Clicks, Detail Expands, Permalink Clicks, App Install Attempts, App Opens, Email Post, User Follows, User Profile Clicks

OAuth 1.0a로 요청을 보낼 때는, 관심 있는 게시물 또는 보호된 리소스를 소유한 사용자의 액세스 토큰(Access Token 및 Secret)을 포함해야 합니다. 보호된 사용자 데이터를 요청하면서 올바른 사용자 액세스 토큰을 제공하지 않으면, Engagement API는 `403 Forbidden` 오류를 반환합니다.

Engagement API는, 해당 게시물 소유자를 대신해 인증하더라도 [protected Posts](https://help.x.com/en/safety-and-security/public-and-protected-tweets)에 대한 참여 데이터를 가져오는 것을 허용하지 않습니다. 이렇게 시도하면 `"Tweet ID(s) are unavailable"`라는 메시지와 함께 `400 Bad Request` 오류가 반환됩니다.

자신의 X 계정(즉, 개발자 앱을 소유한 계정)을 대신해 요청을 보내는 경우, [developer portal](https://developer.x.com/en/portal/projects-and-apps)에서 해당 개발자 앱의 “Keys and tokens” 탭을 통해 필요한 액세스 토큰을 직접 생성할 수 있습니다.

다른 사용자를 대신해 요청을 보내는 경우, 필요한 액세스 토큰을 얻기 위해 3-legged OAuth 플로우를 사용해야 합니다. 이를 수행하는 방법에 대한 자세한 내용은 다음 문서를 참고하세요: [OAuth 1.0a: how to obtain a user’s access tokens](/ko/resources/fundamentals/authentication#oauth-1-0a-2).

추가 예제(여기에는 OAuth 1.0a를 사용한 인증 방법도 포함됨)는 [Engagement API용 XDevelopers Python 샘플 코드](https://github.com/xdevplatform/enterprise-scripts-python/tree/master/Engagement-API)를 참고하세요.

<div id="recent-changes-to-the-engagement-api">
  ### Engagement API의 최근 변경 사항
</div>

Engagement API는 X에서의 활동 성과를 모니터링할 수 있도록 해 주는 매우 중요한 노출 및 참여 메트릭을 제공합니다. 당사 데이터에 기반해 마케팅 결정을 내릴 수 있도록 지속적으로 노력하는 과정에서, X 전반의 메트릭과의 일관성을 더욱 높여 주는 Engagement API의 최근 변경 사항을 공유합니다.  

최근 우리는 Engagement API를 현대화하여 X 분석 대시보드(analytics.x.com)에서 사용 중인 것과 동일한 메트릭 집계 방식을 사용하도록 변경했습니다. 새로운 메트릭을 도입하는 과정에서 API 변경으로 인한 중단을 최소화하기 위해 신중하게 접근했으며, 첫 번째 변경 사항 세트는 2017년 10월 9일에 배포했습니다. 이러한 변경 사항은 여러분 또는 여러분의 고객이 X에서 성과를 모니터링하는 모든 지점 간의 일관성을 향상시킵니다. 아래에서 변경 사항에 대한 자세한 개요를 확인해 보세요:

|     |     |
| :--- | :--- |
| **Metric** | **Change** |
| engagements | 전체 engagements에 포함되는 메트릭을 Post 분석 대시보드와의 일관성을 맞추도록 업데이트했습니다. Engagements는 “사람들이 이 게시물과 상호작용한 횟수”를 측정합니다.<br /><br />동영상 또는 GIF와 같은 미디어가 포함된 게시물의 경우, engagements 메트릭에는 더 이상 미디어 조회수가 포함되지 않습니다. 미디어 조회수는 이제 새로운 메트릭인 &#95;media&#95;views&#95;에서 확인할 수 있습니다. |
| media&#95;clicks* | 이 메트릭은 “*media&#95;engagements*”라는 새로운 메트릭으로 대체되었습니다. |
| video&#95;views | 2018년 7월 6일부터, 이 메트릭은 [/totals](/ko/x-api/enterprise-gnip-2.0/fundamentals/engagement-api#post-insights-engagement) 엔드포인트를 통해 &#39;unowned&#39; 게시물에 대해서도 사용할 수 있습니다. 이는 app-only 인증을 사용하여 **모든** 게시물의 동영상 조회수에 접근할 수 있음을 의미합니다. <br /><br />동영상 조회수는 1800일 이내의 게시물에 대해서만 요청할 수 있습니다. 1800일이 지난 게시물에 대해 동영상 조회수를 요청하려고 하면 다음과 같은 응답을 받게 됩니다:<br /><br />&quot;unsupported&#95;for&#95;video&#95;views&#95;tweet&#95;ids&quot;: [&quot;TWEET&#95;ID&quot;]<br /><br />**참고:** video&#95;views는 최소 2초 동안 동영상의 50% 이상이 화면에 노출되어야 한다는 MRC 기준에 의존하기 때문에 media&#95;views와는 차이가 있다는 점에 유의하십시오.  <br /><br />**또한** X의 자체 플랫폼(모바일 앱 및 웹사이트)에 표시되는 동영상 조회수 메트릭과 /28hr 및 /historical 엔드포인트를 통해 받는 숫자 사이에 차이가 있을 수 있다는 점도 유의하십시오.<br /><br />* X 사용자 인터페이스에 표시되고 /totals 엔드포인트를 통해 제공되는 동영상 조회수는 해당 동영상이 게시된 모든 게시물에서의 조회수를 합산한 값입니다. 즉, UI에 표시되는 메트릭에는 해당 동영상이 리트윗되었거나 별도의 게시물로 재게시된 모든 경우의 조회수가 합산됩니다.<br />* /28hr 및 /historical 엔드포인트에서 제공하는 동영상 조회수는 여러분이 메트릭을 조회하는 특정 게시물에서 발생한 조회수만 포함합니다. |
| media&#95;views | 이는 동영상, Vine, GIF, 이미지 전반에 걸쳐 집계된, 미디어의 모든 조회수(자동 재생 및 클릭)를 포함합니다.<br /><br />**참고:** 이미지가 포함된 게시물은 분석 대시보드에서는 media&#95;views 메트릭이 표시되지 않지만, Engagement API에서는 반환됩니다. |
| media&#95;engagements* | 이는 동영상, Vine, GIF, 이미지 전반에 걸친 미디어 클릭 횟수를 포함합니다. 이 메트릭은 &#95;media&#95;clicks&#95;를 대체합니다. |
| quote&#95;tweets | 2020년 7월 7일부터, 이 메트릭은 /totals 엔드포인트를 통해 &#39;unowned&#39; 게시물에 대해서도 사용할 수 있습니다. 이는 app-only 인증을 사용하여 모든 게시물의 인용 게시물 개수에 접근할 수 있음을 의미합니다. |

<div id="interpreting-the-metrics">
  ### 메트릭 해석하기
</div>

**참고:** 일부 X 웹 대시보드에 보고되는 데이터와 Engagement API에 보고되는 데이터 사이에 차이가 있을 수 있습니다. 이러한 차이는 웹 대시보드가 일반적으로 선택한 기간 내에 발생한 참여 및/또는 노출만 표시하기 때문에 발생합니다. 예를 들어, 웹 대시보드는 달력상 한 달 동안의 게시물 참여만 표시할 수 있지만, Engagement API는 요청한 기간 내에 있다면 그 달의 범위를 넘어 발생한 참여까지도 표시할 수 있습니다. 이러한 경우에는 Engagement API를 정식 기준 데이터 소스로 간주해야 합니다.
 

<div id="impressions-and-engagement-data">
  #### 노출 수 및 참여 데이터
</div>

Engagement API는 **유기적(organic)** 노출 수와 참여 데이터를 제공합니다.

노출 수는 특정 게시물이 X 플랫폼에서 유기적 컨텍스트에서 표시된(조회된) 총 횟수를 나타냅니다. 프로모션 또는 유료 컨텍스트에서 표시된 게시물로 인해 발생한 노출 수는 **포함되지 않습니다**.

참여는 특정 게시물이 시청자에 의해 **유기적** 및 **프로모션** 컨텍스트에서 상호작용이 발생한 총 횟수를 나타냅니다. 참여에는 리트윗, 좋아요, 답글, URL 클릭, 해시태그 클릭, 멘션 클릭, 미디어 조회 등이 포함되지만 이에 한정되지는 않습니다. 포함되는 전체 참여 액션 목록은 참여 데이터(Engagement Data) 섹션을 참조하십시오. 

기본적인 참여율을 계산하려면, 분석 중인 기간에 대해 특정 게시물의 전체 참여 수를 전체 노출 수로 나누어 계산하십시오.

노출 수 및 참여 데이터는 소유한 @handle의 게시물, 또는 귀하의 앱이 해당 게시물의 세부 정보를 열람하도록 권한을 부여받은 @handle의 게시물에 대해서만 조회할 수 있습니다. 내부적으로 Engagement API는 계약된 @handle 한도 대비 요청된 고유 @handle 수를 추적합니다. 또한 클라이언트 측에서도 월간 동안 @handle 요청 사용량을 추적할 것을 권장합니다.  

<div id="video-metrics">
  #### 비디오 메트릭
</div>

X 내에서 미디어 노출을 나타내는 메트릭에는 몇 가지 유형이 있습니다. 첫 번째는 비디오 조회수 메트릭으로, 최소 2초 동안 비디오의 50% 이상이 화면에 노출되어야 한다는 MRC 표준에 기반합니다. 두 번째는 Media Views로, 비디오, Vine, GIF, 이미지 전반에 걸쳐 집계되는 미디어의 모든 조회(자동 재생 및 클릭)를 포함합니다.

비디오 조회수 메트릭은 /28hour 및 /historical 엔드포인트를 통해 소유한 게시물에 대해 사용할 수 있으며, /totals 엔드포인트를 통해 소유하지 않은 모든 게시물에 대해서도 사용할 수 있습니다. 

X 사용자 인터페이스의 비디오 조회수 메트릭도 동일한 MRC 표준을 사용하지만, X가 소유·운영하는 플랫폼(모바일 앱 및 웹사이트)에 표시되는 비디오 조회수 메트릭과 Engagement API의 여러 엔드포인트를 통해 수신하는 값 사이에 차이가 있을 수 있다는 점에 유의하세요.

* /totals 엔드포인트 및 X 사용자 인터페이스에서 제공되는 비디오 조회수는 해당 비디오가 게시된 모든 게시물에 걸쳐 집계된 비디오 조회수를 표시합니다. 이는 /totals를 통해 제공되고 X UI에 표시되는 메트릭이, 해당 비디오가 리트윗되었거나 별도의 게시물에 다시 게시된 모든 사례의 조회수를 합산한 값이라는 의미입니다.
* /28hour 및 /historical Engagement API 엔드포인트에서 제공되는 비디오 조회수는 메트릭을 조회하는 특정 게시물에서 발생한 조회수만 포함합니다. 
   

또한 1800일보다 오래된 게시물에 대해서는 비디오 조회수를 제공하지 않는다는 점에 유의하세요. 대신 1800일보다 오래된 게시물 목록을 포함하는 객체를 제공합니다. 요청한 게시물에 대해서는 다른 모든 메트릭을 별도의 객체로 계속 수신하게 됩니다. 다음은 응답 예시입니다:

```json
{
  "unsupported_for_video_views_tweet_ids": [
    "479311209565413376",
    "477139122520219648"
  ],
  "grouping name": {
    "479311209565413376": {
      "favorites": "69",
      "impressions": "1692",
      "retweets": "142",
      "video_views": "0"
    },
    "477139122520219648": {
      "favorites": "10",
      "impressions": "1023",
      "retweets": "6",
      "video_views": "0"
    },
    "1397568983931392004": {
      "favorites": "268",
      "impressions": "26803",
      "retweets": "56",
      "video_views": "17902"
    }
  }
}
```

Media Views 지표는 /28hour 및 /historical 엔드포인트에서 소유한 게시물에 대해서만 사용할 수 있습니다.

<div id="engagement-api-groupings">
  ### Engagement API 그룹화
</div>

그룹화를 사용하면 반환된 engagement 메트릭을 사용자 정의 방식으로 정리할 수 있습니다. 요청당 최대 3개의 그룹화를 포함할 수 있습니다. 메트릭을 다음 값 중 하나 이상으로 그룹화할 수 있습니다:

*세 엔드포인트 모두에서 지원:*

* tweet.id
* engagement.type
   

*`/28hr` 및 `/historical` 엔드포인트는 시계열 메트릭을 제공할 수 있으므로, 다음을 지원합니다:*

* engagement.day
* engagement.hour

그룹화는 순차적으로 적용되므로, `group_by` 값의 순서를 변경하여 원하는 결과 형식을 바꿀 수 있습니다. 네 개의 `group_by` 값을 포함하는 그룹화는 다음 두 형식 중 하나로만 지원됩니다:

```bash
"group_by": [
    "tweet.id",
    "engagement.type",
    "engagement.day",
    "engagement.hour"
  ]
```

또는

```bash
"group_by": [
    "engagement.type",
    "tweet.id",
    "engagement.day",
    "engagement.hour"
]
```

예를 들어, 메트릭 유형의 총합을 생성하려면 요청의 일부로 다음과 같은 “groupings” 사양을 포함하세요 (요청을 구성하는 방법에 대한 자세한 내용은 [API Reference](/ko/x-api/enterprise-gnip-2.0/fundamentals/engagement-api#post-insights-engagement) 페이지를 참조하세요):

```json
{
  "engagement_types": [
    "favorites",
    "replies",
    "retweets"
  ],
  "groupings": {
    "Grand Totals": {
      "group_by": [
        "engagement.type"
      ]
    }
  }
}
```

이러한 그룹화를 사용하면 Engagement API의 JSON 응답에 메트릭 유형별 총계를 담고 있는 루트 레벨 `"Grand Totals"` 속성이 포함됩니다:

```json
{
  "총계": {
    "favorites": "12",
    "replies": "2",
    "retweets": "2"
  }
}
```

단일 게시물에 대해 게시물 id별로 그룹화된 4시간 단위 시계열 메트릭을 생성하려면 요청에 다음 Grouping 사양을 포함해야 합니다:

```json
{
  "start": "2016-02-10T17:00:00Z",
  "end": "2016-02-10T21:00:00Z",
  "tweet_ids": [
    "697506383516729344"
  ],
  "engagement_types": [
    "impressions",
    "engagements"
  ],
  "groupings": {
    "Tweets_MetricType_TimeSeries": {
      "group_by": [
        "tweet.id",
        "engagement.type",
        "engagement.hour"
      ]
    }
  }
}
```

이 방식으로 그룹화하면 Engagement API의 JSON 응답에는 최상위 수준의 `"Tweets_MetricType_TimeSeries"` 속성이 포함되며, 여기에는 게시물 id별, 메트릭 유형별로 구분된 메트릭과 이에 대응하는 시간 단위 시계열 데이터가 포함됩니다.

```json
{
  "Tweets_MetricType_TimeSeries": {
    "697506383516729344": {
      "impressions": {
        "2016-02-10": {
          "17": "551",
          "18": "412",
          "19": "371",
          "20": "280"
        }
      },
      "engagements": {
        "2016-02-10": {
          "17": "8",
          "18": "6",
          "19": "3",
          "20": "0"
        }
      }
    }
  }
}
```

<div id="frequently-asked-questions">
  ## 자주 묻는 질문
</div>

`Enterprise`

<div id="engagement-api">
  ### Engagement API
</div>

<AccordionGroup>
  <Accordion title="Engagement API에는 어떻게 액세스할 수 있나요?">
    Engagement API에 대한 액세스는 Enterprise 구독을 통해 제공됩니다. 영업 팀과 연락하려면 [이 양식](/ko/x-api/enterprise-gnip-2.0/enterprise-gnip)을 작성해 주세요.
  </Accordion>

  <Accordion title="'@handle' 기준으로 사용량은 어떻게 추적되나요?">
    계약에 Engagement API와 함께 사용할 수 있는 고유 handle 개수에 대한 한도가 포함되어 있는 경우, 내부 X 시스템은 Engagement API로 조회된 게시물을 소유한 인증된 사용자 수를 추적합니다. 고객도 클라이언트 측에서 이 고유 handle 개수를 함께 추적해야 합니다. 현재 Engagement API의 @handle 사용량을 확인할 수 있는 사용량 API나 UI는 없습니다. 시스템은 계약된 수보다 더 많은 @handle이 요청되더라도 초과 사용을 차단하지 않습니다. 청구 월 말에 조회된 고유 @handle 수가 계약된 수와 비교되며, 계약 조건에 따라 초과 사용료가 부과됩니다.
  </Accordion>

  <Accordion title="Engagement API에 대한 @handle 사용량을 확인할 수 있나요?">
    현재 Engagement API의 @handle 사용량을 확인할 수 있는 사용량 API나 UI는 없습니다. 시스템은 계약된 수보다 더 많은 @handle이 요청되더라도 초과 사용을 차단하지 않습니다. 청구 월 말에 조회된 고유 @handle 수가 계약된 수와 비교되며, 계약 조건에 따라 초과 사용료가 부과됩니다.

    **페이로드에 반환되는 `engagements` 메타데이터 필드가 다양한 참여 메트릭 합계와 같지 않습니다. 왜 그런가요?**

    이는 예상된 동작입니다. `engagements` 메타데이터 필드는 API에서 반환되는 개별 참여 메트릭의 합과 항상 일치하지 않을 수 있습니다. 이는 `engagements` 메타데이터 필드에 페이로드에서 개별 메트릭으로 분리되지 않은 추가 참여가 포함될 수 있기 때문입니다. 다시 말해, 다양한 참여 메트릭의 합계를 모두 더하더라도 페이로드에 반환된 `engagements` 메트릭 필드에 표시되는 값과 같지 않을 수 있습니다.

    `engagements` 메타데이터 필드는 게시물에서 발생한 모든 클릭이나 상호작용을 의미한다고 보면 됩니다.
     

    **페이로드 응답의 `url_clicks` 필드가 숫자를 반환하는데, 실제로 해당 게시물에는 URL이 없습니다. 어떻게 가능한가요?**

    해시태그처럼 다른 페이지로 연결되는 링크를 생성하는 요소를 포함한 게시물의 경우, 사용자가 이를 클릭하면 URL 클릭으로 집계되기 때문일 수 있습니다.
     
  </Accordion>

  <Accordion title="특정 게시물에 대한 참여 데이터를 받을 수 없는 이유는 무엇인가요?">
    특정 게시물에 대한 참여 데이터를 가져올 수 없는 이유는 다음과 같이 여러 가지가 있을 수 있습니다.

    * 요청한 게시물 ID가, 타사 대신 데이터를 조회하기 위해 사용 중인 인증 토큰을 기준으로 사용할 수 없는 경우
    * /totals 엔드포인트에 대해 요청한 게시물 ID가 90일 이내가 아니어서 노출 수 또는 참여 메트릭을 반환할 수 없는 경우
    * 요청한 게시물 ID가 더 이상 사용 불가능한 상태인 경우로, 보통 삭제되었거나 다른 이유로 더 이상 공개적으로 제공되지 않음을 의미합니다.

    위와 같은 상황에서 받게 될 수 있는 다양한 [오류 메시지](/ko/x-api/enterprise-gnip-2.0/fundamentals/engagement-api#error-messages)를 검토해 주세요.
  </Accordion>

  <Accordion title="Engagement API의 속도 제한은 어떻게 처리할 수 있나요?">
    Engagement API에 요청을 보낼 때 응답 헤더에 반환되는 `x-per-minute-limit` 및 `x-per-minute-remaining` 정보를 사용해 사용량을 모니터링할 수 있습니다.

    `x-per-minute-limit`은 허용량을 나타내고, `x-per-minute-remaining`은 남은 호출 횟수를 나타냅니다.
  </Accordion>
</AccordionGroup>

<div id="error-troubleshooting-guide">
  ### 오류 문제 해결 가이드
</div>

<AccordionGroup>
  <Accordion title="인증에 문제가 있습니다">
    Engagement API [인증 가이드라인](/ko/x-api/enterprise-gnip-2.0/fundamentals/engagement-api#authentication)을 반드시 확인해 보세요.
  </Accordion>

  <Accordion title="올바른 consumer key와 secret, 그리고 access token과 access token secret을 모두 전달했는데도 다음과 같은 오류가 반환됩니다. 어떻게 해야 하나요?">
    ```bash
    [
        Your account could not be authenticated. Reason: Unknown Authorization Type;
    ]
    ```

    /totals 엔드포인트로 인증을 시도할 때는 액세스 토큰이나 secret을 사용하지 마세요. 이러한 토큰을 포함한 상태에서 해당 토큰과 연결되지 않은 게시물에서 콘텐츠를 가져오려고 하면 다음과 같은 오류를 받을 가능성이 높습니다:

    ```bash
    [
        Forbidden to access tweets: 1054424731825229824;
    ]
    ```
  </Accordion>
</AccordionGroup>

<div id="still-cant-find-what-youre-looking-for">
  ### 아직 원하는 정보를 찾지 못하셨나요?
</div>

<AccordionGroup>
  <Accordion title="아직 답변을 받지 못한 질문이 있습니다">
    기술 지원팀에 문의해 주시면 가능한 한 신속하게 답변해 드리겠습니다.
  </Accordion>
</AccordionGroup>

<div id="api-reference">
  ## API 참조
</div>

<div id="post-insightsengagement">
  ### **POST insights/engagement**
</div>

<div id="methods">
  #### **Methods**
</div>

| Method | Description |
| :--- | :--- |
| [POST /insights/engagement/totals](#Totals) | 트윗 모음에 대한 전체 노출 수와 참여 수를 조회합니다. |
| [POST /insights/engagement/historical](#Historical) | 2014년 9월 1일까지 소급하여, 최대 4주 기간 동안의 트윗 모음에 대한 노출 수와 참여 수를 조회합니다. |
| [POST /insights/engagement/28hr](#api-28hr) | 지난 28시간 동안의 트윗 모음에 대한 노출 수와 참여 수를 조회합니다. |

<div id="authentication">
  #### **Authentication**
</div>

Engagement API는 HTTPS 사용이 필수이며, User Context와 Application-Only OAuth 방식을 모두 지원합니다. 대부분의 Engagement API 요청은 3-Legged OAuth(특정 버전의 User Context) 사용을 필요로 합니다. 이는 Engagement API 접근 권한을 부여받도록 Twitter 계정 담당자를 통해 등록 및 승인된 앱의 consumer key와 secret, 그리고 트윗 소유자의 액세스 토큰과 액세스 토큰 secret을 사용하여 엔드포인트를 호출해야 함을 의미합니다. 다음 요청들은 이 유형의 OAuth가 필요합니다:

* 소유한 트윗에 한정된 Impressions 및 Engagements 지표 유형을 얻기 위한 /totals에 대한 모든 요청
* /28hr에 대한 모든 요청
* /historical에 대한 모든 요청

일부 Engagement API 요청은 Application-Only OAuth를 사용하여 수행할 수 있습니다. 이 경우 consumer key와 secret 또는 bearer token만 제공하면 됩니다. 다음 요청은 이 유형의 OAuth로 수행할 수 있습니다:

* 모든 트윗에 대해 조회 가능한 Favorites, Replies, Retweets 또는 Video Views 지표 유형을 얻기 위한 /totals에 대한 모든 요청

모든 요청에 앞서, [developer.x.com](https://developer.x.com/en/portal/dashboard)에 있는 앱 관리 콘솔을 사용하여 Twitter 앱과 해당 API 키를 먼저 설정해야 합니다.

주의: developer.x.com에서 Twitter 계정으로 로그인한 상태라면, 기존 [Twitter 앱](/ko/resources/fundamentals/developer-apps)을 [Twitter 앱 대시보드](https://developer.x.com/en/apps)를 통해 조회하고 수정할 수 있습니다.

앱 설정을 완료한 후, Engagement API에 대한 요청을 수행하려면 앱 ID가 계정 담당자의 승인을 받아야 합니다. “현재 사용자”를 나타내기 위해서는 액세스 토큰을 사용해야 하며, 다른 사용자를 대신해 이루어지는 요청은 유효한 토큰으로 서명되어야 합니다. OAuth 서명 베이스 문자열을 준비하기 전에, URL과 POST 본문 내에서 [예약 문자 인코딩](https://tools.ietf.org/html/rfc3986)이 적절히 처리되고 있는지 확인하십시오.

OAuth 시작 방법에 대한 자세한 내용은 다음 링크를 참조하십시오:

* [OAuth 개요](/ko/resources/fundamentals/authentication)
* [User Context라고도 하는 3-Legged OAuth 사용](/ko/resources/fundamentals/authentication#obtaining-access-tokens-using-3-legged-oauth-flow)
* [Application-Only OAuth 사용](/ko/resources/fundamentals/authentication#bearer-token-also-known-as-app-only)

<div id="post-insightsengagementtotals">
  #### **POST /insights/engagement/totals**
</div>

totals 엔드포인트를 사용하면 한 번에 최대 250개의 트윗 모음에 대해 현재 누적 노출수(impressions)와 참여수(engagements)를 조회할 수 있습니다.

|                    |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| :----------------- | :---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **요청 메서드**         | HTTP POST                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| **URL**            | `https://data-api.x.com/insights/engagement/totals`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| **콘텐츠 유형**         | `application/json`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| **압축**             | Gzip. Gzip 압축을 사용하려면 연결 요청에 `Accept-Encoding` 헤더를 포함하세요.  <br />헤더는 다음과 같이 설정합니다:  <br />  <br />`Accept-Encoding: gzip`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| **POST 요청 형식**     | 요청은 본문에 트윗 ID 목록과 원하는 그룹화 방식을 포함하는 JSON 객체를 담은 POST 요청으로 전송할 수 있습니다. POST 본문은 `tweets`, `engagements`, `groupings` 객체로 구성된 배열 형식입니다. 각 요청에는 최대 250개의 트윗 ID를 포함할 수 있습니다.  <br />  <br />예시 POST 본문은 다음과 같습니다.  <br />  <br /><br />  &#123;<br />    &quot;tweet&#95;ids&quot;: [<br />        &quot;Tweet ID 1&quot;,<br />        &quot;Tweet ID 2&quot;,<br />        &quot;Tweet ID 3&quot;<br />    ],<br />      &quot;engagement&#95;types&quot;: [<br />        &quot;impressions&quot;,<br />        &quot;engagements&quot;,<br />        &quot;favorites&quot;,<br />        &quot;quote&#95;tweets&quot;<br />    ],<br />    &quot;groupings&quot;: &#123;<br />      &quot;grouping name&quot;: &#123;<br />        &quot;group&#95;by&quot;: [<br />          &quot;tweet.id&quot;,<br />          &quot;engagement.type&quot;<br />        ]<br />      &#125;<br />    &#125;<br />  &#125;                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| **트윗 ID**          | 참여 데이터를 조회할 트윗의 Tweet ID를 포함하는 배열입니다. 인증에 사용된 @handle이 생성한 트윗에 대해서만 데이터를 요청할 수 있습니다. 요청당 최대 250개의 트윗을 포함할 수 있으며, Tweet ID는 문자열로 표현되어야 합니다.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| **참여 지표 유형**       | 조회할 참여 메트릭 유형을 포함하는 배열입니다. Totals 엔드포인트는 다음과 같은 참여 유형만 지원합니다: `impressions`, `engagements`, `favorites`, `retweets`, `quote_tweets`, `replies`, `video_views`.  <br />`/totals` 엔드포인트를 사용하면 최근 90일 이내에 생성된 트윗에 대해서는 `impressions`와 `engagements`를, 모든 트윗에 대해서는 `favorites`, `retweets`, `quote_tweets`, `replies`, `video_views`를 조회할 수 있습니다.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| **그룹화**            | Engagement API의 결과는 다양한 그룹으로 반환되어 사용자의 요구에 가장 잘 맞도록 할 수 있습니다. 요청당 최대 3개의 grouping을 포함할 수 있습니다.  <br />  <br />각 grouping마다 애플리케이션에서 해당 grouping 유형을 더 쉽게 참조할 수 있도록 사용자 정의 grouping 이름을 지정할 수 있습니다.  <br />  <br />grouping 이름을 정의한 후에는 `tweet.id` 및/또는 `engagement.type`을 기준으로 그룹화할 수 있습니다.  <br />  <br />groupings는 순차적으로 적용되므로, group&#95;by 값의 순서를 변경하여 원하는 결과 형식을 변경할 수 있습니다. 트윗 ID와 메트릭 유형별로 분리된 메트릭을 보여주는 grouping 예시는 다음과 같습니다.  <br />  <br /><br />  &quot;groupings&quot;: &#123;<br />      &quot;my grouping name&quot;: &#123;<br />        &quot;group&#95;by&quot;: [<br />          &quot;tweet.id&quot;,<br />          &quot;engagement.type&quot;<br />        ]<br />      &#125;<br />    &#125;                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| **POST 요청 크기 제한**  | 요청 한 번에 포함할 수 있는 트윗 ID는 최대 250개입니다.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| **응답 형식**          | JSON. 요청 헤더에서 응답 형식으로 JSON을 지정해야 합니다.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| **요율 제한**          | 액세스 수준에 따라 계약서에 명시된 대로 분 단위 레이트 리밋이 적용됩니다.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| **요청 예시(공개 메트릭)**  | curl --request POST <br />  --url [https://data-api.x.com/insights/engagement/totals](https://data-api.x.com/insights/engagement/totals) <br />  --header &#39;accept-encoding: gzip&#39; <br />  --header &#39;authorization: Bearer &#39; <br />  --header &#39;content-type: application/json&#39; <br />  --data &#39;&#123;<br />                &quot;tweet&#95;ids&quot;: [<br />                    &quot;1070059276213702656&quot;,&quot;1021817816134156288&quot;,&quot;1067094924124872705&quot;<br />                ],<br />                &quot;engagement&#95;types&quot;: [<br />                    &quot;favorites&quot;,&quot;retweets&quot;,&quot;replies&quot;,&quot;quote&#95;tweets&quot;,&quot;video&#95;views&quot;<br />                ],<br />                &quot;groupings&quot;: &#123;<br />                    &quot;perTweetMetricsUnowned&quot;: &#123;<br />                        &quot;group&#95;by&quot;: [<br />                            &quot;tweet.id&quot;,<br />                            &quot;engagement.type&quot;<br />                        ]<br />                    &#125;<br />                &#125;<br />            &#125; <br />  --verbose <br />  --compressed                                                                                                                                                                                                                                                                                                                                                       |
| **요청 예제**          | curl --request POST <br />  --url [https://data-api.x.com/insights/engagement/totals](https://data-api.x.com/insights/engagement/totals) <br />  --header &#39;accept-encoding: gzip&#39; <br />  --header &#39;authorization: OAuth oauth&#95;consumer&#95;key=&quot;consumer-key-for-app&quot;,oauth&#95;nonce=&quot;generated-nonce&quot;,oauth&#95;signature=&quot;generated-signature&quot;,oauth&#95;signature&#95;method=&quot;HMAC-SHA1&quot;, oauth&#95;timestamp=&quot;generated-timestamp&quot;,oauth&#95;token=&quot;access-token-for-authed-user&quot;, oauth&#95;version=&quot;1.0&quot;&#39; <br />  --header &#39;content-type: application/json&#39; <br />  --data &#39;&#123;<br />                &quot;tweet&#95;ids&quot;: [<br />                    &quot;1060976163948904448&quot;,&quot;1045709644067471360&quot;<br />                ],<br />                &quot;engagement&#95;types&quot;: [<br />                    &quot;favorites&quot;,&quot;replies&quot;,&quot;retweets&quot;,&quot;video&#95;views&quot;,&quot;impressions&quot;,&quot;engagements&quot;<br />                ],<br />                &quot;groupings&quot;: &#123;<br />                    &quot;perTweetMetricsOwned&quot;: &#123;<br />                        &quot;group&#95;by&quot;: [<br />                            &quot;tweet.id&quot;,<br />                            &quot;engagement.type&quot;<br />                        ]<br />                    &#125;<br />                &#125;<br />            &#125;&#39; <br />  --verbose <br />  --compressed |
| **예시 응답(공개 메트릭)**  | &#123;<br />  &quot;perTweetMetricsUnowned&quot;: &#123;<br />    &quot;1021817816134156288&quot;: &#123;<br />      &quot;favorites&quot;: &quot;530&quot;,<br />      &quot;quote&#95;tweets&quot;: &quot;79&quot;,<br />      &quot;replies&quot;: &quot;147&quot;,<br />      &quot;retweets&quot;: &quot;323&quot;,<br />      &quot;video&#95;views&quot;: &quot;0&quot;<br />    &#125;,<br />    &quot;1067094924124872705&quot;: &#123;<br />      &quot;favorites&quot;: &quot;1360&quot;,<br />      &quot;quote&#95;tweets&quot;: &quot;29&quot;,<br />      &quot;replies&quot;: &quot;56&quot;,<br />      &quot;retweets&quot;: &quot;178&quot;,<br />      &quot;video&#95;views&quot;: &quot;5754512&quot;<br />    &#125;,<br />    &quot;1070059276213702656&quot;: &#123;<br />      &quot;favorites&quot;: &quot;69&quot;,<br />      &quot;quote&#95;tweets&quot;: &quot;5&quot;,<br />      &quot;replies&quot;: &quot;7&quot;,<br />      &quot;retweets&quot;: &quot;26&quot;,<br />      &quot;video&#95;views&quot;: &quot;0&quot;<br />    &#125;<br />  &#125;<br />&#125;                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| **예시 응답**          | &#123;<br />  &quot;perTweetMetricsOwned&quot;: &#123;<br />    &quot;1045709644067471360&quot;: &#123;<br />      &quot;engagements&quot;: &quot;2&quot;,<br />      &quot;favorites&quot;: &quot;0&quot;,<br />      &quot;impressions&quot;: &quot;47&quot;,<br />      &quot;replies&quot;: &quot;0&quot;,<br />      &quot;retweets&quot;: &quot;8&quot;,<br />      &quot;quote&#95;tweets&quot;: &quot;5&quot;,<br />      &quot;video&#95;views&quot;: &quot;0&quot;<br />    &#125;,<br />    &quot;1060976163948904448&quot;: &#123;<br />      &quot;engagements&quot;: &quot;4&quot;,<br />      &quot;favorites&quot;: &quot;0&quot;,<br />      &quot;impressions&quot;: &quot;148&quot;,<br />      &quot;replies&quot;: &quot;1&quot;,<br />      &quot;retweets&quot;: &quot;9&quot;,<br />      &quot;quote&#95;tweets&quot;: &quot;2&quot;,<br />      &quot;video&#95;views&quot;: &quot;0&quot;<br />    &#125;<br />  &#125;<br />&#125;                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| **이용할 수 없는 트윗 ID** | 더 이상 사용할 수 없는 트윗 ID(예: 삭제된 트윗 ID)가 포함된 쿼리의 경우, 사용 가능한 모든 트윗 ID에 대해서는 적절한 데이터가 반환되며, 사용할 수 없는 트윗 ID는 `unavailable_tweet_ids`라는 배열에 나열됩니다. 예:  <br /><br />  &#123;<br />    &quot;start&quot;: &quot;2015-11-17T22:00:00Z&quot;,<br />    &quot;end&quot;: &quot;2015-11-19T02:00:00Z&quot;,<br />    &quot;unavailable&#95;tweet&#95;ids&quot;: [<br />        &quot;323456789&quot;<br />    ],<br />    &quot;group1&quot;: &#123;<br />     &quot;423456789&quot;: &#123;<br />      &quot;favorites&quot;: &quot;67&quot;,<br />      &quot;replies&quot;: &quot;8&quot;,<br />      &quot;retweets&quot;: &quot;26&quot;,<br />      &quot;quote&#95;tweets&quot;: &quot;2&quot;<br />     &#125;<br />    &#125;<br />  &#125;                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |

<div id="post-insightsengagement28hr">
  #### **POST /insights/engagement/28hr**
</div>

28시간 엔드포인트를 사용하면 지난 28시간 동안 최대 25개의 트윗으로 구성된 컬렉션에 대한 노출 수와 참여 수를 조회할 수 있습니다. 28시간 엔드포인트에서는 지원되는 모든 개별 메트릭에 대해 메트릭 조회를 요청할 수도 있습니다. 지원되는 메트릭의 전체 목록은 [메트릭 가용성](https://developer.x.com/en/docs/x-api/v1/metrics/get-tweet-engagement/overview#EngagementTypes)을 참고하세요.

|                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| :---------------- | :-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **요청 메서드**        | HTTP POST                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| **URL**           | `https://data-api.x.com/insights/engagement/28hr`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| **콘텐츠 유형**        | `application/json`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| **압축**            | Gzip. Gzip 압축을 사용해 요청하려면 연결 요청 시 Accept-Encoding 헤더를 함께 전송하세요.  <br />헤더는 다음과 같이 지정합니다.  <br />  <br />`Accept-Encoding: gzip`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| **POST 요청 형식**    | 요청은 본문에 트윗 ID 컬렉션과 원하는 그룹화 방식이 포함된 JSON 객체를 담아 POST 요청으로 전송할 수 있습니다. POST 본문은 `tweets`, `engagements`, `groupings` 객체를 포함하는 배열 형식으로 구성됩니다. 각 요청에는 최대 25개의 트윗 ID를 포함할 수 있습니다.  <br />  <br />예시 POST 본문은 다음과 같습니다.  <br />  <br /><br />  &#123;<br />    &quot;tweet&#95;ids&quot;: [<br />       &quot;Tweet ID 1&quot;,<br />       &quot;Tweet ID 2&quot;,<br />       &quot;Tweet ID 3&quot;<br />    ],<br />      &quot;engagement&#95;types&quot;: [<br />        &quot;impressions&quot;,<br />        &quot;engagements&quot;,<br />        &quot;url&#95;clicks&quot;,<br />        &quot;detail&#95;expands&quot;<br />    ],<br />    &quot;groupings&quot;: &#123;<br />      &quot;grouping name&quot;: &#123;<br />        &quot;group&#95;by&quot;: [<br />          &quot;tweet.id&quot;,<br />          &quot;engagement.type&quot;,<br />          &quot;engagement.hour&quot;<br />        ]<br />      &#125;<br />    &#125;<br />  &#125;                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| **트윗 ID**         | 참여 데이터 조회 대상 트윗의 Tweet ID를 포함하는 배열입니다. 인증에 사용한 @handle이 작성한 트윗에 대해서만 데이터를 요청할 수 있다는 점에 유의하세요. 28시간 엔드포인트는 요청당 최대 25개의 트윗을 지원하며, Tweet ID는 문자열로 표현되어야 합니다.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| **참여 지표 유형**      | 조회할 참여 메트릭 유형 배열입니다.  <br />  <br />28시간 endpoint에서는 `impressions`, `engagements` 및 모든 개별 참여 메트릭 유형이 지원됩니다. 지원되는 참여 메트릭 전체 목록은 [Engagement Data](https://developer.x.com/en/docs/x-api/v1/metrics/get-tweet-engagement/overview#AvailableData)를 참고하세요.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| **그룹화**           | Engagement API의 결과는 다양한 그룹 형태로 반환되어 요구 사항에 가장 잘 맞게 조정할 수 있습니다. 요청당 최대 3개의 그룹화를 포함할 수 있습니다.  <br />  <br />각 그룹화에 대해 애플리케이션에서 이 그룹화 유형을 더 쉽게 참조할 수 있도록 사용자 지정 그룹화 이름을 정의할 수 있습니다. 그룹화 이름을 정의한 후에는 다음 값 중 하나 이상으로 그룹화할 수 있습니다.  <br />`tweet.id`  <br />`engagement.type`  <br />`engagement.day`  <br />`engagement.hour`  <br />그룹화는 순차적으로 적용되므로, `group_by` 값의 순서를 변경하여 원하는 결과 형식을 바꿀 수 있습니다. 다음은 트윗 ID, 메트릭 유형, 일자별로 구분된 메트릭을 보여주는 그룹화 예시입니다.<br /><br />  &quot;groupings&quot;: &#123;<br />    &quot;my grouping name&quot;: &#123;<br />      &quot;group&#95;by&quot;: [<br />        &quot;tweet.id&quot;,<br />        &quot;engagement.type&quot;,<br />        &quot;engagement.day&quot;<br />      ]<br />    &#125;<br />  &#125;<br /><br />  <br />4개의 `group_by` 항목을 가진 그룹화는 아래 두 가지 순서 중 하나를 사용할 때에만 유효합니다. 단일 그룹화에 4개의 `group_by` 항목이 있으면서 아래 순서 중 하나를 따르지 않는 요청은 오류를 반환합니다. 또한, 요청당 4개의 `group_by` 항목을 가진 그룹화는 하나만 허용됩니다.  <br /><br />&quot;group&#95;by&quot;: [<br />    &quot;tweet.id&quot;,<br />    &quot;engagement.type&quot;,<br />    &quot;engagement.day&quot;,<br />    &quot;engagement.hour&quot;<br />  ]<br /><br />&quot;group&#95;by&quot;: [<br />    &quot;engagement.type&quot;,<br />    &quot;tweet.id&quot;,<br />    &quot;engagement.day&quot;,<br />    &quot;engagement.hour&quot;<br />  ]                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| **POST 요청 크기 제한** | 한 번에 최대 25개의 트윗 ID를 포함하여 요청할 수 있습니다.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| **응답 형식**         | JSON. 요청 헤더에서 응답 형식을 JSON으로 지정해야 합니다.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| **요청 한도**         | 액세스 수준에 따라 계약에 명시된 대로 분당 기준 요청 한도가 적용됩니다.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| **요청 예시**         | curl -X POST &quot;[https://data-api.x.com/insights/engagement/28hr](https://data-api.x.com/insights/engagement/28hr)&quot; <br />  -H &#39;Accept-Encoding: gzip&#39; <br />  -H &#39;Authorization OAuth oauth&#95;consumer&#95;key=&quot;consumer-key-for-app&quot;,oauth&#95;nonce=&quot;generated-nonce&quot;,oauth&#95;signature=&quot;generated-signature&quot;,oauth&#95;signature&#95;method=&quot;HMAC-SHA1&quot;, oauth&#95;timestamp=&quot;generated-timestamp&quot;,oauth&#95;token=&quot;access-token-for-authed-user&quot;, oauth&#95;version=&quot;1.0&quot;&#39; <br />  -d &#39;&#123;<br />    &quot;tweet&#95;ids&quot;: [<br />       &quot;123456789&quot;<br />    ],<br />      &quot;engagement&#95;types&quot;: [<br />        &quot;impressions&quot;,<br />        &quot;engagements&quot;<br />    ],<br />    &quot;groupings&quot;: &#123;<br />      &quot;hourly-time-series&quot;: &#123;<br />        &quot;group&#95;by&quot;: [<br />          &quot;tweet.id&quot;,<br />          &quot;engagement.type&quot;,<br />          &quot;engagement.day&quot;,<br />          &quot;engagement.hour&quot;<br />        ]<br />      &#125;<br />    &#125;<br />  &#125;&#39;                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| **응답 예시**         | &#123;<br />&quot;start&quot;:&quot;2015-09-14T17:00:00Z&quot;,<br />&quot;end&quot;:&quot;2015-09-15T22:00:00Z&quot;,<br />&quot;hourly-time-series&quot;:&#123;<br />&quot;123456789&quot;:&#123;<br />&quot;노출수&quot;:&#123;<br />&quot;2015-09-14&quot;:&#123;<br />&quot;17&quot;:&quot;551&quot;,<br />&quot;18&quot;:&quot;412&quot;,<br />&quot;19&quot;:&quot;371&quot;,<br />&quot;20&quot;:&quot;280&quot;,<br />&quot;21&quot;:&quot;100&quot;,<br />&quot;22&quot;:&quot;19&quot;,<br />&quot;23&quot;:&quot;6&quot;<br />&#125;,<br />&quot;2015-09-15&quot;:&#123;<br />&quot;00&quot;:&quot;5&quot;,<br />&quot;01&quot;:&quot;2&quot;,<br />&quot;02&quot;:&quot;7&quot;,<br />&quot;03&quot;:&quot;3&quot;,<br />&quot;04&quot;:&quot;1&quot;,<br />&quot;05&quot;:&quot;0&quot;,<br />&quot;06&quot;:&quot;0&quot;,<br />&quot;07&quot;:&quot;0&quot;,<br />&quot;08&quot;:&quot;0&quot;,<br />&quot;09&quot;:&quot;0&quot;,<br />&quot;10&quot;:&quot;0&quot;,<br />&quot;11&quot;:&quot;0&quot;,<br />&quot;12&quot;:&quot;0&quot;,<br />&quot;13&quot;:&quot;0&quot;,<br />&quot;14&quot;:&quot;0&quot;,<br />&quot;15&quot;:&quot;0&quot;,<br />&quot;16&quot;:&quot;0&quot;,<br />&quot;17&quot;:&quot;0&quot;,<br />&quot;18&quot;:&quot;0&quot;,<br />&quot;19&quot;:&quot;0&quot;,<br />&quot;20&quot;:&quot;0&quot;,<br />&quot;21&quot;:&quot;0&quot;<br />&#125;<br />&#125;,<br />&quot;engagements&quot;:&#123;<br />&quot;2015-09-14&quot;:&#123;<br />&quot;17&quot;:&quot;0&quot;,<br />&quot;18&quot;:&quot;0&quot;,<br />&quot;19&quot;:&quot;0&quot;,<br />&quot;20&quot;:&quot;0&quot;,<br />&quot;21&quot;:&quot;0&quot;,<br />&quot;22&quot;:&quot;0&quot;,<br />&quot;23&quot;:&quot;0&quot;<br />&#125;,<br />&quot;2015-09-15&quot;:&#123;<br />&quot;00&quot;:&quot;0&quot;,<br />&quot;01&quot;:&quot;0&quot;,<br />&quot;02&quot;:&quot;0&quot;,<br />&quot;03&quot;:&quot;0&quot;,<br />&quot;04&quot;:&quot;0&quot;,<br />&quot;05&quot;:&quot;0&quot;,<br />&quot;06&quot;:&quot;0&quot;,<br />&quot;07&quot;:&quot;0&quot;,<br />&quot;08&quot;:&quot;0&quot;,<br />&quot;09&quot;:&quot;0&quot;,<br />&quot;10&quot;:&quot;0&quot;,<br />&quot;11&quot;:&quot;0&quot;,<br />&quot;12&quot;:&quot;0&quot;,<br />&quot;13&quot;:&quot;0&quot;,<br />&quot;14&quot;:&quot;0&quot;,<br />&quot;15&quot;:&quot;0&quot;,<br />&quot;16&quot;:&quot;0&quot;,<br />&quot;17&quot;:&quot;0&quot;,<br />&quot;18&quot;:&quot;0&quot;,<br />&quot;19&quot;:&quot;0&quot;,<br />&quot;20&quot;:&quot;0&quot;,<br />&quot;21&quot;:&quot;0&quot;<br />&#125;<br />&#125;<br />&#125;<br />&#125;<br />&#125; |
| **사용 불가 트윗 ID**   | 사용할 수 없게 된 트윗 ID(예: 삭제된 경우)가 포함된 쿼리의 경우, 사용 가능한 모든 트윗 ID에 대해서는 적절한 데이터가 반환되며, 사용할 수 없는 트윗 ID는 `unavailable_tweet_ids`라는 배열에 참조됩니다. 예를 들어:  <br /><br />  &#123;<br />    &quot;start&quot;: &quot;2015-11-17T22:00:00Z&quot;,<br />    &quot;end&quot;: &quot;2015-11-19T02:00:00Z&quot;,<br />    &quot;unavailable&#95;tweet&#95;ids&quot;: [<br />        &quot;323456789&quot;<br />    ],<br />    &quot;group1&quot;: &#123;<br />     &quot;423456789&quot;: &#123;<br />      &quot;favorites&quot;: &quot;67&quot;,<br />      &quot;replies&quot;: &quot;8&quot;,<br />      &quot;retweets&quot;: 26<br />     &#125;<br />    &#125;<br />  &#125;                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |

<div id="post-insightsengagementhistorical">
  #### **POST /insights/engagement/historical**
</div>

historical 엔드포인트를 사용하면 최대 25개의 트윗으로 구성된 컬렉션에 대해, 최대 4주까지의 임의 기간 동안 노출 수(impressions)와 참여도(engagement)를 조회할 수 있습니다. 현재 API에서는 2014년 9월 1일보다 이전 데이터는 요청할 수 없습니다. historical 엔드포인트에서는 또한 지원되는 모든 개별 메트릭에 대한 메트릭 조회를 요청할 수 있습니다. 지원되는 메트릭의 전체 목록은 [Metric Availability](https://developer.x.com/en/docs/x-api/v1/metrics/get-tweet-engagement/overview#EngagementTypes)를 참고하세요.

|                    |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| :----------------- | :--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **요청 메서드**         | HTTP POST                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| **URL**            | `https://data-api.x.com/insights/engagement/historical`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| **콘텐츠 유형**         | `application/json`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| **압축 방식**          | Gzip. Gzip 압축을 사용해 요청하려면 연결 요청에 Accept-Encoding 헤더를 포함해 전송합니다.  <br />헤더는 다음과 같습니다.  <br />  <br />`Accept-Encoding: gzip`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| **POST 요청 형식**     | 요청은 본문이 트윗 ID 모음과 원하는 그룹화 방식을 담은 JSON 객체인 POST 요청으로 전송할 수 있습니다. 이 POST는 `tweets`, `engagements`, `groupings` 객체를 포함하는 배열 형식입니다. 각 요청에는 최대 25개의 트윗 ID를 포함할 수 있습니다. 각 요청마다 최대 4주 기간 내에서 사용자 지정 시작(Start) 및 종료(End) 날짜를 지정할 수 있습니다.  <br />  <br /><br />  &#123;<br />    &quot;tweet&#95;ids&quot;: [<br />       &quot;Tweet ID 1&quot;,<br />       &quot;Tweet ID 2&quot;,<br />       &quot;Tweet ID 3&quot;<br />    ],<br />      &quot;engagement&#95;types&quot;: [<br />        &quot;impressions&quot;,<br />        &quot;engagements&quot;,<br />        &quot;url&#95;clicks&quot;,<br />        &quot;detail&#95;expands&quot;<br />    ],<br />    &quot;groupings&quot;: &#123;<br />      &quot;grouping name&quot;: &#123;<br />        &quot;group&#95;by&quot;: [<br />          &quot;tweet.id&quot;,<br />          &quot;engagement.type&quot;,<br />          &quot;engagement.hour&quot;<br />        ]<br />      &#125;<br />    &#125;<br />  &#125;                                                                                                                                                                                                                                                                                                                                                                                                                      |
| **시작일 및 종료일**      | 요청의 일부로 `start` 및 `end` 값을 사용해 사용자 지정 시작일과 종료일을 지정할 수 있습니다. 시작일과 종료일은 기간이 4주를 초과하지 않도록 지정해야 합니다. 현재 기준으로 가능한 가장 이른 시작일은 2014년 9월 1일입니다. 미래 시점의 종료일은 지원되지 않습니다. start와 end 날짜가 제공되지 않으면 API는 기본적으로 직전 4주를 사용합니다.  <br />  <br />Engagement API에서 데이터를 반환할 수 있는 최소 시간 단위는 1시간입니다. Start 또는 End 값이 정확히 정각(1시간 단위) 경계에 맞지 않는 요청의 경우, 요청은 가장 가까운 포함되는 정시로 자동 조정됩니다. 예를 들어, &quot;start&quot;:&quot;2015-07-01T12:24:00Z&quot; 및 &quot;end&quot;:&quot;2015-07-10T08:37:00Z&quot;로 요청하면 &quot;start&quot;:&quot;2015-07-01T12:00:00Z&quot;,&quot;end&quot;:&quot;2015-07-10T09:00:00Z&quot;로 자동 조정됩니다.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| **트윗 ID**          | 참여 데이터를 조회할 트윗의 ID를 포함하는 배열입니다. 인증에 사용된 @handle이 생성한 트윗에 대해서만 데이터를 요청할 수 있다는 점에 유의하세요. 4주 이력 엔드포인트는 요청당 최대 25개의 트윗까지 지원하며, 트윗 ID는 문자열로 표현되어야 합니다.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| **참여 유형**          | 쿼리할 참여 메트릭 유형을 포함하는 배열입니다.  <br />  <br />4주 히스토리컬 엔드포인트의 경우 `impressions`, `engagements` 및 모든 개별 참여 유형이 지원되는 메트릭입니다. 지원되는 참여 메트릭의 전체 목록은 [Engagement Data](https://developer.x.com/en/docs/x-api/v1/metrics/get-tweet-engagement/overview#AvailableData)를 참고하세요.  <br />  <br />**참고:** 현재 2015년 9월 15일 이전에 수행된 쿼리에 대해서는 `favorites`, `replies`, `retweets` 이 세 가지 메트릭이 0으로 표시됩니다.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| **그룹화**            | Engagement API의 결과는 사용자의 요구 사항에 가장 잘 맞도록 서로 다른 그룹으로 반환될 수 있습니다. 요청당 최대 3개의 그룹을 포함할 수 있습니다.  <br />  <br />각 그룹에 대해, 애플리케이션에서 이 그룹 유형을 더 쉽게 참조할 수 있도록 사용자 지정 그룹 이름을 정의할 수 있습니다. 그룹 이름을 정의한 후에는 다음 값들 중 하나 이상을 기준으로 그룹화할 수 있습니다:  <br />`tweet.id`  <br />`engagement.type`  <br />`engagement.day`  <br />`engagement.hour`  <br />그룹 지정은 순서대로 적용되므로, `group&#95;by` 값의 순서를 변경해 원하는 결과 형식을 바꿀 수 있습니다. 다음은 트윗 ID, 메트릭 유형, 날짜별로 메트릭이 분리되어 표시되는 그룹화 예시입니다:<br /><br />  &quot;groupings&quot;: &#123;<br />    &quot;my grouping name&quot;: &#123;<br />      &quot;group&#95;by&quot;: [<br />        &quot;tweet.id&quot;,<br />        &quot;engagement.type&quot;,<br />        &quot;engagement.day&quot;<br />      ]<br />    &#125;<br />  &#125;<br /><br />  <br />4개의 `group&#95;by` 항목을 가진 그룹화는 아래 두 가지 순서 중 하나를 사용하는 경우에만 유효합니다. 단일 그룹 내에 4개의 `group&#95;by` 항목이 있으면서 아래 순서 중 하나가 아닌 요청은 오류를 반환합니다. 또한, 요청당 4개의 `group&#95;by` 항목을 가진 그룹은 하나만 허용됩니다.  <br /><br />&quot;group&#95;by&quot;: [<br />    &quot;tweet.id&quot;,<br />    &quot;engagement.type&quot;,<br />    &quot;engagement.day&quot;,<br />    &quot;engagement.hour&quot;<br />  ]<br /><br />&quot;group&#95;by&quot;: [<br />    &quot;engagement.type&quot;,<br />    &quot;tweet.id&quot;,<br />    &quot;engagement.day&quot;,<br />    &quot;engagement.hour&quot;<br />  ]                                       |
| **POST 요청 크기 제한**  | 요청 한 번에 최대 25개의 트윗 ID까지 지정할 수 있습니다.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| **응답 형식**          | JSON. 요청 헤더에 응답 형식으로 JSON을 지정해야 합니다.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| **요청 한도**          | 액세스 수준에 따라 계약에 명시된 대로 분당 요청 한도가 적용됩니다.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| **요청 예시**          | curl -XPOST &quot;[https://data-api.x.com/insights/engagement/historical](https://data-api.x.com/insights/engagement/historical)&quot; <br />  -H &#39;Accept-Encoding: gzip&#39; <br />  -H &#39;Authorization OAuth oauth&#95;consumer&#95;key=&quot;consumer-key-for-app&quot;,oauth&#95;nonce=&quot;generated-nonce&quot;,oauth&#95;signature=&quot;generated-signature&quot;,oauth&#95;signature&#95;method=&quot;HMAC-SHA1&quot;, oauth&#95;timestamp=&quot;generated-timestamp&quot;,oauth&#95;token=&quot;access-token-for-authed-user&quot;, oauth&#95;version=&quot;1.0&quot;&#39; <br />  -d &#39;&#123;<br />    &quot;start&quot;: &quot;2015-08-01&quot;,<br />    &quot;end&quot;: &quot;2015-08-15&quot;,<br />    &quot;tweet&#95;ids&quot;: [<br />       &quot;123456789&quot;,<br />       &quot;223456789&quot;,<br />       &quot;323456789&quot;<br />    ],<br />      &quot;engagement&#95;types&quot;: [<br />        &quot;impressions&quot;,<br />        &quot;engagements&quot;,<br />        &quot;url&#95;clicks&quot;,<br />        &quot;detail&#95;expands&quot;<br />    ],<br />    &quot;groupings&quot;: &#123;<br />      &quot;types-by-tweet-id&quot;: &#123;<br />        &quot;group&#95;by&quot;: [<br />          &quot;tweet.id&quot;,<br />          &quot;engagement.type&quot;<br />        ]<br />      &#125;<br />    &#125;<br />  &#125;&#39; |
| **응답 예시**          | &#123;<br />    &quot;start&quot;: &quot;2015-08-01T00:00:00Z&quot;,<br />    &quot;end&quot;: &quot;2015-08-15T00:00:00Z&quot;,<br />    &quot;types-by-tweet-id&quot;: &#123;<br />      &quot;123456789&quot;: &#123;<br />        &quot;impressions&quot;: &quot;0&quot;,<br />        &quot;engagements&quot;: &quot;0&quot;,<br />        &quot;url&#95;clicks&quot;: &quot;0&quot;,<br />        &quot;detail&#95;expands&quot;: &quot;0&quot;<br />      &#125;,<br />      &quot;223456789&quot;: &#123;<br />        &quot;impressions&quot;: &quot;788&quot;,<br />        &quot;engagements&quot;: &quot;134&quot;,<br />        &quot;url&#95;clicks&quot;: &quot;30&quot;,<br />        &quot;detail&#95;expands&quot;: &quot;1323&quot;<br />      &#125;,<br />      &quot;323456789&quot;: &#123;<br />        &quot;impressions&quot;: &quot;4&quot;,<br />        &quot;engagements&quot;: &quot;0&quot;,<br />        &quot;url&#95;clicks&quot;: &quot;2&quot;,<br />        &quot;detail&#95;expands&quot;: &quot;0&quot;<br />      &#125;<br />    &#125;<br />  &#125;                                                                                                                                                                                                                                                                                                      |
| **사용할 수 없는 트윗 ID** | 더 이상 사용할 수 없는 트윗 ID(예: 삭제된 경우)를 포함하는 쿼리의 경우, 사용 가능한 모든 트윗 ID에 대해서는 해당 데이터가 반환되고, 사용할 수 없는 트윗 ID는 `unavailable_tweet_ids`라는 배열에 포함됩니다. 예를 들어:<br /><br />&#123;<br />    &quot;start&quot;: &quot;2015-11-17T22:00:00Z&quot;,<br />    &quot;end&quot;: &quot;2015-11-19T02:27:50Z&quot;,<br />    &quot;unavailable&#95;tweet&#95;ids&quot;: [<br />        &quot;323456789&quot;<br />    ],<br />    &quot;group1&quot;: &#123;<br />     &quot;423456789&quot;: &#123;<br />      &quot;favorites&quot;: &quot;67&quot;,<br />      &quot;replies&quot;: &quot;8&quot;,<br />      &quot;retweets&quot;: 26<br />     &#125;<br />    &#125;<br />  &#125;                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |

<div id="response-codes">
  #### **응답 코드**
</div>

| Status | Text | Description |
| :--- | :--- | :--- |
| 200 | OK  | 요청이 성공했습니다. |
| 400 | Bad Request | 일반적으로 요청에 잘못된 JSON이 포함되어 있거나, 요청에서 JSON 페이로드를 전혀 보내지 않은 경우 이 응답이 반환됩니다. |
| 401 | Unauthorized | 잘못된 자격 증명으로 인해 HTTP 인증에 실패했습니다. OAuth 키와 토큰을 확인하세요. |
| 404 | Not Found | 요청이 전송된 URL에서 리소스를 찾을 수 없습니다. 잘못된 URL을 사용했을 가능성이 높습니다. |
| 429 | Too Many Requests | 앱이 API 요청 한도를 초과했습니다. |
| 500 | Internal Server Error | Gnip 측에서 오류가 발생했습니다. 지수 백오프 패턴을 사용해 요청을 다시 시도하세요. |
| 502 | Proxy Error | Gnip 측에서 오류가 발생했습니다. 지수 백오프 패턴을 사용해 요청을 다시 시도하세요. |
| 503 | Service Unavailable | Gnip 측에서 오류가 발생했습니다. 지수 백오프 패턴을 사용해 요청을 다시 시도하세요. |

<div id="error-messages">
  #### **오류 메시지**
</div>

여러 가지 상황에서 Engagement API는 상황별 오류 메시지를 반환하며, 애플리케이션은 이를 처리할 수 있도록 준비되어 있어야 합니다. 아래 표에는 이러한 오류 메시지의 일반적인 예와 각각을 어떻게 해석해야 하는지가 포함되어 있습니다. 많은 경우 Engagement API는 200 OK 응답의 일부로, 추가 정보를 담은 특정 오류 메시지와 함께 사용 가능한 데이터에 대한 부분 결과를 반환한다는 점에 유의하세요.

| Error Message | Description |
| :--- | :--- |
| `"errors":["Your account could not be authenticated. Reason: Access token not found"]` | 요청의 인증 관련 부분에서 발생한 오류입니다. “Reason” 항목에는 오류를 해결하는 데 도움이 되는 정보가 포함됩니다. 문제를 스스로 해결할 수 없는 경우, “Reason”을 포함한 전체 오류 메시지를 지원팀에 보내 주세요. |
| `"errors":["1 Tweet ID(s) are unavailable"],"unavailable_tweet_ids": ["TWEET_IDS"]` | 요청한 트윗 ID 하나 또는 여러 개가 더 이상 사용 가능하지 않습니다. 이는 일반적으로 해당 트윗이 삭제되었거나, 다른 이유로 더 이상 공개적으로 제공되지 않음을 의미합니다. |
| `"errors":["Impressions & engagements for tweets older than 90 days (*TIME_PERIOD*) are not supported"],"unsupported_for_impressions_engagements_tweet_ids":[*TWEET_IDS*]` | /totals 엔드포인트에 대해 요청한 트윗 ID가 90일 이내의 트윗이 아니므로, 노출수(impressions) 및 참여수(engagements) 메트릭을 반환할 수 없습니다. |
| `"errors":["Forbidden to access tweets: *TWEET_IDS*"]` | 사용 중인 인증 토큰의 권한 기준으로, 제3자를 대신해 데이터를 가져올 수 없는 트윗 ID를 요청했습니다. |