---
title: 빠른 시작
sidebarTitle: 빠른 시작
keywords: ["다이렉트 메시지 빠른 시작", "DM 빠른 시작", "DM 조회 빠른 시작", "다이렉트 메시지 튜토리얼", "DM 튜토리얼"]
---

import { Button } from '/snippets/ko/button.mdx';

<div id="getting-started-with-the-manage-direct-message-endpoints">
  ## Direct Message 관리 엔드포인트 시작하기
</div>

이 빠른 시작 가이드는 HTTP 요청을 관리하고 전송하는 도구인 Postman을 사용해 Direct Message 엔드포인트에 첫 번째 요청을 보내는 방법을 설명합니다. Postman 컬렉션에 대해 더 자세히 알아보려면 [Postman 사용하기](/ko/tutorials/postman-getting-started) 가이드를 참조하세요.

Python 기반 예제를 검토하고 싶다면 [X API v2 샘플 코드](https://github.com/xdevplatform/Twitter-API-v2-sample-code) GitHub 리포지토리를 방문하세요. 또한 공식 [X Developer Platform 소프트웨어 개발 키트(SDK)](/ko/x-api/tools-and-libraries/sdks)는 이러한 Direct Message 엔드포인트를 지원하도록 업데이트될 예정입니다.  

<Note>
  **사전 준비 사항**

  이 가이드를 완료하려면 요청을 인증하기 위한 [키와 토큰](/ko/resources/fundamentals/authentication) 세트가 필요합니다. 다음 단계를 따라 이 키와 토큰을 생성할 수 있습니다.

  * [개발자 계정에 가입](https://developer.x.com/en/apply-for-access)하여 승인을 받으세요.
  * developer portal에서 [프로젝트](/ko/resources/fundamentals/projects)와 연결된 [개발자 앱](/ko/resources/fundamentals/developer-apps)을 생성하세요.
  * 앱의 &quot;Keys and tokens&quot; 페이지로 이동해 필요한 자격 증명을 생성하세요. 모든 자격 증명을 안전한 위치에 저장해 두세요.
</Note>

<div id="steps-to-building-direct-message-lookup-requests">
  ### Direct Message 조회 요청을 만드는 단계
</div>

이 예제에서는 하나의 요청으로 새 그룹 대화를 생성하고 해당 대화에 첫 번째 메시지를 추가합니다. 그런 다음 생성된 대화에 두 번째 메시지를 추가합니다.

<div id="step-one-start-with-a-tool-or-library">
  #### 1단계: 도구 또는 라이브러리 선택하기
</div>

Direct Message 관리 엔드포인트 작업을 시작하기 위해, 여기서는 Postman 도구를 사용해 과정을 간소화하겠습니다. XDevelopers에서 작성한 예제 X API v2 요청 컬렉션을 사용해, 새로운 Direct Message를 생성하고 Direct Message 대화 이벤트를 나열하는 데 사용되는 여섯 개의 엔드포인트를 살펴보겠습니다.

컬렉션의 대부분은 미리 채워져 있지만, 이 API 요청을 실행하기 위해 생성한 X 앱을 기반으로 직접 입력해야 하는 몇 가지 세부 정보가 있습니다. 먼저 컬렉션을 불러오거나 업데이트해 보겠습니다.

X API v2 Postman 컬렉션을 환경에 로드하려면, 다음 버튼을 클릭하세요:

<Button href="https://app.getpostman.com/run-collection/9956214-784efcda-ed4c-4491-a4c0-a26470a67400">
  X API v2를 Postman에 추가
</Button>

Postman에 X API v2 컬렉션을 로드한 후, “Manage Direct Messages” 폴더로 이동합니다. 이 폴더의 Authorization 탭은 가능한 부분은 미리 설정되어 있습니다. X 앱의 인증 정보를 사용하려면 몇 가지 설정을 업데이트해야 합니다.

이 폴더에는 새로운 Direct Message를 생성하기 위한 세 개의 엔드포인트도 포함되어 있습니다. 또한 Direct Message 대화 이벤트(메시지 송수신, 대화 참여자 입장 및 퇴장 시점 포함)를 조회하기 위한 세 개의 엔드포인트가 있는 &quot;Direct Message lookup&quot; 폴더도 있다는 점을 참고하세요.

그룹 대화 생성은 X API v2의 새로운 기능이므로, 이 예제에서는 이 기능에 초점을 맞추겠습니다. 우리는 &quot;New group DM and conversation&quot; 예제를 사용하게 됩니다. 이 요청을 사용해 Direct Message 그룹 대화를 생성하겠습니다.

다음 단계는 이 엔드포인트에 대한 인증을 설정하는 것입니다.

<div id="step-two-authenticate-your-request">
  #### 2단계: 요청 인증하기
</div>

X API에 올바르게 요청을 보내려면, 그렇게 할 수 있는 권한이 있는지 확인해야 합니다. 이 엔드포인트에 성공적으로 요청하기 위해 [OAuth 2.0 Authorization Code Flow with PKCE](resources/fundamentals/authentication#oauth-2-0-authorization-code-flow-with-pkce-2)를 사용합니다. Postman에서 액세스 토큰을 생성할 수 있습니다. 

Postman에서는 폴더 수준 또는 개별 요청 수준에서 인증 방식을 설정할 수 있습니다. 여기서는 인증 정보를 폴더 수준에서 구성합니다. &quot;Mange Direct Messages&quot; 폴더로 이동한 후 &quot;Authorization&quot; 탭을 선택하고, Type이 &quot;OAuth 2.0&quot;으로 설정되어 있는지, &quot;Add auth data to&quot;가 &quot;Request Headers&quot;로 설정되어 있는지 확인합니다. &quot;Current Token&quot; 섹션에서 &quot;header Prefix&quot;가 Bearer로 설정되어 있는지 확인합니다.  

새 토큰을 구성하고 생성하려면:

1. &quot;DM lookup&quot;과 같이 Token Name을 생성합니다.

2. **Grant Type**이 Authorization Code (with PKCE)로 설정되어 있는지 확인합니다.

3. **Callback URL**을 설정합니다. Callback URL은 [v2 Dev Portal](https://developer.x.com/en/portal/dashboard)에 있는 애플리케이션과 연결된 Callback URL과 정확히 일치하도록 업데이트해야 합니다. 이 예제에서 사용하는 X App의 Callback URL은 [https://www.example.com.](https://www.example.com/)으로 설정되어 있습니다. (정확히 일치해야 하므로, [https://example.com](https://example.com)은 동작하지 않습니다.) 

4. **Auth URL**이 [https://x.com/i/oauth2/authorize](https://x.com/i/oauth2/authorize)로 설정되어 있는지 확인합니다.

5. **Access Token URL**이 [https://api.x.com/2/oauth2/token.](https://api.x.com/2/oauth2/token)으로 설정되어 있는지 확인합니다.\
   **Client ID** - Developer Portal에서 OAuth 2.0 client ID를 복사해 붙여넣습니다.\
   **Client Secret** - confidential client 유형의 App을 사용하는 경우에만 필요합니다. 해당하는 경우, Developer Portal에서 OAuth 2.0 Client Secret을 복사해 붙여넣습니다. 

6. **Scope**가 dm.read dm.write tweet.read users.read로 설정되어 있는지 확인합니다.

7. **State**가 &quot;state&quot;로 설정되어 있는지 확인합니다.

8. **Client Authentication**이 Send as Basic Auth header로 설정되어 있는지 확인합니다.

9. &quot;Get New Access Token&quot;을 클릭한 다음, &quot;Sign-in with X&quot; 과정의 일부로 &quot;Authorize app&quot;을 클릭합니다.

10. &quot;Proceed&quot; 버튼을 클릭한 다음 &quot;Use Token&quot;을 클릭해 토큰을 생성합니다. 

11. &quot;Save&quot; 버튼을 클릭해 이 구성 정보를 저장합니다.

X에 로그인되어 있지 않다는 메시지가 표시될 수 있습니다. 이 오류가 발생하면, Postman에서 게시물을 대신 올리려는 X 계정으로 로그인해야 합니다.

이제 이러한 OAuth 2.0 세부 정보가 폴더 수준에서 설정되었으므로, 각 예제의 &quot;Authorization&quot; 탭으로 이동해 Type이 &quot;Inherit auth from parent&quot;로 설정되어 있는지 확인합니다. 

이 토큰은 곧 만료되며, &quot;Get New Access Token&quot; 버튼을 클릭해 다시 생성해야 합니다. 이 버튼을 클릭하면 &quot;Sign-in with X&quot; 프로세스가 다시 실행되고, 요청에 사용할 새 토큰이 생성됩니다.

<div id="step-three-retrieve-direct-messages-conversation-events">
  #### 3단계: Direct Message 대화 이벤트 가져오기
</div>

이 엔드포인트로 Direct Message 대화 이벤트를 가져올 때는 대화 ID를 지정해야 합니다. 대화 ID는 엔드포인트 경로의 일부입니다: [https://api.x.com/2/dm&#95;conversations/:dm&#95;conversation&#95;id/dm&#95;events](https://api.x.com/2/dm\\_conversations/:dm\\_conversation\\_id/dm\\_events)

Postman에서 “Params” 탭으로 이동한 다음, &quot;Path Variables&quot; 섹션에 조회하려는 대화의 ID를 입력합니다.

설정은 다음과 같습니다:

|                      |                       |
| :------------------- | :-------------------- |
| **Key**              | **Value**             |
| `dm_conversation_id` | `1228393702244134912` |

이 대화를 지정하면 결과 경로는 다음과 같습니다: [https://api.x.com/2/dm&#95;conversations/1582103724607971328/dm&#95;events](https://api.x.com/2/dm\\_conversations/1582103724607971328/dm\\_events)

&quot;Send&quot; 버튼을 클릭하면 응답에 기본 Direct Message 객체 필드인 id, text, event&#95;type이 포함되어 반환됩니다. 또한 &quot;meta&quot; 객체에는 결과 수와, 사용 가능한 경우 더 많은 이벤트를 가져오는 데 사용되는 페이지네이션 토큰이 포함됩니다.

```
{
   "data": [
       {
           "event_type": "MessageCreate",
           "id": "1580705921830768647",
           "text": "hello to you two, this is a new group conversation."
       }
   ],
   "meta": {
       "result_count": 1,
       "next_token": "18LAA5FFPEKJA52G0G00ZZZZ",
       "previous_token": "1BLC45FFPEKJA52G0S00ZZZZ"
   }
}
```

추가 필드를 응답에 포함하고 싶다면, 요청에서 [field](/ko/x-api/fundamentals/fields) 및/또는 [expansion](/ko/x-api/fundamentals/expansions) 매개변수를 사용해 해당 필드를 지정해야 합니다.

이 실습에서는 dm&#95;event 객체의 추가 필드 집합을 요청합니다.

1. 기본 Direct Message 객체 필드인 id, text, event&#95;type.

2. 추가 Direct Message 객체 필드: dm&#95;conversation&#95;id, created&#95;at, sender&#95;id, attachments, participant&#95;ids, referenced&#95;tweets

Postman에서 &quot;Params&quot; 탭으로 이동한 다음 &quot;Query Params&quot; 테이블에 다음 키:값 쌍을 추가합니다.

|                     |                                                                                                               |
| :------------------ | :------------------------------------------------------------------------------------------------------------ |
| Key                 | Value                                                                                                         |
| dm&#95;event.fields | dm&#95;conversation&#95;id,created&#95;at,sender&#95;id,attachments,participant&#95;ids,referenced&#95;tweets |

이제 &quot;Send&quot; 버튼 옆에 다음 URL이 표시되어야 합니다.

[https://api.x.com/2/dm&#95;conversations/:dm&#95;conversation&#95;id/dm&#95;events?dm&#95;event.fields=id,text,event&#95;type,dm&#95;conversation&#95;id,created&#95;at,sender&#95;id,attachments,participant&#95;ids,referenced&#95;tweets](https://api.x.com/2/dm\\_conversations/:dm\\_conversation\\_id/dm\\_events?dm\\_event.fields=id,text,event\\_type,dm\\_conversation\\_id,created\\_at,sender\\_id,attachments,participant\\_ids,referenced\\_tweets)

<div id="step-four-make-your-request-and-review-your-response">
  #### 4단계: 요청을 보내고 응답을 검토하기
</div>

모든 설정을 마쳤다면 다시 &quot;Send&quot; 버튼을 눌러 요청을 보내면, 아래 응답과 유사한 결과를 받게 됩니다. 이 응답에는 사용 가능한 모든 dm&#95;event 필드가 포함되어 있다는 점에 유의하세요.

```
{
   "data": [
       {
           "text": "hello to you two, this is a new group conversation.",
           "id": "1580705921830768647",
           "dm_conversation_id": "1580705921830768643",
           "event_type": "MessageCreate",
           "sender_id": "17200003",
           "created_at": "2022-10-13T23:43:54.000Z"
       }
   ],
   "meta": {
       "result_count": 1,
       "next_token": "18LAA5FFPEKJA52G0G00ZZZZ",
       "previous_token": "1BLC45FFPEKJA52G0S00ZZZZ"
   }
}
```
