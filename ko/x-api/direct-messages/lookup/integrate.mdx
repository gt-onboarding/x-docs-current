---
title: 연동 가이드
sidebarTitle: 연동 가이드
keywords: ["direct messages integration", "DM integration", "DM lookup integration", "direct message integration guide", "DM setup"]
---

import { Button } from '/snippets/ko/button.mdx';

Direct Messages 엔드포인트 v2는 대화와 대화 이벤트를 X API의 핵심 오브젝트로 도입하고, 1:1 대화와 그룹 대화를 구분합니다. 1:1 대화에는 항상 정확히 두 명의 참여자만 있을 수 있는 반면, 그룹 대화에는 두 명 이상이 참여할 수 있으며 멤버 구성이 변경될 수도 있습니다.   

이 페이지에서는 Direct Messages 조회 엔드포인트를 시스템에 통합할 때 알아두어야 할 여러 도구와 핵심 개념을 설명합니다. 이 내용은 두 개의 섹션으로 구성되어 있습니다:

* 핵심 개념
  * [Direct Message 대화](#direct-message-conversations)
  * [v1.1과 v2에서 공통으로 사용하는 대화 및 이벤트 ID](#shared-conversation-and-event-ids)
  * [Direct Message 이벤트 필드 및 expansions](#direct-message-event-fields-and-expansions)
  * [대화 이벤트 유형](#conversation-event-types)
  * [인증](#authentication)
  * [developer portal, 프로젝트, 앱](#developer-portal-projects-and-apps)
  * [요청 한도](#rate-limits)
  * [페이지네이션](#pagination)
* [유용한 도구](#helpful-tools)

<div id="key-concepts">
  ### 핵심 개념
</div>

<div id="direct-message-conversations">
  ### 다이렉트 메시지 대화
</div>

모든 다이렉트 메시지는 다이렉트 메시지 대화의 일부입니다. 이러한 대화는 1:1 대화일 수도 있고 그룹 대화일 수도 있습니다. 이번 릴리스에서는 다이렉트 메시지를 생성하고 다이렉트 메시지 대화와 관련된 이벤트를 조회하는 데 필요한 기본 엔드포인트를 제공합니다. 모든 대화에는 고유한 `dm_conversation_id`가 있으며, 해당 대화를 구성하는 각 이벤트에는 고유한 `dm_event_id`가 있습니다.  

다이렉트 메시지 조회 엔드포인트는 대화와 연관된 이벤트를 조회하기 위한 메서드를 제공합니다. 이러한 GET 엔드포인트는 대화를 구성하는 메시지를 조회하는 데 사용되며, 그룹 대화의 경우 누가 그룹 대화에 참여했는지 또는 떠났는지를 파악하는 데 사용할 수 있습니다.

다이렉트 메시지 조회의 초기 릴리스에는 다음 세 가지 GET 메서드가 포함됩니다.

* **GET /2/dm&#95;conversations/with/:participant&#95;id/dm&#95;events** - 1:1 대화와 관련된 다이렉트 메시지 이벤트를 조회합니다. `:participant_id` 경로 매개변수는 이 요청을 보내는 인증된 사용자와 대화를 하고 있는 계정의 숫자형 User ID입니다.  

* **GET /2/dm&#95;conversations/:dm&#95;conversation&#95;id/dm&#95;events** - `:dm_conversation_id` 경로 매개변수로 지정된 특정 대화 ID와 관련된 다이렉트 메시지 이벤트를 조회합니다. 1:1 및 그룹 대화 ID가 모두 지원됩니다.  

* **GET /2/dm&#95;events** - 인증된 사용자와 연관된 다이렉트 메시지 이벤트를 조회하며, 1:1 및 그룹 대화를 모두 포함합니다. 최대 30일 전까지의 이벤트를 조회할 수 있습니다.  

이러한 GET 엔드포인트는 모두 `event_types` 요청 쿼리 매개변수를 사용하여 이벤트 유형별로 `dm_events`를 조회하는 기능을 지원합니다. 현재 지원되는 대화 이벤트 유형은 세 가지입니다.

* **MessageCreate** - 새 다이렉트 메시지가 생성되면 만들어집니다. 이 이벤트 객체에는 메시지 시간 및 텍스트, 메시지를 보낸 계정의 ID, 그리고 대화 및 이벤트 ID가 포함될 수 있습니다. 

* **ParticipantsJoin** - 새 참가자가 그룹 대화에 참여하면 만들어집니다. 이 `dm_event` 객체에는 참여한 참가자의 ID와 함께 `created_at` 시간 및 &#39;invite&#39; 이벤트의 `sender_id`가 포함됩니다. 

* **ParticipantsLeave** - 참가자가 대화를 떠나면 만들어집니다. 이 이벤트 객체에는 떠나는 참가자의 ID와 함께 이벤트 발생 시간이 포함됩니다. 

자세한 내용은 [Direct Messages lookup API 참조](/ko/x-api/direct-messages/get-dm-events-for-a-dm-conversation)를 참고하세요.

<div id="shared-conversation-and-event-ids-across-v11-and-v2">
  ### v1.1과 v2에서 공유되는 대화 및 이벤트 ID
</div>

중요한 개념은 X 플랫폼의 v1.1과 v2 버전에서 대화 및 이벤트 ID가 공유된다는 점입니다. 이는 두 버전을 함께 사용할 수 있음을 의미합니다. 예를 들어, Direct Messages v1.1 엔드포인트들은 단일 이벤트를 반환하거나 이벤트를 삭제하는 메서드를 제공하지만, 이러한 메서드는 아직 v2에는 없습니다. ID가 v1.1과 v2에서 공통이므로, v2에서 제공된 ID를 기반으로 v1.1 요청을 보내거나, X 애플리케이션의 대화 URL에 표시되는 대화 ID를 참조해 v1.1 요청을 보낼 수 있습니다.  

<div id="direct-message-event-fields-and-expansions">
  ### 다이렉트 메시지 이벤트 필드 및 expansions
</div>

X API v2를 사용하면 `fields` 및 `expansions`라는 도구 집합을 통해 API에서 어떤 데이터를 반환할지 정확하게 선택할 수 있습니다. 예를 들어, 다이렉트 메시지 조회 엔드포인트는 다음과 같은 `dm_events` 필드를 지원합니다. 

* `id`, `event_type`, `text`는 `MessageCreate` 이벤트의 기본값입니다. 

* `id`, `event_type`, `participant_ids`는 `ParticipantsJoin` 및 `ParticipantsLeave` 이벤트의 기본값입니다.

* `dm_conversation_id`와 `created_at`은 모든 이벤트에 대해 사용할 수 있습니다.

* `attachments`와 `referenced_tweets`는 `MessageCreate` 이벤트에서 사용할 수 있습니다. 

* `sender_id`는 `MessageCreate` 및 `ParticipantsJoin` 이벤트에서 사용할 수 있습니다. 

* `participant_ids`는 `ParticipantsJoin` 및 `ParticipantsLeave` 이벤트에서 사용할 수 있습니다. 

또한, 다이렉트 메시지 조회 엔드포인트는 다음과 같은 [expansions](/ko/x-api/fundamentals/expansions)을(를) 지원합니다:

* `sender_id` - 메시지를 보낸 사용자 또는 대화에 다른 사용자를 초대한 사용자에 연결된 User 객체를 확장해 반환합니다. 

* `referenced_tweets.id` - 다이렉트 메시지 텍스트에 게시물 링크가 포함되어 있는 경우 해당 게시물(Post) 객체를 확장해 반환합니다. 

* `attachments.media_keys` - 다이렉트 메시지에 미디어 첨부가 포함되어 있는 경우 해당 미디어(Media) 객체를 확장해 반환합니다. 

* `participant_ids` - 그룹 대화에 참여했거나 나간 사용자에 연결된 User 객체를 확장해 반환합니다.

expansions에는 게시물(Posts), 사용자(Users), 미디어(Media) 객체가 포함되므로 `tweet.fields`, `user.fields`, `media.fields` 요청 쿼리 매개변수도 함께 사용할 수 있습니다. 자세한 내용은 [fields 및 expansions 사용 방법](/ko/x-api/fundamentals/data-dictionary#how-to-use-fields-and-expansions) 가이드를 참고하세요.

<div id="conversation-event-types">
  ### 대화 이벤트 유형
</div>

아래는 Direct Message의 MessageCreate, ParticipantsJoin, ParticipantsLeave 이벤트 유형에 대한 예시 JSON 객체입니다. 

사용 가능한 dm&#95;event 객체 필드는 다음과 같습니다: id, text, event&#95;type, dm&#95;conversation&#95;id, created&#95;at, sender&#95;id, attachments, referenced&#95;tweets, participant&#95;ids. 이러한 필드를 요청에서 선택하는 방법에 대한 자세한 내용은 Fields 및 Expansions 섹션을 참고하세요. 

MessageCreate 이벤트 예시: 

모든 dm&#95;event 필드를 지정한 경우, 다음은 간단한 텍스트 Direct Message에 대한 응답입니다: 

`{
    "text": "Hi everyone.",
    "sender_id": "944480690",
    "dm_conversation_id": "1578398451921985538",
    "id": "1582838499983564806",
    "event_type": "MessageCreate",
    "created_at": "2022-10-19T20:58:00.000Z"
}`

ParticipantsJoin 이벤트 예시:

모든 dm&#95;event 필드를 지정한 경우, 다음은 참가자가 대화에 참여했을 때의 응답입니다:

`{
    "participant_ids": [
        "944480690"
    ],
    "sender_id": "17200003",
    "dm_conversation_id": "1578398451921985538",
    "id": "1582835469712138240",
    "event_type": "ParticipantsJoin",
    "created_at": "2022-10-19T20:45:58.000Z"
}`

ParticipantsLeave 이벤트 예시:

모든 dm&#95;event 필드를 지정한 경우, 다음은 참가자가 대화에서 나갔을 때의 응답입니다:

`{
    "participant_ids": [
        "944480690"
    ],
    "dm_conversation_id": "1578398451921985538",
    "id": "1582838535115067392",
    "event_type": "ParticipantsLeave",
    "created_at": "2022-10-19T20:58:09.000Z"
    }`

<div id="authentication">
  ### 인증
</div>

모든 X API v2 엔드포인트는 요청을 인증하기 위해 자격 증명(키와 토큰이라고도 함) 세트가 필요합니다. 모든 다이렉트 메시지는 비공개이며, 이에 접근하려면 사용자 인가가 필요합니다. 

이 다이렉트 메시지 엔드포인트는 [OAuth 2.0 Authorization Flow with PKCE](/ko/x-api/posts/manage-tweets) 또는 [1.0a User Context](/ko/resources/fundamentals/authentication)를 사용해야 하며, 이는 성공적인 요청을 위해 API 키와 사용자 액세스 토큰 세트를 사용해야 함을 의미합니다. 액세스 토큰은 요청을 대신하여 동작하려는 해당 사용자와 연결되어 있어야 합니다. 다른 사용자에 대한 액세스 토큰 세트를 생성하려면, 해당 사용자는 [3-legged OAuth flow](/ko/resources/fundamentals/authentication#obtaining-access-tokens-using-3-legged-oauth-flow)를 사용하여 앱을 인가(또는 인증)해야 합니다.

OAuth 사용자 컨텍스트는 사용하기 까다로울 수 있습니다. 이 인증 방식에 익숙하지 않다면, [라이브러리](/ko/x-api/tools-and-libraries/overview)나 Postman 같은 도구를 사용해 요청을 올바르게 인증할 것을 권장합니다. 

[OAuth 2.0 Authorization Code with PKCE](resources/fundamentals/authentication#oauth-2-0-authorization-code-flow-with-pkce-2)는 애플리케이션의 스코프와 여러 디바이스에 걸친 인가 플로우를 보다 세밀하게 제어할 수 있게 해줍니다. OAuth 2.0을 사용하면 사용자 대신 수행할 수 있는 권한을 정의하는 세밀한 스코프를 선택할 수 있습니다. 다이렉트 메시지 조회 엔드포인트에는 다음 스코프가 필요합니다: dm.read, post.read, user.read

앱에서 OAuth 2.0을 활성화하려면, 개발자 포털의 App 설정 섹션에 있는 App 인증 설정에서 이를 활성화해야 합니다.

<div id="developer-portal-projects-and-developer-apps">
  ### Developer Portal, 프로젝트 및 개발자 앱
</div>

X API v2 엔드포인트에서 사용할 수 있는 인증 자격 증명을 받으려면 승인된 개발자 계정을 보유하고, 해당 계정 내에 프로젝트를 설정한 후 그 프로젝트 안에 개발자 앱을 생성해야 합니다. 그런 다음 개발자 앱에서 키와 토큰을 확인할 수 있습니다. 

<div id="rate-limits">
  ### 요청 한도
</div>

매일 수천 명의 개발자들이 X API에 요청을 보냅니다. 이처럼 방대한 양의 요청을 효율적으로 관리하기 위해 각 엔드포인트에는 요청 한도가 설정되어 있으며, 이는 앱 또는 인증된 사용자를 대신해 보낼 수 있는 요청 수를 제한합니다. 

Direct Message 조회 엔드포인트에는 사용자 수준의 요청 한도가 적용됩니다. 이는 여러분이 요청을 보내는 대상으로 지정한 인증된 사용자가 여러분의 X 앱을 통해 보낼 수 있는 요청 수에 제한이 있다는 의미입니다. GET 메서드에는 15분당 300개의 요청이라는 사용자 요청 한도가 있습니다. 이 요청 한도는 모든 GET 엔드포인트에서 공유됩니다. 

<div id="pagination">
  ### Pagination
</div>

이 엔드포인트들은 응답을 빠르게 반환하기 위해 페이지네이션을 사용합니다. 하나의 응답으로 전송할 수 있는 결과(최대 100개의 이벤트)보다 더 많은 결과가 있는 경우 페이지네이션을 수행해야 합니다. `max_results` 파라미터를 사용해 페이지당 반환할 결과의 개수를 지정하고, `pagination_token` 파라미터를 사용해 다음 페이지의 결과를 반환합니다. 자세한 내용은 [페이지네이션 가이드](/ko/x-api/fundamentals/pagination)를 참고하세요.

**유용한 도구**

Direct Message 조회 엔드포인트를 사용할 때 참고할 수 있는 유용한 도구는 다음과 같습니다. 

****Postman****

Postman은 엔드포인트를 테스트하는 데 사용할 수 있는 매우 유용한 도구입니다. 각 Postman 요청에는 모든 path 및 body 파라미터가 포함되어 있어, 어떤 항목을 사용할 수 있는지 빠르게 파악하는 데 도움이 됩니다. Postman 컬렉션에 대한 자세한 내용은 [Using Postman](/ko/tutorials/postman-getting-started) 페이지를 방문하세요. 

****코드 샘플****

v2 Direct Message 엔드포인트용 Python 샘플 코드는 [X API v2 샘플 코드 GitHub](https://github.com/xdevplatform/Twitter-API-v2-sample-code) 리포지토리에서 제공됩니다. &quot;Manage-Direct-Messages&quot; 폴더에는 POST 메서드 예제가, &quot;Direct-Messages-lookup&quot; 폴더에는 GET 메서드 예제가 포함되어 있습니다.

****XDev Software Development Kits (SDKs)****

이 [라이브러리](/ko/x-api/tools-and-libraries/overview)들은 v2 Direct Message 엔드포인트를 위해 업데이트 중이며 곧 사용할 수 있게 될 예정입니다.

* [X API Java SDK](https://github.com/xdevplatform/twitter-api-java-sdk) - X API v2용 공식 Java SDK
* [X API TypeScript/JavaScript SDK](https://github.com/xdevplatform/twitter-api-typescript-sdk) - X API v2용 공식 TS/JS SDK

**서드파티 라이브러리**

커뮤니티에서 개발한 [서드파티 라이브러리](/ko/x-api/tools-and-libraries/overview#community-tools-and-libraries-for-v2)의 수가 점점 늘어나고 있습니다. 이러한 라이브러리는 처음 시작할 때 도움이 되도록 설계되었으며, 일부는 곧 v2 Direct Message 엔드포인트를 지원할 것으로 예상됩니다. 적절한 버전 태그를 확인해 v2 엔드포인트와 함께 사용할 수 있는 라이브러리를 찾을 수 있습니다.