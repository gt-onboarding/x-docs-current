---
title: 통합 가이드
sidebarTitle: 통합 가이드
keywords: ["다이렉트 메시지 관리 통합", "DM 관리 통합", "DM 발송 통합", "DM 통합 가이드", "다이렉트 메시지 설정"]
---

import { Button } from '/snippets/ko/button.mdx';

Direct Messages v2 엔드포인트는 대화 및 대화 이벤트를 핵심 X API 객체로 도입하고, 일대일 대화와 그룹 대화를 구분합니다. 일대일 대화에는 항상 두 명, 오직 두 명의 참여자만 있는 반면, 그룹 대화에는 두 명 이상이 참여할 수 있으며 참여자 구성은 변경될 수 있습니다.   

이 페이지에서는 시스템에 Manage Direct Messages 엔드포인트를 통합할 때 알아 두어야 할 여러 도구와 핵심 개념을 다룹니다. 이 페이지는 두 개의 섹션으로 구성되어 있습니다:

* 핵심 개념
  * [다이렉트 메시지 대화](#direct-message-conversations)

  * [v1.1 및 v2 전반에 걸쳐 공유되는 대화 및 이벤트 ID](#shared-conversation-and-event-ids)

  * [미디어 첨부 포함 및 게시물 참조](#including-media-attachments-and-referencing-tweets)

  * [인증](#authentication)

  * [개발자 포털, 프로젝트, 개발자 앱](#developer-portal-projects-and-developer-apps)

  * [요청 한도](#rate-limits)

* [유용한 도구](#helpful-tools)

**핵심 개념**

<div id="direct-message-conversations">
  ### 다이렉트 메시지 대화
</div>

모든 다이렉트 메시지는 다이렉트 메시지 대화의 일부입니다. 이러한 대화는 1:1 대화일 수도 있고 그룹 대화일 수도 있습니다. 이번 릴리스에서는 다이렉트 메시지를 생성하고 다이렉트 메시지 대화와 연관된 이벤트를 조회하는 데 필요한 기본 엔드포인트를 제공합니다. 모든 대화에는 고유한 dm&#95;conversation&#95;id가 있으며, 해당 대화를 구성하는 모든 이벤트에는 고유한 dm&#95;event&#95;id가 있습니다.  

Manage Direct Message 엔드포인트는 새 메시지를 생성하고 이를 대화에 추가하기 위한 세 가지 POST 메서드를 제공합니다:

* **POST /2/dm&#95;conversations/with/:participant&#95;id/messages** - 1:1 다이렉트 메시지를 생성합니다. 이 메서드는 기존 1:1 대화에 메시지를 추가하거나 새로운 대화를 생성합니다. :participant&#95;id 경로 매개변수는 메시지를 받는 계정의 사용자 ID입니다. 
  다음은 1:1 다이렉트 메시지를 보내기 위한 JSON 요청 본문의 예시입니다:

```
{
   "text": "Hello just you. This will appear as a new conversation if we have never messaged, or will be added to our existing thread. "
}
```

* **POST /2/dm&#95;conversations** - 새 그룹 대화를 생성하고 여기에 다이렉트 메시지를 추가합니다. 이 요청에는 대화 참가자 목록이 필요합니다. 동일한 참가자 목록으로 여러 대화를 생성할 수 있다는 점에 유의하세요. 이러한 요청은 항상 새로운 대화 ID를 반환합니다. 아래는 새 그룹 대화를 생성하고 다이렉트 메시지를 추가하기 위한 JSON 요청 본문의 예시입니다. 이때 &quot;conversation&#95;type&quot; 필드가 필요하며, 이 값은 반드시 &quot;Group&quot; (대소문자 구분)으로 설정해야 합니다.

```
{
   "message": {"text": "Hello to just you two, this is a new group conversation."},
   "participant_ids": ["944480690","906948460078698496"],
   "conversation_type": "Group"
}
```

* **POST /2/dm&#95;conversations/:dm&#95;conversation&#95;id/messages** - 다이렉트 메시지를 생성하고 기존 대화에 추가합니다. :dm&#95;conversation&#95;id 경로 매개변수는 메시지가 추가될 대화의 ID입니다. 이 메서드는 일대일 대화와 그룹 대화 모두에 메시지를 추가하는 데 사용할 수 있습니다.
  다음은 일대일 및 그룹 대화 모두에 다이렉트 메시지를 보내기 위한 JSON 요청 본문 예시입니다:

```
{
   "text": "새로운 메시지입니다."
}
```

이 POST 메서드는 하나의 미디어만 첨부할 수 있습니다. POST 요청 본문에는 `text`와 `attachments` 필드 중 하나 또는 둘 다를 포함해야 합니다. `attachments` 필드가 포함되지 않은 경우 `text` 필드가 필수이며, `text` 필드가 포함되지 않은 경우 `attachments` 필드가 필수입니다. 자세한 내용은 다음 섹션을 참조하세요.

자세한 내용은 [Manage Direct Messages API References](/ko/x-api/direct-messages/create-a-new-dm-conversation)를 참조하세요.

<div id="shared-conversation-and-event-ids-across-v11-and-v2">
  ### v1.1과 v2 전반에 걸쳐 공유되는 conversation 및 event ID
</div>

중요한 개념 중 하나는 conversation과 event ID가 X 플랫폼의 v1.1과 v2 버전에서 공유된다는 점입니다. 이는 두 버전을 함께 조합해 사용할 수 있음을 의미합니다.

예를 들어, Direct Messages v1.1 엔드포인트는 단일 event를 반환하는 메서드와 event를 삭제하는 메서드를 제공합니다. 이러한 메서드는 아직 v2에서는 사용할 수 없습니다. ID는 v1.1과 v2 전반에서 공통이므로, v2에서 제공된 ID를 기반으로 v1.1 요청을 하거나, X 애플리케이션에서 대화 URL에 표시되는 conversation ID를 참조하여 v1.1 요청을 보낼 수 있습니다.  

<div id="including-media-attachments-and-referencing-posts">
  ### 미디어 첨부 및 게시물 참조
</div>

모든 Manage Direct Message 엔드포인트는 하나의 미디어(사진, 동영상 또는 GIF) 첨부를 지원합니다. 미디어를 첨부하려면 v1.1 [Upload media](https://developer.x.com/en/docs/x-api/v1/media/upload-media/overview) 엔드포인트에서 생성된 미디어 ID가 필요합니다. Direct Message를 전송하는 인증된 사용자는 해당 미디어를 직접 업로드했어야 합니다. 업로드된 미디어는 메시지에 포함할 수 있도록 24시간 동안 사용할 수 있습니다.

다음은 미디어를 포함하는 방법을 보여 주는 JSON 요청 본문 예시입니다:

```
{
 "text": "Here's a photo...",
 "attachments": [{"media_id": "1583157113245011970}]
}
```

생성된 MessageCreate 이벤트에는 다음 메타데이터가 포함됩니다:

```
{
    "attachments": {
        "media_keys": [
            "5_1583157113245011970"
        ]
    }
}
```

메시지 텍스트에 게시물 URL을 넣어 게시물을 포함할 수도 있습니다. 메시지에 게시물을 포함하는 방법을 보여 주기 위해, 다음은 JSON 요청 본문의 예시입니다:

```
{
 "text": "제가 말씀드린 트윗은 다음과 같습니다: https://x.com/SnowBotDev/status/1580559079470145536"
}
```

생성되는 MessageCreate 이벤트에는 다음과 같은 메타데이터가 포함됩니다:

```
{
    "referenced_tweets": [
        {
            "id": "1580559079470145536"
        }
    ]
}
```

<div id="authentication">
  ### Authentication
</div>

모든 X API v2 엔드포인트에서는 키와 토큰이라고도 하는 자격 증명 세트를 사용해 요청을 인증해야 합니다. 모든 다이렉트 메시지는 비공개이며, 이에 접근하려면 사용자 권한 부여가 필요합니다. 

이 다이렉트 메시지 엔드포인트는 [OAuth 2.0 Authorization Flow with PKCE](/ko/x-api/posts/manage-tweets) 또는 [1.0a User Context](/ko/resources/fundamentals/authentication)를 사용해야 하며, 이는 성공적인 요청을 보내기 위해 API 키와 사용자 액세스 토큰 세트를 사용해야 함을 의미합니다. 액세스 토큰은 요청을 대리해 수행하려는 해당 사용자와 연결되어 있어야 합니다. 다른 사용자의 액세스 토큰 세트를 생성하려면, 해당 사용자가 [3-legged OAuth 플로우](/ko/resources/fundamentals/authentication#obtaining-access-tokens-using-3-legged-oauth-flow)를 사용해 앱을 승인하거나 인증해야 합니다.

OAuth 사용자 컨텍스트는 사용하기 까다로울 수 있습니다. 이 인증 방식에 익숙하지 않다면, 요청을 올바르게 인증하기 위해 [라이브러리](/ko/x-api/tools-and-libraries/overview)나 Postman과 같은 도구를 사용할 것을 권장합니다. 

[OAuth 2.0 Authorization Code with PKCE](resources/fundamentals/authentication#oauth-2-0-authorization-code-flow-with-pkce-2)는 애플리케이션의 스코프와 여러 기기에서의 인증 플로우를 보다 세밀하게 제어할 수 있게 해 줍니다. OAuth 2.0을 사용하면 세분화된 스코프를 선택할 수 있으며, 이를 통해 사용자를 대신해 특정 권한을 부여받을 수 있습니다. 다이렉트 메시지 조회 엔드포인트에는 다음 스코프가 필요합니다: dm.write, dm.read, tweet.read, user.read.

앱에서 OAuth 2.0을 사용하려면, developer portal의 App settings 섹션에 있는 앱 인증 설정에서 OAuth 2.0을 활성화해야 합니다.

<div id="developer-portal-projects-and-developer-apps">
  ### Developer portal, 프로젝트, 그리고 개발자 앱
</div>

X API v2 엔드포인트와 함께 사용할 수 있는 인증 정보 세트를 발급받으려면, 승인된 개발자 계정을 보유하고 해당 계정 내에 프로젝트를 생성한 다음, 그 프로젝트 안에 개발자 앱을 만들어야 합니다. 이후 개발자 앱 내에서 키와 토큰을 확인할 수 있습니다. 

<div id="rate-limits">
  ### 요청 한도
</div>

매일 수천 명이 넘는 개발자들이 X API에 요청을 전송합니다. 이렇게 방대한 요청량을 관리하기 위해 각 엔드포인트마다 요청 한도가 설정되어 있으며, 이를 통해 앱 또는 인증된 사용자를 대신해 보낼 수 있는 요청 수가 제한됩니다. 

Manage Direct Message 엔드포인트에는 사용자 단위와 X 앱 단위 모두에 요청 한도가 적용됩니다. 이는 요청을 보내는 인증된 사용자가 해당 X 앱을 통해 보낼 수 있는 메시지 수에 제한이 있다는 의미입니다. 또한 X 앱이 하루에 보낼 수 있는 다이렉트 메시지의 총량에도 일일 한도가 있습니다. 

POST 메서드에 대해서는 15분당 200건의 요청/메시지라는 사용자 요청 한도가 있습니다. 또한 사용자는 24시간 동안 최대 1000개의 다이렉트 메시지만 보낼 수 있습니다. 추가로, X 앱은 24시간 동안 최대 15000개의 메시지로 제한됩니다. 이러한 요청 한도는 모든 POST 엔드포인트에서 공유됩니다. 

**유용한 도구**

Direct Messages lookup 엔드포인트를 사용할 때 함께 활용해 보시기를 권장하는 유용한 도구는 다음과 같습니다. 

****Postman****

Postman은 엔드포인트를 테스트하는 데 사용할 수 있는 훌륭한 도구입니다. 각 Postman 요청에는 사용 가능한 내용을 빠르게 이해하는 데 도움이 되도록 모든 path 및 body 파라미터가 포함되어 있습니다. Postman 컬렉션에 대해 더 알아보려면 [Using Postman](/ko/tutorials/postman-getting-started) 페이지를 방문하세요. 

****Code samples****

v2 Direct Messages 엔드포인트용 Python 샘플 코드는 [X API v2 sample code GitHub](https://github.com/xdevplatform/Twitter-API-v2-sample-code)[](https://github.com/xdevplatform/Twitter-API-v2-sample-code) 리포지토리에서 확인할 수 있습니다. &quot;Manage-Direct-Messages&quot; 폴더에는 POST 메서드 예제가, &quot;Direct-Messages-lookup&quot; 폴더에는 GET 메서드 예제가 포함되어 있습니다.

**XDev Software Development Kits (SDKs)**

다음 [라이브러리](/ko/x-api/tools-and-libraries/overview)는 v2 Direct Messages 엔드포인트를 지원하도록 업데이트 중이며, 곧 사용 가능해질 예정입니다:

* [X API Java SDK](https://github.com/xdevplatform/twitter-api-java-sdk) - X API v2용 공식 Java SDK
* [X API TypeScript/JavaScript SDK](https://github.com/xdevplatform/twitter-api-typescript-sdk) - X API v2용 공식 TS/JS SDK

**서드파티 라이브러리**

커뮤니티에서 개발한 [서드파티 라이브러리](/ko/x-api/tools-and-libraries/overview#community-tools-and-libraries-for-v2)가 점점 늘어나고 있습니다. 이러한 라이브러리는 처음 시작하는 데 도움이 되도록 설계되었으며, 이들 중 상당수는 곧 v2 Direct Messages 엔드포인트를 지원할 예정입니다. 적절한 버전 태그를 확인하면 v2 엔드포인트와 함께 사용할 수 있는 라이브러리를 찾을 수 있습니다.