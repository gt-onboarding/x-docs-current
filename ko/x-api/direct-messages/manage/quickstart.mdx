---
title: 빠른 시작
sidebarTitle: 빠른 시작
keywords: ["다이렉트 메시지 관리 빠른 시작", "DM 관리 빠른 시작", "DM 보내기 빠른 시작", "DM 관리 빠른 시작"]
---

import { Button } from '/snippets/ko/button.mdx';

<div id="getting-started-with-the-manage-direct-message-endpoints">
  ## Direct Message 관리 엔드포인트 시작하기
</div>

이 빠른 시작 가이드는 HTTP 요청을 관리하고 전송하는 도구인 Postman을 사용하여 Direct Message 엔드포인트에 첫 요청을 보내는 방법을 안내합니다. Postman 컬렉션에 대해 더 알아보려면 [Using Postman](/ko/tutorials/postman-getting-started) 가이드를 참고하세요.

Python 기반 예제를 살펴보고 싶다면 [X API v2 sample code](https://github.com/xdevplatform/Twitter-API-v2-sample-code) GitHub 리포지토리를 방문하세요. 또한, 공식 [X Developer Platform software development kits (SDKs)](/ko/x-api/tools-and-libraries/sdks)는 이러한 Direct Message 엔드포인트를 지원하도록 업데이트될 예정입니다.  

<Note>
  **사전 준비 사항**

  이 가이드를 완료하려면 요청을 인증하기 위한 [keys and tokens](/ko/resources/fundamentals/authentication) 묶음이 필요합니다. 다음 단계를 따르면 이러한 키와 토큰을 생성할 수 있습니다:

  * [개발자 계정에 가입](https://developer.x.com/en/apply-for-access)하여 승인을 받으세요.
  * developer portal에서 [Project](/ko/resources/fundamentals/projects)와 연결된 [developer App](/ko/resources/fundamentals/developer-apps)을 생성하세요.
  * App의 &quot;Keys and tokens&quot; 페이지로 이동해 필요한 자격 증명을 생성하세요. 모든 자격 증명은 안전한 위치에 보관하세요.
</Note>

<div id="steps-to-building-manage-direct-message-requests">
  ### manage Direct Message 요청을 만드는 단계
</div>

이 예제에서는 하나의 요청으로 새 그룹 대화를 생성하고 여기에 첫 번째 메시지를 전송합니다. 그런 다음 생성된 대화에 두 번째 메시지를 전송합니다.

<div id="step-one-start-with-a-tool-or-library">
  #### 1단계: 도구나 라이브러리부터 시작하기
</div>

Direct Message 관리 엔드포인트 작업을 시작하기 위해 Postman 도구를 사용해 과정을 단순화하겠습니다. XDev에서 작성한 예제 X API v2 요청 컬렉션을 사용하여, 새로운 Direct Message를 생성하고 Direct Message 대화 이벤트를 나열하는 데 사용되는 여섯 개의 엔드포인트를 살펴보겠습니다.

컬렉션 대부분은 미리 채워져 있지만, 이 API 요청을 위해 만들어 둔 X 앱 정보를 기반으로 직접 입력해야 하는 몇 가지 세부 설정이 있습니다. 먼저 컬렉션을 로드하거나 업데이트해 보겠습니다.

X API v2 Postman 컬렉션을 자신의 환경에 로드하려면 다음 버튼을 클릭하세요:

<Button href="https://app.getpostman.com/run-collection/9956214-784efcda-ed4c-4491-a4c0-a26470a67400">
  Add X API v2 to Postman
</Button>

Postman에 X API v2 컬렉션을 로드했다면 “Manage Direct Messages” 폴더로 이동하세요. 이 폴더의 Authorization 탭은 가능한 한 미리 채워져 있으며, 여기에서 몇 가지 설정을 수정해 자신의 X 앱 인증 정보를 사용할 수 있습니다. 이 폴더에는 새로운 Direct Message를 생성하기 위한 세 개의 엔드포인트도 포함되어 있습니다. 또한 Direct Message 대화 이벤트(메시지 송수신, 대화 참가자의 입장 및 퇴장 포함)를 조회하기 위한 세 개의 엔드포인트가 있는 &quot;Direct Message lookup&quot; 폴더도 있다는 점에 유의하세요. 

그룹 대화 생성은 X API v2의 흥미로운 새로운 기능이므로, 이 예제에서는 이에 초점을 맞추겠습니다. 여기서는 &quot;New group DM and conversation&quot; 예제를 사용합니다. 이 요청을 사용해 Direct Message 그룹 대화를 생성하겠습니다.

다음 단계는 엔드포인트에 대한 인증입니다.

**2단계: 요청 인증하기**

X API에 올바르게 요청을 보내려면, 해당 요청을 보낼 권한이 있는지 검증해야 합니다. 이 엔드포인트에 성공적으로 요청하기 위해 [OAuth 2.0 Authorization Code Flow with PKCE](resources/fundamentals/authentication#oauth-2-0-authorization-code-flow-with-pkce-2)를 사용할 것입니다. Postman 내에서 액세스 토큰을 생성할 수 있습니다. 

Postman에서는 폴더 수준 또는 개별 요청 수준에서 인증 방식을 설정할 수 있습니다. 여기서는 폴더 수준에서 인증 세부 정보를 구성하겠습니다.

&quot;Manage Direct Messages&quot; 폴더로 이동하여 &quot;Authorization&quot; 탭을 선택한 다음, Type이 “OAuth 2.0”으로 설정되어 있고 &quot;Add auth data to&quot;가 &quot;Request Headers&quot;로 설정되어 있는지 확인하세요. &quot;Current Token&quot; 섹션에서 &quot;header Prefix&quot;가 Bearer로 설정되어 있는지 확인합니다.  

새 토큰을 구성하고 생성하려면:

1. &quot;Manage DMs&quot;와 같은 토큰 이름(Token Name)을 만듭니다.

2. **Grant Type**이 Authorization Code (with PKCE)로 설정되어 있는지 확인합니다.

3. **Callback URL**을 설정합니다. [v2 Dev Portal](https://developer.x.com/en/portal/dashboard)에 있는 애플리케이션에 연결된 Callback URL과 정확히 일치하도록 Callback URL을 업데이트해야 합니다. 이 예제에서 사용하는 X 앱의 Callback URL은 [*https://www.example.com*.](https://www.example.com/)로 설정되어 있습니다. (정확히 일치해야 하므로 [*https://example.com*](https://example.com)은 동작하지 않습니다.) 

4. **Auth URL**이 [https://x.com/i/oauth2/authorize](https://x.com/i/oauth2/authorize)로 설정되어 있는지 확인합니다.

5. **Access Token URL**이 [https://api.x.com/2/oauth2/token.](https://api.x.com/2/oauth2/token)으로 설정되어 있는지 확인합니다.\
   **Client ID** - Developer Portal에서 OAuth 2.0 client ID를 복사해 붙여넣습니다.\
   **Client Secret** - 비공개 클라이언트(confidential client) 유형의 앱을 사용하는 경우에만 필요합니다. 해당하는 경우, Developer Portal에서 OAuth 2.0 Client Secret을 복사해 붙여넣습니다. 

6. **Scope**가 dm.read, dm.write, tweet.read, users.read로 설정되어 있는지 확인합니다.

7. **State**가 “state”로 설정되어 있는지 확인합니다.

8. **Client Authentication**이 Send as Basic Auth header로 설정되어 있는지 확인합니다.

9. **Get New Access Token**을 클릭한 다음, &quot;Sign-in with X&quot; 프로세스의 일부로 &quot;Authorize app&quot;을 클릭합니다.

10. &quot;Proceed&quot; 버튼을 클릭한 후 &quot;Use Token&quot;을 클릭하여 토큰을 생성합니다. 

11. &quot;Save&quot; 버튼을 클릭해 이 구성 세부 정보를 저장합니다.

X에 로그인되어 있지 않다는 메시지가 표시될 수 있습니다. 이 오류가 발생하면, Postman 내에서 게시를 수행하려는 X 계정으로 로그인해야 합니다.

이제 이러한 OAuth 2.0 세부 정보를 폴더 수준에서 설정했으므로 각 예제의 &quot;Authorization&quot; 탭으로 이동해 Type이 &quot;Inherit auth from parent&quot;로 설정되어 있는지 확인합니다. 

이 토큰은 곧 만료되므로 &quot;Get New Access Token&quot; 버튼을 클릭해 새로 발급받아야 합니다. 이 버튼을 클릭하면 &quot;Sign-in with X&quot; 절차가 시작되고, 요청을 보내는 데 사용할 수 있는 새 토큰이 발급됩니다.

<div id="step-three-specify-the-direct-message-conversation-participants-and-message-contents">
  #### 3단계: 다이렉트 메시지 대화 참여자와 메시지 내용을 지정합니다
</div>

“Body” 탭으로 이동한 다음 예제 JSON 객체를 수정합니다. `participant_ids` 속성에 다이렉트 메시지를 보낼 계정들을 설정합니다.

`{
   "message": {"text": "너희 둘만 안녕, 이것은 새로운 그룹 대화입니다."},
   "participant_ids": ["944480690","906948460078698496"],
   "conversation_type": "Group"
}`

<div id="step-four-make-your-request-and-review-the-response">
  #### 4단계: 요청을 보내고 응답 확인하기
</div>

모든 설정을 마쳤다면 &quot;Send&quot; 버튼을 클릭하세요. 그러면 아래 예시 응답과 유사한 응답을 받게 됩니다. 앞에서 토큰을 생성한 이후 만료되었다면, 폴더의 Authorization 탭으로 돌아가 &quot;Get New Access Token&quot;을 클릭해 새 토큰을 발급받을 수 있다는 점을 기억하세요.

```
{
   "data": {
       "dm_conversation_id": "1582103724607971328",
       "dm_event_id": "1582103724607971332"
   }
}
```

응답으로 반환된 &quot;data&quot; 객체에 dm&#95;conversation&#95;id와 dm&#95;event&#95;id가 포함되어 있다면, 새 Direct Message 대화를 성공적으로 생성한 것입니다. 이 대화와 관련된 이벤트를 조회하기 시작하려면 Direct Message 조회 빠른 시작 가이드를 확인하세요.

<div id="step-five-add-another-message-to-that-group-conversation">
  #### 5단계: 그 그룹 대화에 메시지를 하나 더 추가하기
</div>

이제 &quot;Add DM to conversation&quot; 예제를 선택한 뒤 &quot;Params&quot; 탭을 선택합니다. &quot;Path Variables&quot; 아래에서 dm&#95;conversation&#95;id를 위에서 생성한 대화의 ID로 변경합니다.

|                            |                     |
| :------------------------- | :------------------ |
| **Key**                    | **Value**           |
| dm&#95;conversation&#95;id | 1582103724607971328 |

이 대화 ID를 사용하면 요청 경로는 다음과 같습니다: [https://api.x.com/2/dm&#95;conversations/1582103724607971328/messages](https://api.x.com/2/dm_conversations/1582103724607971328/messages)

또한 전송하려는 메시지 텍스트를 포함하는 요청 JSON으로 &quot;Body&quot; 탭도 설정합니다.

```
{
   "text": "그룹 대화에 새 메시지 추가 중..."
}
```

모든 설정을 마쳤다면 &quot;Send&quot; 버튼을 누르세요. 그러면 아래 예시와 비슷한 응답을 받게 됩니다:

```
{
   "data": {
       "dm_conversation_id": "1582103724607971328",
       "dm_event_id": "1582106224379559940"
   }
}
```
