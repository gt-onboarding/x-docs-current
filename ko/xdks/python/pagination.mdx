---
title: 페이지네이션
sidebarTitle: 페이지네이션
---

X API는 여러 페이지에 걸친 결과를 반환하는 엔드포인트(예: 타임라인, 검색 등)에 페이지네이션을 사용합니다. 각 API 호출 응답에는 `result_count`, `previous_token`, `next_token`이 포함된 `meta` 객체가 포함됩니다. XDK가 `next_token`을 사용해 여러 번의 API 호출을 자동으로 처리하므로, 개발자는 여러 번 호출할 필요 없이 원하는 데이터 양만 지정하면 됩니다.
SDK는 이를 다음과 같이 단순화합니다:

- **내장 이터레이터**: 제너레이터 함수를 사용해 여러 페이지를 끊김 없이 가져올 수 있습니다.
- **명시적 토큰 처리**: 필요할 때 `pagination_token`을 전달하여 유연하게 수동으로 제어할 수 있습니다.
- **최대 결과 수 준수**: 각 호출마다 `max_results`를 따릅니다(예: 검색의 경우 최대 100, API 제한 내에서).

<div id="automatic-pagination-recommended">
  ## 자동 페이지네이션(권장)
</div>

페이지네이션 응답에서는 `iterate()` 메서드를 사용해 모든 결과를 지연(lazy) 방식으로 가져올 수 있습니다.
**예시: 페이지네이션 검색**

```python
from xdk import Client
client = Client(bearer_token="your_bearer_token")
# 자동 페이지네이션으로 검색
all_posts = []
for page in client.posts.search_recent(
    query="python",
    max_results=100,  # 페이지당
    tweet_fields=["created_at", "author_id"]  # 선택적 expansions
):
    all_posts.extend(page.data)
    print(f"게시물 {len(page.data)}개 가져옴 (총: {len(all_posts)}개)")
print(f"총 트윗: {len(all_posts)}개")
```

* 이 이터레이터는 `next_token`을 자동으로 처리합니다.
* `next_token`이 없으면 중지합니다.
* 429 오류가 발생하지 않도록 rate limit backoff를 지원합니다.


<div id="manual-pagination">
  ## 수동 페이지네이션
</div>

특정 로직(예: 페이지 단위 처리)에 맞게 결과를 제어해야 하는 경우, 아래와 같이 `next_token`을 사용해 페이지네이션을 수동으로 수행할 수 있습니다.

```python
# Get first page - search_recent returns an Iterator
first_page = next(client.posts.search_recent(
    query="xdk python sdk",
    max_results=100,
    pagination_token=None  # First page
))
print(f"First page: {len(first_page.data) if first_page.data else 0} Posts")
# Extract next_token from meta
next_token = None
if hasattr(first_page, 'meta') and first_page.meta:
    if hasattr(first_page.meta, 'next_token'):
        next_token = first_page.meta.next_token
    elif isinstance(first_page.meta, dict):
        next_token = first_page.meta.get('next_token')
if next_token:
    second_page = next(client.posts.search_recent(
        query="xdk python sdk",
        max_results=100,
        pagination_token=next_token
    ))
    print(f"Second page: {len(second_page.data) if second_page.data else 0} Posts")
```

**팁**:

* 성능을 최적화하려면 항상 `max_results`를 지정하세요(기본값은 엔드포인트마다 다릅니다).
* 디버깅을 위해 `meta.result_count`를 모니터링하세요.
* 매우 큰 쿼리의 경우, 블로킹을 피하기 위해 비동기 반복을 사용하는 방식을 고려하세요.
  Python XDK를 사용하는 자세한 코드 예제는 [code samples GitHub repo](https://github.com/xdevplatform/samples/tree/main/python)에서 확인할 수 있습니다.
