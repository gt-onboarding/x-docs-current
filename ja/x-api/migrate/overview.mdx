---
title: 概要
keywords: ["移行", "API移行", "v2移行", "v2への移行", "移行ガイド", "v2へのアップグレード", "移行の概要"]
---

import { Button } from "/snippets/ja/button.mdx"

最新バージョンの X API v2 は非常に重要なリリースです。そのため、この移行セクションをいくつかの部分に分割しています。

| X API v2 の新機能    | X API v2 向けに新たに提供されたエンドポイントや機能について説明します。                                    |
| :--------------- | :-------------------------------------------------------------------------- |
| 移行の準備はできていますか？   | 一連のガイドと手順を使って、移行を開始する方法を説明します。                                              |
| データ形式移行ガイド       | これまで標準の v1.1 や Enterprise のデータ形式で動作していたデータパーサーをどのように作り直すか説明します。             |
| X API エンドポイントマップ | 標準の v1.1 および Enterprise のエンドポイントが、新しい X API v2 のエンドポイントにどのように対応付けられるかを示します。 |

***

<div id="what-is-the-x-api-v2">
  ## X API v2 とは？
</div>

X API v2 は現在、主要な X API であり、今後のプロダクト投資とイノベーションの主軸となるものです。私たちは開発者のみなさんと協働し、X API の次世代版を構築して、多様な開発者コミュニティのニーズによりよく応えられるようにしてきました。開発者からのフィードバックに基づき、より幅広いニーズに対応できるよう API を再構築し、新しい機能やエンドポイントを導入し、デベロッパーエクスペリエンスを改善しました。

X API v2 は現在、主要な X API であり、今後のプロダクト投資とイノベーションの主軸となるものです。ここ数年にわたり、私たちは開発者と連携し、より幅広いニーズに応え、新しい機能とエンドポイントを導入し、デベロッパーエクスペリエンスを向上させるために API を再構築してきました。私たちはオープンなデベロッパープラットフォームを今後も構築し続けることを約束しており、みなさんが X API v2 を使ってどのようなものを構築するのかを楽しみにしています。

<div id="why-migrate">
  ## なぜ移行するのか？
</div>

X API v2 は、よりモダンで持続可能な基盤の上に構築されており、従来の v1.1 および Enterprise 製品向けの改良された代替エンドポイントに加えて、まったく新しい機能も提供します。レガシー API（v1.1 および Enterprise）をご利用のお客様には、最終的にこれらを廃止する予定であるため、v2 への移行を開始することを強く推奨します。X API を利用して公開された会話を収集・分析し、X 上の人々と交流し、イノベーションを推進してください。

このセクションでは、エンドポイントと機能について説明します。

<div id="v2-endpoints">
  ## V2 endpoints
</div>

次のガイドから、v2 の各エンドポイントと、それ以前のバージョンにおける対応エンドポイントの完全な一覧を確認できます。

<Button href="/ja/x-api/migrate/x-api-endpoint-map">
  X API エンドポイントマップ
</Button>

X API v2 のエンドポイントの多くは既存機能の置き換えですが、いくつかの新しいエンドポイントも導入しています。以下は、v2 で新たに公開したエンドポイントの例です。

* [Spaces endpoints](/ja/x-api/spaces/introduction) — ユーザーが X Spaces をより有効に活用できるようにし、開発者が音声会話の未来を形作るのに貢献できるようにします。
* [Hide replies](/ja/x-api/posts/hide-replies/introduction) — 攻撃的、妨害的、または誤解を招く返信の影響を、大規模に制限するツールを構築できるようにします。
* 新しい Lists エンドポイント — [リストをピン留めおよびピン留め解除](/ja/x-api/lists/pinned-lists/introduction)したり、誰かのピン留めされたリストを取得したりできます。
* 新しい [batch compliance endpoints](/ja/x-api/compliance/batch-compliance/introduction) — 保持しているユーザーやポストのデータが各種コンプライアンス要件に沿っていることを確認できます。

<div id="new-functionality">
  ## 新機能
</div>

X API v2 には、X API の活用価値をさらに高める新しい機能も含まれています。多くの新機能は、これまで Enterprise 顧客向けに限定されていた機能も含め、皆さまからのフィードバックにもとづいて導入されています。

API の改善点には次のようなものがあります。

* [エンドポイント間で一貫した設計](/ja/x-api/fundamentals/consistency)
* [レスポンスペイロードに含めるフィールドとオブジェクトを指定できる機能](/ja/x-api/fundamentals/data-dictionary#how-to-use-fields-and-expansions)
* [新しい、より詳細なデータオブジェクト](/ja/x-api/fundamentals/data-dictionary)
* [ポストアノテーションによって強化された新しいコンテキスト情報を用いてデータを受信およびフィルタリング](/ja/x-api/fundamentals/post-annotations)
* [新しいメトリクスへのアクセス](/ja/x-api/fundamentals/metrics)
* [返信スレッドに属する会話を容易に特定およびフィルタリング](/ja/x-api/fundamentals/conversation-id)
* [学術研究者向けの高度な機能とデータアクセスの拡張](https://developer.x.com/content/developer-twitter/en/products/twitter-api/academic-research)
* [ストリーミングエンドポイント向けのリカバリと冗長性の機能](/ja/x-api/posts/filtered-stream/integrate/recovery-and-redundancy-features)
* [クエリにマッチするポスト件数を簡単に取得](/ja/x-api/posts/counts/introduction)
* [ポストの編集機能のサポート](/ja/x-api/fundamentals/edit-posts)
* 高精度なスパムフィルタリング
* 短縮 URL を完全に展開し、より効果的なフィルタリングと分析を実現
* 非推奨フィールドの削除とラベルの最新化による JSON レスポンスオブジェクトの簡素化
* 検索クエリにマッチする公開済みで利用可能なポストを 100% 返却
* 接続を切断せずに変更を行えるストリーミングの「ルール」
* ポスト検索、ポスト件数、および filtered stream のための、より表現力の高いクエリ言語
* 新しいライブラリの構築と、変更のより透明なトラッキングを可能にする OpenAPI 仕様

<div id="discover-new-and-updated-response-objects">
  ### 新規および更新済みレスポンスオブジェクトを確認する
</div>

v2 エンドポイントでは、次の 6 つのデータオブジェクトが利用できます。

| Object | Description |
|:--------|:-------------|
| [ポスト](/ja/x-api/fundamentals/data-dictionary#tweet) | ポストオブジェクトには、`id`、`text`、`created_at` など、多数のルートレベルのフィールドがあります。ポストオブジェクトは、`user`、`media`、`poll`、`place` など複数の子オブジェクトの親オブジェクトでもあります。 |
| [User](/ja/x-api/fundamentals/data-dictionary#user) | User オブジェクトには、参照されているユーザーを表す X ユーザーアカウントのメタデータが含まれています。 |
| [Spaces](/ja/x-api/fundamentals/data-dictionary#space) | Space オブジェクトは、`state`、`host_id`、`is_ticketed`、`lang` などのフィールドで構成されます。 |
| [Lists](/ja/x-api/fundamentals/data-dictionary#list) | List オブジェクトには、要求されたリストに関する基本情報が含まれており、`description`、`member_count`、`owner_id` などのフィールドがあります。 |
| [Media](/ja/x-api/fundamentals/data-dictionary#media) | ポストにメディア（画像など）が含まれている場合、`media.fields` パラメータを使用して Media オブジェクトをリクエストでき、`media_key`、`type`、`url`、`preview_image_url` などのフィールドを含めることができます。 |
| [Poll](/ja/x-api/fundamentals/data-dictionary#poll) | ポストに含まれる投票は、どのエンドポイントにおいてもプライマリオブジェクトではありませんが、ポストオブジェクト内で見つけて展開できます。 |
| [Place](/ja/x-api/fundamentals/data-dictionary#place) | Place オブジェクトは、`place_id`、`geo` オブジェクト、`country_code` などのフィールドで構成されます。この情報を使用して、場所ごとにポストを特定・分析することができます。 |

[フィールドと expansions の使用方法](/ja/x-api/fundamentals/data-dictionary#how-to-use-fields-and-expansions)について詳しくは、こちらをご覧ください。

<div id="flexibility-to-choose-which-objects-and-fields-you-receive">
  ### 受け取るオブジェクトとフィールドを柔軟に選択可能
</div>

GET エンドポイントにリクエストを送信すると、そのエンドポイントに関連する主要なデータオブジェクトが返され、そこには一連のデフォルトフィールドが含まれます。たとえば、ポストオブジェクトはデフォルトとして `id` と `text` フィールドを返します。

リクエストで追加のフィールドを取得したい場合は、[fields](/ja/x-api/fundamentals/fields) と [expansions](/ja/x-api/fundamentals/expansions) パラメーターを使用する必要があります。`expansions` パラメーターを使用すると、ユーザーのプロフィールに固定されたポストやメディアオブジェクトなどの関連データオブジェクトを取得できます。一方、fields によるフィールド指定を使用すると、デフォルト以外に返されるオブジェクト内の特定のフィールドをリクエストできます。

以下は、さまざまな X API v2 エンドポイントでリクエスト可能な expansions の一覧です。

| Object / Resource | Available Expansions |
|:-------------------|:----------------------|
| ポスト            | `author_id`, `edit_history_tweet_ids`, `entities.mentions.username`, `in_reply_to_user_id`, `referenced_tweets.id`, `referenced_tweets.id.author_id`, `attachments.poll_ids`, `attachments.media_keys`, `geo.place_id` |
| Users             | `pinned_tweet_id` |
| Spaces            | `invited_user_ids`, `speaker_ids`, `creator_id`, `host_ids`, `topic_ids` |

[fields と expansions の使い方](/ja/x-api/fundamentals/data-dictionary#how-to-use-fields-and-expansions)については、こちらも参照してください。

<div id="new-metrics-available-within-tweets-users-spaces-and-media-objects">
  ## ポスト、ユーザー、Spaces、メディアオブジェクトで利用可能な新しいメトリクス
</div>

これまでより多くのメトリクスが、ポスト、ユーザー、Spaces、リスト、メディアオブジェクトで利用可能になりました。これらのメトリクスには公開メトリクスと非公開メトリクスがあり、一部のメトリクスはポスト広告において、オーガニックまたはプロモーションのコンテキストごとに区別して確認できます。

利用可能な[メトリクス](/ja/x-api/fundamentals/metrics)について、さらに詳しくご確認ください。

| Object  | Available Metrics      | Public Metrics | Private Metrics | Organic Metrics | Promoted Metrics |
|:---------|:-------------------------|:----------------|:-----------------|:-----------------|:------------------|
| tweets  | retweet&#95;count           | ✔️             |                 | ✔️              | ✔️               |
|         | quote&#95;count             | ✔️             |                 |                 |                  |
|         | like&#95;count              | ✔️             |                 | ✔️              | ✔️               |
|         | reply&#95;count             | ✔️             |                 | ✔️              | ✔️               |
|         | impression&#95;count        |               | ✔️              | ✔️              | ✔️               |
|         | url&#95;profile&#95;clicks      |               | ✔️              | ✔️              | ✔️               |
|         | url&#95;link&#95;clicks         |               | ✔️              | ✔️              | ✔️               |
| user    | follower&#95;count          | ✔️             |                 |                 |                  |
| user    | following&#95;count         | ✔️             |                 |                 |                  |
| media   | view&#95;count              |               | ✔️              |                 |                  |
| media   | playback&#95;0&#95;count        |               | ✔️              |                 |                  |
| space   | participant&#95;count       | ✔️             |                 |                 |                  |

<div id="edit-tweets">
  ## ポストを編集する
</div>

X API v2 のエンドポイントでは、編集済みポストのメタデータを提供します。*Edit Tweet* 機能は 2022 年 9 月 1 日に、まず X 従業員向けのテストとして導入されました。この日以降、対象となるポストは作成後 30 分間、最大 5 回まで編集できます。[ポストの編集](/ja/x-api/fundamentals/edit-posts) について詳しくはこちらをご覧ください。
X API v2 を使用すると、開発者は次のことを確認できます。

* ポストが作成時点で編集可能な対象だったかどうか。一部のポスト（投票を含むポストや予約投稿など）は編集できません。
* ポストは 30 分間編集可能で、最大 5 回まで編集できます。編集可能なポストについては、編集可能な残り時間と、あと何回編集できるかを確認できます。
* 自分が閲覧しているポストが編集済みバージョンかどうか（通常、API は特定の過去バージョンがポスト ID で要求されない限り、そのポストの最新バージョンを返します）。
* そのポストの完全な編集履歴。
* 各バージョンのポストに起因するエンゲージメント。

<div id="track-threaded-conversations">
  ## スレッド化された会話を追跡する
</div>

新しいポストフィールドを使用すると、ポストがどの会話スレッドに属しているかを識別できます。会話IDは、その会話を開始したポストのポストIDです。詳しくは [会話の追跡](/ja/x-api/fundamentals/conversation-id) を参照してください。

<div id="ready-to-migrate">
  ## 移行の準備
</div>

v2 エンドポイントを使用するには、次のものが必要です。

* [開発者アカウント](https://developer.x.com/en/portal/petition/essential/basic-info)
* [プロジェクト](resources/fundamentals/projects) 内で作成された [開発者アプリ](https://developer.x.com/en/apps)
* そのプロジェクトの開発者アプリから取得した [キーとトークン](resources/fundamentals/authentication)

プロジェクト内のアプリから発行されたキーとトークンを使用することが重要です。プロジェクト外のアプリのキーとトークンを使用している場合、v2 エンドポイントへリクエストを送信することはできません。

開発者アカウントを取得したら、[developer portal](https://developer.x.com/en/portal/petition/essential/basic-info) で上記すべてを設定できます。

<div id="authentication">
  ### 認証
</div>

新しい Twitter API では、異なるエンドポイントにアクセスするために、OAuth 1.0a User Context と OAuth 2.0 Bearer Token という 2 つの異なる認証パターンを使用します。これらは、エンドポイントへのリクエストを行う際に、それぞれ異なる目的を持ちます。

OAuth 1.0a User Context は、特定の Twitter ユーザーに代わってリクエストを行う場合に必要です\
OAuth 2.0 Bearer Token は、開発者アプリに代わってリクエストを行う場合に必要です

<div id="tools-and-code">
  ## ツールとコード
</div>

新しいエンドポイントや機能に慣れ、作業を始めやすくするために、いくつかのオプションを用意しています。

* Postman クライアントを使用して個々のエンドポイントにリクエストを送信し、接続できる Twitter の [Postman コレクション](https://app.getpostman.com/run-collection/9956214-784efcda-ed4c-4491-a4c0-a26470a67400) を提供しています。これは、認証をテストし、エンドポイントを試すための、手軽で負担の少ない方法です。
* また、Twitter がサポートするものとサードパーティ製のものの両方を含む、Ruby、Python、Node、Java などで利用可能なライブラリの一覧も提供しています。さらに詳しい情報については、[ツールとライブラリのページ](/ja/x-api/tools-and-libraries/overview)を参照してください。

<div id="migrating-to-updated-endpoints">
  ## 更新されたエンドポイントへの移行
</div>

新しい Twitter v2 エンドポイントを使い始めるにあたって、各更新されたエンドポイントの機能を従来バージョンと比較できるよう、詳細な移行ガイドを用意しています。

* **ポスト**
  * [ポストのルックアップ](/ja/x-api/posts/lookup/integrate)
  * [ポストの管理](/ja/x-api/posts/manage-tweets/migrate/overview)
  * [タイムライン](/ja/x-api/posts/timelines/migrate/overview)
  * [ポストの検索](/ja/x-api/posts/search/migrate/overview)
  * [ポスト件数](/ja/x-api/posts/counts/migrate/overview)
  * [Filtered stream](/ja/x-api/posts/filtered-stream/migrate/overview)
  * Sampled stream
  * [リツイート](/ja/x-api/posts/retweets/migrate/overview)
  * [いいね](/ja/x-api/posts/likes/migrate/likes-lookup-standard-to-twitter-api-v2)
  * [返信を非表示にする](/ja/x-api/posts/hide-replies/migrate)
* **ユーザー**
  * [ユーザーのルックアップ](/ja/x-api/users/lookup/migrate/overview)
  * [フォロー](/ja/x-api/users/follows/migrate/standard-to-twitter-api-v2)
  * [ブロック](/ja/x-api/users/blocks/migrate)
  * [ミュート](/ja/x-api/users/mutes/migrate/manage-mutes-standard-to-twitter-api-v2)
* **リスト**
  * [リストのルックアップ](/ja/x-api/lists/list-lookup/migrate/overview)
  * [リストの管理](/ja/x-api/lists/manage-lists/migrate/overview)
  * [リストポストのルックアップ](/ja/x-api/lists/list-tweets/migrate/overview)
  * [リストメンバー](/ja/x-api/lists/list-members/migrate/overview)

<div id="migrating-to-the-new-data-format">
  ## 新しいデータ形式への移行
</div>

v1.1 または Enterprise から v2 に移行する際には、データが提供される形式が大きく変わっていることを理解しておくことが重要です。新しいフィールドを追加し、フィールドの順序を変更し、場合によっては要素を完全に削除しています。

これらの変更についてさらに理解していただくために、v2 以前のデータ形式のフィールドを新しいフィールドにマッピングし、これらの新しいフィールドのリクエスト方法を説明する一連のガイドを作成しています。

詳しくは、この移行ハブ内の [データ形式の移行](/ja/x-api/migrate/data-format-migration) セクション、または以下の個別のデータ形式ガイドを参照してください。

* [ネイティブ形式から X API v2 への移行（標準 v1.1）](/ja/x-api/migrate/data-format-migration#migrating-from-standard-v1-1s-data-format-to-v2)
* [Native Enriched から X API v2 への移行（Enterprise）](/ja/x-api/migrate/data-format-migration#migrating-from-native-enriched-data-format-to-v2)
* [Activity Streams から X API v2 への移行（Enterprise）](/ja/x-api/migrate/data-format-migration#migrating-from-activity-streams-data-format-to-v2)

<div id="whats-next">
  ## 今後について
</div>

しばらくプラットフォームを利用してきた方は、多くの新しいエンドポイントが既存の [standard v1.1](https://developer.x.com/en/docs/twitter-api/v1) や [enterprise](/ja/x-api/enterprise-gnip-2.0/enterprise-gnip) のエンドポイントと対応していることにお気付きかと思います。実際、最終的にはこれらが3つすべてのバージョンを置き換えることを想定しています。

[X API endpoints map](/ja/x-api/migrate/x-api-endpoint-map) の一覧表を用意しましたので、これまでのバージョンとの対応関係を確認する際にご利用ください。

今後の予定を確認したい場合は、[product roadmap](https://trello.com/b/myf7rKwV/twitter-developer-platform-roadmap) をご覧ください。

すでにリリースした内容については、[changelog](https://developer.x.com/en/updates/changelog) もあわせてご参照ください。

<div id="what-should-we-build-next">
  ### 次にどんな機能を開発すべきでしょうか？
</div>

X API v2 の機能拡張を進めていくにあたり、今後も皆さまからのご意見を伺いたいと考えています。皆さまからの[フィードバック](https://twitterdevfeedback.uservoice.com/)を歓迎し、積極的にお寄せいただきたいと考えています。

すでに投稿されているアイデアをご覧いただき、ご自身のニーズと合致するものに支持を示すとともに、ぜひフィードバックもお寄せください。