---
title: 概要
keywords: ["移行", "API 移行", "v2 への移行", "v2 へアップグレード", "移行ガイド", "v2 へのアップグレード", "移行の概要"]
---

import { Button } from "/snippets/ja/button.mdx"

最新バージョンの X API v2 は非常に重要なアップデートです。そのため、この移行セクションはいくつかのパートに分割されています。

| X API v2 の新機能    | X API v2 に追加された新しいエンドポイントと機能について確認します。                                     |
| :--------------- | :------------------------------------------------------------------------- |
| 移行の準備はできていますか？   | 一連のガイドと手順を使って、移行を開始しましょう。                                                  |
| データ形式移行ガイド       | これまで標準の v1.1 および Enterprise のデータ形式で動作していたデータパーサーを再設計する方法を学びます。             |
| X API エンドポイントマップ | 標準 v1.1 および Enterprise のエンドポイントが、新しい X API v2 のエンドポイントにどのように対応しているかを確認します。 |

***

<div id="what-is-the-x-api-v2">
  ## X API v2 とは？
</div>

X API v2 は現在、主要な X API であり、今後のプロダクトへの投資とイノベーションの中心となっています。私たちは開発者のみなさんと協力して X API の次世代を構築し、より多様な開発者コミュニティのニーズに応えられるようにしてきました。開発者からのフィードバックに基づき、より幅広いニーズに対応できるよう API を再設計し、新しい機能やエンドポイントを導入し、開発者エクスペリエンスを向上させました。

X API v2 は現在、主要な X API であり、今後のプロダクトへの投資とイノベーションの中心となっています。ここ数年にわたり、私たちは開発者のみなさんと協力し、より幅広いニーズに応えられるよう API を再構築し、新しい機能やエンドポイントを導入し、開発者エクスペリエンスを向上させてきました。私たちは今後もオープンなデベロッパープラットフォームを構築し続けることを約束しており、みなさんが X API v2 を使ってどのようなものを構築されるのかを楽しみにしています。

<div id="why-migrate">
  ## なぜ移行する必要があるのか
</div>

X API v2 は、よりモダンで持続可能な基盤の上に構築されており、標準 v1.1 や Enterprise 製品のエンドポイントを改良した後継エンドポイントに加えて、まったく新しい機能も提供します。レガシー API（v1.1 および Enterprise）の利用者の皆さまには、最終的にこれらを廃止する予定であるため、早期に v2 への移行を開始することを強く推奨します。X API を使用して公開されている会話を取得・分析し、X 上の人々とやり取りし、新たな取り組みを実現してください。

このセクションでは、エンドポイントと機能について説明します。

<div id="v2-endpoints">
  ## V2 endpoints
</div>

v2 エンドポイントの完全な一覧と、それぞれに対応する v2 以前のエンドポイントとの対応関係については、次のガイドを参照してください。

<Button href="/ja/x-api/migrate/x-api-endpoint-map">
  X API エンドポイントマップ
</Button>

X API v2 のエンドポイントの多くは既存エンドポイントの代替ですが、いくつかの新しいエンドポイントも導入しています。以下は、v2 で新たに公開した新規エンドポイントの例です。

* [Spaces エンドポイント](/ja/x-api/spaces/introduction)：人々が X Spaces をより有効に活用できるようにし、開発者が音声会話の未来を形作る手助けができるようにします。
* [返信を非表示](/ja/x-api/posts/hide-replies/introduction)：攻撃的、気が散る、または誤解を招く返信の影響を、大規模に軽減するためのツールを構築できるようにします。
* 新しい Lists エンドポイント：[リストをピン留めおよびピン留め解除](/ja/x-api/lists/pinned-lists/introduction) したり、誰かのピン留めされたリストを取得したりできます。
* 新しい [一括コンプライアンスエンドポイント](/ja/x-api/compliance/batch-compliance/introduction)：保存しているユーザーおよびポストのデータがコンプライアンス要件に準拠していることを確認できます。

<div id="new-functionality">
  ## 新機能
</div>

X API v2 には、X API を通じてさらに多くの価値を引き出すのに役立つ新機能も含まれています。多くの新機能は皆さまからのフィードバックに基づいており、これまで Enterprise 顧客向けに限定されていた機能も含まれます。

API の改善点には次のようなものがあります。

* [エンドポイント間で一貫した設計](/ja/x-api/fundamentals/consistency)
* [レスポンスペイロードにどのフィールドやオブジェクトを含めるか指定できる機能](/ja/x-api/fundamentals/data-dictionary#how-to-use-fields-and-expansions)
* [新しい、より詳細なデータオブジェクト](/ja/x-api/fundamentals/data-dictionary)
* [ポストアノテーションによって提供される新しいコンテキスト情報を用いたデータの受信とフィルタリング](/ja/x-api/fundamentals/post-annotations)
* [新しいメトリクスへのアクセス](/ja/x-api/fundamentals/metrics)
* [返信スレッドに属する会話を容易に特定およびフィルタリングできる機能](/ja/x-api/fundamentals/conversation-id)
* [学術研究者向けの高度な機能とデータアクセスの拡大](https://developer.x.com/content/developer-twitter/en/products/twitter-api/academic-research)
* [ストリーミングエンドポイント向けのリカバリおよび冗長性機能](/ja/x-api/posts/filtered-stream/integrate/recovery-and-redundancy-features)
* [クエリに一致するポストの件数を簡単に取得](/ja/x-api/posts/counts/introduction)
* [Edit ポストのサポート](/ja/x-api/fundamentals/edit-posts)
* 高精度なスパムフィルタリング
* 短縮 URL を完全に展開し、より効果的なフィルタリングと分析を実現
* 非推奨フィールドの削除とラベルの最新化による JSON レスポンスオブジェクトの簡素化
* 検索クエリで一致した公開かつ利用可能なポストを 100% 返す機能
* 接続を切断せずに変更できるストリーミングの「ルール」
* ポスト検索、ポスト件数、および filtered stream 向けの、より表現力の高いクエリ言語
* 新しいライブラリの構築や、変更のより透明な追跡を可能にする OpenAPI 仕様

<div id="discover-new-and-updated-response-objects">
  ### 新規および更新されたレスポンスオブジェクトを確認する
</div>

以下の 6 つのデータオブジェクトが v2 エンドポイントで利用可能です。

| Object | Description |
|:--------|:-------------|
| [Tweet](/ja/x-api/fundamentals/data-dictionary#tweet) | Tweet オブジェクトには、`id`、`text`、`created_at` などのルートレベルのフィールドが多数含まれています。Tweet オブジェクトは、`user`、`media`、`poll`、`place` など複数の子オブジェクトの親オブジェクトでもあります。 |
| [User](/ja/x-api/fundamentals/data-dictionary#user) | User オブジェクトには、参照されているユーザーを説明する X ユーザーアカウントのメタデータが含まれます。 |
| [Spaces](/ja/x-api/fundamentals/data-dictionary#space) | Space オブジェクトには、`state`、`host_id`、`is_ticketed`、`lang` などのフィールドが含まれます。 |
| [Lists](/ja/x-api/fundamentals/data-dictionary#list) | List オブジェクトには、`description`、`member_count`、`owner_id` など、リクエストされたリストに関する基本情報が含まれます。 |
| [Media](/ja/x-api/fundamentals/data-dictionary#media) | ポストにメディア（画像など）が含まれている場合、`media.fields` パラメータを使用して Media オブジェクトをリクエストでき、`media_key`、`type`、`url`、`preview_image_url` などのフィールドが含まれます。 |
| [Poll](/ja/x-api/fundamentals/data-dictionary#poll) | ポストに含まれる投票は、いずれのエンドポイントでもプライマリオブジェクトではありませんが、Tweet オブジェクト内で取得および展開できます。 |
| [Place](/ja/x-api/fundamentals/data-dictionary#place) | Place オブジェクトには、`place_id`、`geo` オブジェクト、`country_code` などのフィールドが含まれます。この情報を使用して、場所ごとにポストを特定・分析できます。 |

[フィールドと expansions の使用方法](/ja/x-api/fundamentals/data-dictionary#how-to-use-fields-and-expansions)についてさらに詳しく学びましょう。

<div id="flexibility-to-choose-which-objects-and-fields-you-receive">
  ### 受信するオブジェクトとフィールドを柔軟に選択可能
</div>

GET エンドポイントへリクエストを送信すると、そのエンドポイントに関連する主要なデータオブジェクトが返され、その中にはデフォルトのフィールド一式が含まれます。たとえば、ポストオブジェクトはデフォルトで `id` と `text` フィールドを返します。

リクエストで追加のフィールドを取得したい場合は、[fields](/ja/x-api/fundamentals/fields) と [expansions](/ja/x-api/fundamentals/expansions) パラメータを使用する必要があります。`expansions` パラメータを使用すると、ユーザーの固定表示ポストやメディアオブジェクトなどの関連データオブジェクトを取得でき、`fields` パラメータを使用すると、デフォルト以外に返されるオブジェクト内の特定のフィールドを指定してリクエストできます。

以下は、さまざまな X API v2 エンドポイントでリクエスト可能な expansions の一覧です。

| Object / Resource | Available Expansions |
|:-------------------|:----------------------|
| Tweets            | `author_id`, `edit_history_tweet_ids`, `entities.mentions.username`, `in_reply_to_user_id`, `referenced_tweets.id`, `referenced_tweets.id.author_id`, `attachments.poll_ids`, `attachments.media_keys`, `geo.place_id` |
| Users             | `pinned_tweet_id` |
| Spaces            | `invited_user_ids`, `speaker_ids`, `creator_id`, `host_ids`, `topic_ids` |

[fields と expansions の使い方](/ja/x-api/fundamentals/data-dictionary#how-to-use-fields-and-expansions)について、さらに詳しく学ぶことができます。

<div id="new-metrics-available-within-tweets-users-spaces-and-media-objects">
  ## ポスト、ユーザー、Spaces、リスト、メディアオブジェクトで利用可能な新しいメトリクス
</div>

ポスト、ユーザー、Spaces、リスト、メディアオブジェクトで、より多くのメトリクスを利用できるようになりました。これらのメトリクスにはパブリックなものとプライベートなものがあり、一部のメトリクスはポスト広告において、オーガニックまたはプロモーションのコンテキストごとに分解して確認できます。

利用可能な[メトリクス](/ja/x-api/fundamentals/metrics)について、詳しくはこちらをご覧ください。

| Object  | 利用可能なメトリクス | パブリックメトリクス | プライベートメトリクス | オーガニックメトリクス | プロモーションメトリクス |
|:---------|:-------------------------|:----------------|:-----------------|:-----------------|:------------------|
| tweets  | retweet&#95;count           | ✔️             |                 | ✔️              | ✔️               |
|         | quote&#95;count             | ✔️             |                 |                 |                  |
|         | like&#95;count              | ✔️             |                 | ✔️              | ✔️               |
|         | reply&#95;count             | ✔️             |                 | ✔️              | ✔️               |
|         | impression&#95;count        |               | ✔️              | ✔️              | ✔️               |
|         | url&#95;profile&#95;clicks      |               | ✔️              | ✔️              | ✔️               |
|         | url&#95;link&#95;clicks         |               | ✔️              | ✔️              | ✔️               |
| user    | follower&#95;count          | ✔️             |                 |                 |                  |
| user    | following&#95;count         | ✔️             |                 |                 |                  |
| media   | view&#95;count              |               | ✔️              |                 |                  |
| media   | playback&#95;0&#95;count        |               | ✔️              |                 |                  |
| space   | participant&#95;count       | ✔️             |                 |                 |                  |

<div id="edit-tweets">
  ## ポストを編集する
</div>

X API v2 のエンドポイントは、編集済みポストのメタデータを提供します。*ポストを編集* 機能は、2022 年 9 月 1 日に X 社員を対象としたテストとして初めて導入されました。この日以降、条件を満たすポストは作成から 30 分間、最大 5 回まで編集できます。詳しくは「[Edit Tweets](/ja/x-api/fundamentals/edit-posts)」を参照してください。
X API v2 を使用すると、開発者は次のことを確認できます。

* ポストが作成時点で編集対象だったかどうか。一部のポスト（投票付きポストや予約投稿など）は編集できません。
* ポストは 30 分間編集可能で、最大 5 回まで編集できます。編集可能なポストについては、編集可能な残り時間と、あと何回編集できるかを確認できます。
* 表示しているポストが編集済みバージョンかどうか（多くの場合、API はポストの最新バージョンを返しますが、ポスト ID を指定して特定の過去バージョンを要求した場合はその限りではありません）。
* ポストの編集履歴全体。
* ポストの各バージョンに紐づくエンゲージメント。

<div id="track-threaded-conversations">
  ## スレッド化された会話をトラッキングする
</div>

新しいポストフィールドにより、ポストがどの会話スレッドに属しているかを把握できます。会話IDは、その会話を開始したポストのポストIDです。詳しくは[会話のトラッキング](/ja/x-api/fundamentals/conversation-id)をご覧ください。

<div id="ready-to-migrate">
  ## 移行の準備ができたら
</div>

v2 エンドポイントを使用するには、次のものが必要です。

* [開発者アカウント](https://developer.x.com/en/portal/petition/essential/basic-info)
* [プロジェクト](resources/fundamentals/projects) 内で作成された [開発者アプリ](https://developer.x.com/en/apps)
* そのプロジェクトの開発者アプリから取得した [キーとトークン](resources/fundamentals/authentication)

プロジェクト内の開発者アプリのキーとトークンを使用することが重要です。プロジェクト外の開発者アプリのキーとトークンを使用している場合、v2 エンドポイントへのリクエストを送信できません。

開発者アカウントを取得したら、[開発者ポータル](https://developer.x.com/en/portal/petition/essential/basic-info) で上記のすべてを設定できます。

<div id="authentication">
  ### 認証
</div>

新しい Twitter API では、さまざまなエンドポイントにアクセスするために、OAuth 1.0a User Context と OAuth 2.0 Bearer Token という 2 つの異なる認証方式を使用します。これらは、エンドポイントへのリクエストを行う際に、それぞれ異なる用途を持ちます。

OAuth 1.0a User Context は、Twitter ユーザーに代わってリクエストを行う場合に必要です。\
OAuth 2.0 Bearer Token は、開発者アプリに代わってリクエストを行う場合に必要です。

<div id="tools-and-code">
  ## ツールとコード
</div>

新しいエンドポイントや機能に慣れ、スムーズに使い始められるように、開発の立ち上げに役立ついくつかのオプションを用意しています。

* Twitter の [Postman コレクション](https://app.getpostman.com/run-collection/9956214-784efcda-ed4c-4491-a4c0-a26470a67400)を提供しており、Postman クライアントを使って各エンドポイントにリクエストを送り、接続することができます。これは認証をテストし、エンドポイントを試すのに手軽な方法です。
* また、Ruby、Python、Node、Java など多数の言語向けの、Twitter がサポートするライブラリおよびサードパーティ製ライブラリの一覧も提供しています。より詳しい情報については、[ツールとライブラリのページ](/ja/x-api/tools-and-libraries/overview)をご覧ください。

<div id="migrating-to-updated-endpoints">
  ## 更新されたエンドポイントへの移行
</div>

新しい Twitter v2 エンドポイントの利用を開始するにあたり、各更新されたエンドポイントの機能を旧バージョンと比較・対照できるよう、詳細な移行ガイドを用意しています。

* **ポスト**
  * [ポストのルックアップ](/ja/x-api/posts/lookup/integrate)
  * [ポストの管理](/ja/x-api/posts/manage-tweets/migrate/overview)
  * [タイムライン](/ja/x-api/posts/timelines/migrate/overview)
  * [ポスト検索](/ja/x-api/posts/search/migrate/overview)
  * [ポスト件数](/ja/x-api/posts/counts/migrate/overview)
  * [Filtered stream](/ja/x-api/posts/filtered-stream/migrate/overview)
  * Sampled stream
  * [リポスト](/ja/x-api/posts/retweets/migrate/overview)
  * [いいね](/ja/x-api/posts/likes/migrate/likes-lookup-standard-to-twitter-api-v2)
  * [返信を非表示にする](/ja/x-api/posts/hide-replies/migrate)
* **ユーザー**
  * [ユーザーのルックアップ](/ja/x-api/users/lookup/migrate/overview)
  * [フォロー](/ja/x-api/users/follows/migrate/standard-to-twitter-api-v2)
  * [ブロック](/ja/x-api/users/blocks/migrate)
  * [ミュート](/ja/x-api/users/mutes/migrate/manage-mutes-standard-to-twitter-api-v2)
* **リスト**
  * [リストのルックアップ](/ja/x-api/lists/list-lookup/migrate/overview)
  * [リストの管理](/ja/x-api/lists/manage-lists/migrate/overview)
  * [リストのポストのルックアップ](/ja/x-api/lists/list-tweets/migrate/overview)
  * [リストメンバー](/ja/x-api/lists/list-members/migrate/overview)

<div id="migrating-to-the-new-data-format">
  ## 新しいデータ形式への移行
</div>

v1.1 または Enterprise から v2 へ移行するにあたっては、データの提供形式が大きく変更されていることを理解しておくことが重要です。新しいフィールドを追加し、フィールドの並び順を変更し、場合によっては要素自体を削除しています。

これらの変更をより深く理解していただくために、v2 以前のデータ形式のフィールドと新しいフィールドとの対応関係を整理し、これらの新しいフィールドのリクエスト方法を説明する一連のガイドを用意しています。

このマイグレーションハブの [data formats migration](/ja/x-api/migrate/data-format-migration) セクション、または各データ形式に特化したガイドをご覧いただくことで、さらに詳しい情報を確認できます。

* [Native format to X API v2 (standard v1.1)](/ja/x-api/migrate/data-format-migration#migrating-from-standard-v1-1s-data-format-to-v2)
* [Native Enriched to X API v2 (enterprise)](/ja/x-api/migrate/data-format-migration#migrating-from-native-enriched-data-format-to-v2)
* [Activity Streams to X API v2 (enterprise)](/ja/x-api/migrate/data-format-migration#migrating-from-activity-streams-data-format-to-v2)

<div id="whats-next">
  ## 次のステップ
</div>

しばらくこのプラットフォームをご利用いただいている方は、多くの新しいエンドポイントが既存の [standard v1.1](https://developer.x.com/en/docs/twitter-api/v1) や [enterprise](/ja/x-api/enterprise-gnip-2.0/enterprise-gnip) のエンドポイントと整合していることにお気付きかもしれません。実際、将来的にはこれらが 3 つすべてのバージョンを置き換えることを想定しています。

[X API エンドポイント対応表](/ja/x-api/migrate/x-api-endpoint-map) を用意しましたので、過去のバージョンとの対応関係を確認できます。

今後の予定を確認したい場合は、[製品ロードマップ](https://trello.com/b/myf7rKwV/twitter-developer-platform-roadmap) をご覧ください。

すでにリリース済みの内容を把握するには、[変更履歴](https://developer.x.com/en/updates/changelog) もあわせてご確認ください。

<div id="what-should-we-build-next">
  ### 次に何を開発すべきか？
</div>

X API v2 の機能拡張を進めていくにあたり、今後も皆さんのご意見を伺いたいと考えています。ぜひ[フィードバック](https://twitterdevfeedback.uservoice.com/)をお寄せください。

すでに投稿されているアイデアに目を通し、ご自身のニーズと合致するものに支持を示すとともに、フィードバックもお寄せください。