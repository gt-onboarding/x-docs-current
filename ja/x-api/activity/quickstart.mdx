---
title: クイックスタート
sidebarTitle: クイックスタート
keywords: ["activity API quickstart", "X Activity API quickstart", "activity quickstart", "activity tutorial", "activity guide"]
---

このガイドでは、X Activity API のエンドポイントを使用してイベントを購読し、受信する方法を説明します。一般的な手順は次の 3 つです。

1. フィルタリング対象としたいユーザーのイベントについて、そのユーザーの User ID を特定する
2. そのユーザーに対して、フィルタリングしたいイベント種別のサブスクリプションを作成する
3. webhook または永続的な HTTP ストリーム接続を使用してイベントを受信する

<div id="getting-user-ids">
  ## ユーザーIDの取得
</div>

サブスクリプションを作成する前に、フィルタリングしたいアカウントのユーザーIDを確認しておく必要があります。この例では XDevelopers のハンドルを使用します。ユーザーIDは、次のようないくつかの方法で調べることができます。

**ユーザー名からユーザーIDを調べる：**

```bash
curl -H "Authorization: Bearer YOUR_BEARER_TOKEN" "https://api.x.com/2/users/by/username/xdevelopers"
```

**自分のユーザーIDを取得する：**

```bash
curl -H "Authorization: Bearer YOUR_BEARER_TOKEN" https://api.x.com/2/users/me
```

どちらのエンドポイントもユーザー情報を返し、その中にはサブスクリプションフィルターで使用できる `id` フィールドが含まれます。JSON レスポンスの例を以下に示します。

```json
{
    "data": {
        "id": "2244994945",
        "name": "Developers",
        "username": "XDevelopers"
    }
}
```


<div id="creating-a-subscription">
  ## サブスクリプションの作成
</div>

次のステップはサブスクリプションを作成することです。この例では、XDevelopers のプロフィール自己紹介文の更新イベントを購読します。そのために、JSON ボディで `user_id` と `event_type` を指定します。このケースでは、`event_type` は `ProfileBioUpdate` です。

X Developer のユーザー ID `2244994945` と、任意のタグを指定します:

```json
{
  "event_type": "ProfileBioUpdate",
  "filter": {
    "user_id": "2244994945"
  },
  "tag": "Xdevelopers' bio updates"
}
```

XAA 関連のすべてのエンドポイントでは、認可のために developer portal から取得した [Bearer Token](https://docs.x.com/fundamentals/authentication/oauth-2-0/overview#bearer-token-also-known-as-app-only) を使用します。

```bash
curl -H "Authorization: Bearer YOUR_BEARER_TOKEN" \
  https://api.x.com/2/activity/subscriptions \
  -X POST \
  -d '{
    "event_type": "ProfileBioUpdate",
    "filter": {
      "user_id": "2244994945"
    },
    "tag": "Xdevelopers' bio updates"
  }'
```

リクエストが正常に処理されると、サブスクリプションが作成されます。

```json
{
  "data":[
    {
      "created_at":"2025-10-09T16:35:08.000Z",
      "event_type":"ProfileBioUpdate",
      "filter":{
        "user_id":"2244994945"
      },
      "subscription_id":"1976325569252868096",
      "tag": "Xdevelopersのプロフィール更新",
      "updated_at":"2025-10-09T16:35:08.000Z"
    }
  ],
  "meta": {
    "total_subscriptions": 1
  }
}
```


<div id="getting-the-events">
  ## イベントの取得
</div>

サブスクリプションを作成すると、[webhooks](https://docs.x.com/x-api/webhooks/introduction) または永続的な HTTP ストリーム経由でイベントを受信できます。この例では、永続的な HTTP ストリームを開きます。

```bash
curl -H "Authorization: Bearer YOUR_BEARER_TOKEN" https://api.x.com/2/activity/stream
```

Xdevelopers のアカウントがプロフィールの自己紹介文を更新すると、そのイベントはストリームを通じて配信されます。

```json
{
  "data": {
    "filter": {
      "user_id": "2244994945"
    },
    "event_type": "ProfileBioUpdate",
    "tag": "Xdevelopers' bio updates",
    "payload": {
      "before": "Mars & Cars",
      "after": "Mars, Cars & AI"
    }
  }
}
```


<div id="subscription-management">
  ## サブスクリプション管理
</div>

X Activity API には、標準的なCRUD操作を通じてサブスクリプションを管理するためのエンドポイントが提供されています。

<div id="create-subscription">
  ### サブスクリプションを作成
</div>

イベントを受信するための新しいサブスクリプションを作成します。

```bash
curl -H "Authorization: Bearer YOUR_BEARER_TOKEN" \
  -X POST \
  https://api.x.com/2/activity/subscriptions \
  -d '{
    "event_type": "ProfileBioUpdate",
    "filter": {
      "user_id": "123456789"
    },
    "tag": "my bio updates",
    "webhook_id": "1976325569252868099"
  }'
```

**注意：**

* `tag` フィールドは任意です。これはイベントの配信時に識別する際に役立ちます。
* `webhook_id` フィールドも任意です。Webhook のセットアップ方法については、[webhook docs](https://docs.x.com/x-api/webhooks/introduction) を参照してください。`webhook_id` が指定されている場合、イベントは開いているストリームに加えて、指定された webhook にも配信されます。

**レスポンス：**

```json
{
  "data": {
    "subscription_id": "1976325569252868096",
    "event_type": "ProfileBioUpdate",
    "filter": {
      "user_id": "123456789"
    },
    "created_at": "2025-10-09T16:35:08.000Z",
    "updated_at": "2025-10-09T16:35:08.000Z",
    "tag": "私のプロフィール更新",
    "webhook_id": "1976325569252868099"
  }
}
```


<div id="list-subscriptions">
  ### サブスクリプションの一覧取得
</div>

アプリケーションの現在有効なサブスクリプションをすべて取得します。

```bash
curl -H "Authorization: Bearer YOUR_BEARER_TOKEN" \
  https://api.x.com/2/activity/subscriptions
```

**レスポンス：**

```json
{
  "data": [
    {
      "subscription_id": "1976325569252868096",
      "event_type": "ProfileBioUpdate",
      "filter": {
        "user_id": "123456789"
      },
      "created_at": "2025-10-09T16:35:08.000Z",
      "updated_at": "2025-10-10T03:50:59.000Z",
    },
    {
      "subscription_id": "1976325569252868097",
      "event_type": "ProfilePictureUpdate",
      "filter": {
        "user_id": "987654321"
      },
      "created_at": "2025-10-08T14:35:08.000Z",
      "updated_at": "2025-10-08T14:35:08.000Z",
    }
  ],
  "meta": {
    "total_subscriptions": 2
  }
}
```


<div id="delete-subscription">
  ### サブスクリプションを削除する
</div>

サブスクリプションを削除するには：

```bash
curl -H "Authorization: Bearer YOUR_BEARER_TOKEN" \
  -X DELETE \
  https://api.x.com/2/activity/subscriptions/1976325569252868096
```

**レスポンス:**

```json
{
  "data": {
    "deleted": true
  },
  "meta": {
    "total_subscriptions": 0
  }
}
```

`total_subscriptions` は、削除操作の完了後にアプリに関連付けられている残りのサブスクリプション数を示します。


<div id="update-subscription">
  ### サブスクリプションの更新
</div>

PUT エンドポイントでは、サブスクリプションの配信方法またはタグを更新できます。

`filter` または `event_type` を更新する場合は、既存のサブスクリプションを削除して新しいものを追加する必要があります。

```
curl -H "Authorization: Bearer YOUR_BEARER_TOKEN" \
  -X PUT \
  https://api.x.com/2/activity/subscriptions/1976325569252868096 \
  -d '{
    "tag": "my new tag",
    "webhook_id": "192846273860294839"
  }'
```

**レスポンス：**

```json
{
  "data": {
    "subscription_id": "1976325569252868096",
    "event_type": "ProfileBioUpdate",
    "filter": {
      "user_id": "123456789"
    },
    "created_at": "2025-10-09T16:35:08.000Z",
    "updated_at": "2025-10-10T17:10:58.000Z",
    "tag": "my new tag",
    "webhook_id": "192846273860294839"
  },
  "meta": {
    "total_subscriptions": 1
  }
}
```
