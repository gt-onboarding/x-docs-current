---
title: クイックスタート
sidebarTitle: クイックスタート
keywords: ["activity API クイックスタート", "X Activity API クイックスタート", "activity クイックスタート", "activity チュートリアル", "activity ガイド"]
---

このガイドでは、X Activity API エンドポイントを使用してイベントを購読し、受信する方法を説明します。通常、次の 3 つの手順で構成されます。

1. フィルタリングしたいイベントの対象となるユーザーの User ID を特定する
2. そのユーザーに対して、フィルタリングしたいイベント種別のサブスクリプションを作成する
3. Webhook または永続的な HTTP ストリーミング接続を使用してイベントを受信する

<div id="getting-user-ids">
  ## ユーザーIDの取得
</div>

サブスクリプションを作成する前に、絞り込み対象とするアカウントのユーザーIDを知っておく必要があります。この例では、XDevelopers のハンドルを使用します。ユーザーIDを調べる方法はいくつかあり、たとえば次のとおりです。

**ユーザー名からユーザーIDを調べる：**

```bash
curl -H "Authorization: Bearer YOUR_BEARER_TOKEN" "https://api.x.com/2/users/by/username/xdevelopers"
```

**自分のユーザーIDを取得する:**

```bash
curl -H "Authorization: Bearer YOUR_BEARER_TOKEN" https://api.x.com/2/users/me
```

両方のエンドポイントは、`id` フィールドを含むユーザー情報を返し、この `id` をサブスクリプションフィルターで利用できます。以下に JSON レスポンスの例を示します。

```json
{
    "data": {
        "id": "2244994945",
        "name": "Developers",
        "username": "XDevelopers"
    }
}
```


<div id="creating-a-subscription">
  ## サブスクリプションの作成
</div>

次のステップはサブスクリプションを作成することです。この例では、XDevelopers の自己紹介文の更新イベントを購読します。そのために、JSON 本文内で `user_id` と `event_type` を渡します。このケースでは、`event_type` は `ProfileBioUpdate` です。

ここでは、X Developer のユーザー ID `2244994945` と、任意のタグを渡します。

```json
{
  "event_type": "ProfileBioUpdate",
  "filter": {
    "user_id": "2244994945"
  },
  "tag": "Xdevelopers' bio updates"
}
```

XAA に関連するすべてのエンドポイントでは、認可のために developer portal で取得した [Bearer Token](https://docs.x.com/fundamentals/authentication/oauth-2-0/overview#bearer-token-also-known-as-app-only) を使用します。

```bash
curl -H "Authorization: Bearer YOUR_BEARER_TOKEN" \
  https://api.x.com/2/activity/subscriptions \
  -X POST \
  -d '{
    "event_type": "ProfileBioUpdate",
    "filter": {
      "user_id": "2244994945"
    },
    "tag": "Xdevelopers' bio updates"
  }'
```

リクエストが正常に完了すると、サブスクリプションが作成されます。

```json
{
  "data":[
    {
      "created_at":"2025-10-09T16:35:08.000Z",
      "event_type":"ProfileBioUpdate",
      "filter":{
        "user_id":"2244994945"
      },
      "subscription_id":"1976325569252868096",
      "tag": "Xdevelopersのプロフィール更新",
      "updated_at":"2025-10-09T16:35:08.000Z"
    }
  ],
  "meta": {
    "total_subscriptions": 1
  }
}
```


<div id="getting-the-events">
  ## イベントの取得
</div>

サブスクリプションを作成したら、[webhooks](https://docs.x.com/x-api/webhooks/introduction) または常時接続の HTTP ストリームを介してイベントを受信できます。この例では、常時接続の HTTP ストリームを開きます。

```bash
curl -H "Authorization: Bearer YOUR_BEARER_TOKEN" https://api.x.com/2/activity/stream
```

Xdevelopers のアカウントがプロフィールの自己紹介文を更新すると、そのイベントがストリーム経由で送信されます：

```json
{
  "data": {
    "filter": {
      "user_id": "2244994945"
    },
    "event_type": "ProfileBioUpdate",
    "tag": "Xdevelopers' bio updates",
    "payload": {
      "before": "Mars & Cars",
      "after": "Mars, Cars & AI"
    }
  }
}
```


<div id="subscription-management">
  ## サブスクリプション管理
</div>

X Activity API は、標準的なCRUD操作を通じてサブスクリプションを管理するためのエンドポイントを提供します。

<div id="create-subscription">
  ### サブスクリプションの作成
</div>

イベントを受信するための新しいサブスクリプションを作成します。

```bash
curl -H "Authorization: Bearer YOUR_BEARER_TOKEN" \
  -X POST \
  https://api.x.com/2/activity/subscriptions \
  -d '{
    "event_type": "ProfileBioUpdate",
    "filter": {
      "user_id": "123456789"
    },
    "tag": "my bio updates",
    "webhook_id": "1976325569252868099"
  }'
```

**注意:**

* `tag` フィールドは任意です。配信時にイベントを識別するために使用できます。
* `webhook_id` フィールドも任意です。webhook のセットアップ方法については、[webhook ドキュメント](https://docs.x.com/x-api/webhooks/introduction) を参照してください。`webhook_id` が指定されている場合、ストリームが開いているときは、そのストリームへの配信に加えて、指定された webhook にもイベントが配信されます。

**レスポンス:**

```json
{
  "data": {
    "subscription_id": "1976325569252868096",
    "event_type": "ProfileBioUpdate",
    "filter": {
      "user_id": "123456789"
    },
    "created_at": "2025-10-09T16:35:08.000Z",
    "updated_at": "2025-10-09T16:35:08.000Z",
    "tag": "私のプロフィール更新",
    "webhook_id": "1976325569252868099"
  }
}
```


<div id="list-subscriptions">
  ### サブスクリプションの一覧
</div>

アプリのすべての有効なサブスクリプションを取得します。

```bash
curl -H "Authorization: Bearer YOUR_BEARER_TOKEN" \
  https://api.x.com/2/activity/subscriptions
```

**レスポンス：**

```json
{
  "data": [
    {
      "subscription_id": "1976325569252868096",
      "event_type": "ProfileBioUpdate",
      "filter": {
        "user_id": "123456789"
      },
      "created_at": "2025-10-09T16:35:08.000Z",
      "updated_at": "2025-10-10T03:50:59.000Z",
    },
    {
      "subscription_id": "1976325569252868097",
      "event_type": "ProfilePictureUpdate",
      "filter": {
        "user_id": "987654321"
      },
      "created_at": "2025-10-08T14:35:08.000Z",
      "updated_at": "2025-10-08T14:35:08.000Z",
    }
  ],
  "meta": {
    "total_subscriptions": 2
  }
}
```


<div id="delete-subscription">
  ### サブスクリプションを削除する
</div>

サブスクリプションを削除するには、次のようにします。

```bash
curl -H "Authorization: Bearer YOUR_BEARER_TOKEN" \
  -X DELETE \
  https://api.x.com/2/activity/subscriptions/1976325569252868096
```

**レスポンス:**

```json
{
  "data": {
    "deleted": true
  },
  "meta": {
    "total_subscriptions": 0
  }
}
```

`total_subscriptions` は、削除操作の後にアプリに関連付けられている残りのサブスクリプション数を示します。


<div id="update-subscription">
  ### サブスクリプションの更新
</div>

PUT エンドポイントを使用すると、サブスクリプションの配信方法またはタグを更新できます。

`filter` または `event_type` を更新する場合は、既存のサブスクリプションを削除して新しいサブスクリプションを追加する必要があります。

```
curl -H "Authorization: Bearer YOUR_BEARER_TOKEN" \
  -X PUT \
  https://api.x.com/2/activity/subscriptions/1976325569252868096 \
  -d '{
    "tag": "my new tag",
    "webhook_id": "192846273860294839"
  }'
```

**レスポンス:**

```json
{
  "data": {
    "subscription_id": "1976325569252868096",
    "event_type": "ProfileBioUpdate",
    "filter": {
      "user_id": "123456789"
    },
    "created_at": "2025-10-09T16:35:08.000Z",
    "updated_at": "2025-10-10T17:10:58.000Z",
    "tag": "my new tag",
    "webhook_id": "192846273860294839"
  },
  "meta": {
    "total_subscriptions": 1
  }
}
```
