---
title: v1 から v2 へ
sidebarTitle: v1 から v2 へ
keywords: ["v1.1 から v2 への移行", "List ルックアップの移行", "List ルックアップを移行する", "Standard v1.1 から v2 への List ルックアップ移行", "v1 から v2 への List ルックアップ移行", "移行ガイド"]
---

import { Button } from '/snippets/ja/button.mdx';

<div id="list-lookup-standard-v11-compared-to-x-api-v2">
  ### リストルックアップ: Standard v1.1 と X API v2 の比較
</div>

標準 v1.1 の [GET lists/show](https://developer.x.com/en/docs/twitter-api/v1/accounts-and-users/create-manage-lists/api-reference/get-lists-show) と [GET lists/ownerships](https://developer.x.com/en/docs/twitter-api/v1/accounts-and-users/create-manage-lists/api-reference/get-lists-ownerships) エンドポイントをすでに利用している場合、このガイドの目的は、標準 v1.1 と X API v2 のリストルックアップ エンドポイントの共通点と相違点を理解できるようにすることです。

* **類似点**
  * 認証方法
  * レート制限
* **相違点**
  * エンドポイント URL
  * アプリとプロジェクトの要件
  * 1 リクエストあたりのデータオブジェクト数の上限
  * レスポンスデータの形式
  * リクエストパラメーター

<div id="similarities">
  #### 類似点
</div>

**認証**

どちらのバージョンのエンドポイントも、[OAuth 1.0a User Context](/ja/resources/fundamentals/authentication#oauth-1-0a-2) と [App only](/ja/resources/fundamentals/authentication#app-only-authentication-and-oauth-2-0-bearer-token) の両方に対応しています。したがって、以前に標準 v1.1 のリスト参照（List lookup）エンドポイントのいずれかを使用していた場合、X API v2 のバージョンへ移行しても、同じ認証方式を引き続き使用できます。

利用している認証ライブラリ／パッケージによっては、App only 認証が最も手軽に始められる方法となる場合が多く、シンプルなリクエストヘッダーで設定できます。App only のアクセストークンの生成方法については、[この App only ガイド](/ja/resources/fundamentals/authentication#using-and-generating-an-app-only-bearer-token)を参照してください。

**レート制限**

|     |     |
| :--- | :--- |
| **Standard v1.1** | **X API v2** |
| /1.1/lists/show.json<br /><br />OAuth 1.0a User Context で 15 分間あたり 75 件のリクエスト<br /><br />App only で 15 分間あたり 75 件のリクエスト | /2/lists/:id<br /><br />OAuth 1.0a User Context で 15 分間あたり 75 件のリクエスト<br /><br />OAuth 2.0 Authorization Code with PKCE で 15 分間あたり 75 件のリクエスト |
| /1.1/lists/ownerships.json<br /><br />OAuth 1.0a User Context で 15 分間あたり 15 件のリクエスト<br /><br />App only で 15 分間あたり 15 件のリクエスト | /2/users/:id/owned&#95;lists<br /><br />OAuth 1.0a User Context で 15 分間あたり 15 件のリクエスト<br /><br />OAuth 2.0 Authorization Code with PKCE で 15 分間あたり 15 件のリクエスト<br /><br />App only で 15 分間あたり 15 件のリクエスト |

<div id="differences">
  #### 違い
</div>

**エンドポイント URL**

* Standard v1.1 エンドポイント:
  * GET https://api.x.com/1.1/lists/show.json
    (指定したリストをルックアップ)
  * GET https://api.x.com/1.1/lists/ownerships.json
    (指定したユーザーが所有するリストをルックアップ)
* X API v2 エンドポイント:
  * GET https://api.x.com/2/lists/:id
    (指定したリストをルックアップ)

  * GET https://api.x.com/2/users/:id/owned&#95;lists
    (指定したユーザーが所有するリストをルックアップ)

**アプリとプロジェクトの要件**

X API v2 エンドポイントでは、リクエストを認証する際に、[developer App](/ja/resources/fundamentals/developer-apps) のうち、[Project](/ja/resources/fundamentals/projects) に関連付けられているものの認証情報を使用する必要があります。すべての X API v1.1 エンドポイントでは、スタンドアロンのアプリ、またはプロジェクトに関連付けられたアプリのいずれの認証情報も使用できます。

**リクエストごとのデータオブジェクトの上限**

Standard v1.1 の /lists/ownerships エンドポイントでは、1 回のリクエストで最大 1000 個のリストを返すことができます。新しい v2 エンドポイントでは、1 回のリクエストで最大 100 個のリストを返すことができます。デフォルトでは 100 個のユーザーオブジェクトが返されます。結果数を変更するには、1〜100 の数値を指定したクエリパラメータ max&#95;results= を渡す必要があります。その後、レスポンスペイロードで返される next&#95;token を、次のリクエストの pagination&#95;token クエリパラメータに渡すことができます。

**レスポンスデータ形式**

Standard v1.1 と X API v2 のエンドポイントバージョンの最大の違いの 1 つは、ペイロードにどのフィールドを返すかをどのように選択するかです。

Standard エンドポイントでは、多くのレスポンスフィールドがデフォルトで返され、そのうえで、どの追加フィールドまたはフィールド群をペイロードに含めるかを指定するパラメータを使用できます。

X API v2 バージョンでは、デフォルトで返されるのはリストの id と name フィールドだけです。追加のフィールドやオブジェクトをリクエストするには、[fields](/ja/x-api/fundamentals/fields) と [expansions](/ja/x-api/fundamentals/expansions) パラメータを使用する必要があります。このエンドポイントからリクエストした任意のリストフィールドは、プライマリのリストオブジェクト内で返されます。展開されたポストまたはユーザーオブジェクトとそのフィールドは、レスポンス内の includes オブジェクトで返されます。その後、ユーザーおよび展開されたポストオブジェクトの両方に含まれる ID を照合することで、任意の展開オブジェクトをリストオブジェクトに紐付けることができます。 

以下は、取りうるリストフィールドと expansions の例です:

* created&#95;at

* follower&#95;count

* member&#95;count

* owner&#95;id

* description

* private

|     |     |
| :--- | :--- |
| **Endpoint** | **Expansion** |
| /2/lists/:id | owner&#95;id |
| /2/users/:id/owned&#95;lists | owner&#95;id |

これらの新しいパラメータについては、それぞれのガイドや、[fields と expansions の使い方](/ja/x-api/fundamentals/data-dictionary#how-to-use-fields-and-expansions) に関するガイドをお読みいただくことをおすすめします。 

また、Standard v1.1 のフィールドを新しい v2 のフィールドにマッピングするのに役立つ [データ形式のマイグレーションガイド](/ja/x-api/migrate/data-format-migration) も用意しています。このガイドでは、特定のフィールドを返すために v2 のリクエストで指定する必要がある、具体的な expansions および fields パラメータも確認できます。 

特定のフィールドのリクエスト方法の変更に加えて、X API v2 では、[Post](/ja/x-api/fundamentals/data-dictionary#tweet) および [user](/ja/x-api/fundamentals/data-dictionary#user) オブジェクトを含む、API が返すオブジェクトに対して新しい JSON 設計も導入しています。

* JSON のルートレベルでは、Standard エンドポイントは Post オブジェクトを statuses 配列で返すのに対し、X API v2 は data 配列で返します。 

* Retweeted および Quoted の「statuses」を参照する代わりに、X API v2 の JSON では Retweeted および Quoted ポストを参照します。contributors や user.translator&#95;type など、多くのレガシーおよび非推奨フィールドは削除されます。 

* Post オブジェクトでの favorites と user オブジェクトでの favourites の両方を使用する代わりに、X API v2 では like という用語を使用します。 

* X では、値を持たない JSON 値（たとえば null）はペイロードに書き込まないという規約を採用しています。Post および user の属性は、非 null の値を持つ場合にのみ含まれます。

**リクエストパラメータ**

次の Standard v1.1 リクエストパラメータには、X API v2 での対応があります:

**ID によるリストルックアップ**

|     |     |
| :--- | :--- |
| **Standard v1.1** | **X API v2** |
| list&#95;id | id  |
| slug | 対応なし |
| owner&#95;screen&#95;name | 対応なし |
| owner&#95;id | expansions/fields パラメータでリクエスト |

**ユーザー所有リストのルックアップ**

|     |     |
| :--- | :--- |
| **Standard v1.1** | **X API v2** |
| user&#95;id | id  |
| screen&#95;name | 対応するパラメータなし |
| count | max&#95;results |
| cursor | pagination&#95;token |