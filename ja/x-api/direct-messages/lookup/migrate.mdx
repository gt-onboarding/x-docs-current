---
title: 移行ガイド
sidebarTitle: 移行ガイド
keywords: ["ダイレクトメッセージ移行", "DM 移行", "v1.1 から v2 への DM ルックアップ", "DM 移行ガイド", "DM ルックアップの移行"]
---

import { Button } from '/snippets/ja/button.mdx';

<div id="comparing-v11-and-v2-direct-message-event-lookup-endpoints">
  ## v1.1 と v2 のダイレクトメッセージイベント参照エンドポイントの比較
</div>

Direct Messages エンドポイントの v1.1 と v2 の両方には、ダイレクトメッセージイベントを参照するためのメソッドがあります。このガイドでは、それらの違いを説明し、v2 への移行に関する情報を提供します。 

2 つのバージョンの大きな違いは、v1.1 が 1 対 1 の会話のみをサポートするのに対し、v2 ではグループ会話のサポートが追加されている点です。その結果として、v1.1 がサポートするのは「メッセージ作成」イベントのみである一方、v2 では参加者の会話への参加や退出に関連するイベントもサポートします。実際、v2 における重要な更新として、dm&#95;conversations がコア API オブジェクトとして確立されています。   

v1.1 では、ダイレクトメッセージを取得するためのエンドポイントが 2 つあります（繰り返しになりますが、v1.1 でサポートされるイベントタイプは新しいメッセージのみです）。

* GET direct&#95;messages/events/show - ID で単一のイベントを取得します。 

* GET direct&#95;messages/events/list - 認証済みユーザーが送受信した 1 対 1 のダイレクトメッセージを、最大 30 日分まで取得します。このメソッドでは、グループ会話のメッセージを取得できない点に注意してください。 

この v2 リリースでは、ダイレクトメッセージ会話イベントを取得するための GET メソッドが 3 つあります。 

* **GET /2/dm&#95;conversations/with/:participant&#95;id/dm&#95;events** - 1 対 1 の会話に関連付けられたダイレクトメッセージイベントを取得します。:participant&#95;id パスパラメーターは、このリクエストを行う認証済みユーザーと会話しているアカウントのユーザー ID です。 

* **GET /2/dm&#95;conversations/:dm&#95;conversation&#95;id/dm&#95;events** - :dm&#95;conversation&#95;id パスパラメーターで示される特定の会話 ID に関連付けられたダイレクトメッセージイベントを取得します。このメソッドは、1 対 1 およびグループ会話の両方をサポートします。 

* **GET /2/dm&#95;events** - ユーザーに関連付けられたダイレクトメッセージイベントを、1 対 1 およびグループ会話の両方を含めて取得します。最大 30 日前までのイベントが利用可能です。  

重要な点として、会話 ID とイベント ID は、X プラットフォームの v1.1 と v2 の両バージョン間で共有されています。これは、両バージョンを組み合わせて使用できることを意味します。たとえば、Direct Messages v1.1 エンドポイントには、単一イベントの取得およびイベントの削除のためのメソッドがありますが、これらはまだ v2 では利用できません。ID が v1.1 と v2 の間で共通であるため、v2 から提供された ID に基づいて v1.1 リクエストを行うことも、X アプリケーション上の会話 URL に表示される会話 ID を参照してリクエストを行うこともできます。

次の表では、v1.1 と v2 のダイレクトメッセージイベント参照エンドポイントの基本的な側面を比較します。ここで共有している X API v2 の特性は、すべてのダイレクトメッセージ参照エンドポイントに共通です。

|     |     |     |
| :--- | :--- | :--- |
| **説明** | **Standard v1.1** | **X API v2** |
| ホストドメイン | https://api.x.com | https://api.x.com |
| エンドポイントのルートパス | [/1.1/direct&#95;messages](https://api.x.com/1.1/direct_messages) | [/2/dm&#95;conversations](https://api.x.com/2/users/:id/dm_conversations)<br /><br />ダイレクトメッセージの会話が、基本的な API オブジェクトとして導入されています。<br /><br />これらのエンドポイントは、MessageCreate、ParticipantsJoin、ParticipantsLeave イベントを取得します。 |
| サポートされる HTTP メソッド | GET | GET |
| グループダイレクトメッセージのサポート |     | ✔   |
| サポートされるイベントタイプ | message&#95;create | MessageCreate, ParticipantsJoin, ParticipantsLeave |
| [認証](/ja/resources/fundamentals/authentication) | OAuth 1.0a User Context | OAuth 1.0a User Context<br /><br />OAuth 2 User Context (scopes: dm.read, tweet.read, user.read) |
| X API v2 の[プロジェクト](/ja/resources/fundamentals/projects)に関連付けられた [developer App](/ja/resources/fundamentals/authentication) の認証情報の使用が必要 |     | ✔   |
| 既定のリクエスト[レート制限](/ja/x-api/fundamentals/rate-limits)*  <br />*すべてのリクエストにユーザートークンが必要 |     | GET リクエスト: 15 分あたり 300 リクエスト<br /><br />レート制限は 3 つすべてのエンドポイントに対して合算で適用されます |

次の表では、v2 の GET メソッドを v1.1 と比較します。これらの v2 の機能では、グループ会話のサポートにより利用可能な機能が拡張されている点に注意してください。 

**特定の 1 対 1 会話内のすべてのメッセージを取得**

***

パス: GET /2/dm&#95;conversations/with/:participant&#95;id/dm&#95;events

|     |     |     |
| :--- | :--- | :--- |
| **Description** | **Standard v1.1** | **X API v2** |
| Endpoint path | GET <br /><br />/1.1/direct&#95;messages/events/list | GET /2/dm&#95;conversations/with/:participant&#95;id/dm&#95;events |
| 利用可能なイベント履歴の期間 | 30 日間 | 制限なし |
| Default request [rate limits](/ja/x-api/fundamentals/rate-limits) | 15 requests per 15 minutes | 300 requests per 15 minutes  <br />レート制限は 3 つの GET エンドポイントすべてに対して合算で適用されます |

**会話 ID ごとのすべてのメッセージを取得**

Path: GET /2/dm&#95;conversations/:dm&#95;conversation&#95;id/dm&#95;events

|     |     |     |
| :--- | :--- | :--- |
| **Description** | **Standard v1.1** | **X API v2** |
| Endpoint path | サポートされていません。v1.1 では 1 対 1 の会話からのメッセージのみを返すことができ、会話 ID ごとにイベントを取得する機能はありません。 | GET /2/dm&#95;conversations/:dm&#95;conversation&#95;id/dm&#95;events |
| 利用可能なイベント履歴の期間 | 30 日間 | 制限なし |
| グループ会話のサポート |     | ✔   |
| Default request [rate limits](/ja/x-api/fundamentals/rate-limits) | 15 requests per 15 minutes | 300 requests per 15 minutes  <br />レート制限は 3 つの GET エンドポイントすべてに対して合算で適用されます |

**認証済みユーザーの会話（1 対 1 およびグループ会話）のすべてのイベントを取得**

Path: GET /2/dm&#95;events

|     |     |     |
| :--- | :--- | :--- |
| **Description** | **Standard v1.1** | **X API v2** |
| Endpoint path | GET /1.1/direct&#95;messages/events/list  <br />  <br />v1.1 では 1 対 1 の会話からのメッセージのみを返すことができます。 | GET /2/dm&#95;events |
| 利用可能なイベント履歴の期間 | 30 日間 | 30 日間 |
| グループ会話のサポート |     | ✔   |
| Default request [rate limits](/ja/x-api/fundamentals/rate-limits) | 15 requests per 15 minutes | 300 requests per 15 minutes  <br />レート制限は 3 つの GET エンドポイントすべてに対して合算で適用されます |