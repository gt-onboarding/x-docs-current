---
title: 一貫性
keywords: ["一貫性", "API の一貫性", "一貫した API", "一貫したエンドポイント", "API 設計", "エンドポイントの一貫性"]
---

<div id="consistency-across-the-x-api-v2-endpoints">
  ## X API v2 エンドポイント間の一貫性
</div>

新しい X API v2 の主な特徴の 1 つは、エンドポイント間で仕様が一貫していることです。これは、返されるオブジェクトや機能、API の動作が、類似するエンドポイント間で共通化されていることを意味します。

すべてのエンドポイントにおいて、次の要素は同一です。

<div id="path-naming">
  ### パスの命名
</div>

パスの命名には常にエンドポイントの[バージョン](/ja/x-api/fundamentals/versioning)が含まれ、その後に**リソース**が続きます。そこから先には、直前のリソースに関連する**ID**、どのデータを返すかを決定するのに役立つ**選択動詞**（例: `search` や `sample`）、データの配信方法を決定するのに役立つ**配信動詞**（例: `stream`）、または主要なリソースと**関係**を持つその他のリソース（例: `/user/12/tweets`）を含めることができます。最後に、そのエンドポイントがクエリパラメータを受け付ける場合は、末尾に**クエリパラメータ**を追加できます。

これらのパスおよびクエリの要素がどのように構成されるかの例を以下に示します。

`/version/resource/id?param1=value&param2=value /version/resource/delivery/selection?param1=value&param2=value`

実際のリクエスト例:

`/2/tweets/1067094924124872705?expansions=attachments.media_keys&tweet.fields=author_id /2/users/2244994945?user.fields=created_at,description /2/tweets/search/stream /2/tweets/search/recent?query=snow`

<div id="json-schema">
  ### JSON Schema
</div>

リクエストへのレスポンスは [JSON Schema](http://json-schema.org/) を使用して定義されています。これは、リクエストが一貫してオブジェクトの集合を配列として返し、その各要素が ID を持つことを意味します。リクエストが、ID をキーとするマップを返すことはありません。

<div id="response-object-and-parameters">
  ### レスポンスオブジェクトとパラメータ
</div>

デフォルトで返されるオブジェクトは、そのオブジェクトタイプに属する各エンドポイントで共通です。

* `id` オブジェクトは常に文字列です。
* パラメータとレスポンスフィールドは、一貫してアメリカ英語のスペリングを使用します。
* 値がないフィールドは空か、返されません。
* `entities` オブジェクトには、ポストのテキストから取得されたエンティティのみが含まれます。これには `urls`、`hashtags`、`mentions`、`cashtags` が含まれます。
* `media_keys` および `poll_ids` フィールドを含む、カードに関するすべての情報は `attachments` オブジェクトで返されます。

以下は、[単一ポスト取得](/ja/x-api/posts/post-lookup-by-post-id) エンドポイントからのレスポンスオブジェクトの例です（[tweet.fields](/ja/x-api/fundamentals/data-dictionary#tweet) パラメータを `author_id`、`entities` に設定した場合）:

```json
{
   "data": {
       "id": "1278747501642657792",
       "text": "TwitterのDeveloper Labsが開始されてから1年が経ちました。\n\n次世代の#TwitterAPI（まもなく公開）の構築を進める中で、私たちが学び、変更してきたことをご覧ください。https://t.co/WvjuEWCa6G",
       "author_id": "2244994945",
       "entities": {
           "urls": [
               {
                   "start": 188,
                   "end": 211,
                   "url": "https://t.co/WvjuEWCa6G",
                   "expanded_url": "https://blog.x.com/developer/en_us/topics/tools/2020/a-year-with-twitter-developer-labs.html",
                   "display_url": "blog.x.com/developer/en_u…",
                   "images": [
                       {
                           "url": "https://pbs.twimg.com/news_img/1278747527043362816/7HQRkQeV?format=jpg&name=orig",
                           "width": 1600,
                           "height": 600
                       },
                       {
                           "url": "https://pbs.twimg.com/news_img/1278747527043362816/7HQRkQeV?format=jpg&name=150x150",
                           "width": 150,
                           "height": 150
                       }
                   ],
                   "status": 200,
                   "title": "A year with Twitter Developer Labs: What we've learned and changed",
                   "description": "Labs has been invaluable in helping us understand what works well and what doesn’t, what you liked and what you didn’t.",
                   "unwound_url": "https://blog.x.com/developer/en_us/topics/tools/2020/a-year-with-twitter-developer-labs.html"
               }
           ],
           "hashtags": [
               {
                   "start": 106,
                   "end": 117,
                   "tag": "TwitterAPI"
               }
           ]
       }
   }
}
```

<div id="authentication">
  ### 認証
</div>

すべての X API v2 エンドポイントでは認証が必要です。その多くは [OAuth 2.0 Bearer Token](/ja/resources/fundamentals/authentication#oauth-2-0) 方式を受け付けており、エンドポイントへのリクエストに Bearer Token を含めることで、リクエストを正常に実行できます。

他のユーザーに代わってデータを作成・操作・取得するための認可が必要なエンドポイントには、[OAuth 1.0a User Context](/ja/resources/fundamentals/authentication) を使用します。これは、[開発者アプリ](/ja/resources/fundamentals/authentication#obtaining-access-tokens-using-3-legged-oauth-flow) の [API キーとトークン](/ja/resources/fundamentals/authentication#api-key-and-secret) に加えて、そのユーザーに代わってリクエストを行うために生成する、そのユーザー用の一組の [アクセストークン](/ja/resources/fundamentals/authentication#obtaining-access-tokens-using-3-legged-oauth-flow) を提供することを意味します。[3-legged OAuth フロー](/ja/resources/fundamentals/authentication#obtaining-access-tokens-using-3-legged-oauth-flow) を利用すると、アクセストークンを取得できます。この認可ヘッダーを自動的に構築する [ツールまたはライブラリ](/ja/x-api/tools-and-libraries/overview) を使用してください。

認証の詳細については、[認証](/ja/resources/fundamentals/authentication) ドキュメントを参照してください。

***

<div id="fields">
  ### フィールド
</div>

各エンドポイントで返されるオブジェクトは必要最小限に抑えられています。開発者が API から受け取るレスポンスをより柔軟にカスタマイズできるようにするために、[`fields`](/ja/x-api/fundamentals/fields) パラメーターを使用して、必要なフィールドをリクエストします。フィールドはエンドポイント間で一貫しています。Post オブジェクトは、Post オブジェクトが返されるすべてのエンドポイントで同じフィールドを返します。同じフィールドセットを、類似したエンドポイント間でクエリできます。

たとえば、同じ Post のフィールドは、[Posts lookup](/ja/x-api/posts/lookup/introduction) と、[Users lookup](/ja/x-api/users/lookup/introduction) における展開されたピン留め Post でクエリできます。

***

<div id="expansions">
  ### Expansions
</div>

適切な場合、[expansions](/ja/x-api/fundamentals/expansions) は、すべてのネストされた id フィールド（例: `author_id` など、`*_id` という名前のすべてのフィールド）で利用できます。`expansions` は、現在のオブジェクトのトップレベル識別子ではない id を持つすべてのフィールドにも指定できます。たとえば、[Posts lookup](/ja/x-api/posts/lookup/introduction) では、ポストが現在のオブジェクトであり、フィールド `id` がトップレベル識別子です。`author_id` や `referenced_tweets.id` フィールドは、これらのカンマ区切りの値を `expansions` パラメータに追加することで、完全なユーザーまたはポストオブジェクトとして展開して取得できます。

これらのフィールドに関連してお気付きの[不整合があればご報告](https://twitterdevfeedback.uservoice.com/)ください。