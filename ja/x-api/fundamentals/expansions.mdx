---
title: Expansions
keywords: ["expansions", "オブジェクトの展開", "オブジェクト展開", "入れ子になったオブジェクト", "関連オブジェクト", "ユーザーの展開", "メディアの展開", "ポストの展開"]
---

expansions を使用すると、開発者はペイロード内で参照されているオブジェクトを展開して取得できます。展開可能なオブジェクトは ID で参照されます。たとえば、[Posts lookup](/ja/x-api/posts/lookup/introduction) のペイロードで返される `referenced_tweets.id` および `author_id` フィールドは、完全なオブジェクトに展開できます。特定のポストを投稿したユーザーや、そのポストに含まれているメディア、投票、場所に関するフィールドを取得したい場合は、そのデータをレスポンスで受け取るために、リクエスト内で関連する `expansions` クエリパラメータを指定する必要があります。現在、ポスト、ユーザー、List、Space、およびダイレクトメッセージイベントオブジェクトを返す v2 エンドポイントは、すべて expansions をサポートしています（以下の例を参照）。

リクエストに `expansions` を含めると、その展開されたオブジェクトのデフォルトのフィールドが同じレスポンス内に含まれます。これにより、別々のリクエストを行うことなく、同じレスポンスで追加のデータを取得できます。展開されたオブジェクトに関連する追加の[フィールド](/ja/x-api/fundamentals/fields)をリクエストしたい場合は、その展開されたオブジェクトに対応するフィールドパラメータと、レスポンスで受け取りたいフィールドのカンマ区切りリストを指定できます。なお、フィールドはクエリで指定した順序で返されるとは限りません。

以下のポストのペイロードには、展開可能な関連オブジェクトを参照する ID が含まれています。たとえば、ポストを投稿したユーザーの `author_id`、*参照先*ポストの `id`、およびメディア添付用の `media_key` などです。

```json
{
    "data": {
        "attachments": {
            "media_keys": ["16_1211797899316740096"]
        },
        "author_id": "2244994945",
        "id": "1212092628029698048",
        "referenced_tweets": [
            {
                "type": "replied_to",
                "id": "1212092627178287104"
            }
        ],
        "text": "私たちは、APIの最高の未来バージョンは、皆さんと一緒に構築することから生まれると信じています。Twitterプラットフォームで開発するすべての人々と過ごす、また素晴らしい一年に乾杯。新年も皆さんと一緒に働き続けることを楽しみにしています。https://t.co/yvxdK6aOo2"
    }
}
```

<div id="available-expansions-for-post-payloads">
  ### ポストペイロードで利用可能な expansions
</div>

| Expansion                      | Description                                                                        |
|:--------------------------------|:------------------------------------------------------------------------------------|
| `author_id`                    | ポストの投稿者を表すユーザーオブジェクトを返します                               |
| `referenced_tweets.id`         | このポストが参照しているポストオブジェクト（リポスト、引用ポスト、返信のいずれか）を返します |
| `edit_history_tweet_ids`       | ポストの編集履歴に含まれるポストオブジェクトを返します                        |
| `in_reply_to_user_id`          | このリクエスト対象のポストが返信しているポストの投稿者を表すユーザーオブジェクトを返します |
| `attachments.media_keys`       | ポストに含まれる画像、動画、GIF を表すメディアオブジェクトを返します  |
| `attachments.poll_ids`         | ポストに含まれる投票に関するメタデータを含む投票オブジェクトを返します        |
| `geo.place_id`                 | ポストでタグ付けされた位置情報に関するメタデータを含む場所オブジェクトを返します     |
| `entities.mentions.username`   | ポスト内でメンションされているユーザーを表すユーザーオブジェクトを返します                          |
| `referenced_tweets.id.author_id` | 参照されているポストの投稿者を表すユーザーオブジェクトを返します                      |

<div id="available-expansion-for-user-payloads">
  ### ユーザーペイロードで利用可能なエクスパンション
</div>

| Expansion          | Description                                               |
|:--------------------|:-----------------------------------------------------------|
| `pinned_tweet_id`  | ユーザープロフィールの最上部にピン留めされているポストを表すポストオブジェクトを返します |

<div id="available-expansions-for-direct-message-event-payloads">
  ### ダイレクトメッセージイベントペイロードで利用可能なexpansions
</div>

| Expansion                | Description                                                              |
|:--------------------------|:--------------------------------------------------------------------------|
| `attachments.media_keys` | ダイレクトメッセージに添付されたメディアオブジェクトを返します             |
| `referenced_tweets.id`   | ダイレクトメッセージ内で参照されているポストオブジェクトを返します            |
| `sender_id`              | ダイレクトメッセージの作成者であり、会話に参加者を招待したユーザーを表す User オブジェクトを返します |
| `participant_ids`        | 会話に参加または退出した参加者を表す User オブジェクトを返します |

<div id="available-expansions-for-spaces-payloads">
  ### Spaces ペイロードで利用可能な expansions
</div>

| Expansion          | Description                                               |
|:--------------------|:-----------------------------------------------------------|
| `invited_user_ids` | 招待されたアカウントを表す User オブジェクトを返します |
| `speaker_ids`      | Space で発言したアカウントを表す User オブジェクトを返します |
| `creator_id`       | Space を作成したアカウントを表す User オブジェクトを返します |
| `host_ids`         | ホストに設定されたアカウントを表す User オブジェクトを返します |
| `topics_ids`       | 作成者によって設定されたトピックの説明を返します |

<div id="available-expansion-for-lists-payloads">
  ### リストのペイロードで利用可能な拡張
</div>

| Expansion   | Description                                                    |
|:-------------|:----------------------------------------------------------------|
| `owner_id`  | リストを作成および管理しているアカウントを表す User オブジェクトを返します |

<div id="expanding-the-media-object">
  ## メディアオブジェクトの拡張
</div>

次のリクエストでは、デフォルトのポストフィールドに加えて、`geo.place_id` の展開も含めるよう指定しています。

**サンプルリクエスト**

```
{`curl 'https://api.x.com/2/tweets/:ID?expansions=geo.place_id' --header 'Authorization: Bearer $ACCESS_TOKEN'`}
```

**レスポンスの例**

```
{`{
  "data": {
      "geo": {
          "place_id": "01a9a39529b27f36"
      },
      "id": "ID",
      "text": "Test"
  },
  "includes": {
      "places": [
          {
              "full_name": "Manhattan, NY",
              "id": "01a9a39529b27f36"
          }
      ]
  }
}`}

```

<div id="expanding-the-poll-object">
  ## Pollオブジェクトの展開
</div>

次のリクエストでは、デフォルトのポストフィールドに加えて `attachments.poll_ids` の expansion を含めるようにリクエストしています。

**サンプルリクエスト**

<CodeBlock language="bash">
  {`curl 'https://api.x.com/2/tweets/1199786642791452673?expansions=attachments.poll_ids' --header 'Authorization: Bearer $ACCESS_TOKEN'`}
</CodeBlock>

**サンプルレスポンス**

```
{`{
  "data": {
      "attachments": {
          "poll_ids": ["1199786642468413448"]
      },
      "id": "1199786642791452673",
      "text": "C#"
  },
  "includes": {
      "polls": [
          {
              "id": "1199786642468413448",
              "options": [
                  {
                      "position": 1,
                      "label": "“C Sharp”",
                      "votes": 795
                  },
                  {
                      "position": 2,
                      "label": ""Cハッシュタグ"",
                      "votes": 156
                  }
              ]
          }
      ]
  }
}`}
```

<div id="expanding-the-place-object">
  ## Place オブジェクトの展開
</div>

次のリクエストでは、デフォルトのポストフィールドに加えて `geo.place_id` を expansions として指定して取得しています。

**サンプルリクエスト**

<CodeBlock language="bash">
  {`curl 'https://api.x.com/2/tweets/:ID?expansions=geo.place_id' --header 'Authorization: Bearer $ACCESS_TOKEN'`}
</CodeBlock>

**サンプルレスポンス**

```s
{`{
  "data": {
      "geo": {
          "place_id": "01a9a39529b27f36"
      },
      "id": "ID",
      "text": "Test"
  },
  "includes": {
      "places": [
          {
              "full_name": "Manhattan, NY",
              "id": "01a9a39529b27f36"
          }
      ]
  }
}`}
```
