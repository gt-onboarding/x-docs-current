---
title: Expansions
keywords: ["expansions", "expand objects", "object expansion", "nested objects", "related objects", "expand users", "expand media", "expand tweets"]
---

expansions を使用すると、開発者はペイロード内で参照されているオブジェクトを展開できます。展開可能なオブジェクトは ID によって参照されます。たとえば、[Posts lookup](/ja/x-api/posts/lookup/introduction) のペイロードで返される `referenced_tweets.id` と `author_id` フィールドは、完全なオブジェクトへ展開できます。そのポストを投稿したユーザーに関連するフィールドや、そのポストに含まれているメディア、投票、場所に関連するフィールドをリクエストしたい場合は、レスポンスでそのデータを受け取るために、リクエスト内で関連する `expansions` クエリパラメータを指定する必要があります。現在、ポスト、ユーザー、リスト、Space、ダイレクトメッセージイベントオブジェクトを返す v2 エンドポイントは、すべて expansions をサポートしています（以下の例を参照してください）。

リクエストに expansion を含めると、その展開されたオブジェクトのデフォルトフィールドを同じレスポンス内に含めます。これにより、別々のリクエストを行うことなく、同じレスポンスで追加のデータを返すことができます。展開されたオブジェクトに関連する追加の[フィールド](/ja/x-api/fundamentals/fields)をリクエストしたい場合は、その展開対象オブジェクトに対応するフィールドパラメータと、レスポンスで受け取りたいフィールドのカンマ区切りリストを指定できます。なお、フィールドはクエリで指定した順序どおりに返されるとは限りません。

次のポストペイロードには、展開可能な関連オブジェクトの参照 ID が含まれており、ポストを投稿したユーザーの `author_id`、*参照されている* ポストの `id`、メディア添付用の `media_key` などがあります。

```json
{
    "data": {
        "attachments": {
            "media_keys": ["16_1211797899316740096"]
        },
        "author_id": "2244994945",
        "id": "1212092628029698048",
        "referenced_tweets": [
            {
                "type": "replied_to",
                "id": "1212092627178287104"
            }
        ],
        "text": "私たちは、APIの最高の未来バージョンは、皆さんと一緒に構築することから生まれると信じています。Twitterプラットフォームで開発するすべての人々と過ごす、また素晴らしい一年に乾杯。新年も皆さんと一緒に働き続けることを楽しみにしています。https://t.co/yvxdK6aOo2"
    }
}
```

<div id="available-expansions-for-post-payloads">
  ### ポストペイロードで使用可能なexpansions
</div>

| Expansion                      | 説明                                                                        |
|:--------------------------------|:------------------------------------------------------------------------------------|
| `author_id`                    | ポストの作成者を表すuserオブジェクトを返します                               |
| `referenced_tweets.id`         | このポストが参照しているポスト（リポスト、引用ポスト、または返信）を表すポストオブジェクトを返します |
| `edit_history_tweet_ids`       | ポストの編集履歴に含まれるポストオブジェクトを返します                        |
| `in_reply_to_user_id`          | このポストが返信している相手のポスト作成者を表すuserオブジェクトを返します |
| `attachments.media_keys`       | ポストに含まれる画像、動画、GIFを表すメディアオブジェクトを返します  |
| `attachments.poll_ids`         | ポストに含まれる投票のメタデータを含むpollオブジェクトを返します        |
| `geo.place_id`                 | ポストでタグ付けされた場所に関するメタデータを含むplaceオブジェクトを返します     |
| `entities.mentions.username`   | ポストでメンションされたユーザーを表すuserオブジェクトを返します                          |
| `referenced_tweets.id.author_id` | 参照されているポストの作成者を表すuserオブジェクトを返します                      |

<div id="available-expansion-for-user-payloads">
  ### ユーザーペイロードで利用可能な拡張
</div>

| Expansion          | Description                                               |
|:--------------------|:-----------------------------------------------------------|
| `pinned_tweet_id`  | ユーザーのプロフィールの先頭に固定されているポストを表す Post オブジェクトを返します |

<div id="available-expansions-for-direct-message-event-payloads">
  ### ダイレクトメッセージイベントペイロードで利用可能な expansions
</div>

| Expansion                | Description                                                              |
|:--------------------------|:--------------------------------------------------------------------------|
| `attachments.media_keys` | ダイレクトメッセージに添付された Media オブジェクトを返します             |
| `referenced_tweets.id`   | ダイレクトメッセージ内で参照された Post オブジェクトを返します            |
| `sender_id`              | ダイレクトメッセージの作成者および会話への参加を招待したユーザーを表す User オブジェクトを返します |
| `participant_ids`        | 会話に参加または退出したユーザーを表す User オブジェクトを返します |

<div id="available-expansions-for-spaces-payloads">
  ### Spaces のペイロードで利用可能な expansions
</div>

| Expansion          | Description                                               |
|:--------------------|:-----------------------------------------------------------|
| `invited_user_ids` | 招待されたアカウントを表す User オブジェクトを返します |
| `speaker_ids`      | Space 中に発言したアカウントを表す User オブジェクトを返します |
| `creator_id`       | Space を作成したアカウントを表す User オブジェクトを返します |
| `host_ids`         | ホストとして設定されたアカウントを表す User オブジェクトを返します |
| `topics_ids`       | 作成者によって設定されたトピックの説明を返します |

<div id="available-expansion-for-lists-payloads">
  ### List ペイロードで利用可能な Expansion
</div>

| Expansion   | Description                                                    |
|:-------------|:----------------------------------------------------------------|
| `owner_id`  | List を作成し管理しているアカウントを表す User オブジェクトを返します |

<div id="expanding-the-media-object">
  ## メディアオブジェクトの展開
</div>

次のリクエストでは、デフォルトのポストフィールドに加えて `geo.place_id` の expansion を含めるよう指定しています。

**サンプルリクエスト**

```
{`curl 'https://api.x.com/2/tweets/:ID?expansions=geo.place_id' --header 'Authorization: Bearer $ACCESS_TOKEN'`}
```

**レスポンス例**

```
{`{
  "data": {
      "geo": {
          "place_id": "01a9a39529b27f36"
      },
      "id": "ID",
      "text": "Test"
  },
  "includes": {
      "places": [
          {
              "full_name": "Manhattan, NY",
              "id": "01a9a39529b27f36"
          }
      ]
  }
}`}

```

<div id="expanding-the-poll-object">
  ## Pollオブジェクトの展開
</div>

次のリクエストでは、デフォルトのポストのフィールドに加えて Pollオブジェクトを含めるために、`attachments.poll_ids` のexpansionsを指定しています。

**サンプルリクエスト**

<CodeBlock language="bash">
  {`curl 'https://api.x.com/2/tweets/1199786642791452673?expansions=attachments.poll_ids' --header 'Authorization: Bearer $ACCESS_TOKEN'`}
</CodeBlock>

**サンプルレスポンス**

```
{`{
  "data": {
      "attachments": {
          "poll_ids": ["1199786642468413448"]
      },
      "id": "1199786642791452673",
      "text": "C#"
  },
  "includes": {
      "polls": [
          {
              "id": "1199786642468413448",
              "options": [
                  {
                      "position": 1,
                      "label": "“C Sharp”",
                      "votes": 795
                  },
                  {
                      "position": 2,
                      "label": ""Cハッシュタグ"",
                      "votes": 156
                  }
              ]
          }
      ]
  }
}`}
```

<div id="expanding-the-place-object">
  ## Place オブジェクトの展開
</div>

次のリクエストでは、デフォルトのポストのフィールドに加えて `geo.place_id` の expansion を含めるように指定しています。

**リクエスト例**

<CodeBlock language="bash">
  {`curl 'https://api.x.com/2/tweets/:ID?expansions=geo.place_id' --header 'Authorization: Bearer $ACCESS_TOKEN'`}
</CodeBlock>

**レスポンス例**

```s
{`{
  "data": {
      "geo": {
          "place_id": "01a9a39529b27f36"
      },
      "id": "ID",
      "text": "Test"
  },
  "includes": {
      "places": [
          {
              "full_name": "Manhattan, NY",
              "id": "01a9a39529b27f36"
          }
      ]
  }
}`}
```
