---
title: ポストを編集する
keywords: ["ポストを編集", "ポスト編集", "ポストの編集機能", "編集履歴", "ポストの編集履歴", "編集メタデータ", "編集可能時間", "編集済みポスト"]
---

<div id="introduction">
  # はじめに
</div>

X API v2 エンドポイントは、編集されたポストのメタデータを提供します。*ポストの編集* 機能は、2022 年 9 月 1 日に X 従業員を対象としたテストとして初めて導入されました。その日以降、対象となるポストは 30 分間、最大 5 回まで編集できます。*2022 年 9 月 29 日以降に作成されたすべてのポストのオブジェクト* には、そのポストが一度も編集されていなくても、ポスト編集メタデータが含まれます。ポストが編集されるたびに、新しいポスト ID が作成されます。ポストの編集履歴は、元の ID から始めて、これらの ID を順につないでいくことで表現できます。さらに、編集チェーン内のいずれかのポストが削除されると、そのチェーン内のすべてのポストが削除されます。

X API v2 を使用すると、開発者は次のことを把握できます。

* 作成時点でそのポストが編集可能だったかどうか。投票付きポストや予約投稿など、一部のポストは編集できません。
* ポストは 30 分間編集可能で、最大 5 回まで編集できます。編集可能なポストについては、編集可能な残り時間と、残り編集回数を確認できます。
* 表示しているポストが編集後のバージョンかどうか（ほとんどの場合、特定の過去バージョンをポスト ID で明示的に指定しない限り、API はポストの最新バージョンを返します）。
* ポストの完全な編集履歴。
* ポストの各バージョンに紐づくエンゲージメント。

ポストの編集履歴には、次の 3 つの要素があります。

1. デフォルトでは、ポストのペイロードには、そのポストの編集履歴に含まれるポスト ID の配列が含まれます。この情報は、ポストペイロードにおけるデフォルトフィールドである `edit_history_tweet_ids` によって指定されます。この配列には、少なくとも 1 つの ID（元の編集されていないポストの ID）が含まれます。ID が 1 つだけの場合は、そのポストには編集履歴がないことを意味します。
2. [tweet.fields](/ja/x-api/fundamentals/fields) パラメータで `edit_controls` を指定すると、ポストが作成時点で編集可能だったかどうか、そのポストを編集できる残り時間（存在する場合）、残り編集回数などの情報を取得できます。
3. 最後に、[expansion](/ja/x-api/fundamentals/expansions) パラメータで `edit_history_tweet_ids` を指定することで、ポストの編集履歴内の各ポストに対応するポストオブジェクトを取得できます。

ほとんどのポストは編集の対象になります。ただし、次の種類のポストは編集できません。

* プロモーションポスト
* 投票付きポスト
* 自分自身のスレッドではない返信ポスト
* リポスト（引用ポストは編集対象となる点に注意）
* nullcast のポスト
* コミュニティポスト
* Super Follows ポスト
* コラボレーションポスト

例

***

以下の例では、X API v2 を使用して、開発者が編集済みポストのメタデータをリクエストする方法を示します。

**注:** 以下の例では User Post Timeline エンドポイントを使用していますが、ポストを返すすべてのエンドポイント（例: ポストのルックアップ、検索、filtered stream など）で、同じパラメータ（fields および expansions）を使用してこのメタデータをリクエストできます。

<div id="default-behavior">
  ### デフォルトの動作
</div>

デフォルトでは、X API v2 でポストオブジェクトを返す任意のエンドポイントに API リクエストを送信すると、次のデータが取得されます。

* ポスト ID
* ポスト本文
* ポストの編集履歴の一部であるポスト ID の配列。ID が 1 つだけ含まれている場合は、そのポストが編集されていないことを意味します。

**リクエスト:**

`curl --request GET 'https://api.x.com/2/users/:id/tweets' --header 'Authorization: Bearer $BEARER_TOKEN'`

**サンプルレスポンス:**

```{
  "data": [
    {
      "id": "1514991667853602823",
      "text": "we have an edit button",
      "edit_history_tweet_ids": ["1514991667853602822", "1514991667853602823"]
    }
  ]
}
```

<div id="getting-additional-data-with-edit_controls">
  ### edit&#95;controls を使用して追加データを取得する
</div>

ポストが作成された時点で編集可能だったかどうか、ポストを編集できる残り時間など、編集に関する追加のポストメタデータが必要な場合は、tweet.fields パラメータを使用し、edit&#95;control を指定することで、この情報をリクエストできます。

**リクエスト:**

`curl --request GET 'https://api.x.com/2/users/:id/tweets?tweet.fields=edit_control' --header 'Authorization: Bearer $BEARER_TOKEN'`

**サンプルレスポンス:**

```
  {
  "data": [
    {
      "id": "1514991667853602823",
      "text": "we have an edit button",
      "edit_history_tweet_ids": ["1514991667853602822", "1514991667853602823"],
      "edit_controls": {
        "is_edit_eligible": true,
        "editable_until": "2022-04-21 09:35:20.311",
        "edits_remaining": 4
      }
    }
  ]
}
```

<div id="getting-post-objects-for-all-posts-in-a-posts-edit-history">
  ### ポストの編集履歴に含まれるすべてのポストのポストオブジェクトを取得する
</div>

上記の例では、ポストの編集履歴に含まれるポストIDの配列が返されます。これら各ポストIDに対応する実際のポストオブジェクトが必要な場合は、expansions パラメータを使用し、`edit_history_tweet_ids` を指定してください。編集履歴を構成するポストオブジェクトは、&quot;includes&quot; オブジェクト内に返されます。 

**リクエスト:**

```bash
      curl --location --request GET 'https://api.x.com/2/users/:id/tweets?tweet.fields=edit_control&expansions=edit_history_tweet_ids' --header 'Authorization: Bearer $BEARER_TOKEN'`
```

**レスポンス例:**

```
  {
  "data": [
    {
      "id": "1514991667853602823",
      "text": "we have an edit button",
      "edit_history_tweet_ids": ["1514991667853602822", "1514991667853602823"],
      "edit_controls": {
        "is_edit_eligible": true,
        "editable_until": "2022-04-21 09:35:20.311",
        "edits_remaining": 4
      }
    }
  ],
  "includes": {
    "tweets": [
      {
        "id": "1514991667853602822",
        "text": "we need an eidt button",
        "edit_history_tweet_ids": [
          "1514991667853602822",
          "1514991667853602823"
        ],
        "edit_controls": {
          "is_edit_eligible": true,
          "editable_until": "2022-04-21 09:35:20.311",
          "edits_remaining": 4
        }
      }
    ]
  }
}
```
