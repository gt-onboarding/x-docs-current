---
title: ポストを編集する
keywords: ["ポストの編集", "ポストの編集方法", "ポスト編集", "編集履歴", "ポストの編集履歴", "編集メタデータ", "編集ウィンドウ", "編集済みポスト"]
---

<div id="introduction">
  # はじめに
</div>

X API v2 エンドポイントは、編集済みポストのメタデータを提供します。*Edit Posts* 機能は、2022 年 9 月 1 日に X 従業員向けのテストとして初めて導入されました。この日以降、対象となるポストは 30 分間、最大 5 回まで編集可能です。*2022 年 9 月 29 日以降に作成されたすべてのポストオブジェクト* には、ポストが一度も編集されていない場合でも、ポスト編集メタデータが含まれます。ポストが編集されるたびに、新しいポスト ID が作成されます。ポストの編集履歴は、元の ID から始めて、これらの ID を連結していくことで表現できます。さらに、編集チェーン内のいずれかのポストが削除されると、そのチェーン内のすべてのポストも削除されます。

X API v2 を使用すると、開発者は次のことを把握できます。

* ポストが作成時点で編集可能だったかどうか。一部のポスト（投票を含むポストや予約投稿など）は編集できません。
* ポストは 30 分間編集可能で、最大 5 回まで編集できます。編集可能なポストについては、編集可能な残り時間と、残り編集回数を確認できます。
* 表示しているポストが編集後のバージョンかどうか（通常、特定の過去バージョンをポスト ID で指定しない限り、API は最新バージョンのポストを返します）。
* ポストの完全な編集履歴。
* ポストの各バージョンに紐づくエンゲージメント。

ポストの編集履歴には 3 つの要素があります。

1. デフォルトでは、ポストペイロードには、そのポストの編集履歴に含まれるポスト ID の配列が含まれます。この情報は、ポストペイロード内のデフォルトフィールドである `edit_history_tweet_ids` により指定されます。この配列には、少なくとも 1 つの ID（元の未編集ポストの ID）が含まれます。ID が 1 つだけの場合は、そのポストに編集履歴がないことを意味します。 
2. ポストが作成時点で編集可能だったかどうか、ポストを編集できる残り時間があるかどうか、さらに残り編集回数などの情報は、`edit_controls` を [tweet.fields](/ja/x-api/fundamentals/fields) パラメーターで指定することで取得できます。
3. 最後に、`edit_history_tweet_ids` を [expansion](/ja/x-api/fundamentals/expansions) パラメーターで指定することで、ポストの編集履歴に含まれる各ポストのポストオブジェクトを取得できます。

ほとんどのポストは編集対象として許可されていますが、次の種類のポストは対象外です。 

* プロモーションポストである
* 投票を含むポストである
* 自分のスレッド以外のポストへの返信である
* リツイートである（引用ポストは編集可能である点に注意）
* ノルキャスト（nullcast）されたポストである
* コミュニティポスト
* Super Follow ポスト
* 共同ポスト（Collaborative Post）

例

***

以下の例では、開発者が X API v2 を使用して編集済みポストのメタデータをリクエストする方法を示します。 

**注:** 以下の例では User Post Timeline エンドポイントを使用していますが、ポストを返すすべてのエンドポイント（例: Posts lookup、search、filtered stream など）で、同じパラメーター（fields と expansions）を使用してこのメタデータをリクエストできます。

<div id="default-behavior">
  ### デフォルトの動作
</div>

デフォルトでは、X API v2 でポストオブジェクトを返す任意のエンドポイントに対して API リクエストを送信すると、次の情報が返されます。

* ポストID
* ポスト本文
* ポストの編集履歴を構成するポストIDの配列。ID が 1 つだけ含まれている場合は、そのポストが編集されていないことを意味します。

**リクエスト:**

`curl --request GET 'https://api.x.com/2/users/:id/tweets' --header 'Authorization: Bearer $BEARER_TOKEN'`

**レスポンス例:**

```{
  "data": [
    {
      "id": "1514991667853602823",
      "text": "we have an edit button",
      "edit_history_tweet_ids": ["1514991667853602822", "1514991667853602823"]
    }
  ]
}
```

<div id="getting-additional-data-with-edit_controls">
  ### edit&#95;controls を使用して追加データを取得する
</div>

ポストが作成された時点で編集可能だったかどうかや、ポストを編集できる残り時間など、ポストの編集に関連する追加メタデータが必要な場合は、`tweet.fields` パラメータを使用し、その値に `edit&#95;control` を指定してこの情報をリクエストできます。

**リクエスト:**

`curl --request GET 'https://api.x.com/2/users/:id/tweets?tweet.fields=edit_control' --header 'Authorization: Bearer $BEARER_TOKEN'`

**レスポンス例:**

```
  {
  "data": [
    {
      "id": "1514991667853602823",
      "text": "we have an edit button",
      "edit_history_tweet_ids": ["1514991667853602822", "1514991667853602823"],
      "edit_controls": {
        "is_edit_eligible": true,
        "editable_until": "2022-04-21 09:35:20.311",
        "edits_remaining": 4
      }
    }
  ]
}
```

<div id="getting-post-objects-for-all-posts-in-a-posts-edit-history">
  ### ポストの編集履歴に含まれるすべてのポストの Post オブジェクトを取得する
</div>

上記の例では、ポストの編集履歴に含まれる Post ID の配列が得られます。これらの各 Post ID に対応する実際の Post オブジェクトが必要な場合は、expansions パラメータを使用し、その値に `edit_history_tweet_ids` を指定します。編集履歴を構成する Post オブジェクトは、「includes」オブジェクト内で返されます。 

**リクエスト:**

```bash
      curl --location --request GET 'https://api.x.com/2/users/:id/tweets?tweet.fields=edit_control&expansions=edit_history_tweet_ids' --header 'Authorization: Bearer $BEARER_TOKEN'`
```

**レスポンス例:**

```
  {
  "data": [
    {
      "id": "1514991667853602823",
      "text": "we have an edit button",
      "edit_history_tweet_ids": ["1514991667853602822", "1514991667853602823"],
      "edit_controls": {
        "is_edit_eligible": true,
        "editable_until": "2022-04-21 09:35:20.311",
        "edits_remaining": 4
      }
    }
  ],
  "includes": {
    "tweets": [
      {
        "id": "1514991667853602822",
        "text": "we need an eidt button",
        "edit_history_tweet_ids": [
          "1514991667853602822",
          "1514991667853602823"
        ],
        "edit_controls": {
          "is_edit_eligible": true,
          "editable_until": "2022-04-21 09:35:20.311",
          "edits_remaining": 4
        }
      }
    ]
  }
}
```
