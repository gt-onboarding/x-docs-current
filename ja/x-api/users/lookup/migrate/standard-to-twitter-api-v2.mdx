---
title: v1 から v2 へ
sidebarTitle: v1 から v2 へ
keywords: ["v1.1 から v2 への移行", "ユーザー検索の移行", "ユーザー検索を移行する", "Standard v1.1 から v2 へのユーザー検索の移行", "v1 から v2 へのユーザー検索", "移行ガイド"]
---

import { Button } from '/snippets/ja/button.mdx';

<div id="standard-v11-compared-to-x-api-v2">
  ### Standard v1.1 と X API v2 の比較
</div>

Standard v1.1 の GET users/show および GET users/lookup を利用している場合、このガイドは、Standard v1.1 と X API v2 の users lookup エンドポイントの共通点と相違点を理解するのに役立ちます。

* **類似点**
  * OAuth 1.0a User Context
  * リクエストごとのユーザー数の上限
* **相違点**
  * エンドポイント URL
  * アプリおよびプロジェクトの要件
  * レスポンスデータの形式
  * リクエストパラメータ

<div id="similarities">
  #### 類似点
</div>

**OAuth 1.0a User Context 認証方式**

標準エンドポイントは [OAuth 1.0a User Context](/ja/resources/fundamentals/authentication#oauth-1-0a-2) に対応しており、新しい X API v2 の users lookup エンドポイントは OAuth 1.0a User Context と [App only](/ja/resources/fundamentals/authentication#oauth-2-0) の両方に対応しています。したがって、以前に標準 v1.1 の users lookup エンドポイントのいずれかを使用していた場合、X API v2 バージョンへ移行しても同じ認証方式をそのまま使用できます。 

使用している認証ライブラリ／パッケージによっては、App only 認証が最も簡単な利用開始方法であり、シンプルなリクエストヘッダーで設定できます。App only アクセストークンの生成方法については、[この App only ガイド](/ja/resources/fundamentals/authentication#bearer-token-also-known-as-app-only)を参照してください。 

**リクエストあたりのユーザー数の上限**

標準 v1.1 の GET users/lookup エンドポイントでは、1 回のリクエストで最大 100 人のユーザーを指定できます。これは GET /users および GET /users/by エンドポイントについても同様です。100 人のユーザーをフルに指定するには、クエリパラメーターとして ids（GET /users）パラメーターまたは username（GET /users/by）パラメーターを渡し、ユーザー ID／ユーザー名の一覧をカンマ区切りのリストとして含める必要があります。 
 

<div id="differences">
  #### Differences
</div>

**エンドポイント URL**

* standard v1.1 エンドポイント:
  * https://api.x.com/1.1/users/show (単一 ID またはユーザー名でのルックアップ)
  * https://api.x.com/1.1/users/lookup (複数 ID またはユーザー名でのルックアップ)
* X API v2 エンドポイント:
  * https://api.x.com/2/users (複数 ID でのルックアップ)
  * https://api.x.com/2/users/:id (単一 ID でのルックアップ)
  * https://api.x.com/2/users/by (複数ユーザー名でのルックアップ)
  * https://api.x.com/2/users/by/username/:username (単一ユーザー名でのルックアップ)

**アプリとプロジェクトの要件**

X API v2 エンドポイントでは、リクエストを認証する際に、[プロジェクト](/ja/resources/fundamentals/projects) に関連付けられた [開発者アプリ](/ja/resources/fundamentals/developer-apps) の認証情報を使用する必要があります。すべての X API v1.1 エンドポイントでは、スタンドアロンのアプリ、またはプロジェクトに関連付けられたアプリのいずれかの認証情報を使用できます。 

**レスポンスデータ形式**

standard v1.1 と X API v2 のエンドポイントバージョンの最大の違いの 1 つは、どのフィールドをペイロードに含めるかをどのように選択するかです。

standard エンドポイントでは、多くのレスポンスフィールドがデフォルトで返され、そのうえでパラメータを使用して、どのフィールド、またはどのフィールドセットをペイロードに含めるかを指定することができます。

X API v2 のエンドポイントでは、デフォルトで返されるのは user の id、name、username フィールドのみです。追加のフィールドやオブジェクトを要求するには、[fields](/ja/x-api/fundamentals/fields) と [expansions](/ja/x-api/fundamentals/expansions) パラメータを使用する必要があります。このエンドポイントからリクエストしたユーザーフィールドは、すべて主要な user オブジェクト内で返されます。展開されたポストオブジェクトおよびフィールドは、レスポンス内の includes オブジェクト内で返されます。その後、user と展開されたポストオブジェクトの両方に含まれる ID を照合することで、展開されたオブジェクトを user オブジェクトに対応付けることができます。 

これらの新しいパラメータの詳細については、それぞれのガイド、または [fields と expansions の使い方](/ja/x-api/fundamentals/data-dictionary#how-to-use-fields-and-expansions) に関するガイドを参照することをお勧めします。 

また、standard v1.1 のフィールドを、より新しい v2 のフィールドにマッピングするのに役立つ [データ形式の移行ガイド](/ja/x-api/migrate/data-format-migration#migrating-from-standard-v1-1s-data-format-to-v2) も用意しています。このガイドでは、特定のフィールドを返すために v2 リクエストに含める必要がある、具体的な expansions および fields パラメータも確認できます。 
 

特定のフィールドのリクエスト方法の変更に加えて、X API v2 では、API によって返されるオブジェクト (たとえば [Post](/ja/x-api/fundamentals/data-dictionary#tweet) や [user](/ja/x-api/fundamentals/data-dictionary#user) オブジェクト) に対して新しい JSON 設計も導入しています。

* JSON ルートレベルでは、standard エンドポイントはポストオブジェクトを statuses 配列で返すのに対し、X API v2 は data 配列で返します。 
* Retweeted および Quoted の &quot;statuses&quot; を参照する代わりに、X API v2 の JSON では Retweeted および Quoted Tweets を参照します。contributors や user.translator&#95;type など、多くのレガシーまたは非推奨フィールドは削除されます。 
* Post オブジェクトの favorites と user オブジェクトの favourites の両方を使用する代わりに、X API v2 では like という用語を使用します。 
* X では、値が存在しない JSON 値 (たとえば null) はペイロードに書き込まないという規約を採用しています。ポストおよび user の属性は、非 null の値がある場合にのみ含まれます。 
   

さらに、[Post オブジェクト](/ja/x-api/fundamentals/data-dictionary#tweet) に対して、次のような新しいフィールドセットを導入しました。

* [conversation&#95;id](/ja/x-api/fundamentals/conversation-id) フィールド
* context と entities を含む 2 つの新しい [annotations](/ja/x-api/fundamentals/post-annotations) フィールド
* いくつかの新しい [metrics](/ja/x-api/fundamentals/metrics) フィールド 
* 新しい reply&#95;setting フィールド。特定のポストに誰が返信できるかを示します

**リクエストパラメータ**

次の standard v1.1 リクエストパラメータには、X API v2 における同等のパラメータがあります。

|     |     |
| :--- | :--- |
| **Standard** | **X API v2** |
| user&#95;id | ids |
| screen&#95;name | username |

また、X API v2 ではサポートされていない standard のユーザー検索リクエストパラメータもいくつか存在します。

| Standard | コメント |
| :--- | :--- |
| include&#95;entities | このパラメータは、ポストのペイロードから entities ノードを削除するために使用されます。これは追加型の fields および expansions 機能に置き換えられました。 |