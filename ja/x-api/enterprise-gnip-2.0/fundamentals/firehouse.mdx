---
title: コンプライアンス Firehose API
keywords: ["compliance firehose", "firehose API", "compliance API", "enterprise firehose", "compliance stream", "firehose"]
---

> **ご留意ください**
>
> 新しいコンプライアンスツールとして、X API v2 向けの [batch compliance](/ja/x-api/compliance/batch-compliance) をリリースしました。この新しいツールを使用すると、大規模なポスト ID またはユーザー ID のデータセットをアップロードし、それぞれのコンプライアンスステータスを取得できます。これにより、データセットをコンプライアンス要件に準拠させるために、どのデータに対して対応が必要かを判断するのに役立ちます。

> さらに、batch compliance と compliance firehose の両方が、ポストの編集をサポートするように更新されました。compliance firehose では、新しい `tweet_edit` イベントが追加されています。詳細については、[Compliance Data Objects](/ja/x-api/enterprise-gnip-2.0/fundamentals/firehouse#compliance-data-objects) のドキュメントを参照してください。[Edit Posts fundamentals](/ja/x-api/fundamentals/edit-posts) ページでは、ポストの編集メタデータがどのように機能するかについて詳しく説明しています。

<div id="overview">
  ## 概要
</div>

`Enterprise`

X の中核的な価値観の 1 つは、ユーザーの声を守り、尊重することです。これは、ユーザーが X 上で共有するコンテンツを削除、変更、編集するとき、その期待や意図を尊重することも含みます。こうした姿勢は、世界最大級のパブリックなリアルタイム情報プラットフォームの長期的な健全性にとって、極めて重要であると考えています。X はコントロールをユーザー自身に委ね、各ユーザーが自分の X 体験を自ら管理できるようにしています。X データを受け取るビジネスユーザーには、エンドユーザーの期待と意図を尊重する責任があると私たちは考えています。

X プラットフォームで発生し得るコンプライアンスイベントの種類について詳しくは、記事「[X におけるユーザーの意図の尊重](/ja/x-api/enterprise-gnip-2.0/fundamentals/firehouse#honoring-user-intent-on-twitter)」を参照してください。

API を通じて X データを利用するあらゆる開発者や企業には、ユーザーコンテンツへの変更を尊重するために、合理的なあらゆる努力を払う義務があります。この義務は、削除、変更、共有オプションの変更（例: コンテンツが保護されたり、配信が制限されたりする場合）といったユーザーイベントにも及びます。これは、ユーザーが自分のポストを編集した場合も含みます。この義務があなたの X データの利用にどのような影響を与えるかを理解するために、[Developer Policy](https://developer.x.com/en/developer-terms/policy) および／またはあなたの X Data Agreement に記載されている具体的な文言を参照してください。

X では、これらのユーザーコンプライアンスイベントや、特定のポストまたはユーザーが公開されているかどうかに関する情報を提供する、以下のソリューションを提供しています。各ソリューションの概要と一般的な統合パターンについて、以下で簡単に説明します。

<div id="get-statuseslookup-and-get-userslookup">
  #### GET statuses/lookup と GET users/lookup
</div>

* フォーマット: REST API。参照: [GET statuses/lookup](https://developer.x.com/en/docs/x-api/v1/tweets/post-and-engage/api-reference/get-statuses-lookup) および [GET users/lookup](https://developer.x.com/en/docs/x-api/v1/accounts-and-users/follow-search-get-users/api-reference/get-users-lookup)。

* これらのエンドポイントは常に、ポストの編集の最新バージョンを返します。編集機能の導入後に作成されたポストを表すすべてのポストオブジェクトには、ポスト編集に関するメタデータが含まれます。これは、編集されていないポストについても同様です。 

* すべてのポストについて、作成から 30 分を過ぎてから行われたリクエストでは、そのポストの最終状態が返されます。 

* API リクエストの一部として呼び出し元によって指定された特定のポストまたはユーザーに関する可用性情報を提供します。

* 特定のポスト / ユーザーの現在の可用性状態を、その都度スポットチェックする目的で使用できます。

* 特定の時点における特定のポストまたはユーザーの現在の状態を確認する必要があるお客様に最適です。

* これらの API は、コンテンツの可用性を確認する必要があるお客様にとって有用な手段を提供します。たとえば、次のような場合です:
  1. ポストを表示する場合
  2. ポストまたはユーザーと 1:1 でやり取りする場合
  3. 許可されたファイルダウンロードを通じて X コンテンツを第三者に配信する場合
  4. ポストを長期間保存する場合

<div id="compliance-firehose-enterprise-only">
  #### Compliance Firehose（Enterprise のみ）
</div>

* フォーマット: Streaming API。詳しくは [Compliance Firehose](/ja/x-api/enterprise-gnip-2.0/fundamentals/firehouse#api-reference) を参照してください。
* X 上で発生する[コンプライアンスアクティビティ](/ja/x-api/enterprise-gnip-2.0/fundamentals/firehouse#compliance-data-objects)のリアルタイムストリームを配信します。これらのアクティビティには、ポストが編集されたタイミングなどが含まれます。 
* プラットフォーム上で新しいコンプライアンスイベントが発生した際に、一連の保存済みデータ全体でコンプライアンス状態を維持するために利用できます。
* 大量の X データを長期間にわたって取得・保存するお客様に最適です。

<div id="guides">
  ## ガイド
</div>

<div id="compliance-best-practices">
  ### **コンプライアンスのベストプラクティス**
</div>

<div id="recommendations-best-practices">
  #### **推奨事項とベストプラクティス**
</div>

* **数値のポストIDとユーザーIDを保存するデータストレージスキーマを構築する**: ユーザーに関するメッセージでは、そのユーザーのすべてのポストに対して処理を行う必要があります。そのため、すべてのコンプライアンスメッセージは数値IDのみで配信されることから、数値IDに基づいてポストとユーザーの関係を保持できるようにストレージスキーマを設計することが重要です。データ利用者は、ポストIDとユーザーIDの両方でコンプライアンスイベントを監視し、ローカルのデータストアを適切に更新できる必要があります。

* **すべてのコンプライアンスステータスに対応するスキーマを構築する**: さまざまなアプリケーションでコンプライアンスの処理方法が異なる場合、データストアに他のメタデータを追加する必要が生じることがあります。たとえば、データ利用者は、`status_withheld` メッセージの影響を受ける国でコンテンツの表示を制限しやすくするために、既存のデータベースにメタデータを追加することを選択する場合があります。

* **リツイート削除の処理**: リツイートは、元のメッセージがリツイート内のオブジェクトとしてネストされている、特別な種類のポストです。この場合、リツイートには2つのポストIDが参照されます — リツイート自体のIDと、（ネストされたオブジェクト内に含まれる）元のメッセージのIDです。元のメッセージが削除されると、元のIDに対してポスト削除メッセージが発行されます。ポスト削除イベントは通常、すべてのリツイートに対する削除イベントをトリガーします。しかし、場合によってはすべてが送信されないことがあるため、クライアントシステムは不完全なリツイート削除が発生し得ることを想定しておく必要があります。元のIDの削除だけで、その後のすべてのリツイートを削除するには十分です。リツイートを保存する際には元のポストIDを参照として保持し、ポスト削除イベントを受信した際には、参照されているすべてのリツイートを削除することがベストプラクティスです。

<div id="compliance-data-objects">
  ### コンプライアンスデータオブジェクト
</div>

<div id="compliance-firehose-api">
  #### **Compliance Firehose API**
</div>

想定されるコンプライアンスイベントのタイプには、ポスト（または「status」）イベントとユーザーイベントが含まれ、これらには以下で説明する複数のタイプがあります。  

次の点にご留意ください。

* ユーザーのステータスについての詳細は[こちら](https://support.x.com/articles/14016)、削除されたポストに関する当社の開発者ポリシーは[こちら](https://dev.x.com/overview/terms/policy#3.Update_Respect_Users_Control_and_Privacy)をご覧ください。
* Compliance Firehose は &#39;tweet&#95;edit&#39; イベントを提供するように更新されています。 
* いくつかのユーザー削除、保護、凍結イベントは必ずしも恒久的ではなく、状態が無制限に切り替わる可能性があります。これには、user&#95;delete, user&#95;undelete, user&#95;protect, user&#95;unprotect, user&#95;suspend, user&#95;unsuspend が含まれます。
* user&#95;deletes は、ユーザーが自分のアカウントを user&#95;undelete することを選択していない場合に限り、30 日後に status&#95;deletes が続きます。ユーザーが user&#95;delete を取り消し、そのユーザーのすべてのポストに対する削除が 30 日後に発生しない可能性があります。
* user&#95;suspend は、ユーザーが user&#95;unsuspend イベントの対象とならない限り有効なままとなるアクションです。これらは 30 日単位の期間で変更されることはありません。

エンドユーザーのプライバシーと意図を尊重するために各イベントタイプをどのように処理するべきかについては、「Recommended Action」列を参照してください。

| Original Message Type | Object | Permanent (Yes/No) | Recommended Action |
| :--- | :--- | :--- | :--- |
| delete | Status | Yes | 関連するポストを削除します。 |
| status&#95;withheld | Status | Yes | status&#95;withheld メッセージに記載されている特定の国で、関連するポストを表示しないようにします。 |
| drop | Status | No  | ポストを公開表示から削除します。 |
| undrop | Status | No  | ステータスは再び表示され、公開として扱われる可能性があります。 |
| tweet&#95;edit | Status | Yes | 新しい編集内容を反映し、該当する場合は表示します。 |
| user&#95;delete | User | No  | 関連ユーザーによるすべてのポストを非表示または削除します。 |
| user&#95;undelete | User | No  | 関連ユーザーによるすべてのポストは再び表示され、公開として扱われる可能性があります。 |
| user&#95;protect | User | No  | 関連ユーザーによるすべてのポストを非表示または削除します。 |
| user&#95;unprotect | User | No  | 関連ユーザーによるすべてのポストは再び表示され、公開として扱われる可能性があります。 |
| user&#95;suspend | User | No  | 関連ユーザーによるすべてのポストを非表示または削除します。 |
| user&#95;unsuspend | User | No  | 関連ユーザーによるすべてのポストは再び表示され、公開として扱われる可能性があります。 |
| scrub&#95;geo | User | Yes | scrub&#95;geo メッセージで指定されたポストより前の、そのユーザーによるすべてのポストについて、X が提供したジオデータを削除します。なお、その後のポストには利用可能なジオデータが含まれる場合があります。 |
| user&#95;withheld | User | Yes | user&#95;withheld メッセージに記載されている特定の国で、関連ユーザーによるポストを表示しないようにします。 |
| delete | Favorite | Yes | 関連する「いいね／お気に入り」を削除します。 |

<div id="payload-examples">
  #### **ペイロード例**
</div>

上の表で説明した各コンプライアンスイベントについて、以下のペイロード例を参照してください。

**ポスト編集**

```json
{"tweet_edit":
   {
     "id": "1557445923210514432"
     "initial_tweet_id": "1557433858676740098",
     "edit_tweet_ids": ["1557433858676740098", "1557445923210514432"],
     "timestamp_ms": "1660155761384"
   }
 }
```

<div id="post-delete">
  ##### ポスト削除
</div>

```json
{
  "delete": {
    "status": {
      "id": 601430178305220600,
      "id_str": "601430178305220608",
      "user_id": 3198576760,
      "user_id_str": "3198576760"
    },
    "timestamp_ms": "1432228155593"
  }
}
```

<div id="post-withheld">
  ##### 非表示にされたポスト
</div>

```json
{
  "status_withheld": {
    "status": {
      "id": 601430178305220600,
      "id_str": "601430178305220608",
      "user_id": 3198576760,
      "user_id_str": "3198576760"
    },
    "withheld_in_countries": [
      "XY"
    ],
    "timestamp_ms": "1432228155593"
  }
}
```

<div id="drop">
  ##### 削除
</div>

```json
{
  "drop": {
    "status": {
      "id": 601430178305220600,
      "id_str": "601430178305220600",
      "user_id": 3198576760,
      "user_id_str": "3198576760"
    },
    "timestamp_ms": "1432228155593"
  }
}
```

<div id="undrop">
  ##### ドロップ取り消し
</div>

```json
{
  "undrop": {
    "status": {
      "id": 601430178305220600,
      "id_str": "601430178305220600",
      "user_id": 3198576760,
      "user_id_str": "3198576760"
    },
    "timestamp_ms": "1432228155593"
  }
}
```

<div id="scrub-geo">
  #### 位置情報の削除
</div>

```json
{
  "scrub_geo": {
    "user_id": 519761961,
    "up_to_status_id": 411552403083628540,
    "up_to_status_id_str": "411552403083628544",
    "user_id_str": "519761961",
    "timestamp_ms": "1432228180345"
  }
}
```

<div id="user-delete">
  ##### ユーザー削除
</div>

```json
{
  "user_delete": {
    "id": 771136850,
    "timestamp_ms": "1432228153548"
  }
}
```

<div id="user-undelete">
  ##### ユーザー削除の取り消し
</div>

```json
{
  "user_undelete": {
    "id": 796250066,
    "timestamp_ms": "1432228149062"
  }
}
```

<div id="user-withheld">
  ##### ユーザー保留
</div>

```json
{
  "user_withheld": {
    "user": {
      "id": 1375036644,
      "id_str": "1375036644"
    },
    "withheld_in_countries": [
      "XY"
    ],
    "timestampMs": "2014-08-27T23:49:41.839+00:00"
  }
}
```

<div id="user-protect">
  ##### ユーザー保護
</div>

```json
{
  "user_protect": {
    "id": 3182003550,
    "timestamp_ms": "1432228177137"
  }
}
```

<div id="user-unprotect">
  ##### ユーザーの保護解除
</div>

```json
{
  "user_unprotect": {
    "id": 2911076065,
    "timestamp_ms": "1432228180113"
  }
}
```

<div id="user-suspend">
  ##### ユーザーの凍結
</div>

```json
{
  "user_suspend": {
    "id": 3120539094,
    "timestamp_ms": "1432228194217"
  }
}
```

<div id="user-unsuspend">
  ##### ユーザーアカウントの凍結解除
</div>

```json
{
  "user_unsuspend": {
    "id": 3293130873,
    "timestamp_ms": "1432228193828"
  }
}
```

<div id="integrating-compliance-firehose">
  ### Compliance Firehose の統合
</div>

Compliance Firehose は、X プラットフォーム上で発生するコンプライアンスイベントを配信するリアルタイムストリーミング API です。コンプライアンスイベントとは何か、および X 上でどのように生成されるかについては、記事「[X におけるユーザーの意図を尊重する](/ja/x-api/enterprise-gnip-2.0/fundamentals/firehouse#honoring-user-intent-on-twitter)」を参照してください。

ポストとユーザーのイベントはそれぞれ独立して配信され、それぞれを個別に処理する必要がある点に注意してください（つまり、ポストが削除されたからといってユーザーイベントが発生するとは限らず、その逆も同様です）。いくつかのユーザーイベントは必ずしも永続的ではなく、状態が何度も切り替わる可能性があります。これには、user&#95;delete、user&#95;undelete、user&#95;protect、user&#95;unprotect、user&#95;suspend、user&#95;unsuspend が含まれます。

user&#95;delete が発生したユーザーに対しては、そのユーザーがアカウントの user&#95;undelete を選択していない場合に限り、30 日後に status&#95;delete が続けて発生します。user&#95;delete がユーザーによって取り消され、そのユーザーのすべてのポストに対する削除が 30 日後に発生しない可能性もあります。

user&#95;suspend は、そのユーザーに対して user&#95;unsuspend イベントが発生しない限り、有効な状態のまま維持されるアクションです。これらは 30 日の期間によるいかなる変更の対象にもなりません。

コンプライアンスイベントを、ソフトウェアのユーザーに直接表示したり、製品や顧客体験に組み込んだりすることは決して適切ではありません。これらは、コンプライアンスを維持し、X ユーザーの行動を尊重する目的のみに使用されるべきものです。

<div id="integrating-with-the-compliance-firehose">
  #### **Compliance Firehose との統合**
</div>

Compliance Firehose をシステムに統合するには、次のことが行えるインテグレーションを構築する必要があります。

1. Compliance Firehose の各ストリーミング API パーティションへのストリーミング接続を確立する
2. 大量のデータに対応する – 非同期プロセスを使用して、ストリームの取り込み処理と後続の処理を切り離す
3. 何らかの理由で切断された場合、ストリーム パーティションへ自動的に再接続する
4. 上記のガイダンスに従って保存しているポストおよびユーザーのデータに関連するコンプライアンスイベントを処理する

<div id="honoring-user-intent-on-twitter">
  ### Twitter 上でユーザーの意図を尊重する
</div>

私たちは、X ユーザーのプライバシーと意図を尊重することが、世界最大級の公共かつリアルタイムな情報プラットフォームの 1 つとしての長期的な健全性にとって極めて重要であると考えています。X はプライバシー管理をユーザー自身の手に委ねており、個々人が自分自身の X での体験をコントロールできるようにしています。X データのビジネス利用者として、私たちには、このような信頼と敬意に基づく環境を維持するために、エンドユーザーのプライバシーと行動を尊重するという共通の責任があります。

プラットフォーム上での表示方法に影響を与えうる、ポストやユーザーアカウントに対して起こり得ることには、さまざまなものがあります。プライバシーと意図に影響するアクションは、ステータス（ポスト）レベルとユーザーレベルの両方で定義されます。これらのアクションには次のようなものが含まれます。

<div id="user">
  #### ユーザー
</div>

| Action | Description |
| :--- | :--- |
| Protect Account | X ユーザーは、いつでも自分のアカウントを非公開または公開に設定できます。非公開アカウントでは、そのアカウントのポストを閲覧できる各ユーザーを手動で承認する必要があります。   <br />詳細については、[公開ポストと非公開ポストについて](https://support.x.com/articles/14016-about-public-and-protected-tweets)を参照してください。 |
| Delete Account | X ユーザーは、いつでも自分のアカウントおよびそれに関連付けられているすべてのステータスメッセージを削除できます。X は、ユーザーが削除を取り消してアカウントを再有効化したい場合に備えて、削除後 30 日間アカウント情報を保持します。 |
| Scrub Geo | X ユーザーは、いつでも過去のポストからすべての位置情報データを削除できます。これは「scrub geo」と呼ばれます。 |
| Suspend Account | X は、X Rules に違反しているアカウント、またはハッキングや不正アクセスが疑われるアカウントを凍結する権利を有します。アカウントの凍結解除（unsuspend）は X のみが行うことができます。 |
| Withhold Account | X は、特定の国において、随時、特定のコンテンツへのアクセスを制限（withhold）する権利を有します。制限されたアカウントの制限解除（unwithheld）は X のみが行うことができます。   <br />詳細については、[国別の制限コンテンツ](https://support.x.com/articles/20169222-country-withheld-content)を参照してください。 |

<div id="status">
  #### ステータス
</div>

| アクション | 説明 |
| :--- | :--- |
| ステータスの削除 | X ユーザーは、任意のタイミングでステータスを削除できます。削除されたステータスは元に戻すことはできず、完全に消去されます。 |
| ステータスの保留 | X は、特定の国において特定のコンテンツへのアクセスを、必要に応じて事後的に保留する権利を有します。保留されたステータスを保留解除できるのは X のみです。   <br />詳細については、[Country Withheld Content](https://support.x.com/articles/20169222-country-withheld-content) を参照してください。 |

<div id="keeping-track-of-user-and-status-changes">
  #### ユーザーおよびステータスの変更の追跡
</div>

User または Status の状態は、上記のいずれかのアクションによりいつでも変化する可能性があり、これは X データの利用者が関連するすべてのコンテンツの可用性およびプライバシーをどのように扱うべきかに影響します。これらのアクションが行われると、Status または User の状態が変更されたことを示す対応するコンプライアンスメッセージが送信されます。

<div id="api-reference">
  ## API リファレンス
</div>

<div id="get-compliancefirehose">
  ### **GET compliance/firehose**
</div>

<div id="methods">
  #### メソッド
</div>

| メソッド | 説明 |
| :--- | :--- |
| [GET /compliance/:stream](#Connect) | データストリームに接続します |

<div id="authentication">
  #### 認証
</div>

Compliance Firehose API へのすべてのリクエストでは、console.gnip.com のアカウントにログインする際に使用する有効なメールアドレスとパスワードの組み合わせから構成される HTTP Basic 認証を使用する必要があります。認証情報は、各リクエストの Authorization ヘッダーに渡す必要があります。

<div id="get-compliancestream">
  #### GET /compliance/:stream
</div>

Compliance firehose データストリームへの永続的な接続を確立し、そのストリームを通じてコンプライアンスイベントが配信されます。

|                             |                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| :-------------------------- | :--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **Request Method**          | HTTP GET                                                                                                                                                                                                                                                                                                                                                                                                                           |
| **Connection Type**         | Keep-Alive                                                                                                                                                                                                                                                                                                                                                                                                                         |
| **URL**                     | ダッシュボード内のストリームの API ヘルプ ページに記載されており、次のような構造になります。  <br />  <br /><br />[https://gnip-stream.x.com/stream/compliance/accounts/:account&#95;name/publishers/twitter/:stream&#95;label.json?partition=1](https://gnip-stream.x.com/stream/compliance/accounts/:account_name/publishers/twitter/:stream_label.json?partition=1)<br /><br />**注:** 「partition」パラメータは必須です。全体のボリュームのそれぞれ 12.5% を含む 8 つすべてのパーティションに接続することで、フルストリームを取得できます。 |
| **Compression**             | Gzip。Gzip 圧縮を使用してストリームに接続するには、接続リクエストに Accept-Encoding ヘッダーを含めるだけです。ヘッダーは次のようになります。  <br />  <br />Accept-Encoding: gzip                                                                                                                                                                                                                                                                                                           |
| **Character Encoding**      | UTF-8                                                                                                                                                                                                                                                                                                                                                                                                                              |
| **Response Format**         | JSON。レスポンス形式として JSON を指定するヘッダーをリクエストに含めてください。                                                                                                                                                                                                                                                                                                                                                                                      |
| **Rate Limit**              | 60 秒あたり 10 リクエスト。                                                                                                                                                                                                                                                                                                                                                                                                                  |
| **Read Timeout**            | Client 側で read timeout を設定し、その値が 30 秒を超えるようにしてください。                                                                                                                                                                                                                                                                                                                                                                                |
| **Support for Tweet edits** | すべてのポスト編集は「tweet&#95;edit」コンプライアンスイベントをトリガーします。詳細については、[Compliance Data Objects](/ja/x-api/enterprise-gnip-2.0/fundamentals/firehouse#compliance-data-objects) ドキュメントを参照してください。                                                                                                                                                                                                                                                       |

**Example Curl Request**

以下のサンプルリクエストは、コマンドラインで cURL を使用して実行します。

```bash
curl --compressed -v -uexample@customer.com "https://gnip-stream.x.com/stream/compliance/accounts/:account_name/publishers/twitter/:stream_label.json?partition=1"
```

*注:* 上記のリクエストでは Compliance firehose の `partition=1` にしか接続していません。ストリーム全体を受信するには、8 個すべてのパーティションに接続する必要があります。

<div id="response-codes">
  #### レスポンスコード
</div>

これらのリクエストに対して、API からは次のレスポンスが返される可能性があります。ほとんどのエラーコードには、本文内に追加の詳細を含む文字列が含まれます。200 以外のレスポンスの場合、クライアントは再接続を試みる必要があります。

| ステータス | テキスト | 定義 |
| :--- | :--- | :--- |
| 200 | Success | 接続が正常に確立され、新しいアクティビティは到着し次第送信されます。 |
| 401 | Unauthorized | 資格情報が無効なため、HTTP 認証に失敗しました。お使いの資格情報で console.gnip.com にログインし、リクエストで正しく使用していることを確認してください。 |
| 406 | Not Acceptable | 一般的には、クライアントがストリームからの gzip エンコーディングを受け入れるためのヘッダーを正しく含めていない場合に発生しますが、その他の状況でも発生する可能性があります。本文には、`"This connection requires compression. To enable compression, send an 'Accept-Encoding: gzip' header in your request and be ready to uncompress the stream as it is read on the client end."` のような JSON メッセージが含まれます。 |
| 429 | Rate Limited | アプリが接続リクエスト数の上限を超えました。 |
| 503 | Service Unavailable | Twitter サーバー側の問題です。指数バックオフパターンを使用して再接続してください。この問題に関するお知らせが [X API Status Page](https://api.twitterstat.us/) に掲載されていない場合は、サポートにお問い合わせください。 |

<div id="other-recommendations-best-practices">
  #### その他の推奨事項とベストプラクティス
</div>

* **数値のポストIDとユーザーIDを保存するデータストレージスキーマを構築する**: 特定のユーザーからのすべてのポストに対してアクションを行う必要がある場合があります。そのため、すべてのコンプライアンスメッセージは数値の ID のみで配信されることから、数値 ID に基づいてポストとユーザーの関係を維持するストレージスキーマを設計することが重要です。データ利用者は、ポスト ID とユーザー ID の両方でコンプライアンスイベントを監視し、ローカルデータストアを適切に更新できるようにする必要があります。

* **すべてのコンプライアンスステータスに対応するスキーマを構築する**: さまざまなアプリケーションでコンプライアンス関連の処理をどのように行うかによっては、データストアに他のメタデータを追加する必要がある場合があります。たとえば、データ利用者は、`status_withheld` メッセージの影響を受ける国でコンテンツの表示制限を容易にするために、既存のデータベースにメタデータを追加することを検討するかもしれません。

* **リツイート削除の扱い**: リツイートは特殊な種類のポストであり、元のメッセージがリツイート内のオブジェクトにネストされた形で含まれます。この場合、リツイートには 2 つのポスト ID が参照されます — リツイート自体の ID と、（ネストされたオブジェクトに含まれる）元のメッセージの ID です。元のメッセージが削除されると、元の ID に対してポスト削除メッセージが発行されます。以降、そのすべてのリツイートについて削除メッセージが発行されることはありません。元の ID の削除だけで、その後のすべてのリツイートを削除するには十分です。