---
title: ベストプラクティス
sidebarTitle: ベストプラクティス
keywords: ["メディアアップロードのベストプラクティス", "メディアをアップロードする", "メディアのベストプラクティス", "画像アップロード", "動画アップロード", "メディアアップロードガイド"]
---

[`POST /2/media/upload`](/ja/x-api/media/media-upload) エンドポイントを使用する際には、押さえておくべき重要なポイントがいくつかあります。OAuth を利用したメディアのアップロードは少し扱いが難しい場合があるため、このエンドポイントの使い方について、念頭に置くべき点と実際に動作するサンプルをここにまとめました。

<div id="keep-in-mind">
  ## 注意事項
</div>

* 1つのポストには、最大で写真4枚、アニメーションGIF 1つ、または動画1つを添付できます。
* 送信する画像は、生のバイナリデータ、または base64 エンコードされたバイナリである必要があります。`Content-Type` が適切に設定されている限り（不明な場合は `application/octet-stream`）、それ以外に内容をエンコードしたりエスケープしたりする必要はありません。
* base64 エンコードされた画像をポストする場合は、メッセージ中の画像パートに「Content-Transfer-Encoding: base64」が設定されていることを確認してください。
* マルチパートメッセージの境界は、それ自体を1行に置き、CRLF で終端する必要があります。
* このエンドポイントを使って POST リクエストを行う実装例については、[xurl](https://github.com/xdevplatform/xurl) でテストしてみることをおすすめします。また、利用可能な [X Libraries](/ja/resources/tools-and-libraries) も参照してください。
* JavaScript や、長整数値を正確に表現できない他の言語では、API レスポンスで提供される `media_id_string` を使用してください。

<div id="media-categories">
  ## メディアカテゴリ
</div>

Media Category パラメータは、アップロードするメディアファイルの利用用途を定義し、メディアアップロードに対して適用されるファイルサイズ上限やその他の制約に影響する場合があります。メディアを利用する際の問題を避けるため、メディアをアップロードする際には正しいメディアカテゴリを指定することが重要です。これはアップロードフローの一部として、INIT リクエストで渡す省略可能な値です。メディアカテゴリが指定されていない場合、アップロードされたメディアはコンテンツタイプに応じて、ポスト用のメディア（`tweet_image`、`tweet_video`、`tweet_gif`）であるとみなされます。

最も一般的なメディアカテゴリは次のとおりです。

* `tweet_image`
* `tweet_video`
* `tweet_gif`
* `dm_image`
* `dm_video`
* `dm_gif`
* `subtitles`

Ads API パートナーの方は、プロモーション動画に推奨されるメディアカテゴリの詳細については [こちらのドキュメント](/ja/x-ads-api/creatives#promoted-video) を参照してください。

<div id="image-specifications-and-recommendations">
  ## 画像の仕様と推奨事項
</div>

画像ファイルは、以下のすべての条件を満たしている必要があります。

* **サポートされている画像メディアタイプ**: `JPG`, `PNG`, `GIF`, `WEBP`
* **画像サイズ**: `<= 5 MB`
* **アニメーション GIF のサイズ**: `<= 15 MB`

上記のファイルサイズ上限は、メディアアップロードエンドポイントによって適用されます。さらに、`media_id` を指定してポスト作成（または類似の）エンドポイントを呼び出す際には、各プロダクトエンティティに固有のファイルサイズ上限が別途適用されます。ファイルサイズ上限やその他の制約は、`media_category` パラメータによって異なる場合があります。

<div id="animated-gif-recommendations">
  ## アニメーション GIF の推奨設定
</div>

ファイルサイズの制限内であっても、ポスト作成時に GIF の処理が失敗する場合があります。成功率を高めるため、次の制約を守ってください。

* **解像度**: `<= 1280x1080` (`width` x `height`)
* **フレーム数**: `<= 350`
* **ピクセル数**: `<= 300 million` (`width` * `height` * `num_frames`)
* **ファイルサイズ**: `<= 15Mb`

より大きな GIF を処理するには、`media_category` パラメータを指定して [chunked upload](/ja/x-api/media/quickstart/media-upload-chunked) エンドポイントを使用します。これにより、サーバーは GIF ファイルを非同期で処理できるようになり、大きなファイルを処理するための前提条件を満たせます。アニメーション GIF を含むポストで非同期アップロード動作を有効にするには、`media_category=tweet_gif` を指定してください。

<div id="video-specifications-and-recommendations">
  ## 動画の仕様と推奨事項
</div>

メディアのアップロードには Async Path を使用してください。

<div id="recommended">
  ### 推奨設定
</div>

* **動画コーデック**: `H264 High Profile`
* **フレームレート**: `30 FPS`, `60 FPS`
* **動画解像度**: `1280x720`（横向き）、`720x1280`（縦向き）、`720x720`（正方形）。サブスクライブ済みのユーザーは1080pの動画をアップロードし、1080pで再生できます。サブスクライブしていないユーザーは720pの動画をアップロードし、720pで再生できます。
* **最小動画ビットレート**: `5,000 kbps`
* **最小音声ビットレート**: `128 kbps`
* **音声コーデック**: `AAC LC`
* **アスペクト比**: `16:9`（横向きまたは縦向き）、`1:1`（正方形）

<div id="advanced">
  ### 詳細仕様
</div>

* **フレームレート**: `60 FPS` 以下である必要があります
* **ピクセル寸法**: `32x32` から `1280x1024` の範囲内である必要があります
* **ファイルサイズ**: `512 MB` を超えてはいけません
* **再生時間**: `0.5 秒` から `140 秒` の範囲内である必要があります
* **アスペクト比**: `1:3` から `3:1` の範囲内である必要があります
* **[ピクセルアスペクト比](https://en.wikipedia.org/wiki/Pixel_aspect_ratio)**: `1:1` である必要があります
* **ピクセルフォーマット**: [YUV](https://en.wikipedia.org/wiki/YUV) 4:2:0 のみがサポートされています
* 音声は [`AAC` の Low Complexity プロファイル](https://en.wikipedia.org/wiki/Advanced_Audio_Coding#Modular_encoding) である必要があります。（High-Efficiency `AAC` はサポートされていません）
* 音声は `mono` または `stereo` である必要があり、5.1 以上は使用できません
* [`open GOP`](https://en.wikipedia.org/wiki/Group_of_pictures) を使用してはいけません
* [`progressive scan`](https://en.wikipedia.org/wiki/Progressive_scan) を使用する必要があります

<div id="additional-information">
  ### 追加情報
</div>

以下の表の各行はアップロードに関する推奨値を示しますが、必須ではありません。すべてのアップロードは、複数のプラットフォームで最適化されるよう処理されます。

| 画面の向き | 幅 | 高さ | 動画ビットレート | 音声ビットレート |
| :--- | :--- | :--- | :--- | :--- |
| 横向き | 1280 | 720 | 2048K | 128K |
| 横向き | 640 | 360 | 768K | 64K |
| 横向き | 320 | 180 | 256K | 64K |
| 縦向き | 720 | 1280 | 2048K | 128K |
| 縦向き | 360 | 640 | 768K | 64K |
| 縦向き | 180 | 320 | 256K | 64K |
| 正方形 | 720 | 720 | 2048K | 128K |
| 正方形 | 480 | 480 | 768K | 64K |
| 正方形 | 240 | 240 | 256K | 32K |

メディアのアップロード方法の例については、[chunked メディアアップロードのドキュメント](/ja/x-api/media/quickstart/media-upload-chunked)を参照してください。

<div id="troubleshooting">
  ### トラブルシューティング
</div>

Media APIs に関する問題が発生した場合は、開発者フォーラムの [Media API カテゴリ](https://devcommunity.x.com/c/x-api/media-apis) を閲覧して、解決策をお探しください。