---
title: トピック別の返信管理
sidebarTitle: トピック別の返信管理
keywords: ["トピック別の返信管理", "トピックベースのモデレーション", "トピック別返信モデレーション", "トピック別の返信非表示", "トピックフィルタリング"]
---

import { Button } from '/snippets/ja/button.mdx';

<div id="manage-replies-by-topic">
  ### トピック別に返信を管理する
</div>

Hide replies エンドポイントを使用すると、人やブランドが会話をトピックどおりに保てるよう支援する連携機能を構築できます。このページでは、Hide replies エンドポイントと [recent search](/ja/x-api/posts/recent-search) エンドポイントを使って会話を管理する方法を紹介します。

Recent search を使うと、ある会話とその返信を取得でき、さらに Post のペイロードには、言語に関係なく各ポストのコンテキストとトピックを理解するのに役立つ [Post annotations](/ja/x-api/fundamentals/post-annotations) が含まれます。

アプリのフローでは、会話を表示および管理するためのコントロールを用意します。

1. ユーザーのポストを読み、その返信を管理するための許可をユーザーに求めます。

2. Post の URL から直近の会話を取得し、その会話が認証中のユーザーのものであることを確認します。

3. 会話内の各ポストを表示するために recent search エンドポイントを呼び出します。リクエストには、会話 ID を指定した検索クエリと annotation のエクスパンションを含め、X によるポストの解釈にもとづいて、そのポストがスポーツ関連かどうかを判定します。

4. ユーザーが選択したときに返信を非表示にするために Hide replies を呼び出します。また、ユーザーが常に操作をコントロールできるよう、この操作を取り消す手段も提供します。 

5. より長い会話については、[検索結果をページングする](/ja/x-api/posts/search/integrate/paginate) ためのコントロールを提供します。
    

<div id="optimize-for-the-user-and-for-usage">
  #### ユーザー（と利用）に最適化する
</div>

ユーザーが行おうとしているあらゆる操作を自分でコントロールできるような形でフローを設計できます。この原則を念頭に置くことで、ポストの閲覧・利用を最適化できる統合を構築することにもつながります。

1. 認証済みユーザーは自分が開始した会話しか管理できないため、その条件を満たさない場合にはフローを早い段階で終了させる必要があります。
   * 最初にポストのルックアップリクエストを行います。ポストの URL が有効でない場合、または会話が認証済みユーザーによって開始されていない場合には、その時点でフローを終了します。
   * こうすることで、会話が認証済みユーザーによってモデレートできない場合に、アプリが Recent Search リクエストを行う必要がなくなります。
2. 別々のリクエストを発行しなくて済むように、同じリクエスト内で [user フィールドと Post フィールド](/ja/x-api/fundamentals/fields) を要求します。このアプローチはアプリのパフォーマンス向上にもつながります。
3. 不要なリクエストは送信しないでください。このアプリでは、返信が非表示かどうかのステータスをユーザーのブラウザにキャッシュしています。これは、ユーザーが後からモデレーション作業を再開したい場合がある大規模な会話で役立ち、返信を非表示または再表示するためのリクエストをアプリ側で最適化するのにも役立ちます。