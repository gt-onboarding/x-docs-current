---
title: トピックごとに返信を管理する
sidebarTitle: トピックごとに返信を管理する
keywords: ["トピックごとに返信を管理する", "トピックベースのモデレーション", "トピック別の返信モデレーション", "トピックごとに返信を非表示にする", "トピックフィルタリング"]
---

import { Button } from '/snippets/ja/button.mdx';

<div id="manage-replies-by-topic">
  ### トピックごとに返信を管理する
</div>

Hide replies エンドポイントを利用すると、人やブランドが会話をトピックに沿った状態に保てるようにするインテグレーションを構築できます。このページでは、Hide replies と [recent search](/ja/x-api/posts/recent-search) エンドポイントを使って会話を管理する方法を説明します。

recent search エンドポイントには、会話とその返信を取得する機能があり、ポストのペイロードは、言語に関わらず各ポストのコンテキストとトピックを理解するのに役立つ [Post annotations](/ja/x-api/fundamentals/post-annotations) を返します。

アプリのフローでは、会話を表示・管理するためのコントロールを用意します。

1. ユーザーのポストを読み取り、その返信を管理する許可をユーザーに求めます。

2. ポストの URL から最近の会話を取得し、その会話が認証しているユーザーのものであることを確認します。

3. recent search エンドポイントを呼び出して、会話内の各ポストを表示します。リクエストには会話 ID の検索クエリと annotation の expansion（展開）を含め、X によるポストの解釈に基づき、そのポストがスポーツ関連かどうかを判定します。

4. ユーザーが選択したときに返信を非表示にするために Hide replies エンドポイントを呼び出します。また、ユーザーが常に操作を制御できるよう、このアクションを取り消す手段も提供します。 

5. 会話が長い場合は、[検索結果をページングする](/ja/x-api/posts/search/integrate/paginate)ためのコントロールを提供します。
    

<div id="optimize-for-the-user-and-for-usage">
  #### ユーザー（および利用状況）のために最適化する
</div>

ユーザーが行おうとしている操作を自分で制御できるようにフローを設計できます。この原則を念頭に置くことで、ポストの閲覧を最適化できる連携機能の構築にも役立ちます。

1. 認証済みユーザーは自分が開始した会話しか管理できないため、その条件を満たさない場合は早い段階でフローを終了する必要があります。
   * 最初にポストのルックアップリクエストを行います。ポストのURLが有効でない場合、または会話が認証済みユーザーによって開始されていない場合は、フローを早期終了します。
   * こうすることで、会話が認証済みユーザーによってモデレートできない場合に、アプリが recent search エンドポイントへのリクエストを行う必要がなくなります。
2. 個別にリクエストを送るのを避けるために、同じリクエスト内で [user and Post fields](/ja/x-api/fundamentals/fields) を要求します。このアプローチはアプリのパフォーマンス向上にもつながります。
3. 不要なリクエストを行わないようにします。ここで紹介しているアプリは、ユーザーのブラウザー内に返信の非表示ステータスをキャッシュします。これは大規模な会話で有用であり、ユーザーが後でモデレーションを再開したい場合に役立つほか、返信を非表示または再表示するためのリクエストを最適化するのにも役立ちます。