---
title: ユーザーメンション
sidebarTitle: ユーザーメンション
keywords: ["ユーザーメンション", "メンションタイムライン", "メンションクイックスタート", "メンションチュートリアル", "メンションタイムライン", "メンションの取得"]
---

import { Button } from '/snippets/ja/button.mdx';

<div id="getting-started-with-the-user-post-and-mention-timeline-endpoints">
  ## ユーザーのポストタイムラインおよびメンションタイムラインエンドポイントの使用開始
</div>

このクイックスタートガイドでは、[Postman](/ja/tutorials/postman-getting-started) を使用して、指定した一連のフィールドを含めてユーザーのポストタイムラインエンドポイントへの最初のリクエストを行う方法を説明します。

さまざまな言語でのサンプルコードを確認したい場合は、[X API v2 sample code](https://github.com/xdevplatform/Twitter-API-v2-sample-code) の GitHub リポジトリをご覧ください。 

<Note>
  **前提条件**

  このガイドを完了するには、リクエストを認証するための一連の [キーとトークン](/ja/resources/fundamentals/authentication) が必要です。以下の手順に従うことで、これらのキーとトークンを生成できます。

  * [開発者アカウントに登録](https://developer.x.com/en/apply-for-access) し、承認を受けます。
  * Developer Portal で [Project](/ja/resources/fundamentals/projects) と、それに関連付けられた [developer App](/ja/resources/fundamentals/developer-apps) を作成します。
  * アプリの「Keys and tokens」ページに移動し、必要な認証情報を生成します。すべての認証情報は安全な場所に保存してください。
</Note>

**タイムラインリクエストを構築する手順**

*この例では、ユーザーのポストタイムライン（ID 指定）エンドポイントへのリクエストを行いますが、このクイックスタートで学んだ内容は、ユーザーメンションタイムラインへのリクエストにも適用できます。*

**ステップ 1: ツールまたはライブラリを選択する**

このエンドポイントへのリクエストには、さまざまなツール、コード例、ライブラリを使用できますが、ここではプロセスを簡略化するために Postman ツールを使用します。

X API v2 の Postman コレクションを環境に読み込むには、次のボタンをクリックしてください。

<Button href="https://app.getpostman.com/run-collection/9956214-784efcda-ed4c-4491-a4c0-a26470a67400">
  X API v2 を Postman に追加
</Button>

Postman に X API v2 コレクションを読み込んだら、timeline フォルダーに移動し、「User Post timeline by ID」リクエストを見つけてください。
 

**ステップ 2: リクエストを認証する**

X API に正しくリクエストを送信するには、自分に権限があることを確認する必要があります。このエンドポイントでそれを行うには、[OAuth 2.0 App-Only](/ja/resources/fundamentals/authentication#app-only-authentication-and-oauth-2-0-bearer-token)、[OAuth 2.0 Authorization Code with PKCE](resources/fundamentals/authentication#oauth-2-0-authorization-code-flow-with-pkce-2)、または [OAuth 1.0a User Context](/ja/resources/fundamentals/authentication) のいずれかの認証方法でリクエストを認証する必要があります。

簡単のため、このリクエストでは OAuth 2.0 App-Only を使用しますが、非公開の [メトリクス](/ja/x-api/fundamentals/metrics) やポストをリクエストしたい場合は、他の認証方法のいずれかを使用する必要があります。 

キーとトークン、特に [App Access Token](/ja/resources/fundamentals/authentication#using-and-generating-an-app-only-bearer-token)（App-only Bearer Token とも呼ばれます）を Postman に追加する必要があります。これを行うには、Postman 右上の環境ドロップダウンで「X API v2」という名前の環境を選択し、「initial value」と「current value」のフィールドにキーとトークンを追加します（環境ドロップダウンの横にある目のアイコンをクリックして入力します）。

正しく設定されていれば、この変数はリクエストの Authorization タブに自動的に反映されます。
 

**ステップ 3: どのユーザーのポストを取得したいか特定して指定する**

リクエスト内で、最近のポストを取得したいユーザーを指定する必要があります。この例では、単一のユーザー ID を渡します。

ユーザー ID は、アカウントのハンドルを表す数値であり、アカウントのプロフィール URL から確認できます。たとえば、次のアカウントのユーザー名は `XDevelopers` です。

`https://x.com/XDevelopers`

このユーザー名をユーザー ID に変換するには、[users lookup endpoint](/ja/x-api/users/lookup/introduction) をユーザー名と共に使用し、ペイロード内にある数値のユーザー ID を確認する必要があります。@XDevelopers の場合、ユーザー ID は 2244994945 です。

Postman で「Params」タブに移動し、このユーザー ID を id パラメータの「Value」列に入力します。

|     |     |
| :--- | :--- |
| **Key** | **Value** |
| `id` | 2244994945 |

**ステップ 4: 取得したいフィールドを特定して指定する**

ステップ 3 の後に「Send」ボタンをクリックすると、レスポンスとしてデフォルトの [Post object](/ja/x-api/fundamentals/data-dictionary#tweet) のフィールドである id と text が返されます。

id と text 以外の追加フィールドを受け取りたい場合は、リクエスト内で [field](/ja/x-api/fundamentals/fields) パラメータおよび / または [expansion](/ja/x-api/fundamentals/expansions) パラメータを使って、それらのフィールドを指定する必要があります。

この演習では、異なるオブジェクトから 3 つの異なるフィールドセットを追加でリクエストします。

1. プライマリ user オブジェクトにおける追加の tweet.created&#95;at フィールド

2. 返されるポストに対する、関連する投稿者の user オブジェクトのデフォルトフィールド: id、name、username

3. 関連する user オブジェクトにおける追加の user.created&#95;at フィールド
    

Postman で「Params」タブに移動し、「Query Params」テーブルに次の key:value ペアを追加します。

|     |     |     |
| :--- | :--- | :--- |
| **Key** | **Value** | **Returned fields** |
| `tweet.fields` | `created_at` | `tweets.created_at` |
| `expansions` | `author_id` | `includes.users.id`, `includes.users.name`, `includes.users.username` |
| `user.fields` | `created_at` | `includes.users.created_at` |
| max&#95;results | 5   |     |

「Send」ボタンの横に、次の URL が表示されているはずです。

`https://api.x.com/2/users/:id/tweets?tweet.fields=created_at&expansions=author_id&user.fields=created_at&max_results=5`

<Info>
  **注意：**

  Postman では、URL フィールド内のパスパラメータ :id は、`id` パラメータフィールドに入力した値に自動的に更新されません。そのため、上記の URL には 2244994945 ではなく `:id` が含まれています。
</Info>

**ステップ 5: リクエストを送信し、レスポンスを確認する**

すべての設定が完了したら、「Send」ボタンを押すと、次のレスポンスが返されます。

```{
    "data": [
        {
            "author_id": "2244994945",
            "created_at": "2020-09-03T17:31:39.000Z",
            "id": "1301573587187331074",
            "text": "本日より、開発者ポータルでv2 APIの月間ツイート使用量を確認できるようになりました。✨📊\n\nこれにより、フィルタリングされたストリームと最近の検索から受信したツイート数を追跡できます。詳細はこちら: https://t.co/nfJHkFRQcZ https://t.co/vFXmoj3qaA"
        },
        {
            "author_id": "2244994945",
            "created_at": "2020-09-03T15:43:00.000Z",
            "id": "1301546240887398401",
            "text": "RT @snowman: So, we built a live golf leaderboard on the X API with Python, Flask, Postgres, and Heroku.\n\nSend a 'leaderboard' Direct…"
        },
        {
            "author_id": "2244994945",
            "created_at": "2020-09-01T20:07:50.000Z",
            "id": "1300888112948752389",
            "text": "⛳ Why do golfers carry an extra shirt? In case they get a hole in one.\n\nNow that we have your attention, learn how @snowman and @johnd built a real-time golf leaderboard using the #TwitterAPI. 📖\n\nhttps://t.co/rRKeKmaRrN"
        },
        {
            "author_id": "2244994945",
            "created_at": "2020-08-28T23:14:22.000Z",
            "id": "1299485505478963200",
            "text": "RT @jessicagarson: Posted my first tutorial on @ThePracticalDev on using v2 of the Twitter API! You will learn how to explore a user’s Twee…"
        },
        {
            "author_id": "2244994945",
            "created_at": "2020-08-21T19:10:05.000Z",
            "id": "1296887316556980230",
            "text": "See how @PennMedCDH are using Twitter data to understand the COVID-19 health crisis 📊\n\nhttps://t.co/1tdA8uDWes"
        }
    ],
    "includes": {
        "users": [
            {
                "created_at": "2013-12-14T04:35:55.000Z",
                "id": "2244994945",
                "name": "Twitter Dev",
                "username": "TwitterDev"
            }
        ]
    },
    "meta": {
        "newest_id": "1301573587187331074",
        "next_token": "t3buvdr5pujq9g7bggsnf3ep2ha28",
        "oldest_id": "1296887316556980230",
        "previous_token": "t3equkmcd2zffvags2nkj0nhlrn78",
        "result_count": 5
    }
}
```

**ステップ6：結果をページネーションする**

前のレスポンスの末尾には、次のフィールドを含む meta データオブジェクトがあります。

* oldest&#95;id
* newest&#95;id
* results&#95;count
* next&#95;token
* previous&#95;token

ステップ4では、max&#95;results の値として 5 を指定しました。これは、各ページに最大 5 件までの結果しか含まれないことを意味します。追加のページのデータにアクセスするには、直前の結果に含まれる next&#95;token フィールドの値を取得し、その文字列を Postman の params ページで pagination&#95;token パラメータの値として設定し、その他はすべて同じ設定のままにします。 

|                    |                               |
| :----------------- | :---------------------------- |
| **Key**            | **Value**                     |
| `pagination_token` | t3buvdr5pujq9g7bggsnf3ep2ha28 |

すべての設定が完了したら、再度「Send」をクリックすると、次のページの結果を取得できます。 

この概念についてさらに詳しく説明するために、[ページネーション](/ja/x-api/fundamentals/pagination) に関するガイドも用意しています。 

**次のステップ**
[API リファレンスを使ってリクエストをカスタマイズする](/ja/x-api/posts/timelines#api-reference-index)

[コミュニティに参加してヘルプを求める](https://devcommunity.x.com "Reach out to the community for help")
