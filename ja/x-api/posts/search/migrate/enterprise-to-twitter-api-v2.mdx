---
title: v1 から v2 (Enterprise)
sidebarTitle: v1 から v2 (Enterprise)
keywords: ["Enterprise から v2 への移行", "Enterprise 移行", "GNIP から v2 への移行", "Enterprise 検索の移行", "Enterprise を移行する", "v1 から v2 Enterprise"]
---

<div id="enterprise-compared-to-x-api-v2">
  ### Enterprise と X API v2 の比較
</div>

**共通点**

* ページネーション
* タイムゾーン
* ポストの編集履歴およびメタデータのサポート

**相違点**

* エンドポイントの URL
* アプリおよびプロジェクトに関する要件
* 利用可能な期間
* レスポンスデータの形式
* HTTP メソッド
* リクエストの時刻形式
* リクエストパラメータ
* フィルタリング用演算子

<div id="similarities">
  #### 類似点
</div>

**ページネーション**

v2 では、`since_id` と `until_id` を使ってポスト ID を基準にページを移動できる新しいページネーション用パラメータが追加されていますが、Enterprise も v2 も時間を使ったページネーション（Enterprise では `fromDate` と `toDate`、v2 では `start_time` と `end_time`）が可能です。
 

**タイムゾーン**

ページネーションのセクションで述べたように、Enterprise と v2 の両方で、時間を使って別のページのデータにアクセスできます。どちらの場合も、これらのパラメータを使用する際のタイムゾーンとして UTC を使用します。

**ポストの編集履歴とメタデータのサポート**

どちらのバージョンも、編集履歴を表すメタデータを提供します。詳細については、[search API リファレンス](/ja/x-api/posts/recent-search) および [Post edits の基本](/ja/x-api/fundamentals/edit-posts) を参照してください。 

<div id="differences">
  #### 相違点
</div>

**エンドポイント URL**

* Enterprise エンドポイント:
  * 30 日間 - `http://gnip-api.x.com/search/30day/accounts/:account_name/:label.json`
  * 全アーカイブ - `http://gnip-api.x.com/search/fullarchive/accounts/:account_name/:label.json`
* X API v2 エンドポイント
  * 最近 (7 日間) - `https://api.x.com/2/tweets/search/recent`
  * 全アーカイブ - `https://api.x.com/2/tweets/search/all`

**アプリとプロジェクトの要件**

X API v2 のエンドポイントでは、リクエストを認証する際にプロジェクトの認証情報を使用する必要があります。すべての X API v1.1 エンドポイントは、スタンドアロンのアプリ、またはプロジェクトに関連付けられたアプリの認証情報を使用できます。
 

**利用可能な期間**

Enterprise API と X API v2 の両方で、全アーカイブのポストに対してフィルタリングされたポストデータを取得できるエンドポイントを提供しています。

ただし、X API v2 には Enterprise API のような 30 日間の期間エンドポイントはありません。その代わりに、前述の全アーカイブ、または 7 日間の期間のエンドポイントを提供しており、これは Native Enriched から v2 への移行や、[Activity Streams から v2 への移行](/ja/x-api/migrate/data-format-migration#migrating-from-activity-streams-data-format-to-v2) と整合しています。これらは Enterprise API のフィールドを新しい v2 のフィールドにマッピングするのに役立ちます。このガイドでは、v2 のリクエストで特定のフィールドを返すために渡す必要がある、特定の `expansions` パラメータと `fields` パラメータについても説明します。
 

**レスポンスデータ形式**

[Enterprise レスポンス形式](https://developer.x.com/x-api/enterprise-gnip-2.0/fundamentals/data-dictionary)と [X API v2 の形式](/ja/x-api/fundamentals/data-dictionary) の最大の違いの 1 つは、どのフィールドをペイロードに含めて返すかの選択方法です。

Enterprise Search API では、多くのレスポンスフィールドがデフォルトで返され、そのうえでパラメータを使用して、どのフィールドまたはフィールドセットをペイロードに含めるかを指定できます。

X API v2 のバージョンでは、デフォルトでポストの `id` と `text` フィールドのみが返されます。追加のフィールドやオブジェクトをリクエストするには、[fields](/ja/x-api/fundamentals/fields) と [expansions](/ja/x-api/fundamentals/expansions) パラメータを使用する必要があります。これらのエンドポイントからリクエストしたポストのフィールドは、すべてメインのポストオブジェクト内で返されます。展開されたユーザー、メディア、投票、または場所オブジェクトとそのフィールドは、レスポンス内の `includes` オブジェクトに含まれて返されます。そのうえで、ポストと展開されたオブジェクトの両方に含まれる ID を照合することで、展開されたオブジェクトをポストオブジェクトに対応付けることができます。

これらの新しいパラメータについては、それぞれのガイド、あるいは[fields と expansions の使用方法](/ja/x-api/fundamentals/data-dictionary#how-to-use-fields-and-expansions)に関するガイドを読んで、詳しく確認することをおすすめします。

特定のフィールドのリクエスト方法が変わったことに加えて、X API v2 では API が返すオブジェクト、特に [ポスト](/ja/x-api/fundamentals/data-dictionary#tweet) や [ユーザー](/ja/x-api/fundamentals/data-dictionary#user) オブジェクトに対して、新しい JSON 設計も導入しています。

* JSON のルートレベルでは、従来の標準エンドポイントはポストオブジェクトを `statuses` 配列で返しますが、X API v2 は `data` 配列で返します。
* リツイートおよび引用された「statuses」を参照する代わりに、X API v2 の JSON ではリツイートされたポストおよび引用ポストを参照します。`contributors` や `user.translator_type` のような、多くのレガシーおよび非推奨フィールドは削除されます。
* ポストオブジェクトの `favorites` とユーザーオブジェクトの `favourites` の両方を使用する代わりに、X API v2 では「いいね」を表す用語として like を使用します。
* X では、値を持たない JSON 値（たとえば `null`）はペイロードに書き込まないという慣例を採用しています。ポストとユーザーの属性は、値が null でない場合にのみ含まれます。
   

また、ポストオブジェクトに対して、次のような新しいフィールドセットも導入しました。

* [conversation&#95;id](/ja/x-api/fundamentals/conversation-id) フィールド
* context と entities を含む 2 つの新しい [annotations](/ja/x-api/fundamentals/post-annotations) フィールド
* 複数の新しい [metrics](/ja/x-api/fundamentals/metrics) フィールド
* 特定のポストに誰が返信できるかを示す新しい `reply_setting` フィールド

最後にもう 1 点だけ補足です。プレミアム版のレスポンスにはルートレベルに `requestParameters` オブジェクトが含まれており、その中にリクエストで指定したパラメータが格納されています。これに対して v2 のバージョンでは、ルートレベルに `meta` オブジェクトが含まれており、追加の結果ページがある場合は `newest_id`、`oldest_id`、`result_count`、`next_token` が含まれます。

**HTTP メソッド**

API の Enterprise バージョンでは、リクエストを JSON ボディを持つ POST HTTP メソッド、またはクエリ文字列を持つ GET HTTP メソッドのいずれかとして送信できます。

v2 では、クエリ文字列を持つ GET HTTP メソッドのみが使用できます。
 

**リクエスト時刻の形式**

このエンドポイントの Enterprise バージョンでは、ページネーション用パラメータと `timePeriod` レスポンスフィールドの両方で、次の日時形式を使用します: `YYYYMMDDHHmm`

v2 エンドポイントでは、ページネーション用パラメータと `start` フィールドおよび `end` フィールドの両方で、ISO 8601/RFC 3339 の日時形式を使用します: `YYYY-MM-DDTHH:mm:ssZ
 `

**リクエストパラメータ**

以下は、Enterprise と X API v2 のリクエストパラメータの対応表です:

| Enterprise | Search Posts v2 |
| :--- | :--- |
| query | query |
| maxResults | max&#95;results |
| fromDate (YYMMDDHHmm) | start&#95;time (YYYY-MM-DDTHH:mm:ssZ) |
| toDate (YYMMDDHHmm) | end&#95;time (YYYY-MM-DDTHH:mm:ssZ) |
|     | since&#95;id |
|     | until&#95;id |
| next | next&#95;token or pagination&#95;token |

**フィルタリング演算子**

Enterprise と X API v2 間の演算子はほとんど同じですが、利用可能な演算子にいくつか違いがあるほか、X API v2 側にのみ導入された新しい演算子もあります。

X API v2、Enterprise、さらに Premium と Standard で利用可能な演算子の一覧表については、[Search Posts の移行ランディングページ](/ja/x-api/posts/search/migrate/overview)を参照してください。

**次のステップ**

[X API v2 フルアーカイブ検索のクイックスタートガイドを確認する](/ja/x-api/posts/search/quickstart/full-archive-search)

[フルアーカイブ検索の API リファレンスを確認する](/ja/x-api/posts/full-archive-search)

[これらのエンドポイント向けのサンプルコードを確認する](https://github.com/xdevplatform/Twitter-API-v2-sample-code)