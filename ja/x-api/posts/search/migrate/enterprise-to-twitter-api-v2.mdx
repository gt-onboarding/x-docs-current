---
title: v1 から v2 へ（Enterprise）
sidebarTitle: v1 から v2 へ（Enterprise）
keywords: ["Enterprise から v2 への移行", "Enterprise 移行", "GNIP から v2 への移行", "Enterprise Search 移行", "Enterprise の移行", "v1 から v2 への Enterprise 移行"]
---

<div id="enterprise-compared-to-x-api-v2">
  ### Enterprise と X API v2 の比較
</div>

**共通点**

* ページネーション
* タイムゾーン
* ポストの編集履歴とメタデータのサポート

**相違点**

* エンドポイント URL
* アプリおよびプロジェクトの要件
* 利用可能な期間
* レスポンスデータの形式
* HTTP メソッド
* リクエストの時刻形式
* リクエストパラメータ
* フィルタリング演算子

<div id="similarities">
  #### 類似点
</div>

**ページネーション**

v2 には、`since_id` と `until_id` を使用してポスト ID ベースでページを移動できる新しいページネーションパラメータなど、追加のページネーション機能がありますが、Enterprise と v2 のどちらでも、時間を使ったページネーション（Enterprise では `fromDate` と `toDate`、v2 では `start_time` と `end_time`）が可能です。
 

**タイムゾーン**

ページネーションのセクションで述べたとおり、Enterprise と v2 のどちらでも、時間を使って異なるデータページを取得できます。どちらの場合も、これらのパラメータを使用する際のタイムゾーンとして UTC を使用します。

**ポストの編集履歴およびメタデータのサポート**

どちらのバージョンも、編集履歴を表すメタデータを提供します。詳細については、[Search API リファレンス](/ja/x-api/posts/recent-search) および [Post edits の基本事項ページ](/ja/x-api/fundamentals/edit-posts) を参照してください。 

<div id="differences">
  #### 違い
</div>

**エンドポイント URL**

* Enterprise エンドポイント:
  * 30 日 - `http://gnip-api.x.com/search/30day/accounts/:account_name/:label.json`
  * 全アーカイブ - `http://gnip-api.x.com/search/fullarchive/accounts/:account_name/:label.json`
* X API v2 エンドポイント
  * 最近 (7 日) - `https://api.x.com/2/tweets/search/recent`
  * 全アーカイブ - `https://api.x.com/2/tweets/search/all`

**アプリとプロジェクトの要件**

X API v2 のエンドポイントでは、リクエストを認証する際にプロジェクトの認証情報を使用する必要があります。すべての X API v1.1 エンドポイントは、スタンドアロンの App またはプロジェクトに紐づいた App の認証情報を使用できます。
 

**利用可能な期間**

Enterprise API と X API v2 のどちらも、全アーカイブのポストに対するフィルタ済みポストデータを取得できるエンドポイントを提供しています。

ただし、X API v2 には Enterprise API のような 30 日の期間エンドポイントはありません。その代わりに、前述の全アーカイブ、もしくは 7 日の期間を提供しており、これは Native Enriched to v2 や [Activity Streams to v2](/ja/x-api/migrate/data-format-migration#migrating-from-activity-streams-data-format-to-v2) と整合しています。これらは Enterprise のフィールドを新しい v2 のフィールドにマッピングする際に役立ちます。このガイドでは、特定のフィールドを返すために v2 のリクエストで指定する必要がある、具体的な `fields` パラメータと `expansions` パラメータも提示します。
 

**レスポンスデータ形式**

[Enterprise のレスポンス形式](https://developer.x.com/x-api/enterprise-gnip-2.0/fundamentals/data-dictionary)と [X API v2 の形式](/ja/x-api/fundamentals/data-dictionary) の最大の違いの 1 つは、ペイロード内でどのフィールドを返すかをどのように選択するかという点です。

Enterprise Search API では、多くのレスポンスフィールドがデフォルトで返され、さらにパラメータを使用して、どのフィールドまたはどのフィールドセットをペイロードで返すかを指定することができます。

X API v2 では、デフォルトでポストの `id` と `text` フィールドだけが返されます。追加のフィールドやオブジェクトを要求するには、[fields](/ja/x-api/fundamentals/fields) と [expansions](/ja/x-api/fundamentals/expansions) パラメータを使用する必要があります。これらのエンドポイントから要求したポストのフィールドは、すべてメインのポストオブジェクト内で返されます。展開されたユーザー、メディア、投票、場所の各オブジェクトとフィールドは、レスポンス内の `includes` オブジェクトで返されます。その後、ポストオブジェクトと展開されたオブジェクトの両方に含まれる ID を突き合わせることで、展開されたオブジェクトをポストオブジェクトに対応付けることができます。

これらの新しいパラメータについては、それぞれのガイド、または [fields と expansions の使い方](/ja/x-api/fundamentals/data-dictionary#how-to-use-fields-and-expansions) に関するガイドを読んで理解を深めることをおすすめします。

特定のフィールドの要求方法の変更に加えて、X API v2 では API によって返されるオブジェクトの新しい JSON 設計も導入しています。これは [Post](/ja/x-api/fundamentals/data-dictionary#tweet) や [user](/ja/x-api/fundamentals/data-dictionary#user) オブジェクトなどを含みます。

* JSON のルートレベルでは、従来のエンドポイントはポストオブジェクトを `statuses` 配列で返しますが、X API v2 は `data` 配列で返します。
* リツイートおよび引用について「statuses」を参照する代わりに、X API v2 の JSON ではリツイートおよび引用されたポストを参照します。`contributors` や `user.translator_type` など、多くのレガシーおよび非推奨フィールドは削除されます。
* Post オブジェクトの `favorites` フィールドと user オブジェクトの `favourites` フィールドの両方を使用する代わりに、X API v2 では「like」という用語を使用します。
* X では、値を持たない JSON 値 (たとえば `null`) はペイロードに書き込まないという規約を採用しています。ポストおよびユーザー属性は、非 null 値を持つ場合にのみ含まれます。
   

また、ポストオブジェクトには次のような新しいフィールドも導入しました。

* [conversation&#95;id](/ja/x-api/fundamentals/conversation-id) フィールド
* context と entities を含む、2 つの新しい [annotations](/ja/x-api/fundamentals/post-annotations) フィールド
* いくつかの新しい [metrics](/ja/x-api/fundamentals/metrics) フィールド
* 特定のポストに誰が返信できるかを示す新しい `reply_setting` フィールド

最後に 1 点補足です。Premium のレスポンスには、ルートレベルに `requestParameters` オブジェクトが含まれ、そこにリクエストに含めたパラメータが格納されます。これに対して v2 のバージョンでは、ルートレベルに `meta` オブジェクトが含まれ、`newest_id`、`oldest_id`、`result_count`、および追加の結果ページがある場合は `next_token` が含まれます。

**HTTP メソッド**

API の Enterprise 版では、JSON ボディを伴う POST メソッド、もしくはクエリ文字列を伴う GET メソッドのどちらかでリクエストを送信できます。

v2 では、クエリ文字列を伴う GET メソッドのみが利用できます。
 

**リクエスト時刻の形式**

このエンドポイントの Enterprise 版では、ページネーション用パラメータおよび `timePeriod` レスポンスフィールドに、次の日時形式を使用します: `YYYYMMDDHHmm`

v2 エンドポイントでは、ページネーション用パラメータおよび `start` と `end` レスポンスフィールドに、ISO 8601/RFC 3339 の日時形式を使用します: `YYYY-MM-DDTHH:mm:ssZ
 `

**リクエストパラメータ**

以下は、Enterprise と X API v2 のリクエストパラメータの対応表です。

| Enterprise | Search Posts v2 |
| :--- | :--- |
| query | query |
| maxResults | max&#95;results |
| fromDate (YYMMDDHHmm) | start&#95;time (YYYY-MM-DDTHH:mm:ssZ) |
| toDate (YYMMDDHHmm) | end&#95;time (YYYY-MM-DDTHH:mm:ssZ) |
|     | since&#95;id |
|     | until&#95;id |
| next | next&#95;token or pagination&#95;token |

**フィルタリングオペレーター**

Enterprise と X API v2 の間で、利用できるオペレーターはほとんど同じですが、一部では利用可否が異なり、X API v2 のみに追加された新しいオペレーターもあります。

X API v2、Enterprise、さらに premium および standard で使用可能なオペレーターの一覧表については、[Search Posts 移行ランディングページ](/ja/x-api/posts/search/migrate/overview)を参照してください。

**次のステップ**

[X API v2 のフルアーカイブ検索クイックスタートガイドを確認する](/ja/x-api/posts/search/quickstart/full-archive-search)

[フルアーカイブ検索の API リファレンスを確認する](/ja/x-api/posts/full-archive-search)

[これらのエンドポイント向けのサンプルコードを確認する](https://github.com/xdevplatform/Twitter-API-v2-sample-code)