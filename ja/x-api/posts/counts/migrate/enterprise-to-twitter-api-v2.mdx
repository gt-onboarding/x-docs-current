---
title: v1 から v2 へ（Enterprise）
sidebarTitle: v1 から v2 へ（Enterprise）
keywords: ["enterprise to v2 counts", "enterprise counts migration", "GNIP to v2 counts", "enterprise counts migration", "migrate enterprise counts"]
---

<div id="enterprise-compared-to-x-api-v2">
  ### Enterprise と X API v2 の比較
</div>

**共通点**

* 粒度
* ページネーション
* タイムゾーン

**相違点**

* エンドポイント URL
* アプリおよびプロジェクトの要件
* 利用可能な時間範囲
* レスポンスデータ形式
* HTTP メソッド
* リクエストの時刻形式
* リクエストパラメータ
* フィルタリング演算子

<div id="similarities">
  #### 類似点
</div>

**粒度**

返されるデータの粒度を選択するためのパラメータは異なります（Enterprise 版では `bucket`、v2 版では `granularity`）が、そのパラメータに指定できる値とデフォルトの動作は同じです。

* `day`
* `hour` (default)
* `minute`

**ページネーション**

v2 には追加のページネーション機能（`since_id` と `until_id` を使ってポストIDに基づいてページをたどれる新しいページネーションパラメータ）がありますが、Enterprise と v2 のどちらでも、時間に基づくページネーションが可能です（Enterprise では `fromDate` と `toDate`、v2 では `start_time` と `end_time`）。

Enterprise 版を使用している場合、ページネーションには `next` パラメータを使用し、次ページを示すトークンフィールドは `next` という名前で、レスポンスのルート要素直下に含まれます。

v2 を使用している場合、ページネーションには `next_token` または `pagination_token` パラメータのどちらかを使用でき、次ページを示すトークンはレスポンスの `meta.next_token` に含まれます。
 

**タイムゾーン**

ページネーションのセクションで述べたように、Enterprise と v2 のどちらでも、時間を使って異なるページのデータを取得できます。どちらの場合も、これらのパラメータを使用する際のタイムゾーンは UTC（協定世界時）です。

<div id="differences">
  #### 相違点
</div>

**エンドポイント URL**

* Enterprise エンドポイント:
  * 30 day - `http://gnip-api.x.com/search/30day/accounts/:account_name/:label/counts.json`
  * Full-archive - `http://gnip-api.x.com/search/fullarchive/accounts/:account_name/:label/counts.json`
* X API v2 エンドポイント
  * Recent (7 day) - `https://api.x.com/2/tweets/counts/recent`
  * Full-archive - `https://api.x.com/2/tweets/counts/all`

**アプリとプロジェクトの要件**

X API v2 エンドポイントでは、リクエストを認証する際に、[開発者アプリ](/ja/resources/fundamentals/developer-apps) に紐づけられた [プロジェクト](/ja/resources/fundamentals/developer-apps) の認証情報を使用する必要があります。X API v1.1 のすべてのエンドポイントでは、スタンドアロンの App、またはプロジェクトに紐づく App のいずれの認証情報も使用できます。
 

**利用可能な期間**

Enterprise API と X API v2 の両方で、ポストのフルアーカイブに対するポスト数（ボリューム）データを取得できるエンドポイントが提供されています。

しかし、X API v2 には Enterprise API のような 30 日間用エンドポイントはありません。代わりに、前述のフルアーカイブ用エンドポイント、または [v2 Search Posts エンドポイント](/ja/x-api/posts/search/introduction) と整合する 7 日間用エンドポイントが提供されています。
 

**レスポンスデータ形式**

Enterprise と X API v2 で受け取るデータ形式には、いくつか細かな違いがあります。

* Enterprise の件数データは `results` オブジェクト内にありますが、v2 の件数データは `data` オブジェクト内にあります。
* Enterprise の件数フィールド名は `timePeriod`（開始時刻）と `count` ですが、v2 では期間を `start` フィールドと `end` フィールドに分割し（日時形式も Enterprise とは異なり、「リクエスト時刻形式」で説明されています）、`count` フィールド名は `tweet_count` に変更されています。
* Enterprise のメタデータには、ルートレベルに `totalCount`、`next`、および `requestParameters` オブジェクトが含まれます。一方、v2 では `requestParameters` オブジェクトは含まれず、代わりに次の項目をルートレベルに存在する `meta` オブジェクト内へ移動・改名しています: `total_tweet_count` と `next_token`。
   

**HTTP メソッド**

Enterprise 版の API では、JSON ボディを持つ POST HTTP メソッド、またはクエリ文字列を持つ GET HTTP メソッドのいずれかでリクエストを送信できます。

v2 では、クエリ文字列を持つ GET HTTP メソッドのみ使用できます。
 

**リクエスト時刻形式**

Enterprise 版のこのエンドポイントは、ページネーション用パラメータと `timePeriod` レスポンスフィールドの両方で、次の日時形式を使用します: `YYYYMMDDHHmm`

v2 エンドポイントは、ページネーション用パラメータと `start` および `end` レスポンスフィールドの両方で、ISO 8601/RFC 3339 の日時形式を使用します: `YYYY-MM-DDTHH:mm:ssZ`

**リクエストパラメータ**

以下は、Enterprise と X API v2 のリクエストパラメータの一覧表です。

| Enterprise | Search Posts v2 |
| :--- | :--- |
| query | query |
| bucket | granularity |
| fromDate (YYMMDDHHmm) | start&#95;time (YYYY-MM-DDTHH:mm:ssZ) |
| toDate (YYMMDDHHmm) | end&#95;time (YYYY-MM-DDTHH:mm:ssZ) |
|     | since&#95;id |
|     | until&#95;id |
| next | next&#95;token and pagination&#95;token |

**フィルタリングオペレーター**

Enterprise と X API v2 間でオペレーターはほぼ同じですが、利用可能なオペレーターにはいくつか違いがあり、X API v2 にのみ導入された新しいオペレーターも存在します。

X API v2、Enterprise、さらに Premium で利用可能なオペレーターの完全な一覧表については、[Post counts migration ランディングページ](/ja/x-api/posts/counts/migrate/overview) を参照してください。

<div id="api-reference-index">
  ## API リファレンス一覧
</div>

完全な API リファレンスを確認するには、以下のエンドポイントから選択してください。

<div id="recent-post-counts">
  ### 最近のポスト件数
</div>

|     |     |
| :--- | :--- |
| **過去7日間にクエリに一致するポストの件数を取得する** | `[GET /2/tweets/counts/recent](/x-api/posts/tweet-counts#api-reference-index/get-tweets-counts-recent)` |

<div id="full-archive-post-counts">
  ### 全アーカイブのポスト件数
</div>

[Pro と Enterprise アクセス](/ja/x-api/getting-started/about-x-api)をお持ちの方のみご利用いただけます

|     |     |
| :--- | :--- |
| **クエリに一致するポストの件数を取得する** | `[GET /2/tweets/counts/all](/x-api/posts/tweet-counts#api-reference-index/get-tweets-counts-all)` |