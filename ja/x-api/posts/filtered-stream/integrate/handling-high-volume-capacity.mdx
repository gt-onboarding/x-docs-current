---
title: 高ボリュームデータへの対応
sidebarTitle: 高ボリュームデータへの対応
keywords: ["高ボリューム", "キャパシティ管理", "ストリーム容量", "ボリューム管理", "高スループット", "ストリームのスケーリング"]
---

---

<div id="how-to-plan-for-high-volume-social-data-events">
  ### 大量のソーシャルデータが発生するイベントへの備え方
</div>

主要な国内外のイベントが発生すると、ソーシャルメディアプラットフォーム全体でユーザーアクティビティが劇的に増加することがよくあります。Super Bowl、政治選挙、世界各地の新年の祝賀行事のように事前に把握できるイベントもあれば、自然災害、突発的な政治イベント、ポップカルチャーの出来事、COVID-19 のような感染症のパンデミックなど、予期せぬ出来事が原因で投稿量が急増する場合もあります。

このようなユーザーアクティビティの急増は、ごく短時間（秒単位）で収まることもあれば、数分間にわたって持続することもあります。発生要因が何であれ、X のデータを利用するアプリケーションに与えうる影響を考慮することが重要です。ここでは、大量のソーシャルデータが発生するイベントに備えるうえで、チームの役に立つベストプラクティスをいくつか紹介します。

<div id="review-your-current-filtered-stream-rules">
  #### 現在の filtered stream ルールを見直す
</div>

* 特定のキーワードは、ブランドが大規模なスポーツイベントをスポンサーする際のブランド言及など、高ボリュームなイベント時に急増することがあります。
* 不要なデータ量を発生させてしまうような、冗長または汎用的すぎるルールは避けるよう注意してください。
* 想定される高ボリュームイベントの前にクライアントと連絡を取り、適切な計画を立てられるよう調整することを検討してください。
     

<div id="stress-test-your-application">
  #### アプリをストレステストする
</div>

バースト時のデータ量は、平均的な1日あたりの利用量の 5～10 倍に達する可能性があると想定してください。ルールセットによっては、それ以上に増加する場合もあります。

<div id="understand-delivery-caps-for-connections">
  #### 接続に対する配信上限を理解する
</div>

フローと配信の上限はアクセスレベルに基づいて決まります。これにより、ストリームで配信される結果の量は固定されます。

* **Academic**: 250 ポスト/秒
* **Enterprise**: ポスト/秒はアクセスレベルで設定されます

<div id="optimize-to-stay-connected">
  #### 接続を維持するよう最適化する
</div>

ストリームでは、データを取り逃さないために接続を維持することが不可欠です。クライアントアプリケーションは切断を検出でき、再接続の試行が失敗した場合には指数バックオフを用いて直ちに再接続を再試行するロジックを備えている必要があります。
 

<div id="add-built-in-buffering-on-your-end">
  #### アプリ側でバッファリングを組み込む
</div>

マルチスレッドのアプリケーションを構築することは、大量のストリーミングデータを処理するうえで重要な戦略です。大まかには、データストリームを管理するためのベストプラクティスは、ストリーミング接続を確立する専用のスレッド／プロセスを用意し、受信した JSON アクティビティをメモリ構造やバッファ付きストリームリーダーに書き込むことです。この「軽量な」ストリーム処理スレッドは、必要に応じて増減可能なメモリ上のバッファに格納される受信データの処理を担当します。その後、別のスレッドがそのハッシュからデータを取り出し、JSON のパース、データベース書き込みの準備、その他アプリケーションで必要な処理といった「重い処理」を行います。
 

<div id="global-events-global-time-zones">
  #### グローバルイベント = グローバルなタイムゾーン
</div>

イベントは営業時間外や週末に発生することがあるため、通常の営業時間外にもスパイクに対応できるよう、チームの準備を整えておいてください。