---
title: クイックスタート
sidebarTitle: クイックスタート
keywords: ["Spaces 検索 クイックスタート", "検索 Spaces クイックスタート", "Spaces 検索チュートリアル", "Spaces 検索ガイド"]
---

import { Button } from '/snippets/ja/button.mdx';

<div id="getting-started-with-the-search-spaces-endpoint">
  ## search Spaces エンドポイントの利用を開始する
</div>

このクイックスタートガイドでは、Postman を使用して、指定したフィールドセットを含めて search Spaces エンドポイントへ最初のリクエストを送信する方法を説明します。

さまざまなプログラミング言語でのサンプルコードを確認したい場合は、[X API v2 sample code GitHub repository](https://github.com/xdevplatform/Twitter-API-v2-sample-code) を参照してください。

<Note>
  **前提条件**

  このガイドを完了するには、リクエストを認証するための一連の [keys and tokens](/ja/resources/fundamentals/authentication) が必要です。これらのキーとトークンは、次の手順に従って生成できます。

  * [開発者アカウントにサインアップ](https://developer.x.com/en/apply-for-access) し、承認を受けてください。
  * 開発者ポータルで、[プロジェクト](/ja/resources/fundamentals/projects) とそれに関連付けられた [開発者アプリ](/ja/resources/fundamentals/developer-apps) を作成します。
  * アプリの「Keys and tokens」ページに移動して、必要なクレデンシャルを生成します。すべてのクレデンシャルを安全な場所に保存してください。
</Note>

<div id="steps-to-build-a-search-spaces-request">
  ### スペース検索リクエストを構築する手順
</div>

**ステップ1：ツールまたはライブラリを用意する**

このエンドポイントにリクエストを送信する方法として、使用できるツール、コード例、ライブラリはいくつかありますが、ここでは手順を簡略化するために Postman ツールを使用します。

X API v2 の Postman コレクションを環境に読み込むには、次のボタンをクリックしてください。

<Button href="https://app.getpostman.com/run-collection/9956214-784efcda-ed4c-4491-a4c0-a26470a67400">
  X API v2 を Postman に追加
</Button>

Postman に X API v2 コレクションが読み込まれたら、Spaces フォルダに移動し、「Search Spaces」リクエストを探します。
 

**ステップ2：リクエストを認証する**

X API へ適切にリクエストを送信するには、自分にアクセス権限があることを確認する必要があります。そのために、このエンドポイントでは、[OAuth 2.0 App-Only](/ja/resources/fundamentals/authentication#bearer-token-also-known-as-app-only) または [OAuth 2.0 Authorization Code with PKCE](/ja/resources/fundamentals/authentication#oauth-2-0-authorization-code-flow-with-pkce-2) のいずれかの認証方式でリクエストを認証する必要があります。

ここでは説明を簡単にするため、このリクエストでは OAuth 2.0 アプリ専用フロー を使用します。ただし、プライベートな [メトリクス](/ja/x-api/fundamentals/metrics) や非公開ユーザーの Spaces を取得したい場合は、別の認証方式を使用する必要があります。 

OAuth 2.0 アプリ専用フロー を利用するには、Postman の環境にキーとトークン、具体的には [App Access Token](/ja/resources/fundamentals/authentication#bearer-token-also-known-as-app-only)（App-only Bearer Token とも呼ばれます）を追加する必要があります。これを行うには、Postman 画面右上の環境ドロップダウンから「X API v2」という環境を選択し、「initial value」と「current value」のフィールドにキーとトークンを追加します（環境ドロップダウンの横にある目のアイコンをクリックします）。

正しく設定できていれば、これらの変数は自動的にリクエストの「Authorization」タブに反映されます。
 

**ステップ3：検索クエリを作成する**

このエンドポイントは、検索クエリとしてテキストを受け付けます。他の検索エンドポイントとは異なり、オペレーター、グルーピング、論理演算子は使用できません。この演習では、シンプルなクエリとして「hello」を使用します。

Postman で「Params」タブに移動し、このユーザー ID を id パラメータの「Value」列に入力します。

|         |           |
| :------ | :-------- |
| **Key** | **Value** |
| query   | hello     |

**ステップ4：取得したいフィールドを特定して指定する**

ステップ3のあとに「Send」ボタンをクリックすると、レスポンスでは Space の ID とその state が返されます。これは、レスポンスでデフォルトで返される唯一の Space オブジェクトのフィールドです。

追加のフィールドを受け取りたい場合は、space.fields または expansions パラメータを使って、リクエスト内で明示的に指定する必要があります。

この演習では、異なるオブジェクトから 3 つの追加のフィールドセットをリクエストします。

* メインの Spaces オブジェクトにおける追加の title フィールド
* 指定した creator ID に対応する完全なユーザーオブジェクト
* 関連ユーザーオブジェクトにおける追加の user.created&#95;at フィールド

Postman で「Params」タブに移動し、「Query Params」テーブルに次の key:value のペアを追加します。

|              |                |                                                                 |
| :----------- | :------------- | :-------------------------------------------------------------- |
| **Key**      | **Value**      | **返されるフィールド**                                                   |
| space.fields | title          | creator&#95;id                                                  |
| expansions   | creator&#95;id | includes.users.id, includes.users.name, includes.users.username |
| user.fields  | created&#95;at | includes.users.created&#95;at                                   |

ここまで設定すると、「Send」ボタンの横に次の URL が表示されているはずです。

[https://api.x.com/2/spaces/search?query=hello&amp;space.fields=creator&#95;id&amp;expansions=creator&#95;id&amp;user.fields=created&#95;at](https://api.x.com/2/spaces/search?query=hello\&space.fields=creator\\_id\&expansions=creator\\_id\&user.fields=created_at)

**ステップ5：リクエストを送信し、レスポンスを確認する**

すべての設定が完了したら、「Send」ボタンをクリックすると、次のレスポンスが返されます。

```{
   "data": [
    {
        "creator_id": "2244994945",
        "id": "1zqKVXPQhvZJB",
        "title": "Hello world 👋",
        "state": "Running"
   },
   "includes": {
       "users": [
           {
               "created_at": "2013-12-14T04:35:55.000Z",
               "name": "Twitter Dev",
               "id": "2244994945",
               "username": "TwitterDev"
           }
       ]
   }
]
}
```
