---
title: Webコンバージョン
keywords: ["Webコンバージョン", "コンバージョン計測", "Webコンバージョン計測", "コンバージョン", "コンバージョンのトラッキング", "コンバージョンAPI"]
---

import { Button } from '/snippets/ja/button.mdx';

<div id="conversion-api-set-up">
  ## Conversion API のセットアップ
</div>

<div id="prerequisites">
  ### 前提条件
</div>

<div id="ads-api-access-new-applications">
  #### **Ads API Access - 新規アプリケーション**
</div>

* Conversion API を利用するための主な要件は、[開発者アカウント](https://developer.x.com/en/portal/dashboard)と [Ads API Access](https://developer.x.com/en/docs/twitter-ads-api/getting-started) を保有していることです。手順の概要は [Ads API Getting Started](https://developer.x.com/en/docs/twitter-ads-api/getting-started) ガイドで説明されています。次の点に留意してください。

**Step 1: Developer Account**

* [開発者アカウント](https://developer.x.com/en/portal/dashboard) を申請する際は、即時承認を受けるために、いずれかのサブスクリプション[プラン](https://developer.x.com/en/portal/products/)にお申し込みください。 
* **注意**: ベストプラクティスとして、公式な自社の X ハンドルを使用して開発者アカウントを作成し、Ads API アクセスを申請することを強く推奨します。開発者アカウントが個人の開発者ハンドルに紐づいている場合、必要になってもその認証情報を譲渡する方法はありません。継続的な管理のためには、会社の公式アカウントで運用し、必要に応じて [Multi-user login](https://business.x.com/en/help/troubleshooting/multi-user-login-faq.html) を利用するのが最適です。そうでない場合でも最低限、アカウントにはデフォルト以外の設定（ヘッダー画像、アバター、自己紹介文、自己紹介 URL）を行い、2 要素認証を有効にしておく必要があります。

**Step 2: Ads API Application**

* Ads API Application 向けに正しい **App** **ID** を必ず用意してください。App ID は [Developer Portal](https://developer.x.com/en/portal/dashboard) の「Projects &amp; Apps」内で確認できます。例: 16489123
* X の担当者に連絡し、Ads API へのアクセスをリクエストしてください。

<div id="ads-api-access-existing-applications">
  #### **Ads API へのアクセス - 既存アプリケーション**
</div>

* すでに現在利用している Ads API アプリケーションがある場合は、そのアプリケーションと既存のアクセストークンの両方を Conversion API で利用できます。

<div id="access-tokens">
  #### **アクセストークン**
</div>

* Ads API アプリケーションを所有しているユーザーハンドルのユーザーアクセストークンは、developer ポータルから直接生成して取得できます。これはあなた自身の X ハンドルでの利用を想定しているため、「personal access token（パーソナルアクセストークン）」と呼ばれます。認証および developer ポータル全般に関する情報は[こちら](/ja/resources/fundamentals/authentication/overview)にあります。
* Ads API アプリケーションを所有しているユーザーハンドル以外のユーザーハンドル向けのユーザーアクセストークンは、3-legged OAuth フローで生成する必要があります。3-legged OAuth を使用してアクセストークンを生成するためのオプションには次のものがあります：
  * [twurl ユーティリティを使った、Web ベースの認可を利用するコマンドライン](https://github.com/twitter/twurl#getting-started)
  * [PIN ベースの認可を利用するコマンドライン](https://developer.x.com/resources/fundamentals/authentication/pin-based-oauth)
  * [3-legged OAuth パターンを実装したカスタム Web フロー](https://developer.x.com/resources/fundamentals/authentication/obtaining-user-access-tokens)
* Conversion API で利用するユーザートークンはすべて、AD&#95;MANAGER または ACCOUNT&#95;ADMIN のアクセスレベルを持つユーザーのものである必要があります。これは [authenticated&#95;user&#95;access](https://developer.x.com/en/docs/twitter-ads-api/campaign-management/api-reference/authenticated-user-access) エンドポイントで確認できます。
* **注:** 上記の手順で作成されたトークン自体は、利用してもらう目的であれば AD&#95;MANAGER または ACCOUNT&#95;ADMIN のアクセスレベルを持たないユーザーと共有することもできます。

<div id="steps">
  ### **手順**
</div>

<div id="creating-the-conversion-api-event">
  ### Conversion API イベントの作成
</div>

Conversion API を利用するには、Ads Manager で新しいコンバージョンイベントを作成するか、すでに作成済みで X Pixel で使用している既存のイベントを利用する必要があります。Pixel と Conversion API のイベント間で重複排除を行いたい場合は、Pixel 用に作成した既存のイベントを使用してください。 

<div id="option-1-using-an-existing-conversion-event-in-ads-manager">
  ##### オプション 1: Ads Manager で既存のコンバージョンイベントを使用する
</div>

すでに X pixel で使用している既存のイベントを利用したい場合は、そのイベントをそのまま使用でき、そのイベントの Event ID を取得する必要があります。同じイベントに対して pixel と Conversion API の両方を使用する場合は、Pixel のコードスニペットと Conversion API リクエストの両方で重複排除キーを（`conversion_id` として）指定し、同一イベントについて Pixel と Conversion API 間でイベントが重複しないようにしてください。詳細については、セクション d.「イベントのテストと重複排除」を参照してください。 

<div id="option-2-creating-a-new-conversion-event-in-ads-manager">
  ##### オプション 2: Ads Manager で新しいコンバージョンイベントを作成する:
</div>

イベントを作成する前に、Events Manager であらかじめ Event Source を作成しておくことが重要です。アカウントに Event Source（X Pixel）が追加されているか確認するには、Events Manager に移動し、左側のメニューに X Pixel が表示されているか確認してください。 

まだ Event Source が追加されていない場合は、以下の手順に従って Event Source を作成してください。

1. ads.x.com にアクセスします
2. 左上の **Tools** セクションに移動し、**Events Manager** をクリックします
3. 右上の Add event source を選択し、左側のサイドバーにまだ X Pixel の Event Source がない場合は **Add an event source** をクリックします
   1. X Pixel Event Source の ID が **Pixel ID** です

これで Event Source と Pixel ID が用意できました。次に、計測したいコンバージョンイベント用に、その Event Source 内にイベントを作成する必要があります。

1. X Pixel Event Source 内で、右側の **Add events** を選択します
2. Install with **Conversion API** を選択します
3. API で使用される、このイベントの **Pixel ID** と **Event ID** が表示されます
   1. このイベントの ID が Event ID です
4. Save をクリックすると、コンバージョンイベントが作成され、すぐに利用できる状態になります

<div id="preparing-identifiers-for-conversion-events">
  ### コンバージョンイベント用識別子の準備
</div>

現在、Click ID（`twclid`）、メールアドレス、電話番号のいずれか、少なくとも 1 つの識別子を送信する必要があります。IP アドレスまたはユーザーエージェントを使用する場合は、コンバージョンを正しくマッチングするために、2 つ目の識別子も送信する必要があります。

より多くの識別子を送信することで、コンバージョンマッチング率が向上します。

|     |     |     |
| :--- | :--- | :--- |
| カスタマーマッチング用フィールド | 形式 | ハッシュ化は必要ですか？ |
| X Click ID | X により生成（[詳細](https://business.x.com/en/help/campaign-measurement-and-analytics/conversion-tracking-for-websites.html#faq)） | 不要  |
| メールアドレス | 先頭と末尾のスペースを削除 | 必須（SHA256） |
| 電話番号 | [E.164 規格](https://en.wikipedia.org/wiki/E.164) | 必須（SHA256） |

|     |     |     |
| :--- | :--- | :--- |
| IP アドレス | 先頭と末尾のスペースを削除 | 不要  |
| ユーザーエージェント | 先頭と末尾のスペースを削除 | 不要  |

<div id="1-prepare-x-click-id-identifier">
  #### 1. X Click ID 識別子を準備する
</div>

コンバージョンリクエストには常に Click ID を含めることを推奨します。

ユーザーが遷移先の Web サイトにアクセスした際に、利用可能であればクエリ文字列パラメータ `twclid` から Click ID を取得してパースする必要があります。 

基本的な JavaScript のコード例:

```js
var queryString = document.location.search;
if (queryString.has('twclid') {
  twitterClickID = getParam(queryString, 'twclid');
  // 推奨される次のステップ: ログ記録、ローカルストレージへの挿入
}
```

次のことを推奨します。

1. URL のクエリパラメーター内に `twclid` の値が存在する場合は、必ずパースする。

2. 関連するフォームフィールドやコンバージョンイベント情報と一緒にデータを保存する。

Click ID をコンバージョンイベントおよびワークフロー情報に紐付けることで、バッチ処理や、複数のウェブサイト上のナビゲーションフローに基づいてコンバージョンイベントを分析・作成するアルゴリズム、大量アップロードなどのシナリオが可能になります。

Event Source URL は[URL エンコード](https://en.wikipedia.org/wiki/Percent-encoding)されている必要があり、イベントをトリガーしたウェブページを表すものです。

<div id="2-prepare-email-identifier">
  #### 2. メール識別子を準備する
</div>

サポートされている顧客マッチング用フィールドは送信してもかまいませんが、正規化し、必要に応じてハッシュ化してプライバシーを保護する必要があります。

この情報は、ソルトなしの SHA256 を使用してハッシュ化しなければなりません。 

たとえば、メールアドレス test@x.com の場合、次のようなハッシュ値として送信する必要があります: d360d510a224510f373931ce2d6215a799f5a9c1cef221b0149b6b6b50cced62。

<div id="3-prepare-phone-identifier">
  #### 3. 電話番号識別子を準備する
</div>

電話番号は [E.164 標準](https://en.wikipedia.org/wiki/E.164) に従った形式で指定し、この情報をソルトなしの SHA-256 でハッシュ化する必要があります。 

たとえば、米国の電話番号 +11234567890 の場合、次のハッシュ値として X に送信する必要があります：1fa6b8d986d9b9cd01bf36951815158bbde9f520c0567c835dfe34783d0a4231。

<div id="4-prepare-ip-address-identifier">
  #### 4. IP アドレス識別子の準備
</div>

IP アドレスは、別の識別子（twclid、メールアドレス、電話番号、またはユーザーエージェント）と組み合わせて送信する必要があります。この識別子についてはハッシュ化は不要です。

この値は、4 つの数値をピリオドで区切ったドット区切り 10 進表記で記述します。例えば、ユーザーの IP アドレスは 8.25.197.25 のような形式になります。

<div id="5-prepare-user-agent-identifier">
  #### 5. ユーザーエージェント識別子を準備する
</div>

User Agent は、他の識別子（twclid、メールアドレス、電話番号、または IP アドレス）のいずれかと組み合わせて送信する必要があります。この識別子をハッシュ化する必要はありません。

この識別子により、サーバーはリクエストしているユーザーエージェントのアプリケーション、オペレーティングシステム、ベンダー、バージョンなどを特定できます。たとえば、この値として Mozilla/5.0 (Macintosh; Intel Mac OS X 10&#95;15&#95;7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/127.0.0.0 Safari/537.36 のような文字列を送信できます。

<div id="constructing-the-conversion-event-request">
  ### コンバージョンイベントリクエストの作成
</div>

`POST: version/measurement/conversions/:pixel_id`

特定の広告アカウントに対してコンバージョンイベントを送信します。レスポンスコードを確認し、HTTP 200 OK が返されていることを必ず確認してください。エラーコードが返された場合に備え、リトライ機構と基本的なログ出力を実装しておくことを推奨します。

エンドポイントの URL および POST ボディのパラメータに関する詳細情報については、[API Reference](https://developer.x.com/en/docs/twitter-ads-api/measurement/api-reference/conversions) セクションを参照してください。 

<div id="example-request-formatted-for-readability">
  ### リクエスト例（読みやすく整形済み）
</div>

```json

    twurl -H 'ads-api.x.com' -X POST '/12/measurement/conversions/oka17' --data '
    {
      "conversions":[
         {
            "conversion_time":"2022-02-18T01:14:00.603Z",
            "event_id":"ol288",
            "identifiers":[
               {
                  "twclid":"23opevjt88psuo13lu8d020qkn"
               },
               {
                  "hashed_email":"d360d510a224510f373931ce2d6215a799f5a9c1cef221b0149b6b6b50cced62"
               },
               {
                  "hashed_phone_number":"1fa6b8d986d9b9cd01bf36951815158bbde9f520c0567c835dfe34783d0a4231"
               },
               {
                  "ip_address":"1.0.0.0",
                  "user_agent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/127.0.0.0 Safari/537.36"
               }
            ],
            "value":"20.00",
            "number_items":3,
            "conversion_id":"23294827",
            "description":"ペット用品の購入",
            "contents":[
               {
                  "content_id":"1",
                  "content_name":"Blankets",
                  "content_type":"Pet supplies",
                  "content_price":100.99,
                  "num_items":1,
                  "content_group_id":"123"
               }
            ]
         }
      ]
    }' --header 'Content-Type: application/json'

```

### レスポンス例

```json
{"request": {
 "params": {
     "account_id":"18ce552mlaq"}
 },
 "data": {
    "conversions_processed":1,
     "debug_id":"ff02e052-36e4-47d6-bdf0-6d8986446562"}
}
```

<div id="rate-limit">
  ### レート制限
</div>

レート制限は、15 分間につきアカウントごとに 60,000 件のイベントです。

サーバー側のコードでは、このリクエスト呼び出しとは別に、次のようなロジックを実装する必要が生じる場合があります。

1. ユーザーの行動を計測（ログ記録）して、イベントごとに正しいコンバージョンデータを送信できるようにすること

2. 関連するプライバシー選択を行ったユーザーのコンバージョンイベントを除外するために必要なロジック。たとえば、広告主のウェブサイト上でトラッキングや個人情報の販売をオプトアウトしたユーザーのイベントを除外すること

3. イベントトリガーやページとの連携を行い、イベントを取得してコンバージョンを送信すること

<div id="testing-events-and-deduplication">
  ### イベントのテストと重複排除
</div>

<div id="testing-events">
  ### イベントのテスト
</div>

イベントでコンバージョンイベントが正常に受信されると、12〜24時間以内に Ads Manager のコンバージョントラッキングページ上で「Single event web tag」のステータスが TRACKING と表示されるようになります。Conversion API 経由でコンバージョンを送信しても、配信中のキャンペーンには影響しません。

また、以下の方法でタグ ID ごとのコンバージョンイベントのアナリティクス結果を確認できます。

* Ads Manager のデータエクスポート（[Web サイトコンバージョントラッキングのアナリティクスヘルプページ](https://business.x.com/en/help/campaign-measurement-and-analytics/conversion-tracking-for-websites.html)）

* Ads API を使用してデータをエクスポート（segmentation&#95;type=CONVERSION&#95;TAGS） 

<div id="duplication-between-pixel-and-conversion-api">
  ### Pixel と Conversion API 間の重複
</div>

Pixel と Conversion API リクエスト間でコンバージョンの重複排除を行いたい場合は、重複排除キーとして conversion&#95;id を使用できます。重複排除はイベント単位でのみ行われます。言い換えると、Pixel と CAPI リクエスト間で重複排除を行うには、同じ conversion&#95;id を使用することに加えて、広告主は Pixel と CAPI の両方のリクエストで同一のイベントを使用する必要があります。重複排除は、48 時間以内の時間枠で受信されたイベントに対してのみ行われます。

<div id="conversion-tracking-overview">
  ## コンバージョントラッキング（概要）
</div>

<div id="summary">
  ### 概要
</div>

コンバージョントラッキングを使用すると、X 上の広告を閲覧・エンゲージした後に、望ましいアクションを実行した X ユーザーの数を計測できます。これにより、サイト訪問、サインアップ、購入など、どのキャンペーンがそれらのアクションを促しているかを把握できるようになります。広告主は、X 外でのコンバージョン計測機能を通じてダイレクトレスポンス広告のパフォーマンスを理解し、費用対効果の高い方法で顧客を獲得できるようになります。

コンバージョンタグを使用すると、広告主はユーザーのコンバージョンをトラッキングし、それらを X 上の広告キャンペーンにひも付けることができます。これにより、キャンペーンを最適化して顧客獲得単価（CPA）目標を達成するために必要な可視性が得られます。

コンバージョントラッキングを用いることで、広告主はさまざまなウェブサイト上のアクションを計測できます。広告キャンペーンで喚起したいアクションに応じて、1 つ以上を選択できます。

* サイト訪問: ユーザーが広告主のサイト上のランディングページを訪問する
* 購入: ユーザーが広告主のサイト上で商品またはサービスの購入を完了する
* ダウンロード: ユーザーが広告主のサイトから、ホワイトペーパーやソフトウェアパッケージなどのファイルをダウンロードする
* サインアップ: ユーザーが広告主のサービス、ニュースレター、またはメール配信に登録する
* カスタム: 上記のいずれにも該当しないカスタムアクション向けの総称カテゴリ

X のコンバージョントラッキングを使用すると、広告主はコンバージョンアトリビューションを包括的に把握できます。ユニークなクリック URL とサードパーティのトラッキングタグを組み合わせた仕組みなど、X 独自のコンバージョントラッキング機能の代わりに広告主が利用してきたサードパーティ計測システムと比較して、X のコンバージョンタグは、ポストの詳細表示、リポスト、いいね、返信、フォロー、およびインプレッションなど、中位・上位ファネルのエンゲージメントに起因するコンバージョンをトラッキングできる機能を広告主に提供します。

<div id="faq">
  ### よくある質問
</div>

<AccordionGroup>
  <Accordion title="コンバージョントラッキングタグはどのように機能しますか？">
    まず、広告主はコンバージョンタグを作成します。これは X が提供するコードスニペットで、広告主のウェブサイトに設置されます。これにより、ユーザーが指定されたアクションを完了したときにコンバージョンを計測できるようになります。

    その後、ユーザーは X クライアント上で広告主の広告を目にし、そこから広告主のウェブサイトおよびタグを設定したアクションへと誘導されます。ユーザーが、タグの設定時に広告主が指定したアトリビューションウィンドウ内にそのアクションを完了すると、タグはそのユーザーが以前に X 広告に接触していたことを認識します。タグはその後「発火」し、コンバージョンを発生させた広告にコンバージョンをひも付けられるよう、X のサーバーに通知を送信します。
  </Accordion>

  <Accordion title="キャンペーン設定プロセスの中で、そのキャンペーンに関連するトラッキングピクセルをユーザーが選択できる方法はありますか？">
    いいえ、本製品は特定のコンバージョンタグを特定のキャンペーンに紐づけるようには設計されていません。代わりに、一度タグが設定されると、システムが自動的に、どの広告が特定のタグでコンバージョンを促したかを追跡します。
  </Accordion>

  <Accordion title="コンバージョンタグに対するデフォルトのアトリビューションウィンドウ設定は何ですか？">
    デフォルトのビュースルーアトリビューションウィンドウ：1日

    デフォルトのエンゲージメントスルーアトリビューション：14日

    これらのデフォルトは、コンバージョンタグの設定時、またはタグ作成後であってもいつでも変更できます。エンゲージメントスルーアトリビューションウィンドウの選択肢は 1、7、14、30、60、90 日です。ビュースルーアトリビューションウィンドウの選択肢は「なし」、1、7、14、30、60、90 日です。
  </Accordion>

  <Accordion title="コンバージョンを効果的に獲得するための有効な DR クリエイティブや戦略にはどのようなものがありますか？">
    各クライアントの目標、状況、戦略は異なりますが、コンバージョントラッキングのアルファ版またはベータ版に参加したクライアントで成果が見られたアイデアをいくつかご紹介します。

    **クリエイティブ：**

    * **オファー**: 割引、プロモーション、送料無料オファーをプロモポストと組み合わせて、アクションへの関心を高める。
    * **懸賞やコンテスト**: 特に有名ブランドでは、懸賞やコンテストがコンバージョンの獲得につながりました。
    * **ポスト文面のテスト**: 全大文字と小文字の比較テスト（FREE vs free や NOW vs now など）を行う。
    * **期限の設定**: 「12 月 12 日まで！」のような期限を設けて、即時の行動を促す。
    * **魅力的な写真の追加**: 視覚的に魅力的な写真をポストクリエイティブに追加することでコンバージョン獲得に効果があるかどうかをテストする価値があります。結果はクライアントのサービス内容によって異なる可能性があります。

    **ターゲティング：**

    * @handle ターゲティングとインタレストカテゴリターゲティング: ポスト文面と @handle をポストの想定オーディエンスにしっかり合わせることで、コンバージョンが促進されました。
    * ニッチだがボリュームの大きいキーワードの活用: コンサート領域では、アーティスト／ミュージシャンに関連するキーワード（例：名前）が有効であることが分かりました。
    * Tailored Audiences（テイラードオーディエンス）: TA web とコンバージョントラッキングを併用したクライアントは、他のターゲティングを使用したコントロールグループよりも低い CPA を達成しました。

    キャンペーンのセグメンテーションを細分化すればするほど、レポートされるコンバージョン結果に基づいて取れるアクションは増えます。例えば、50 個のキーワードでキャンペーンを最適化するよりも、4 個のキーワードでキャンペーンを最適化する方がはるかに簡単です。
  </Accordion>
</AccordionGroup>

<div id="troubleshooting-and-support-for-conversion-api">
  ## Conversion API のトラブルシューティングとサポート
</div>

API 呼び出し後のエラーコードに関するご質問は、以下のセクションを参照してください。その他のご質問については、遠慮なく貴社担当の Twitter 担当者までお問い合わせください。できるだけ早く解決に向けて対応いたします。 

<div id="error-handling-and-explanation">
  ### エラー処理と説明
</div>

1回のリクエストは、その中に含まれるすべてのコンバージョンでエラーが1件もない場合にのみ成功します。個々のコンバージョン内でいずれかのエラーが発生した場合、エンドポイントは該当するすべてのエラーの一覧を返します。

<div id="x-ads-api-error-codes-overview">
  ### X Ads API エラーコードの概要
</div>

以下は Ads API におけるエラーコードの網羅的な一覧です:

[https://developer.x.com/en/docs/twitter-ads-api/response-codes](https://developer.x.com/en/docs/twitter-ads-api/response-codes)

成功した Conversion API のレスポンスは、HTTP 200 番台のステータスコードと、要求されたオブジェクトを含む JSON 形式のペイロードによって示されます。

<div id="when-there-is-a-500-series-http-code-its-related-to-a-server-issue-instead-of-your-request-or-account-set-up-please-check-the-x-api-status-page-or-the-developer-community-forum-in-case-others-are-having-similar-issues">
  #### **500 番台の HTTP コードが返ってきた場合**、これはリクエスト内容やアカウント設定ではなく、サーバー側で問題が発生していることを示します。ほかのユーザーにも同様の問題が発生していないか、[X API status page](https://api.twitterstat.us/) や [developer community forum](https://devcommunity.x.com/) を確認してください。
</div>

<div id="when-there-is-a-400-series-http-code-the-common-cases-are">
  #### 400 番台の HTTP ステータスコードが返される場合、よくあるケースは次のとおりです
</div>

* 400 Bad Request（リクエストが仕様や形式に準拠していない）
* 401 Unauthorized（認証に問題がある）
* 403 Forbidden（該当する開発者アカウントに紐づく API アクセス権限の問題）
* 404 Not Found（そのエンドポイントに対する URL またはパラメーターが正しくない可能性がある）

<div id="conversion-api-error-codes">
  ### Conversion API のエラーコード
</div>

<div id="400-bad-request-scenarios">
  #### 400 Bad Request が発生するシナリオ
</div>

| **Reason** | **Type** | **Error Message** |
| :--- | :--- | :--- |
| 識別子不足エラー（現在はハッシュ化されたメールアドレスまたは X クリック ID（twclid）） | 400 Bad Request | 少なくとも 1 つのユーザー識別子を指定する必要があります |
| 無効なハッシュ化メールアドレス | 400 Bad Request | Hashed&#95;email は有効な SHA-256 ハッシュではありません |
| event&#95;id の型が単一イベントタグ（SET）ではない | 400 Bad Request | Event&#95;id (&lt;event&#95;id&gt;) は単一イベントタグ（SET）ではありません |
| リクエストされたコンバージョンイベントが上限を超えている（現在の上限は 1 リクエストあたり 500 イベント） | 400 Bad Request | コンバージョン件数の上限は 500 です |
| Event ID が指定されていない | 400 Bad Request | Event ID が見つかりませんでした |

<div id="json-error-code-example">
  #### JSON エラーコードの例
</div>

<div id="request">
  ##### リクエスト:
</div>

`POST '/11/measurement/conversions/o6dkt'  --data '{"conversions":[{"conversion_time": "2022-06-16T01:14:00.603Z", "event_id":"o6dkt", "identifiers": [{"twclid": "23opevjt88psuo13lu8d020qkn"}]}]}' --header 'Content-Type: application/json`

<div id="error-message">
  #### エラーメッセージ:
</div>

`{"errors":[{"code":"INVALID_PARAMETER","message":"event_id (o6dkt) is not a single event tag (SET)","parameter":"event_id"}],"request":{"params":{"account_id":"18ce552mlaq"}}}`

#### リクエスト:

`twurl_ads -X POST '/11/measurement/conversions/o6dkt'  --data '{"conversions":[{"conversion_time": "2022-06-16T01:14:00.603Z", "event_id":"o6dl3", "identifiers": [{"twclid": ""}]}]}' --header 'Content-Type: application/json' `

<div id="error-message">
  #### エラーメッセージ:
</div>

`{"errors":[{"code":"INVALID_PARAMETER","message":"At least one user identifier must be provided","parameter":""}],"request":{"params":{"account_id":"18ce552mlaq"}}}`

#### リクエスト:

`twurl_ads -X POST '/11/measurement/conversions/o6dkt'  --data '{"conversions":[{"conversion_time": "2022-06-16T01:14:00.603Z", "event_id":"o6dl3", "identifiers": [{"hashed_email": "abc"}]}]}' --header 'Content-Type: application/json'`

<div id="error-message">
  #### エラーメッセージ:
</div>

`{"errors":[{"code":"INVALID_PARAMETER","message":"hashed_email (abc) is not a valid SHA-256 hash","parameter":"hashed_email"}],"request":{"params":{"account_id":"18ce552mlaq"}}}`

#### リクエスト：

`twurl_ads -X POST '/11/measurement/conversions/o6dkt'  --data '{"conversions":[{"conversion_time": "2022-06-16T01:14:00.603", "event_id":"o6dl3", "identifiers": [{"twclid": "23opevjt88psuo13lu8d020qkn"}]}]}' --header 'Content-Type: application/json'`

<div id="error-message">
  #### エラーメッセージ:
</div>

`{"errors":[{"code":"INVALID_PARAMETER","message":"Expected Time in yyyy-MM-ddTHH:mm:ss.SSSZ, got \"2022-06-16T01:14:00.603\" for conversion_time","parameter":"conversion_time"}],"request":{"params":{"account_id":"18ce552mlaq"}}}`

<div id="401-unauthorized">
  ### 401 Unauthorized
</div>

**理由**: 認証情報が不足しているか、正しくありません

**解決方法**: 3 つの認証方法のいずれかを使用して、[セットアップドキュメント](https://developer.x.com/en/docs/twitter-ads-api/measurement/guides/conversion-api)に記載された認証手順に従ってください。

Ads API アプリケーションの所有者とは異なるユーザーのハンドル用の User Access Token は、3-legged OAuth フローを使用して生成する必要があります。3-legged OAuth を用いて Access Token を生成する方法として、以下のオプションがあります。

* [twurl ユーティリティを使った Web ベース認可（コマンドライン）](https://github.com/twitter/twurl#getting-started)

* [PIN ベース認証（コマンドライン）](https://developer.x.com/resources/fundamentals/authentication/pin-based-oauth)

* [3-legged OAuth パターンを実装したカスタム Web フロー](https://developer.x.com/resources/fundamentals/authentication/obtaining-user-access-tokens)

Conversion API で使用するユーザートークンはすべて、AD&#95;MANAGER または ACCOUNT&#95;ADMIN アクセスレベル*を持つユーザーのものである必要があります。このアクセスレベルは、[authenticated&#95;user&#95;access](https://developer.x.com/en/docs/twitter-ads-api/campaign-management/api-reference/authenticated-user-access) エンドポイントで確認できます。

<div id="403-access-forbidden">
  ### 403 アクセス拒否
</div>

| 理由 | 種別 | エラーメッセージ |
| :--- | :--- | :--- |
| 使用している開発者アカウントには Ads API へのアクセス権限がありません。[こちらからアクセスを申請してください](https://developer.x.com/en/docs/twitter-ads-api/apply)。 | 403 Unauthorized Client | このリクエストを行っている id &lt;&gt; のクライアントアプリケーションには X Ads API へのアクセス権限がありません。アプリケーションに advertiser-api アクセス権限が付与されていることを確認してください。使用するアプリケーションを変更するには、`twurl accounts` と `twurl set default \<username> \<key>` を使用してください。 |

<div id="404-not-found">
  ### 404 Not Found
</div>

| 理由 | タイプ | エラーメッセージ |
| :--- | :--- | :--- |
| リクエストURLまたはパラメーターがこのエンドポイントに対して正しくありません | 404 Route Not Found | 要求されたリソースが見つかりませんでした |
| pixel&#95;id/Universal Website Tag を所有しているアカウントへのアクセス権がありません | 404 Not Found | User &lt;user&#95;id&gt; には account &lt;account&#95;id&gt; へのアクセス権がありません。ユーザーのハンドルを取得するには &#39;sn &lt;user&#95;id&gt;&#39; と入力します。使用しているユーザーを変更するには &#39;twurl accounts&#39; と &#39;twurl set default \u003Cusername\u003E&#39; を使用します。 |
| event id が、pixel ID (UWT ID) に関連付けられている指定のアカウントに属していません | 404 Not Found | event&#95;id &lt;event&#95;id&gt; は指定されたアカウントに属していません |

### JSON エラーコード例

#### リクエスト:

`twurl_ads -X POST '/11/measurement/conversions/o8z6j'  --data '{"conversions":[{"conversion_time": "2022-06-16T01:14:00.603Z", "event_id":"abc", "identifiers": [{"twclid": "23opevjt88psuo13lu8d020qkn"}]}]}' --header 'Content-Type: application/json'`

**エラーメッセージ:**

`{"errors":[{"code":"NOT_FOUND","message":"event_id (abc) does not belong to provided account","parameter":"event_id"},{"code":"INVALID_PARAMETER","message":"event_id (abc) is not a single event tag (SET)","parameter":"event_id"}],"request":{"params":{"account_id":"18ce55gze09"}}}`

<div id="api-reference-index">
  ## API リファレンスインデックス
</div>

完全な API リファレンスは、リストからエンドポイントを選択して参照してください：

<div id="web-conversions">
  ### Web コンバージョン
</div>

|     |     |
| :--- | :--- |
| コンバージョン API | [measurement/conversions/:pixel&#95;id](https://developer.x.com/en/docs/x-ads-api/measurement/web-conversions/api-reference/conversions) |
| Web イベントタグ | [accounts/:account&#95;id/web&#95;event&#95;tags](https://developer.x.com/en/docs/x-ads-api/measurement/web-conversions/api-reference/web-event-tags) |

### ウェブコンバージョン

<Button href="https://app.getpostman.com/run-collection/1d12b9fc623b8e149f87">
  Postman で実行
</Button>

`POST version/measurement/conversions/:pixel_id`

単一の Event Tag ID について、ウェブサイトのコンバージョンイベントを送信します。

レスポンスコードが成功（HTTP 200 OK）かどうかを確認してください。エラーコードが返される場合に備えて、リトライ機能と基本的なロギングを実装することを推奨します。

レート制限はアカウントごとに 15 分間あたり 100,000 リクエストです（各リクエストで 500 件のイベントを送信できます）。

##### リソースURL

`https://ads-api.x.com/12/measurement/conversions/:pixel_id`

<div id="request-url-parameters">
  ##### Request URL Parameters
</div>

| Name | Description |
| :--- | :--- |
| pixel&#95;id  <br />*required* | 広告アカウントの Base Tag ID です。広告アカウントの Base Tag ID を base36 でエンコードした値を表します。<br /><br />Type: string<br /><br />Example: `o8z6j` |
| conversions  <br />*required* | API リクエストの POST ボディ内に含まれるオブジェクトです。コンバージョンイベントの配列で、最大 500 件まで指定できます。サポートされているフィールドについては、以下の表を参照してください。<br /><br />Type: array<br /><br />Example: `"conversions":[{"conversion_time": "2022-02-18T01:14:00.603Z", "event_id":"o87ne", "identifiers": [{"twclid": "23opevjt88psuo13lu8d020qkn"}], "conversion_id": "23294827"}]` |

<div id="conversions-object">
  ###### conversions object
</div>

| Name | Description |
| :--- | :--- |
| conversion&#95;time  <br />*required* | [ISO 8601](https://en.wikipedia.org/wiki/ISO_8601) で表現された時刻。<br /><br />Type: string<br /><br />Example: `2017-10-05T00:00:00Z` |
| event&#95;id  <br />*required* | 特定のイベントの base-36 ID。この広告アカウント内に含まれる、事前に設定されたイベントと一致します。Events Manager 内の対応するイベントでは、これは ID と呼ばれます。<br /><br />Type: string<br /><br />Example: `o87ne` または `tw-o8z6j-o87ne`（`tw-pixel_id-event-id`）のどちらも指定可能 |
| identifiers  <br />*required* | コンバージョンイベントと照合するための identifier オブジェクトのリスト。サポートされているフィールドは、この下の表に一覧があります。identifier オブジェクトのうち少なくとも 1 つは必須です。<br /><br />IP アドレスまたは user agent を使用する場合は、正しくコンバージョンを照合するために 2 つ目の identifier も送信する必要があります。<br /><br />Type: array<br /><br />Example: `"identifiers": [{"twclid": "23opevjt88psuo13lu8d020qkn"},{"hashed_email": "e586883b2b4faf78d48300a79e0e15138d664cdf796ffb86e533170a9893eda8"}]` |
| number&#95;items  <br />*optional* | イベントで購入されるアイテム数。0 より大きい正の数でなければなりません。<br /><br />Type: integer<br /><br />Example: `4` |
| price&#95;currency  <br />*optional* | イベントで購入されるアイテムの通貨。[ISO-4217](https://en.wikipedia.org/wiki/ISO_4217) で表現されます。詳細は [Currency](https://developer.x.com/en/docs/twitter-ads-api/currency) を参照してください。<br /><br />Type: string<br /><br />Default: `USD`<br /><br />Example: `JPY` |
| value  <br />*optional* | イベントで購入されるアイテムの価格を、`price_currency` の通貨で表した値。<br /><br />Type: double<br /><br />Example: `100.00` |
| conversion&#95;id  <br />*optional* | Pixel と Conversion API 間でのコンバージョンの重複排除に使用します。同一のイベントタグ内において、Web Pixel と Conversion API のコンバージョン間で重複排除するために使用できる、コンバージョンイベントの識別子です。詳細は [Conversions Guide](https://developer.x.com/en/docs/twitter-ads-api/measurement/guides/conversion-api) の「Testing Events and Deduplication」セクションを参照してください。<br /><br />Type: string<br /><br />Example: `23294827` |
| description  <br />*optional* | コンバージョンに関する追加情報を含む説明。<br /><br />Type: string<br /><br />Example: `test conversion` |
| contents  <br />*optional* | 特定の商品／コンテンツに関する詳細のリストで、より細かな情報を提供します。サポートされているフィールドについては、下の表を参照してください。<br /><br />Type: array<br /><br />Example: `contents": [{"content_id": "1", "content_name": "Blankets", "content_type": "home improvement", "content_price": 100.99, "num_items": 1, "content_group_id": "123"}, {"content_id": "2"}]` |

<div id="identifiers-object">
  ###### identifiers object
</div>

| Name | Description |
| :--- | :--- |
| ********twclid********  <br />*sometimes required* | クリック経由のURLから解析されたクリックID。他の識別子が追加されていない場合は必須です。<br /><br />Type: string<br /><br />Example: `26l6412g5p4iyj65a2oic2ayg2` |
| ********hashed&#95;email********  <br />*sometimes required* | [SHA256](https://en.wikipedia.org/wiki/SHA-2) でハッシュ化されたメールアドレス。テキストはすべて小文字とし、ハッシュ化前に前後のスペースを削除してください。他の識別子が追加されていない場合は必須です。<br /><br />Type: string<br /><br />Example: `test-email@test.com` の場合 = `e586883b2b4faf78d48300a79e0e15138d664cdf796ffb86e533170a9893eda8` |
| ********hashed&#95;phone&#95;number********  <br />*sometimes required* | [E.164](https://en.wikipedia.org/wiki/E.164) 形式の電話番号を [SHA256](https://en.wikipedia.org/wiki/SHA-2) でハッシュ化した値。電話番号はハッシュ化前に E.164 形式である必要があります。他の識別子が追加されていない場合は必須です。<br /><br />Type: string<br /><br />Example: `+11234567890` の場合 = `1fa6b8d986d9b9cd01bf36951815158bbde9f520c0567c835dfe34783d0a4231 ` |
| **ip&#95;address**  <br />*sometimes required* | この値は、ピリオドで区切られた4つの数字から成るドット区切り10進表記（dotted-decimal notation）で記述されます。<br /><br />IPアドレスは、twclid、メールアドレス、電話番号、またはユーザーエージェントのいずれか別の識別子と組み合わせて渡す必要があります。<br /><br />Type: string<br /><br />Example: 8.25.197.25 |
| **user&#95;agent **  <br />*sometimes required* | この識別子により、サーバーはリクエスト元のユーザーエージェントのアプリケーション、オペレーティングシステム、ベンダーおよび／またはバージョンを特定できます。<br /><br />User Agent は、twclid、メールアドレス、電話番号、またはIPアドレスのいずれか別の識別子と組み合わせて渡す必要があります。<br /><br />Type: string<br /><br />Example: Mozilla/5.0 (Macintosh; Intel Mac OS X 10&#95;15&#95;7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/127.0.0.0 Safari/537.36. |

<div id="contents-object">
  ###### contents オブジェクト
</div>

| Name | Description |
| :--- | :--- |
| content&#95;id  <br />*optional* | SKU または GTIN。コンテンツを表す識別子。<br /><br />Type: string<br /><br />Example: `jhp` |
| content&#95;group&#95;id  <br />*optional* | 商品バリエーションのグループに対応する ID。<br /><br />Type: integer<br /><br />Example: `group 1` |
| content&#95;name  <br />*optional* | 商品またはサービスの名称。<br /><br />Type: string<br /><br />Example: `radio flyer` |
| content&#95;price  <br />*optional* | 商品またはサービスの価格。<br /><br />Type: double<br /><br />Example: `5.00` |
| content&#95;type  <br />*optional* | 購入された商品のカテゴリー。<br /><br />Type: string<br /><br />Example: `clothes` |
| num&#95;items  <br />*optional* | 購入された商品数。<br /><br />Type: integer<br /><br />Example: `1` |

<div id="response-parameters">
  ##### レスポンスパラメーター
</div>

| Name | Description |
| :--- | :--- |
| conversions&#95;processed | 正常に処理されたコンバージョン数<br /><br />Type: integer<br /><br />Example: `1` |
| debug&#95;id | 以降の調査に使用できるデバッグ用 UUID<br /><br />Type: string<br /><br />Example: `ff02e052-36e4-47d6-bdf0-6d8986446562` |

##### リクエスト例

```json
    twurl -H 'ads-api.x.com' -X POST '/12/measurement/conversions/oka17' --data '
    {
      "conversions":[
         {
            "conversion_time":"2022-02-18T01:14:00.603Z",
            "event_id":"ol288",
            "identifiers":[
               {
                  "twclid":"23opevjt88psuo13lu8d020qkn"
               },
               {
                  "hashed_email":"d360d510a224510f373931ce2d6215a799f5a9c1cef221b0149b6b6b50cced62"
               },
               {
                  "hashed_phone_number":"1fa6b8d986d9b9cd01bf36951815158bbde9f520c0567c835dfe34783d0a4231"
               },
               {
                  "ip_address":"1.0.0.0",
                  "user_agent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/127.0.0.0 Safari/537.36"
               }
            ],
            "value":"20.00",
            "number_items":3,
            "conversion_id":"23294827",
            "description":"Pet supply purchases",
            "contents":[
               {
                  "content_id":"1",
                  "content_name":"Blankets",
                  "content_type":"Pet supplies",
                  "content_price":100.99,
                  "num_items":1,
                  "content_group_id":"123"
               }
            ]
         }
      ]
    }' --header 'Content-Type: application/json'
```

<div id="example-request">
  ##### リクエストの例
</div>

```json
    {
       "request":{
          "params":{
             "account_id":"18ce552mlaq"
          }
       },
       "data":{
          "conversions_processed":1,
          "debug_id":"ff02e052-36e4-47d6-bdf0-6d8986446562"
       }
    }
```

<div id="web-event-tags">
  ### Web Event Tags
</div>

<Button href="https://app.getpostman.com/run-collection/1d12b9fc623b8e149f87">
  Postman で実行
</Button>

`GET accounts/:account_id/web_event_tags`

現在のアカウントに関連付けられている一部またはすべての Web イベントタグに関する詳細情報を取得します。

#### リソース URL

`https://ads-api.x.com/12/accounts/:account_id/web_event_tags`

#### パラメーター

| Name | Description |
| :--- | :--- |
| account&#95;id  <br />*required* | 対象となるアカウントの識別子です。リソースのパス内に含まれ、[GET accounts](/ja/x-ads-api/campaign-management#accounts) を除くすべての Advertiser API リクエストで一般的に必須パラメーターです。指定したアカウントは認証済みユーザーに紐付いている必要があります。<br /><br />Type: string<br /><br />Example: `18ce54d4x5t` |
| count  <br />*optional* | 1 回のリクエストで取得を試みるレコード数を指定します。<br /><br />Type: int<br /><br />Default: `200`  <br />Min, Max: `1`, `1000` |
| cursor  <br />*optional* | 次のページの結果を取得するためのカーソルを指定します。詳細は [Pagination](/ja/x-ads-api/introduction) を参照してください。<br /><br />Type: string<br /><br />Example: `8x7v00oow` |
| sort&#95;by  <br />*optional* | サポートされている属性で昇順または降順にソートします。詳細は [Sorting](/ja/x-ads-api/fundamentals/sorting) を参照してください。<br /><br />Type: string<br /><br />Example: `created_at-asc` |
| web&#95;event&#95;tag&#95;ids  <br />*optional* | カンマ区切りの識別子リストを指定することで、レスポンスを目的の Web イベントタグのみに絞り込みます。最大 200 個の ID を指定できます。<br /><br />Type: string<br /><br />Example: `o3bk1` |
| with&#95;deleted  <br />*optional* | 削除済みの結果を取得結果に含めます。<br /><br />Type: boolean<br /><br />Default: `false`  <br />Possible values: `true`, `false` |
| with&#95;total&#95;count  <br />*optional* | `total_count` レスポンス属性を含めます。<br /><br />**注**: このパラメーターと `cursor` は同時には使用できません。<br /><br />**注**: `total_count` を含むリクエストには、現在 15 分あたり 200 に設定されている、より低いレート制限が適用されます。<br /><br />Type: boolean<br /><br />Default: `false`  <br />Possible values: `true`, `false` |

#### リクエスト例

`GET https://ads-api.x.com/12/accounts/18ce54d4x5t/web_event_tags?web_event_tag_ids=o3bk1`

#### レスポンス例

```json
    {
      "request": {
        "params": {
          "web_event_tag_ids": [
            "o3bk1"
          ],
          "account_id": "18ce54d4x5t"
        }
      },
      "next_cursor": null,
      "data": [
        {
          "name": "web event tag",
          "view_through_window": 7,
          "click_window": 7,
          "embed_code": "<script src="//platform.x.com/oct.js" type="text/javascript"></script><script type="text/javascript">twttr.conversion.trackPid('ny3od',  { tw_sale_amount: 0, tw_order_quantity: 0 });</script><noscript><img height="1" width="1" style="display:none;" alt=""  src="https://analytics.x.com/i/adsct?txn_id=ny3od&amp;p_id=Twitter&amp;tw_sale_amount=0&amp;tw_order_quantity=0" /><img height="1" width="1" style="display:none;" alt=""  src="//t.co/i/adsct?txn_id=ny3od&amp;p_id=Twitter&amp;tw_sale_amount=0&amp;tw_order_quantity=0" /></noscript>",
          "id": "o3bk1",
          "retargeting_enabled": false,
          "last_tracked_at": "2021-05-22T17:00:04Z",
          "status": "TRACKING",
          "type": "DOWNLOAD",
          "website_tag_id": "ny3od",
          "deleted": false
        }
      ]
    }
```

<div id="get-accountsaccount_idweb_event_tagsweb_event_tag_id">
  #### GET accounts/:account&#95;id/web&#95;event&#95;tags/:web&#95;event&#95;tag&#95;id
</div>

現在のアカウントに関連付けられている特定の Web イベントタグを取得します。

##### リソースURL

`https://ads-api.x.com/12/accounts/:account_id/web_event_tags/:web_event_tag_id`

<div id="parameters">
  ##### パラメーター
</div>

| Name | Description |
| :--- | :--- |
| account&#95;id  <br />*required* | レバレッジドアカウントの識別子です。リソースのパス内に含まれ、[GET accounts](/ja/x-ads-api/campaign-management#accounts) を除くすべての Advertiser API リクエストで通常は必須パラメーターです。指定されたアカウントは、認証済みユーザーに関連付けられている必要があります。<br /><br />Type: string<br /><br />Example: `18ce54d4x5t` |
| web&#95;event&#95;tag&#95;id  <br />*required* | リクエスト内で操作対象となる Web イベントタグへの参照です。<br /><br />Type: string<br /><br />Example: `o3bk1` |
| with&#95;deleted  <br />*optional* | 削除済みの結果も含めるかどうかを指定します。<br /><br />Type: boolean<br /><br />Default: `false`  <br />Possible values: `true`, `false` |

##### リクエスト例

`GET https://ads-api.x.com/12/accounts/18ce54d4x5t/web_event_tags/o3bk1`

<div id="example-response">
  ##### レスポンス例
</div>

```json
    {
      "request": {
        "params": {
          "web_event_tag_id": "o3bk1",
          "account_id": "18ce54d4x5t"
        }
      },
      "data": {
        "name": "web event tag",
        "view_through_window": 7,
        "click_window": 7,
        "embed_code": "<script src="//platform.x.com/oct.js" type="text/javascript"></script><script type="text/javascript">twttr.conversion.trackPid('ny3od',  { tw_sale_amount: 0, tw_order_quantity: 0 });</script><noscript><img height="1" width="1" style="display:none;" alt=""  src="https://analytics.x.com/i/adsct?txn_id=ny3od&amp;p_id=Twitter&amp;tw_sale_amount=0&amp;tw_order_quantity=0" /><img height="1" width="1" style="display:none;" alt=""  src="//t.co/i/adsct?txn_id=ny3od&amp;p_id=Twitter&amp;tw_sale_amount=0&amp;tw_order_quantity=0" /></noscript>",
        "id": "o3bk1",
        "retargeting_enabled": false,
        "last_tracked_at": "2021-05-22T17:00:04Z",
        "status": "TRACKING",
        "type": "DOWNLOAD",
        "website_tag_id": "ny3od",
        "deleted": false
      }
    }
```

<div id="post-accountsaccount_idweb_event_tags">
  #### POST accounts/:account&#95;id/web&#95;event&#95;tags
</div>

現在のアカウント用の新しい Web イベントタグを作成します。

#### リソース URL

`https://ads-api.x.com/12/accounts/:account_id/web_event_tags`

#### パラメーター

| Name | Description |
| :--- | :--- |
| account&#95;id  <br />*required* | 対象アカウントの識別子です。リソースのパス内に含まれ、[GET accounts](/ja/x-ads-api/campaign-management#accounts) を除くすべての Advertiser API リクエストで、通常は必須パラメーターです。指定されたアカウントは、認証済みユーザーに関連付けられている必要があります。<br /><br />Type: string<br /><br />Example: `18ce54d4x5t` |
| click&#95;window  <br />*required* | この Web タグのクリック計測期間です。<br /><br />**Note**: 以下に示す値のみが指定可能です。<br /><br />Type: int<br /><br />Possible values: `1`, `7`, `14`, `30` |
| name  <br />*required* | Web タグの名前です。<br /><br />Type: string<br /><br />Example: `Sample single conversion event` |
| retargeting&#95;enabled  <br />*required* | この Web タグでリターゲティングを有効にするかどうかを示します。<br /><br />Type: boolean<br /><br />Possible values: `true`, `false` |
| type  <br />*required* | Web タグの種別です。<br /><br />Type: enum<br /><br />Possible values: `ADDED_PAYMENT_INFO`, `ADD_TO_CART`, `ADD_TO_WISHLIST`, `CHECKOUT_INITIATED`, `CONTENT_VIEW`, `CUSTOM`, `DOWNLOAD`, `PRODUCT_CUSTOMIZATION`,`PURCHASE`, `SEARCH`, `SIGN_UP`, `SITE_VISIT`, `START_TRIAL`, `SUBSCRIBE`<br /><br />(UI 上では、`SITE_VISIT` は「Page view」、`SIGN_UP` は「Lead」として表示されます) |
| view&#95;through&#95;window  <br />*required* | この Web タグのビュースルー計測期間です。この値は常に `click_window` の値以下でなければなりません。<br /><br />**Note**: 以下に示す値のみが指定可能です。<br /><br />Type: int<br /><br />Possible values: `0`, `1`, `7`, `14`, `30` |

##### リクエスト例

`POST https://ads-api.x.com/12/accounts/18ce54d4x5t/web_event_tags?click_window=7&name=web event tag&retargeting_enabled=false&type=SITE_VISIT&view_through_window=7`

#### レスポンスの例

```json
    {
      "data": {
        "name": "web event tag",
        "view_through_window": 7,
        "click_window": 7,
        "embed_code": "<script src='"//platform.x.com/oct.js"' type='"text/javascript"'></script><script type='"text/javascript"'>twttr.conversion.trackPid('ny3od',  { tw_sale_amount: 0, tw_order_quantity: 0 });</script><noscript><img alt='""' height='"1"' src='"https://analytics.x.com/i/adsct?txn_id=ny3od&p_id=Twitter&tw_sale_amount=0&tw_order_quantity=0"' style='"display:none;"' width='"1"'/><img alt='""' height='"1"' src='"//t.co/i/adsct?txn_id=ny3od&p_id=Twitter&tw_sale_amount=0&tw_order_quantity=0"' style='"display:none;"' width='"1"'/></noscript>",
        "id": "o3bk1",
        "retargeting_enabled": false,
        "last_tracked_at": null,
        "status": "UNVERIFIED",
        "type": "SITE_VISIT",
        "website_tag_id": "ny3od",
        "deleted": false
      },
      "request": {
        "params": {
          "name": "web event tag",
          "view_through_window": 7,
          "click_window": 7,
          "retargeting_enabled": false,
          "account_id": "18ce54d4x5t",
          "type": "SITE_VISIT"
        }
      }
    }
```

<div id="put-accountsaccount_idweb_event_tagsweb_event_tag_id">
  #### PUT accounts/:account&#95;id/web&#95;event&#95;tags/:web&#95;event&#95;tag&#95;id
</div>

現在のアカウントに関連付けられているWebイベントタグを更新します。

<div id="resource-url">
  ##### リソース URL
</div>

`https://ads-api.x.com/12/accounts/:account_id/web_event_tags/:web_event_tag_id`

#### パラメータ

| Name | Description |
| :--- | :--- |
| account&#95;id  <br />*required* | 利用対象アカウントの識別子です。リソースのパス内に含まれ、[GET accounts](/ja/x-ads-api/campaign-management#accounts) を除くすべての Advertiser API リクエストで通常必須のパラメータです。指定したアカウントは、認証済みユーザーに関連付けられている必要があります。<br /><br />Type: string<br /><br />Example: `18ce54d4x5t` |
| web&#95;event&#95;tag&#95;id  <br />*required* | 現在のアカウントにある Web タグの識別子です。<br /><br />Type: string<br /><br />Example: `o3bk1` |
| click&#95;window  <br />*optional* | この Web タグのクリック計測期間です。<br /><br />**Note**: 以下に示す値のみが受け付けられます。<br /><br />Type: int<br /><br />Possible values: `1`, `7`, `14`, `30` |
| name  <br />*optional* | Web タグの名前です。<br /><br />Type: string<br /><br />Example: `Sample single conversion event` |
| retargeting&#95;enabled  <br />*optional* | この Web タグでリターゲティングを有効にするかどうかを示します。<br /><br />Type: boolean<br /><br />Possible values: `true`, `false` |
| type  <br />*optional* | Web タグのタイプです。<br /><br />Type: enum<br /><br />Possible values: `ADDED_PAYMENT_INFO`, `ADD_TO_CART`, `ADD_TO_WISHLIST`, `CHECKOUT_INITIATED`, `CONTENT_VIEW`, `CUSTOM`, `DOWNLOAD`, `PRODUCT_CUSTOMIZATION`,`PURCHASE`, `SEARCH`, `SIGN_UP`, `SITE_VISIT`, `START_TRIAL`, `SUBSCRIBE`<br /><br />(UI 上では、`SITE_VISIT` は「Page view」、`SIGN_UP` は「Lead」として表示されます) |
| view&#95;through&#95;window  <br />*optional* | この Web タグのビュースルー計測期間です。この値は常に `click_window` の値以下である必要があります。<br /><br />**Note**: 以下に示す値のみが受け付けられます。<br /><br />Type: int<br /><br />Possible values: `0`, `1`, `7`, `14`, `30` |

#### リクエスト例

`PUT https://ads-api.x.com/12/accounts/18ce54d4x5t/web_event_tags/o3bk1?type=DOWNLOAD`

#### レスポンス例

```json
    {
      "data": {
        "name": "web event tag",
        "view_through_window": 7,
        "click_window": 7,
        "embed_code": "<script src='"//platform.x.com/oct.js"' type='"text/javascript"'></script><script type='"text/javascript"'>twttr.conversion.trackPid('ny3od',  { tw_sale_amount: 0, tw_order_quantity: 0 });</script><noscript><img alt='""' height='"1"' src='"https://analytics.x.com/i/adsct?txn_id=ny3od&p_id=Twitter&tw_sale_amount=0&tw_order_quantity=0"' style='"display:none;"' width='"1"'/><img alt='""' height='"1"' src='"//t.co/i/adsct?txn_id=ny3od&p_id=Twitter&tw_sale_amount=0&tw_order_quantity=0"' style='"display:none;"' width='"1"'/></noscript>",
        "id": "o3bk1",
        "retargeting_enabled": false,
        "last_tracked_at": "2021-05-22T17:00:04Z",
        "status": "UNVERIFIED",
        "type": "DOWNLOAD",
        "website_tag_id": "ny3od",
        "deleted": false
      },
      "request": {
        "params": {
          "web_event_tag_id": "o3bk1",
          "type": "DOWNLOAD",
          "account_id": "18ce54d4x5t"
        }
      }
    }
```

<div id="delete-accountsaccount_idweb_event_tagsweb_event_tag_id">
  #### DELETE accounts/:account&#95;id/web&#95;event&#95;tags/:web&#95;event&#95;tag&#95;id
</div>

現在のアカウントに紐づいている特定の Web イベントタグを削除します。

#### リソース URL

`https://ads-api.x.com/12/accounts/:account_id/web_event_tags/:web_event_tag_id`

<div id="parameters">
  ##### パラメーター
</div>

| Name | Description |
| :--- | :--- |
| account&#95;id  <br />*required* | レバレッジド・アカウントを識別するための識別子です。リソースのパス内に含まれ、[GET accounts](/ja/x-ads-api/campaign-management#accounts) を除くすべての Advertiser API リクエストで通常必須のパラメーターです。指定されたアカウントは、認証済みユーザーに関連付けられている必要があります。<br /><br />Type: string<br /><br />Example: `18ce54d4x5t` |
| web&#95;event&#95;tag&#95;id  <br />*required* | 現在のアカウントに紐づく Web タグを識別するための識別子です。<br /><br />Type: string<br /><br />Example: `o3bk1` |

##### リクエスト例

`DELETE https://ads-api.x.com/12/accounts/18ce54d4x5t/web_event_tags/o3bk1`

<div id="example-response">
  ##### レスポンス例
</div>

```json
    {
      "data": {
        "name": "web event tag",
        "view_through_window": 7,
        "click_window": 7,
        "embed_code": "<script src='"//platform.x.com/oct.js"' type='"text/javascript"'></script><script type='"text/javascript"'>twttr.conversion.trackPid('ny3od',  { tw_sale_amount: 0, tw_order_quantity: 0 });</script><noscript><img alt='""' height='"1"' src='"https://analytics.x.com/i/adsct?txn_id=ny3od&p_id=Twitter&tw_sale_amount=0&tw_order_quantity=0"' style='"display:none;"' width='"1"'/><img alt='""' height='"1"' src='"//t.co/i/adsct?txn_id=ny3od&p_id=Twitter&tw_sale_amount=0&tw_order_quantity=0"' style='"display:none;"' width='"1"'/></noscript>",
        "id": "o3bk1",
        "retargeting_enabled": false,
        "last_tracked_at": "2021-05-22T17:00:04Z",
        "status": "UNVERIFIED",
        "type": "DOWNLOAD",
        "website_tag_id": "ny3od",
        "deleted": true
      },
      "request": {
        "params": {
          "web_event_tag_id": "o3bk1",
          "account_id": "18ce54d4x5t"
        }
      }
    }
```
