---
title: A/Bテスト
keywords: ["ABテスト", "A/Bテスト", "スプリットテスト", "広告テスト", "キャンペーンテスト", "テストキャンペーン"]
---

import { Button } from '/snippets/ja/button.mdx';

<div id="overview">
  ## 概要
</div>

<div id="introduction">
  ### はじめに
</div>

A/B テストを利用すると、広告主は X 上でリーチしているユーザーをセグメント化し、キャンペーンのパフォーマンスをどのように最適化するのが最善かを把握したり、マーケティング戦略の立案に役立つ示唆を得ることができます。

これらのセグメント（ユーザーグループ分割と呼びます）は、ランダムに割り当てられ、互いに重複しません。ランダム化により、結果に影響する要因は均等に分配されます。言い換えると、グループ間やそれぞれの想定される行動に本質的な差はありません。そのため、あるユーザーグループにのみ 1 つのバリエーションを適用し、他のグループには適用しなかった場合、キャンペーンパフォーマンスの差異はそのバリエーションに起因するとみなすことができます。

一度に多くのバリエーションをテストすることも可能ですが、1 回のテストでは 1 つのバリエーションに絞ることを強く推奨します。こうすることで、観測されたキャンペーンパフォーマンスの差異を生じさせた原因を特定しやすくなります。

バリエーションはキャンペーンレベルで設定されます。たとえば、広告主が新しいクリエイティブの有効性をテストしたい場合は、唯一の違いがクリエイティブである 2 つの同一のキャンペーンを作成する必要があります。将来的には、ラインアイテムレベルでのバリエーション設定もサポートする予定です。

<div id="use-cases">
  ### ユースケース
</div>

A/B テストは主に、(1) X 上で何が最も効果的かを把握して投資を最適化したいパフォーマンス広告主向けの最適化ユースケースと、(2) 得られたインサイトを活用してマーケティング戦略の立案に役立てたいブランド広告主向けの学習ユースケースを支援する目的で利用されます。 

この API は、以下を含むあらゆるキャンペーン変数に対する A/B テストをサポートします。

* クリエイティブ 

* ターゲティング 

* 入札タイプ

* 入札単位

<div id="ab-testing">
  ## A/B Testing
</div>

A/B Testing を利用すると、広告主は X 上でリーチしているユーザーをセグメント化し、キャンペーンのパフォーマンスをどのように最適化するのが最も効果的かを理解し、マーケティング戦略の立案に役立つ知見を収集できます。

これらのセグメント（ユーザーグループ分割と呼びます）は、ランダムに割り当てられ、互いに排他的です。ランダム化により、結果に影響を与える要因は均等に分配されます。言い換えると、グループ間やそれぞれの期待される行動には本質的な違いがありません。そのため、ある単一のバリエーションを特定のユーザーグループにだけ適用し、他のグループには適用しなかった場合、キャンペーンパフォーマンスの差異はそのバリエーションに起因するとみなすことができます。

一度に多くのバリエーションをテストすることも可能ですが、バリエーションは一度に 1 つだけテストすることを強く推奨します。これにより、観測されたキャンペーンパフォーマンスの差異を生み出した原因となっている要素を切り分けることができます。

バリエーションはキャンペーンレベルか広告グループレベルのいずれかで設定します。広告グループは Ads API の [line item](https://developer.x.com/en/docs/twitter-ads-api/campaign-management/api-reference/line-items) を通じて設定します。広告グループレベルのバリエーションの例として、新しいクリエイティブの有効性をテストしたい場合、広告主は 2 つの同一の広告グループを含む 1 つのキャンペーンを作成し、両者の違いはクリエイティブだけにします。

### 活用例

A/B テストは主に、次の 2 つのユースケースを支援するために利用されます。(1) X 上で何が最も効果的かを把握し、投資を最適化したいパフォーマンス広告主向けの最適化ユースケースと、(2) 得られた知見を活用してマーケティング戦略の立案に役立てたいブランド広告主向けの学習ユースケースです。 

API は、次のようなあらゆるキャンペーン変数に対する A/B テストをサポートします。

* クリエイティブ

* ターゲティング

* 入札タイプ

* 入札単位

<div id="attributes">
  ### 属性
</div>

A/B Test はネストされた構造として表現されます。A/B Test 自体を表すトップレベルのフィールドと、それぞれのユーザーグループを表す一連のフィールドを持つユーザーグループオブジェクトの配列があります。

大まかには、すべての A/B Test には次の情報を含める必要があります。

* テスト期間（`start_time` フィールドと `end_time` フィールドで表されます）

* 分割が行われるレベル（`entity_type` フィールドで表されます）

* 少なくとも 2 つ（最大 30）のユーザーグループ（それぞれが `user_groups` 配列内のオブジェクトとして表されます）

各ユーザーグループには、*必ず* 次の情報を含める必要があります。

* 対象のユーザーグループに割り当てるべきユーザーの割合（`size` フィールドで表されます）

* 対象のユーザーグループのユーザープールを構成するキャンペーン ID / ラインアイテム ID（`entity_ids` 配列で表されます）

任意で、A/B Test およびユーザーグループに対して `name` と `description` の値を設定できます。検証ルールやその他の制約に関する情報は、以下を参照してください。

`id` や作成日時など、その他のメタデータも含まれますが、これらは X によって自動的に設定されます。

キャンペーンレベルの A/B Test エンティティの例を以下に示します。

```json
{
  "created_at": "2020-12-01T00:00:00Z",
  "created_by": {
    "user_id": "756201191646691328",
    "username": "apimctestface"
  },
  "deleted": false,
  "description": "documentation example",
  "end_time": "2020-12-05T01:00:00Z",
  "entity_type": "CAMPAIGN",
  "id": "hr7l0",
  "name": "first AB test",
  "start_time": "2020-12-01T01:00:00Z",
  "status": "SCHEDULED",
  "user_groups": [
    {
      "id": "p1bcx",
      "name": "first group",
      "description": null,
      "size": "50.0",
      "entity_ids": [
        "f2qcw",
        "f2tht"
      ]
    },
    {
      "id": "p1bcy",
      "name": "second group",
      "description": "second AB test group",
      "size": 50,
      "entity_ids": [
        "f2rqi",
        "f2tws"
      ]
    }
  ],
  "updated_at": "2020-12-01T00:00:00Z",
  "updated_by": {
    "user_id": "756201191646691328",
    "username": "apimctestface"
  }
}
```

ラインアイテムレベルにおける A/B テストエンティティの例を以下に示します。

```json
{
   "created_by":{
      "user_id":"756201191646691328",
      "username":"apimctestface"
   },
   "name":"Test2e",
   "start_time":"2022-08-15T00:00:00Z",
   "updated_by":{
      "user_id":"756201191646691328",
      "username":"apimctestface"
   },
   "description":"2つ目のABテスト",
   "entity_type":"LINE_ITEM",
   "end_time":"2022-08-30T00:00:00Z",
   "id":"1ul",
   "user_groups":[
      {
         "name":"1つ目のグループ",
         "size":"50.0",
         "description":"1つ目のグループの説明",
         "entity_ids":[
            "ij9dh"
         ],
         "id":"4xe"
      },
      {
         "name":"2つ目のグループ",
         "size":"50.0",
         "description":"2つ目のグループの説明",
         "entity_ids":[
            "ihng8"
         ],
         "id":"4xf"
      }
   ],
   "status":"SCHEDULED",
   "created_at":"2022-08-11T00:10:50Z",
   "updated_at":"2022-08-11T00:10:50Z",
   "deleted":false
}
```

<div id="usage">
  ### 使用方法
</div>

以下のサブセクションでは、A/B テストの作成と更新について説明します。読み取りおよび削除の挙動は、他のすべての Ads API エンドポイントと同様です。

<div id="creating">
  #### 作成
</div>

[A/B Test を作成するには、POST accounts/:account&#95;id/ab&#95;tests](https://developer.x.com/en/docs/x-ads-api/measurement/api-reference/ab-tests) エンドポイントを使用します。このエンドポイントは JSON 形式の POST ボディのみを受け付けます。Content-Type は application/json に設定する必要があります。

広告主が 2 つ以上のキャンペーンを設定した後で、A/B Test を作成できます。上記のとおり、A/B Test には必ずテスト期間、分割レベル、少なくとも 2 つのユーザーグループを含める *必要があります*。各ユーザーグループでは、そのグループに割り当てるユーザーの割合と、そのユーザープールを構成するキャンペーン ID を指定する必要があります。これらそれぞれについて、以下で詳しく説明します。

テスト期間:

* start&#95;time と end&#95;time の値は次を満たす必要があります

  * （A/B Test が作成される時点と比較して）将来の時刻であること

  * キャンペーン／ラインアイテムのフライト（配信）期間と重なっていること

* テストは、アプリ以外のキャンペーンでは少なくとも 1 日、アプリベースのキャンペーンでは少なくとも 5 日間実施する必要があります

分割レベル:

* entity&#95;type は CAMPAIGN または LINE&#95;ITEM に設定できます

ユーザーグループ:

* 各ユーザーグループは user&#95;groups 配列内のオブジェクトとして表されます

  * ユーザーグループは最低 2 つ必要です

  * ユーザーグループは最大 30 個まで使用できます

* 各ユーザーグループのサイズは、1.00 から 99.00 の数値を文字列で表現して設定します

  * **注記**: サイズ値の合計は、すべてのオブジェクト間で必ず 100.00 になる必要があります

* 各ユーザーグループの entity&#95;ids 配列で、キャンペーン ID を指定する必要があります

必要に応じて、A/B Test 全体または 1 つ以上のユーザーグループに対して、name と description を設定できます。

次のリクエストは、キャンペーンレベルの A/B Test を作成します。このテストは 4 日間実施され、2 つのユーザーグループがあり、それぞれのグループにユーザーの 50% が割り当てられます。1 つ目のユーザーグループはキャンペーン f2qcw と f2tht に基づき、2 つ目のユーザーグループはキャンペーン f2rqi と f2tws に基づきます。このリクエストでは、エンティティの一部に name と description も追加しています。

twurl -X POST -H ads-api.x.com &quot;/8/accounts/18ce54d4x5t/ab&#95;tests&quot; -d &#39;&#123;&quot;end&#95;time&quot;: &quot;2020-12-05T01:00:00Z&quot;, &quot;entity&#95;type&quot; : &quot;CAMPAIGN&quot;, &quot;start&#95;time&quot;: &quot;2020-12-01T01:00:00Z&quot;, &quot;user&#95;groups&quot;: [&#123;&quot;entity&#95;ids&quot;: [&quot;f2qcw&quot;, &quot;f2tht&quot;], &quot;size&quot;: &quot;50.00&quot;, &quot;name&quot;: &quot;first group&quot;&#125;,&#123;&quot;entity&#95;ids&quot;: [&quot;f2rqi&quot;, &quot;f2tws&quot;], &quot;size&quot;: &quot;50.00&quot;, &quot;name&quot;: &quot;second group&quot;, &quot;description&quot;: &quot;second AB test group&quot;&#125;], &quot;name&quot;: &quot;first AB test&quot;, &quot;description&quot;: &quot;documentation example&quot;&#125;&#39;

```json
twurl -X POST -H ads-api.x.com "/8/accounts/18ce54d4x5t/ab_tests" -d '{"end_time": "2020-12-05T01:00:00Z", "entity_type" : "CAMPAIGN", "start_time": "2020-12-01T01:00:00Z", "user_groups": [{"entity_ids": ["f2qcw", "f2tht"], "size": "50.00", "name": "first group"},{"entity_ids": ["f2rqi", "f2tws"], "size": "50.00", "name": "second group", "description": "second AB test group"}], "name": "first AB test", "description": "documentation example"}'

{
  "request": {
    "params": {
      "account_id": "18ce54d4x5t",
      "end_time": "2020-12-05T01:00:00Z",
      "entity_type": "CAMPAIGN",
      "start_time": "2020-12-01T01:00:00Z",
      "user_groups": [
        {
          "entity_ids": [
            "f2qcw",
            "f2tht"
          ],
          "size": "50.0",
          "name": "first group"
        },
        {
          "entity_ids": [
            "f2rqi",
            "f2tws"
          ],
          "size": "50.0",
          "name": "second group",
          "description": "second AB test group"
        }
      ],
      "name": "first AB test",
      "description": "documentation example"
    }
  },
  "data": {
    "created_at": "2020-12-01T00:00:00Z",
    "created_by": {
      "user_id": "756201191646691328",
      "username": "apimctestface"
    },
    "deleted": false,
    "description": "documentation example",
    "end_time": "2020-12-05T01:00:00Z",
    "entity_type": "CAMPAIGN",
    "id": "hr7l0",
    "name": "first AB test",
    "start_time": "2020-12-01T01:00:00Z",
    "status": "SCHEDULED",
    "user_groups": [
      {
        "id": "p1bcx",
        "name": "first group",
        "description": null,
        "size": "50.0",
        "entity_ids": [
          "f2qcw",
          "f2tht"
        ]
      },
      {
        "id": "p1bcy",
        "name": "second group",
        "description": "second AB test group",
        "size": "50.0",
        "entity_ids": [
          "f2rqi",
          "f2tws"
        ]
      }
    ],
    "updated_at": "2020-12-01T00:00:00Z",
    "updated_by": {
      "user_id": "756201191646691328",
      "username": "apimctestface"
    }
  }
}
```

**ラインアイテムレベルでの A/B テストの場合**

キャンペーンレベルとラインアイテムレベルでの A/B テストの主な違いは、`entity_type` です。ラインアイテムレベルでの A/B テストでは、`entity_type` = `LINE_ITEM` に設定する必要があります。これは、以下の、すでに作成済みの A/B テストに対して行うすべてのアクションに適用されます。 

要件:

1. A/B テスト対象キャンペーンのすべてのラインアイテムをスプリットテストに含める必要があります。
2. ラインアイテムレベルでは、均等な配分のみが許可されます。
3. 1 つのスプリットテストで許可されるユーザーグループ用ラインアイテム数は、5 以下でなければなりません。 
4. 各ユーザーグループにつき 1 つのラインアイテムのみ許可されます。

<div id="updating">
  ### 更新
</div>

[PUT accounts/:account&#95;id/ab&#95;tests/:ab&#95;test&#95;id](https://developer.x.com/en/docs/x-ads-api/measurement/api-reference/ab-tests) エンドポイントを使用して A/B テストを更新します。このエンドポイントでは、リクエスト内で JSON データを送信する必要があります。`Content-Type` は `application/json` に設定しなければなりません。

他の更新エンドポイントと同様に、[PUT accounts/:account&#95;id/ab&#95;tests/:ab&#95;test&#95;id](/ja/x-ads-api/measurement/ab-testing#get-accounts-account-id-ab-tests) エンドポイントでは、URL 内で A/B テストの ID を指定する必要があります。一般に、A/B テストはステータスが `SCHEDULED` の間のみ更新できます。例外が 1 つあり、ステータスが `LIVE` の場合でも A/B テストの `end_time` は更新できます。

このエンドポイントは、オブジェクト ID を含む部分的な JSON データに対応しています。次の原則が適用されます。

* オブジェクトや要素を追加または削除する場合は、配列全体（およびそのサブ構造）を渡します。これは**置換**操作です。

* それ以外の場合は、キー名または ID を指定して既存の*フィールド*を変更（変更、追加、削除）します。

  * フィールドを削除するには、その値を `null` に設定します。

  * 渡されなかったフィールドは変更されません。

たとえば、前に作成した A/B テストに 3 つ目のユーザーグループを追加するには、既存の 2 つのユーザーグループオブジェクトに加えて、新しく追加したいユーザーグループオブジェクトを含む `user_groups` 配列を送信する必要があります。これは `user_groups` 配列を*再作成*するイメージで、最初からこの方法で作成するかのようにデータを渡します（ユーザーグループのオブジェクト ID は渡さないでください）。更新リクエスト内の `user_groups` 配列は、次のように表すことができます。

```json
[
  {
    "entity_ids": [
      "f2qcw",
      "f2tht"
    ],
    "size": "30.0",
    "name": "first group"
  },
  {
    "entity_ids": [
      "f2rqi",
      "f2tws"
    ],
    "size": "30.0",
    "name": "second group",
    "description": "second AB test group"
  },
  {
    "entity_ids": [
      "i1vwr",
      "i1xre"
    ],
    "size": "40.0"
  }
]
```

オブジェクト間の size の値は、更新後も合計が 100.00 になっていることに注意してください。最初の 2 つのオブジェクト（以前はそれぞれ 50.00 に設定）について値を更新していなかったとしたら、このリクエストは失敗していたはずです。

代わりに、単に最初のユーザーグループに description を追加したいだけであれば、更新リクエスト内の user&#95;groups 配列は次のようになります。

```json
[
  {
    "id": "p1bcx",
    "description": "updated using a PUT request"
  }
]
```

ユーザーグループオブジェクトをIDで参照し、更新したいフィールドだけを含めます。

<div id="request-examples">
  #### リクエスト例
</div>

このセクションでは、追加の更新リクエスト例を示します。これらは連続して呼び出されることを想定しています。JSON データは可読性のために整形されています。レスポンスは省略されています。

次の変更を行う場合、リクエストは次のようになります。（これは上で使用した前の例と同じです。）

1. 名前または説明のない 3 つ目のユーザーグループを追加する

2. 各ユーザーグループに含まれるユーザーの割合を変更する

twurl -X PUT -H ads-api.x.com &quot;/8/accounts/18ce54d4x5t/ab&#95;tests/hr7l0&quot; -d &#39;

```json
twurl -X PUT -H ads-api.x.com "/8/accounts/18ce54d4x5t/ab_tests/hr7l0" -d '
{
  "user_groups": [
    {
      "entity_ids": [
        "f2qcw",
        "f2tht"
      ],
      "size": "30.00",
      "name": "first group"
    },
    {
      "entity_ids": [
        "f2rqi",
        "f2tws"
      ],
      "size": "30.00",
      "name": "second group",
      "description": "second AB test group"
    },
    {
      "entity_ids": [
        "i1vwr",
        "i1xre"
      ],
      "size": "40.00"
    }
  ]
}'
```

次の変更を行うリクエストは、次のようになります。

1. A/B テストの説明を削除する

2. 最初のユーザーグループに説明を追加する

3. 2 番目のユーザーグループにエンティティ ID (f2syz) を追加する

twurl -X PUT -H ads-api.x.com &quot;/8/accounts/18ce54d4x5t/ab&#95;tests/hr7l0&quot; -d &#39;

```json
twurl -X PUT -H ads-api.x.com "/8/accounts/18ce54d4x5t/ab_tests/hr7l0" -d '
{
  "description": null,
  "user_groups": [
    {
      "id": "p1bcx",
      "description": "first AB test group"
    },
    {
      "id": "p1bcy",
      "entity_ids": [
        "f2rqi",
        "f2tws",
        "f2syz"
      ]
    }
  ]
}'
```

3 つ目の変更では、新しいエンティティ ID に加えて、既存の 2 つのエンティティ ID も渡す必要があります。3 つ目のユーザーグループには変更が行われていないことに注意してください。

次の変更を行うには、リクエストは次のようになります。

1. 2 つ目のユーザーグループを削除する

2. 各ユーザーグループのユーザーの割合を変更する

```json
twurl -X PUT -H ads-api.x.com "/8/accounts/18ce54d4x5t/ab_tests/hr7l0" -d '
{
  "user_groups": [
    {
      "entity_ids": [
        "f2qcw",
        "f2tht"
      ],
      "size": "55.00",
      "name": "first group"
    },
    {
      "entity_ids": [
        "i1vwr",
        "i1xre"
      ],
      "size": "45.00"
    }
  ]
}'
```

<div id="api-reference">
  ## API リファレンス
</div>

<div id="ab-tests">
  ### ABテスト
</div>

[]()

<Button href="https://app.getpostman.com/run-collection/1d12b9fc623b8e149f87">
  Postman で実行
</Button>

<div id="get-accountsaccount_idab_tests">
  #### GET accounts/:account&#95;id/ab&#95;tests
</div>

一部またはすべてのA/Bテストの詳細を取得します。

<div id="resource-url">
  ##### リソース URL
</div>

`https://ads-api.x.com/12/accounts/:account_id/ab_tests`

<div id="parameters">
  ##### Parameters
</div>

| Name | Description |
| :--- | :--- |
| account&#95;id  <br />*required* | 対象のアカウントの識別子です。リソースのパス内に含まれ、[GET accounts](/ja/x-ads-api/campaign-management#accounts) を除くすべての Advertiser API リクエストで、一般的に必須パラメータです。指定したアカウントは、認証済みユーザーに関連付けられている必要があります。<br /><br />Type: string<br /><br />Example: `18ce54d4x5t` |
| ab&#95;test&#95;ids  <br />*optional* | 識別子のカンマ区切りリストを指定することで、レスポンスを対象の A/B テストのみに絞り込みます。最大 200 個の ID を指定できます。<br /><br />Type: string<br /><br />Example: `hr7l0` |
| count  <br />*optional* | 各リクエストで取得を試行するレコード数を指定します。<br /><br />Type: int<br /><br />Default: `200`  <br />Min, Max: `1`, `1000` |
| cursor  <br />*optional* | 次のページの結果を取得するためのカーソルを指定します。詳細は [Pagination](/ja/x-ads-api/introduction) を参照してください。<br /><br />Type: string<br /><br />Example: `8x7v00oow` |
| live&#95;during  <br />*optional* | 指定した日付範囲の間に実施されていた、または実施予定の A/B テストのみにレスポンスを絞り込みます。指定した日付範囲と開始・終了時刻が部分的または完全に重なる A/B テストを返します。<br /><br />値は [ISO 8601](https://en.wikipedia.org/wiki/ISO_8601) 形式で表現されたカンマ区切りの日付として指定してください。より早い日付を先に指定してください。<br /><br />Type: string<br /><br />Example: `2020-11-01T08:00:00Z,2020-12-01T08:00:00Z` |
| q  <br />*optional* | `name` によってリソースを絞り込むための任意のクエリです。すべてを取得する場合はこのパラメータを省略してください。<br /><br />Type: string<br /><br />Min, Max length: `1`, `80` |
| sort&#95;by  <br />*optional* | サポートされている属性で昇順または降順にソートします。詳細は [Sorting](/ja/x-ads-api/fundamentals/sorting) を参照してください。<br /><br />Type: string<br /><br />Example: `created_at-asc` |
| status  <br />*optional* | 指定したステータスを持つ A/B テストのみにレスポンスを絞り込みます。<br /><br />Type: enum<br /><br />Possible values: `COMPLETED`, `LIVE`, `SCHEDULED` |
| user&#95;id  <br />*optional* | 指定したユーザー ID によって作成された A/B テストのみにレスポンスを絞り込みます。<br /><br />**Note**: `username` と同時には指定できません。<br /><br />Type: long<br /><br />Example: `756201191646691328. |
| username  <br/>_optional_ | 指定したユーザー名によって作成された A/B テストのみにレスポンスを絞り込みます。先頭の "@" 記号は含めないでください。<br/><br/>**Note**: `user&#95;id`と同時には指定できません。<br/><br/>Type: string<br/><br/>Example:`apimctestface. |
| with&#95;deleted  <br />*optional* | 削除済みの結果をリクエストに含めます。<br /><br />Type: boolean<br /><br />Default: `false`  <br />Possible values: `true`, `false` |

<div id="example-request">
  ##### リクエスト例
</div>

`GET https://ads-api.x.com/12/accounts/18ce54d4x5t/ab_tests`

<div id="example-response">
  ##### レスポンス例
</div>

```json
    {
      "request": {
        "params": {
          "account_id": "18ce54d4x5t"
        }
      },
      "data": [
        {
          "created_at": "2022-05-25T00:00:00Z",
          "created_by": {
            "user_id": "756201191646691328",
            "username": "apimctestface"
          },
          "deleted": false,
          "description": "documentation example",
          "end_time": "2022-05-30T01:00:00Z",
          "entities": [
            {
              "id": "p1bcx",
              "account_id": "18ce54d4x5t"
            },
            {
              "id": "p1bcy",
              "account_id": "18ce54d4x5t"
            }
          ],
          "entity_type": "CAMPAIGN",
          "id": "hr7l0",
          "name": "first AB test",
          "start_time": "2022-05-25T01:00:00Z",
          "status": "SCHEDULED",
          "user_groups": [
            {
              "id": "p1bcx",
              "name": "first group",
              "description": null,
              "size": "50.0",
              "entity_ids": [
                "f2qcw",
                "f2tht"
              ]
            },
            {
              "id": "p1bcy",
              "name": "second group",
              "description": "second AB test group",
              "size": "50.0",
              "entity_ids": [
                "f2rqi",
                "f2tws"
              ]
            }
          ],
          "updated_at": "2022-05-25T00:00:00Z",
          "updated_by": {
            "user_id": "756201191646691328",
            "username": "apimctestface"
          }
        }
      ],
      "next_cursor": null
    }
```

<div id="post-accountsaccount_idab_tests">
  #### POST accounts/:account&#95;id/ab&#95;tests
</div>

新しいA/Bテストを作成します。

すべてのパラメータはリクエストボディで送信され、`Content-Type` は `application/json` である必要があります。

<div id="resource-url">
  ##### リソース URL
</div>

`https://ads-api.x.com/12/accounts/:account_id/ab_tests`

##### パラメーター

| Name | Description |
| :--- | :--- |
| account&#95;id  <br />*required* | 利用するアカウントの識別子。リソースのパス内に含まれ、[GET accounts](/ja/x-ads-api/campaign-management#accounts) を除くすべての Advertiser API リクエストで通常必須のパラメーターです。指定されたアカウントは、認証済みユーザーに関連付けられている必要があります。<br /><br />Type: string<br /><br />Example: `18ce54d4x5t` |
| end&#95;time  <br />*required* | A/B テストが終了する時刻（ISO 8601 形式）。<br /><br />Type: string<br /><br />Example: `2020-10-02T00:00:00Z` |
| entity&#95;type  <br />*required* | ユーザーグループ分割に使用するエンティティの種類。<br /><br />Type: enum<br /><br />Possible values: `CAMPAIGN`, `LINE_ITEM` |
| start&#95;time  <br />*required* | A/B テストが開始する時刻（ISO 8601 形式）。<br /><br />Type: string<br /><br />Example: `2022-05-30T00:00:00Z` |
| user&#95;groups  <br />*required* | ユーザーグループを定義します。詳細は以下の表を参照してください。2〜30 個のユーザーグループを指定できます。<br /><br />Type: array of objects |
| description  <br />*optional* | A/B テストの説明。最大文字数: 1,024 文字。<br /><br />Type: string<br /><br />Example: `documentation example` |
| name  <br />*optional* | A/B テストの名前。最大文字数: 255 文字。<br /><br />Type: string<br /><br />Example: `first AB test` |

<div id="user-groups">
  #### ユーザーグループ
</div>

| Name | Description |
| :--- | :--- |
| entity&#95;ids  <br />*required* | エンティティ ID の配列。<br /><br />**Note**: エンティティは 1 つの A/B テストにしか関連付けることができません。<br /><br />Type: array<br /><br />Example: `["dxi0l", "e66bl"]` |
| size  <br />*required* | このユーザーグループに割り当てるユーザーの割合。小数点以下 2 桁までの数値を文字列として指定します。たとえば、40% は 40、40.0、40.00 のいずれかで表現します。<br /><br />**Note**: *objects* 間の size の値は合計で必ず 100.00 になる必要があります。<br /><br />Type: array<br /><br />Min, Max: `1.00`, `99.00` |
| description  <br />*optional* | ユーザーグループの説明。最大文字数: 1,024 文字。<br /><br />Type: string<br /><br />Example: `second AB test group` |
| name  <br />*optional* | ユーザーグループの名前。最大文字数: 255 文字。<br /><br />Type: string<br /><br />Example: `first group` |

### リクエスト例

`POST https://ads-api.x.com/12/accounts/18ce54d4x5t/ab_tests -d '{"end_time": "2022-05-30T01:00:00Z", "entity_type" : "CAMPAIGN", "start_time": "2022-05-25T01:00:00Z", "user_groups": [{"entity_ids": ["f2qcw", "f2tht"], "size": "50.00", "name": "first group"},{"entity_ids": ["f2rqi", "f2tws"], "size": "50.00", "name": "second group", "description": "second AB test group"}], "name": "first AB test", "description": "documentation example"}'`

### レスポンス例

```json
    {
      "request": {
        "params": {
          "account_id": "18ce54d4x5t",
          "end_time": "2022-05-30T01:00:00Z",
          "entity_type": "CAMPAIGN",
          "start_time": "2022-05-25T01:00:00Z",
          "user_groups": [
            {
              "entity_ids": [
                "f2qcw",
                "f2tht"
              ],
              "size": "50.0",
              "name": "first group"
            },
            {
              "entity_ids": [
                "f2rqi",
                "f2tws"
              ],
              "size": "50.0",
              "name": "second group",
              "description": "second AB test group"
            }
          ],
          "name": "first AB test",
          "description": "documentation example"
        }
      },
      "data": {
        "created_at": "2022-05-25T00:00:00Z",
        "created_by": {
          "user_id": "756201191646691328",
          "username": "apimctestface"
        },
        "deleted": false,
        "description": "documentation example",
        "end_time": "2022-05-30T01:00:00Z",
        "entities": [
          {
            "id": "p1bcx",
            "account_id": "18ce54d4x5t"
          },
          {
            "id": "p1bcy",
            "account_id": "18ce54d4x5t"
          }
        ],
        "entity_type": "CAMPAIGN",
        "id": "hr7l0",
        "name": "first AB test",
        "start_time": "2022-05-25T01:00:00Z",
        "status": "SCHEDULED",
        "user_groups": [
          {
            "id": "p1bcx",
            "name": "first group",
            "description": null,
            "size": "50.0",
            "entity_ids": [
              "f2qcw",
              "f2tht"
            ]
          },
          {
            "id": "p1bcy",
            "name": "second group",
            "description": "second AB test group",
            "size": "50.0",
            "entity_ids": [
              "f2rqi",
              "f2tws"
            ]
          }
        ],
        "updated_at": "2022-05-25T00:00:00Z",
        "updated_by": {
          "user_id": "756201191646691328",
          "username": "apimctestface"
        }
      }
    }
```

<div id="put-accountsaccount_idab_testsab_test_id">
  #### PUT accounts/:account&#95;id/ab&#95;tests/:ab&#95;test&#95;id
</div>

指定された A/B テストを更新します。

すべてのパラメータはリクエストボディで送信され、`Content-Type` として `application/json` が必須です。

このエンドポイントは、オブジェクトの ID を含む部分的な JSON をサポートします。次の原則が適用されます。

* オブジェクトや要素を追加または削除するには、配列全体（およびその下位構造）を渡してください。これは **置換** 操作です
  * 配列を再作成するものと考えてください
* それ以外の場合は、キー名または ID を参照して既存のフィールドを変更（追加・削除を含む変更）します
  * フィールドを削除するには、その値を `null` に設定します
  * 渡されなかったフィールドは変更されません

一般に、A/B テストは `status` が `SCHEDULED` の間のみ更新できます。1 つだけ例外があり、`LIVE` の間でも A/B テストの `end_time` を更新することが可能です。

<div id="resource-url">
  ##### リソース URL
</div>

`https://ads-api.x.com/12/accounts/18ce54d4x5t/:ab_test_id`

##### パラメータ

| Name | Description |
| :--- | :--- |
| account&#95;id  <br />*required* | 対象となるアカウントの識別子です。リソースのパス内に含まれ、[GET accounts](/ja/x-ads-api/campaign-management#accounts) を除くすべての Advertiser API リクエストで通常必須となるパラメータです。指定したアカウントは、認証済みユーザーに関連付けられている必要があります。<br /><br />Type: string<br /><br />Example: `18ce54d4x5t` |
| ab&#95;test&#95;id  <br />*required* | リクエストで操作する A/B Test への参照です。<br /><br />Type: string<br /><br />Example: `hr7l0` |
| description  <br />*optional* | A/B Test の説明です。最大長: 1,024 文字。<br /><br />**Note**: A/B Test の `status` が `SCHEDULED` の間のみ更新できます。<br /><br />Type: string<br /><br />Example: `documentation example` |
| end&#95;time  <br />*optional* | A/B Test が終了する時刻を ISO 8601 形式で指定します。<br /><br />**Note**: A/B Test の `status` が `SCHEDULED` または `LIVE` の間のみ更新できます。<br /><br />Type: string<br /><br />Example: `2020-10-02T00:00:00Z` |
| name  <br />*optional* | A/B Test の名前です。最大長: 255 文字。<br /><br />**Note**: A/B Test の `status` が `SCHEDULED` の間のみ更新できます。<br /><br />Type: string<br /><br />Example: `first AB test` |
| start&#95;time  <br />*optional* | A/B Test が開始する時刻を ISO 8601 形式で指定します。<br /><br />**Note**: A/B Test の `status` が `SCHEDULED` の間のみ更新できます。<br /><br />Type: string<br /><br />Example: `2022-05-30T00:00:00Z` |
| user&#95;groups  <br />*required* | ユーザーグループを定義します。詳細は下の表を参照してください。<br /><br />**Note**: A/B Test の `status` が `SCHEDULED` の間のみ更新できます。<br /><br />Type: array of objects |

<div id="user-groups">
  #### ユーザーグループ
</div>

| Name | Description |
| :--- | :--- |
| id  <br />*sometimes required* | リクエストで操作するユーザーグループオブジェクトへの参照です。<br /><br />**Note**: ユーザーグループオブジェクトの *fields* を変更（追加、更新、削除）する場合は必須です。<br /><br />**Note**: ユーザーグループオブジェクト全体を追加または削除する場合は ID を指定しないでください。<br /><br />Type: string<br /><br />Example: `p1bcx` |
| description  <br />*optional* | ユーザーグループの説明。最大長は 1,024 文字です。<br /><br />**Note**: このフィールドに `null` 値を指定することで未設定（削除）にできます。<br /><br />Type: string<br /><br />Example: `second AB test group` |
| entity&#95;ids  <br />*optional* | エンティティ ID の配列。<br /><br />**Note**: これは置換操作です。以前に設定されていた値はすべて上書きされます。<br /><br />**Note**: エンティティは 1 つの A/B テストにのみ関連付けることができます。<br /><br />Type: array<br /><br />Example: `["dxi0l", "e66bl"]` |
| name  <br />*optional* | ユーザーグループの名前。最大長は 255 文字です。<br /><br />**Note**: このフィールドに `null` 値を指定することで未設定（削除）にできます。<br /><br />Type: string<br /><br />Example: `first group` |
| size  <br />*optional* | このユーザーグループに割り当てるユーザーの割合。小数点以下 2 桁までの数値を文字列として表現します。たとえば、40% は 40、40.0、または 40.00 のいずれかで表現します。<br /><br />**Note**: 各オブジェクトの size の値は、合計で必ず 100.00 になる必要があります。<br /><br />Type: string<br /><br />Min, Max: `1.00`, `99.00` |

<div id="example-request">
  ##### リクエスト例
</div>

このリクエストでは、次の変更を行います。

1. A/Bテストの説明を削除します
2. 終了時間を変更します
3. 最初のユーザーグループに説明を追加します
4. 各ユーザーグループのユーザー比率を変更します
5. 2番目のユーザーグループにエンティティID（`f2syz`）を追加します

`PUT https://ads-api.x.com/12/accounts/18ce54d4x5t/ab_tests/hr7l0 -d '{"description": null, "end_time": "2022-06-01T01:00:00Z", "user_groups": [{"id": "p1bcx", "description": "first AB test group", "size": "60.00"},{"id": "p1bcy", "size": "40.00", "entity_ids": ["f2rqi", "f2tws", "f2syz"]}]}'`

<div id="example-response">
  ##### レスポンス例
</div>

```json
    {
      "request": {
        "params": {
          "account_id": "18ce54d4x5t",
          "ab_test_id": "hr7l0",
          "description": null,
          "end_time": "2022-06-01T01:00:00Z",
          "user_groups": [
            {
              "id": "p1bcx",
              "description": "first AB test group",
              "size": "60.0"
            },
            {
              "id": "p1bcy",
              "size": "40.0",
              "entity_ids": [
                "f2rqi",
                "f2tws",
                "f2syz"
              ]
            }
          ]
        }
      },
      "data": {
        "created_at": "2020-05-25T00:00:00Z",
        "created_by": {
          "user_id": "756201191646691328",
          "username": "apimctestface"
        },
        "deleted": false,
        "description": null,
        "end_time": "2022-06-01T01:00:00Z",
        "entities": [
          {
            "id": "p1bcx",
            "account_id": "18ce54d4x5t"
          },
          {
            "id": "p1bcy",
            "account_id": "18ce54d4x5t"
          }
        ],
        "entity_type": "CAMPAIGN",
        "id": "hr7l0",
        "name": "first AB test",
        "start_time": "2022-05-25T01:00:00Z",
        "status": "SCHEDULED",
        "user_groups": [
          {
            "id": "p1bcx",
            "name": "first group",
            "description": "first AB test group",
            "size": "60.0",
            "entity_ids": [
              "f2qcw",
              "f2tht"
            ]
          },
          {
            "id": "p1bcy",
            "name": "second group",
            "description": "second AB test group",
            "size": "40.0",
            "entity_ids": [
              "f2rqi",
              "f2tws",
              "f2syz"
            ]
          }
        ],
        "updated_at": "2022-05-25T00:17:23Z",
        "updated_by": {
          "user_id": "756201191646691328",
          "username": "apimctestface"
        }
      }
    }
```

<div id="delete-accountsaccount_idab_testsab_test_id">
  #### DELETE accounts/:account&#95;id/ab&#95;tests/:ab&#95;test&#95;id
</div>

指定した A/B テストを削除します。

**注**: A/B テストの削除は元に戻せません。削除済みのリソースを再度削除しようとすると、HTTP 404 が返されます。

<div id="resource-url">
  ##### リソース URL
</div>

`https://ads-api.x.com/12/accounts/:account_id/ab_tests/:ab_test_id`

##### パラメーター

| Name | Description |
| :--- | :--- |
| ab&#95;test&#95;id  <br />*required* | このリクエストで操作対象となる A/B テストを示す参照です。<br /><br />Type: string<br /><br />Example: `hr7l0` |

<div id="example-request">
  ##### リクエスト例
</div>

`DELETE https://ads-api.x.com/12/accounts/18ce54d4x5t/ab_tests/hr7l0`

### レスポンス例

```json
    {
      "request": {
        "params": {
          "account_id": "18ce54d4x5t",
          "ab_test_id": "hr7l0"
        }
      },
      "data": {
        "created_at": "2022-05-25T00:00:00Z",
        "created_by": {
          "user_id": "756201191646691328",
          "username": "apimctestface"
        },
        "deleted": true,
        "description": null,
        "end_time": "2022-06-01T01:00:00Z",
        "entities": [
          {
            "id": "p1bcx",
            "account_id": "18ce54d4x5t"
          },
          {
            "id": "p1bcy",
            "account_id": "18ce54d4x5t"
          }
        ],
        "entity_type": "CAMPAIGN",
        "id": "hr7l0",
        "name": "first AB test",
        "start_time": "2022-05-25T01:00:00Z",
        "status": "SCHEDULED",
        "user_groups": [
          {
            "id": "p1bcx",
            "name": "first group",
            "description": "first AB test group",
            "size": "60.0",
            "entity_ids": [
              "f2qcw",
              "f2tht"
            ]
          },
          {
            "id": "p1bcy",
            "name": "second group",
            "description": "second AB test group",
            "size": "40.0",
            "entity_ids": [
              "f2rqi",
              "f2tws",
              "f2syz"
            ]
          }
        ],
        "updated_at": "2022-06-02T00:18:31Z",
        "updated_by": {
          "user_id": "756201191646691328",
          "username": "apimctestface"
        }
      }
    }
```
