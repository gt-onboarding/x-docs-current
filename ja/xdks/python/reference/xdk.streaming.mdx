---
title: "ストリーミング"
sidebarTitle: "ストリーミング"
---

X API SDK 向けの堅牢なストリーミングユーティリティ。

このモジュールでは、自動再接続、指数バックオフ、充実したエラー処理を備えたストリーミング接続の管理機能を提供します。クライアントは接続管理を気にせずストリーミングエンドポイントを利用でき、復旧処理はすべて SDK が自動的に行います。

<div id="class-xdkstreamingstreamconfig">
  ### `class xdk.streaming.StreamConfig`
</div>

ストリーミング接続およびリトライ動作を構成するための設定です。

#### パラメータ

<ParamField path="path.max_retries" type="int" default="10"></ParamField>

<ParamField path="path.initial_backoff" type="float" default="1.0"></ParamField>

<ParamField path="path.max_backoff" type="float" default="64.0"></ParamField>

<ParamField path="path.backoff_multiplier" type="float" default="2.0"></ParamField>

<ParamField path="path.jitter" type="bool" default="True"></ParamField>

<ParamField path="path.timeout" type="float or None" default="None"></ParamField>

<ParamField path="path.chunk_size" type="int" default="1024"></ParamField>

<ParamField path="path.on_connect" type="Callable[[], None] or None" default="None"></ParamField>

<ParamField path="path.on_disconnect" type="Callable[[Exception or None], None] or None" default="None"></ParamField>

<ParamField path="path.on_reconnect" type="Callable[[int, float], None] or None" default="None"></ParamField>

<ParamField path="path.on_error" type="Callable[[[StreamError"></ParamField>

<div id="__init__">
  ### `__init__`
</div>

<div id="parameters">
  #### パラメーター
</div>

<ParamField path="path.max_retries" type="int" default="10"></ParamField>

<ParamField path="path.initial_backoff" type="float" default="1.0"></ParamField>

<ParamField path="path.max_backoff" type="float" default="64.0"></ParamField>

<ParamField path="path.backoff_multiplier" type="float" default="2.0"></ParamField>

<ParamField path="path.jitter" type="bool" default="True"></ParamField>

<ParamField path="path.timeout" type="float or None" default="None"></ParamField>

<ParamField path="path.chunk_size" type="int" default="1024"></ParamField>

<ParamField path="path.on_connect" type="Callable[[], None] or None" default="None"></ParamField>

<ParamField path="path.on_disconnect" type="Callable[[Exception or None], None] or None" default="None"></ParamField>

<ParamField path="path.on_reconnect" type="Callable[[int, float], None] or None" default="None"></ParamField>

<ParamField path="path.on_error" type="Callable[[[StreamError"></ParamField>

<div id="on_error-callablestreamerror">
  ### `on_error : Callable[[[StreamError]`
</div>

<div id="exception-xdkstreamingstreamerror">
  ### `exception xdk.streaming.StreamError`
</div>

分類されたストリーミングエラーが発生したときにスローされる例外です。

#### パラメータ

<ParamField path="path.message" type="str"></ParamField>

<ParamField path="path.error_type" type="StreamErrorType"></ParamField>

<div id="__init__">
  ### `__init__`
</div>

#### パラメータ

<ParamField path="path.message" type="str"></ParamField>

<ParamField path="path.error_type" type="StreamErrorType"></ParamField>

<div id="class-xdkstreamingstreamerrortype">
  ### `class xdk.streaming.StreamErrorType`
</div>

再試行戦略の決定に用いるストリーミングエラーの分類。

#### パラメータ

<ParamField path="path.value" type="Any"></ParamField>

<div id="class-xdkstreamingstreamstate">
  ### `class xdk.streaming.StreamState`
</div>

ストリーミング接続の内部状態を表します。

#### パラメータ

<ParamField path="path.retry_count" type="int" default="0"></ParamField>

<ParamField path="path.current_backoff" type="float" default="1.0"></ParamField>

<ParamField path="path.is_connected" type="bool" default="False"></ParamField>

<ParamField path="path.total_items_received" type="int" default="0"></ParamField>

<ParamField path="path.last_error" type="StreamError"></ParamField>

<div id="__init__">
  ### `__init__`
</div>

#### パラメータ

<ParamField path="path.retry_count" type="int" default="0"></ParamField>

<ParamField path="path.current_backoff" type="float" default="1.0"></ParamField>

<ParamField path="path.is_connected" type="bool" default="False"></ParamField>

<ParamField path="path.total_items_received" type="int" default="0"></ParamField>

<ParamField path="path.last_error" type="StreamError"></ParamField>

<div id="last_error-streamerror">
  ### `last_error : [StreamError]`
</div>

<div id="xdkstreamingstream_with_retry">
  ### `xdk.streaming.stream_with_retry`
</div>

自動再接続と指数バックオフを用いて、エンドポイントからストリーミングデータを取得します。
この関数は、次のようなすべての接続管理を行います：

- 切断時の自動再接続
- リトライ遅延に対するジッター付き指数バックオフ
- リトライ可能なエラーと致命的なエラーの分類
- 接続状態を監視するためのライフサイクル用コールバック

<div id="parameters">
  #### パラメーター
</div>

<ParamField path="path.session" type="Session">
HTTP 呼び出しに使用する requests の Session オブジェクト。
</ParamField>

<ParamField path="path.method" type="str">
HTTP メソッド（通常は "GET"）。
</ParamField>

<ParamField path="path.url" type="str">
ストリーミング元となる完全な URL。
</ParamField>

<ParamField path="path.config" type="StreamConfig">
再試行およびコールバック設定を含む StreamConfig。
</ParamField>