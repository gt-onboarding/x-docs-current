---
title: "OAuth2PKCEAuth"
sidebarTitle: "OAuth2PKCEAuth"
---

このモジュールは、安全な認可フローを実現するための OAuth2 PKCE（Proof Key for Code Exchange）による認証機能を提供します。`code_verifier` の生成、トークン管理、自動トークンリフレッシュといった機能を備えています。

<div id="class-xdkoauth2_authoauth2pkceauth">
  ### `class xdk.oauth2_auth.OAuth2PKCEAuth`
</div>

X API 用の OAuth2 PKCE 認証です。

#### パラメータ

<ParamField path="path.base_url" type="str" default="'https://api.x.com'"></ParamField>

<ParamField path="path.authorization_base_url" type="str" default="'https://x.com/i'"></ParamField>

<ParamField path="path.client_id" type="str or None" default="None"></ParamField>

<ParamField path="path.client_secret" type="str or None" default="None"></ParamField>

<ParamField path="path.redirect_uri" type="str or None" default="None"></ParamField>

<ParamField path="path.token" type="Dict[str, Any] or None" default="None"></ParamField>

<ParamField path="path.scope" type="str or List[str] or None" default="None"></ParamField>

<div id="__init__">
  ### `__init__`
</div>

OAuth 2.0 の PKCE 認証を初期化します。

#### パラメーター

<ParamField path="path.base_url" type="str" default="'https://api.x.com'">
X API のトークンエンドポイントのベース URL（デフォルトは [https://api.x.com](https://api.x.com)）。
</ParamField>

<ParamField path="path.authorization_base_url" type="str" default="'https://x.com/i'">
OAuth2 認可のベース URL（デフォルトは [https://x.com/i](https://x.com/i)）。
</ParamField>

<ParamField path="path.client_id" type="str or None" default="None">
X API 用のクライアント ID。
</ParamField>

<ParamField path="path.client_secret" type="str or None" default="None">
X API 用のクライアントシークレット。
</ParamField>

<ParamField path="path.redirect_uri" type="str or None" default="None">
OAuth2 認可用のリダイレクト URI。
</ParamField>

<ParamField path="path.token" type="Dict[str, Any] or None" default="None">
既存の OAuth2 トークンを格納した辞書（利用可能な場合）。
</ParamField>

<ParamField path="path.scope" type="str or List[str] or None" default="None">
OAuth2 認可スコープを表すスペース区切りの文字列、または文字列のリスト。
</ParamField>

<div id="exchange_code">
  ### `exchange_code`
</div>

認可コードをトークンに交換します（TypeScript API と同等です）。

#### パラメーター

<ParamField path="path.code" type="str">
コールバックから取得した認可コード。
</ParamField>

<ParamField path="path.code_verifier" type="str or None" default="None">
省略可能なコードベリファイア（指定しない場合は保存されているベリファイアを使用します）。
</ParamField>

<div id="returns">
  #### 戻り値
</div>

`Dictstr, Any`

<div id="fetch_token">
  ### `fetch_token`
</div>

認可レスポンスのURLを使用してトークンを取得します（レガシーな方法であり、内部的に`exchange_code`を使用します）。

#### パラメータ

<ParamField path="path.authorization_response" type="str">
認可後に受け取った完全なコールバック URL
</ParamField>

<div id="returns">
  #### 戻り値
</div>

`Dictstr, Any`

<div id="get_authorization_url">
  ### `get_authorization_url`
</div>

OAuth 2.0 PKCE フローの認可 URL を取得します。

#### パラメーター

<ParamField path="path.state" type="str or None" default="None">
セキュリティのためのオプションの state パラメーターです。
</ParamField>

<div id="returns">
  #### 戻り値
</div>

`str`

<div id="get_code_challenge">
  ### `get_code_challenge`
</div>

現在のコードチャレンジ（PKCE 用）を取得します。
:returns: 現在のコードチャレンジ。設定されていない場合は None を返します。
:rtype: Optional[str]

<div id="returns">
  #### 戻り値
</div>

`str | None`

<div id="get_code_verifier">
  ### `get_code_verifier`
</div>

現在のコードベリファイア（PKCE 用）を取得します。
:returns: 現在のコードベリファイア。設定されていない場合は None を返します。
:rtype: Optional[str]

<div id="returns">
  #### 戻り値
</div>

`str | None`

<div id="is_token_expired">
  ### `is_token_expired`
</div>

トークンの有効期限が切れているかどうかを確認します。
:returns: トークンの有効期限が切れている場合は True、そうでない場合は False を返します。
:rtype: bool

<div id="returns">
  #### 戻り値
</div>

`bool`

<div id="refresh_token">
  ### `refresh_token`
</div>

アクセストークンを更新します。
:returns: 更新されたトークンを含む辞書
:rtype: Dict[str, Any]

<div id="returns">
  #### 戻り値
</div>

`Dictstr, Any`

<div id="set_pkce_parameters">
  ### `set_pkce_parameters`
</div>

PKCE のパラメーターを手動で設定します。

<div id="parameters">
  #### Parameters
</div>

<ParamField path="path.code_verifier" type="str">
使用する code verifier を指定します。
</ParamField>

<ParamField path="path.code_challenge" type="str or None" default="None">
任意の code challenge（省略した場合は自動生成されます）。
</ParamField>