---
title: X API v2 でユーザーのポストとメンションを調べる
description: "ユーザーのポストタイムラインエンドポイントとユーザーメンションタイムラインエンドポイントを使用すると、特定のユーザーが作成した公開ポストや、そのユーザーへの言及を含む公開ポストを取得できます。"
sidebarTitle: ユーザーのポストを調べる
mode: wide
keywords: ["ユーザータイムライン", "ユーザーメンション", "ポストタイムライン", "メンションタイムライン", "ユーザーのポスト", "チュートリアル", "API チュートリアル", "ユーザーのポスト"]
---

<div id="introduction">
  ## はじめに
</div>

[recent search endpoint](/ja/x-api/posts/search/introduction) では直近 7 日間に公開されたポストのみ取得できますが、user Post timeline endpoint と user mention timeline endpoint を使うと、認可されたユーザー（user ID を使用）の過去 7 日間より前に投稿されたポストやメンションも取得できます。開発者はこれらのエンドポイントを利用して、ユーザーのタイムラインやメンションに含まれるトピック、エンティティ、感情を分析できます。このチュートリアルでは、user Tweet timeline endpoint と user mention timeline endpoint を使用して、特定ユーザーのポストとメンションを調査する方法を説明します。
 

<div id="prerequisites">
  ## 前提条件
</div>

* ユーザーのポストタイムラインおよびユーザーのメンションタイムラインのエンドポイントを使用するには、有効な開発者アカウントが必要です。 
* 作成済みの[プロジェクト](/ja/resources/fundamentals/projects)も必要です。
* [サインアップ](https://developer.x.com/en/portal/petition/essential/basic-info)して開発者アカウントを取得し、[新しい developer portal エクスペリエンス](https://developer.x.com/en/portal/opt-in.html)を有効化している必要があります。 
* [developer portal](/ja/resources/fundamentals/developer-portal)で作成された[プロジェクト](/ja/resources/fundamentals/projects)に紐づく開発者アプリの、有効なキーとトークンを用意している必要があります。
* [X developer portal](/ja/resources/fundamentals/developer-portal)上のアプリから取得した Bearer Token。
* 承認済みの開発者アカウントをお持ちでない場合は、[申請](https://developer.x.com/en/apply-for-access)してください。

<div id="approved-developer-account">
  ## 承認済みの開発者アカウント
</div>

まだお持ちでない場合は、[こちらから申請してください](https://developer.x.com/en/apply-for-access)。

<div id="create-a-project-and-connect-an-app">
  ## プロジェクトを作成してアプリを接続する
</div>

[developer portal](https://developer.x.com/en/portal/dashboard) で「Create a new Project」をクリックします。

<Frame>
  <img src="/images/projects.png.twimg.1920.png" />
</Frame>

プロジェクト名を付け、適切なユースケースを選択し、プロジェクトの説明を入力します。次に、新しいアプリを作成するか、既存の [App](/ja/resources/fundamentals/developer-apps) を接続します（アプリは API キーを格納するコンテナであり、X API へ HTTP リクエストを送信するために必要です）。

<Frame>
  <img src="/images/add-your-app.png.twimg.1920.png" />
</Frame>

「Create a new App instead」をクリックし、新しいアプリを作成するためにアプリ名を入力します。

<Frame>
  <img src="/images/last-step-name-your-app.png.twimg.1920.png" />
</Frame>

「Complete」をクリックすると、API キーと Bearer Token が発行されます。これらを使用して、X API v2 の新しいエンドポイントに接続できます。

<Frame>
  <img src="/images/here-are-your-keys.png.twimg.1920.png" />
</Frame>

API key、API secret key、Bearer Token の横の (+) をクリックし、これらの値をローカルマシン上の安全な場所にコピーします。次のステップで API 呼び出しを行う際に必要になります。

注意: 上のスクリーンショットではキーは非表示になっていますが、ご自身の developer portal では API key、API secret key、Bearer Token の実際の値を確認できます。
 

<div id="how-to-get-the-user-id-for-a-user-to-use-in-the-user-tweet-timeline-and-user-mention-timeline-endpoints">
  ## ユーザーのポストタイムラインエンドポイントとユーザーのメンションタイムラインエンドポイントで使用するユーザーIDの取得方法
</div>

ユーザーのポストタイムラインエンドポイントとユーザーのメンションタイムラインエンドポイントでは、ユーザーIDを使用してポストを取得できます。ユーザー名からユーザーIDを取得するには、新しい [user lookup endpoint v2](/ja/x-api/users/lookup/quickstart/user-lookup) を使用できます。`USER_NAME` を任意のユーザー名に、`XXXX` を上で取得した自身の Bearer Token にそれぞれ置き換えてください。

```bash
  curl --request GET 'https://api.x.com/2/users/by/username/USER_NAME --header 'Authorization: Bearer XXXXXX'
```

以下のように、レスポンス内でユーザーIDを確認できます。

```json
{
   "data": {
       "id": "2244994945",
       "name": "Developers",
       "username": "XDevelopers"
   }
}
```

<div id="connecting-to-the-user-tweet-timeline-and-user-mention-timeline-endpoints">
  ## ユーザーのポストタイムラインおよびメンションタイムラインのエンドポイントへの接続
</div>

特定ユーザーのポストタイムラインを取得するには、ターミナルで次の curl コマンドを実行します（`USER_ID` を任意のユーザーのユーザー ID に、XXXX を上で取得した自身の Bearer Token に必ず置き換えてください）。

```bash
curl --request GET 'https://api.x.com/2/users/USER_ID/tweets' --header 'Authorization: Bearer XXXXXX'
```

これらのリクエストに対する JSON レスポンスには、デフォルトでポストの `id` と `text` フィールドが含まれていることを確認できます（以下の例を参照してください）。

```yaml
{
   "id": "1334200897081987072",
   "text": "👀 X API v2が初めての方は、最初のリクエストを作成するためのステップバイステップガイドをご確認ください https://t.co/4rZqThpSbp"
}
```

レスポンスにユーザー情報やコンテキスト注釈などの追加フィールドを含めたい場合は、それらのフィールドをリクエストで明示的に指定する必要があります。方法については、[fields と expansions の使用方法に関するガイド](/ja/x-api/fundamentals/data-dictionary#how-to-use-fields-and-expansions)を参照してください。

お好みのプログラミング言語を使用して、これらのポストを取得することもできます。user Tweet timeline エンドポイントと user mention timeline エンドポイント向けの Python、Node (JavaScript)、Java、Ruby のサンプルコードについては、[GitHub リポジトリ](https://github.com/xdevplatform/Twitter-API-v2-sample-code)を確認してください。

<div id="exploring-the-users-posts">
  ## 特定ユーザーのポストを分析する
</div>

ユーザーポストタイムラインエンドポイントやユーザーメンションタイムラインエンドポイントを使ってポストを取得する方法を理解したら、そのユーザーのポストをさらに分析できるようになります。たとえば、あるユーザーのメンション内に頻出する固有表現を特定したい場合は、次のようにします。

APIリクエストでは、Tweetレスポンスに `context_annotations` オブジェクトを含めて返すよう指定します。

```bash
curl --request GET 'https://api.x.com/2/users/USER_ID/mentions?tweet.fields=context_annotations' --header 'Authorization: Bearer XXXXXX'
```

レスポンスでは、メンション内に名前付きエンティティが存在するかどうかを確認できます。例を次に示します。

```json
{
   "domain": {
       "id": "47",
       "name": "Brand",
       "description": "Brands and Companies"
   },
   "entity": {
       "id": "783214",
       "name": "X"
   }
}
```

メンションにどの人気エンティティが出現しているかを確認したい場合、メンション内の各ポストを解析して人気エンティティの件数をカウントしておくことができます。

タイムライン内でメディアを含むすべてのポストについてプレビュー画像の URL を調べたい場合、次のようにします。

API リクエストで、tweet.media フィールドで preview&#95;image&#95;url を要求し、attachments.media&#95;keys expansions も指定します。

```bash
curl --request GET 'https://api.x.com/2/users/2244994945/mentions?max_results=100&media.fields=preview_image_url&expansions=attachments.media_keys' --header 'Authorization: Bearer XXXXXX'
```

レスポンスでは、以下のように includes オブジェクト内の preview&#95;image&#95;url を確認できます。

```json
{
   "includes": {
       "media": [
           {
               "media_key": "16_1334657439640121344",
               "preview_image_url": "https://pbs.twimg.com/tweet_video_thumb/EoWn3rqU8AAtFWL.jpg",
               "type": "animated_gif"
           }
       ]
   }
}
```

ユーザーのポストのたどり方が理解できたら、他の API やサービスも組み合わせて、ポストをさらに活用できます。以下は、user Tweet timeline エンドポイントと user mention timeline エンドポイントを利用する際に参考になるリソースです。

<div id="resources">
  ## リソース
</div>

* [ユーザーのポストタイムラインおよびユーザーのメンションタイムラインのエンドポイント](/ja/x-api/posts/timelines/introduction)について詳しく学びましょう。
* 取得できる内容の詳細については、[ユーザーのポストタイムラインエンドポイントの API リファレンス](/ja/x-api/posts/user-posts-timeline-by-user-id)を参照してください。
* 取得できる内容の詳細については、[ユーザーのメンションタイムラインエンドポイントの API リファレンス](/ja/x-api/posts/user-mention-timeline-by-user-id)を参照してください。
* ほかの[チュートリアル](/ja/tutorials)も読んでインスピレーションを得てください。