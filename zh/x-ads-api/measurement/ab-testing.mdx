---
title: A/B 测试
keywords: ["AB 测试", "A/B 测试", "拆分测试", "广告测试", "广告活动测试", "测试型广告活动"]
---

import { Button } from '/snippets/zh/button.mdx';

<div id="overview">
  ## 概述
</div>

<div id="introduction">
  ### 介绍
</div>

A/B 测试使广告主可以对其在 X 上触达的用户进行细分，从而了解如何更好地优化广告活动效果，并获取洞察以指导营销策略。

这些细分——称为用户组划分（user group splits）——是随机且相互独立的。通过随机化，影响结果的各类因素会被均匀分布。换句话说，各组之间在本质上没有差异，也不存在预期行为上的不同。正因如此，当仅对某个用户组应用某一单一变体而对其他组不应用时，广告活动效果的差异就可以归因于该变体。

虽然一次可以同时测试多个变体，但我们强烈建议一次只测试一个变体。这样可以将导致广告活动效果差异的因果因素单独隔离出来。

变体是在广告活动级别进行设置的。例如，如果广告主想测试一个新创意素材的效果，应创建两个完全相同的广告活动，唯一的差异就是创意素材本身。未来，我们计划在 line item（投放项）级别支持变体设置。

<div id="use-cases">
  ### 使用场景
</div>

A/B 测试最常用于两大类使用场景：（1）优化类场景——面向希望了解在 X 上哪些策略效果最佳、以便优化其投放投入的效果广告主；以及（2）学习类场景——面向希望利用测试结论来指导其营销策略的品牌广告主。 

该 API 支持针对任何广告活动变量进行 A/B 测试，包括：

* 创意 

* 定向 

* 竞价类型

* 竞价单位

<div id="ab-testing">
  ## A/B 测试
</div>

A/B 测试允许广告主对其在 X 上触达的用户进行分组，从而了解如何最有效地优化广告活动表现，并获取洞察以指导其营销策略。

这些分组（称为用户组拆分）是随机且互斥的。通过随机化，影响结果的各类因素会被均匀分布。换句话说，各组之间在本质上不存在差异，预期行为也没有不同。正因如此，当仅对某个用户组应用单一变体、而对其他用户组不应用时，广告活动表现上的差异即可归因于该变体。

虽然可以同时测试多个变体，但我们强烈建议一次只测试一个变体。这样可以将导致观察到的广告活动表现差异的因果因素单独隔离出来。

变体可以设置在广告活动层级或广告组层级。在 Ads API 中，广告组是通过 [line item](https://developer.x.com/en/docs/twitter-ads-api/campaign-management/api-reference/line-items) 来设置的。以广告组层级变体为例，如果广告主想测试一条新创意的效果，应创建一个包含 2 个相同广告组的广告活动，并确保这两个广告组之间唯一的差异就是创意本身。

<div id="use-cases">
  ### 使用场景
</div>

A/B 测试最常用于支持以下两类用例：(1) 为绩效广告主提供优化类用例，帮助他们了解在 X 上哪些方式效果最佳，从而优化投入；以及 (2) 为品牌广告主提供学习类用例，帮助他们利用测试结果来指导营销策略。 

该 API 支持针对任何投放变量进行 A/B 测试，包括：

* 创意

* 定向

* 出价类型

* 出价单位

<div id="attributes">
  ### 属性
</div>

A/B 测试被表示为嵌套结构。顶层包含 A/B 测试本身的字段，以及一个用户分组对象的数组，每个对象都有一组字段用于描述该分组。

在整体上，每个 A/B 测试必须包含以下信息。

* 测试持续时间，由 `start_time` 和 `end_time` 字段表示

* 进行拆分的层级，由 `entity_type` 字段表示

* 至少两个（最多 30 个）用户分组，每个分组作为 `user_groups` 数组中的一个对象表示

每个用户分组 *必须* 包含以下信息。

* 应分配给该用户分组的用户百分比，由 `size` 字段表示

* 应构成该用户分组用户池的 campaign ID/line item ID，由 `entity_ids` 数组表示

可选地，可以为 A/B 测试和用户分组设置名称和描述。有关验证规则和其他约束的信息可在下文中找到。

其他元数据，例如 ID 或创建时间，也会包含在内，但由 X 自动设置。

下面展示了一个 campaign 层级的 A/B 测试实体示例。

```json
{
  "created_at": "2020-12-01T00:00:00Z",
  "created_by": {
    "user_id": "756201191646691328",
    "username": "apimctestface"
  },
  "deleted": false,
  "description": "documentation example",
  "end_time": "2020-12-05T01:00:00Z",
  "entity_type": "CAMPAIGN",
  "id": "hr7l0",
  "name": "first AB test",
  "start_time": "2020-12-01T01:00:00Z",
  "status": "SCHEDULED",
  "user_groups": [
    {
      "id": "p1bcx",
      "name": "first group",
      "description": null,
      "size": "50.0",
      "entity_ids": [
        "f2qcw",
        "f2tht"
      ]
    },
    {
      "id": "p1bcy",
      "name": "second group",
      "description": "second AB test group",
      "size": 50,
      "entity_ids": [
        "f2rqi",
        "f2tws"
      ]
    }
  ],
  "updated_at": "2020-12-01T00:00:00Z",
  "updated_by": {
    "user_id": "756201191646691328",
    "username": "apimctestface"
  }
}
```

下面是一个广告项目级别的 A/B 测试实体示例。

```json
{
   "created_by":{
      "user_id":"756201191646691328",
      "username":"apimctestface"
   },
   "name":"Test2e",
   "start_time":"2022-08-15T00:00:00Z",
   "updated_by":{
      "user_id":"756201191646691328",
      "username":"apimctestface"
   },
   "description":"我的第二个 AB 测试",
   "entity_type":"LINE_ITEM",
   "end_time":"2022-08-30T00:00:00Z",
   "id":"1ul",
   "user_groups":[
      {
         "name":"第一组",
         "size":"50.0",
         "description":"第一组说明",
         "entity_ids":[
            "ij9dh"
         ],
         "id":"4xe"
      },
      {
         "name":"第二组",
         "size":"50.0",
         "description":"第二组说明",
         "entity_ids":[
            "ihng8"
         ],
         "id":"4xf"
      }
   ],
   "status":"SCHEDULED",
   "created_at":"2022-08-11T00:10:50Z",
   "updated_at":"2022-08-11T00:10:50Z",
   "deleted":false
}
```

<div id="usage">
  ### 用法
</div>

下文小节介绍如何创建和更新 A/B 测试。读取和删除操作与所有其他 Ads API 端点的行为相同。

<div id="creating">
  #### 创建
</div>

使用 [POST accounts/:account&#95;id/ab&#95;tests](https://developer.x.com/en/docs/x-ads-api/measurement/api-reference/ab-tests) 端点创建 A/B 测试。该端点只接受 JSON 格式的 POST 请求体。Content-Type 头必须设置为 application/json。

在广告主设置了两个或更多广告系列之后，就可以创建 A/B 测试。如上所述，A/B 测试 *必须* 包含：测试持续时间、拆分级别，以及至少两个用户组。每个用户组必须声明应分配给它的用户百分比，以及应构成其用户池的广告系列 ID。以下将对每一项进行更详细的说明。

测试持续时间：

* start&#95;time 和 end&#95;time 的值必须

  * 晚于（相对于创建 A/B 测试的时间）

  * 与广告系列/广告单元的投放时间区间有重叠

* 对于非应用类广告系列，测试必须至少持续一天；对于应用类广告系列，测试必须至少持续五天

拆分级别：

* entity&#95;type 可以设置为 CAMPAIGN 或 LINE&#95;ITEM

用户组：

* 每个用户组在 user&#95;groups 数组中表示为一个对象

  * 至少需要两个用户组

  * 最多允许 30 个用户组

* 每个用户组的比例使用 1.00 到 99.00 之间数值的字符串形式来设置

  * **注意**：*各个对象之间* 的 size 值 **必须** 相加为 100.00

* 应在每个用户组的 entity&#95;ids 数组中指定广告系列 ID

可以选择为 A/B 测试或一个或多个用户组设置名称和描述。

下面的请求将在广告系列级别创建一个持续四天的 A/B 测试，并具有两个用户组，每个用户组包含 50% 的用户。第一个用户组基于广告系列 f2qcw 和 f2tht；第二个用户组基于广告系列 f2rqi 和 f2tws。该请求还为该实体的部分内容添加了名称和描述。

twurl -X POST -H ads-api.x.com &quot;/8/accounts/18ce54d4x5t/ab&#95;tests&quot; -d &#39;&#123;&quot;end&#95;time&quot;: &quot;2020-12-05T01:00:00Z&quot;, &quot;entity&#95;type&quot; : &quot;CAMPAIGN&quot;, &quot;start&#95;time&quot;: &quot;2020-12-01T01:00:00Z&quot;, &quot;user&#95;groups&quot;: [&#123;&quot;entity&#95;ids&quot;: [&quot;f2qcw&quot;, &quot;f2tht&quot;], &quot;size&quot;: &quot;50.00&quot;, &quot;name&quot;: &quot;first group&quot;&#125;,&#123;&quot;entity&#95;ids&quot;: [&quot;f2rqi&quot;, &quot;f2tws&quot;], &quot;size&quot;: &quot;50.00&quot;, &quot;name&quot;: &quot;second group&quot;, &quot;description&quot;: &quot;second AB test group&quot;&#125;], &quot;name&quot;: &quot;first AB test&quot;, &quot;description&quot;: &quot;documentation example&quot;&#125;&#39;

```json
twurl -X POST -H ads-api.x.com "/8/accounts/18ce54d4x5t/ab_tests" -d '{"end_time": "2020-12-05T01:00:00Z", "entity_type" : "CAMPAIGN", "start_time": "2020-12-01T01:00:00Z", "user_groups": [{"entity_ids": ["f2qcw", "f2tht"], "size": "50.00", "name": "first group"},{"entity_ids": ["f2rqi", "f2tws"], "size": "50.00", "name": "second group", "description": "second AB test group"}], "name": "first AB test", "description": "documentation example"}'

{
  "request": {
    "params": {
      "account_id": "18ce54d4x5t",
      "end_time": "2020-12-05T01:00:00Z",
      "entity_type": "CAMPAIGN",
      "start_time": "2020-12-01T01:00:00Z",
      "user_groups": [
        {
          "entity_ids": [
            "f2qcw",
            "f2tht"
          ],
          "size": "50.0",
          "name": "first group"
        },
        {
          "entity_ids": [
            "f2rqi",
            "f2tws"
          ],
          "size": "50.0",
          "name": "second group",
          "description": "second AB test group"
        }
      ],
      "name": "first AB test",
      "description": "documentation example"
    }
  },
  "data": {
    "created_at": "2020-12-01T00:00:00Z",
    "created_by": {
      "user_id": "756201191646691328",
      "username": "apimctestface"
    },
    "deleted": false,
    "description": "documentation example",
    "end_time": "2020-12-05T01:00:00Z",
    "entity_type": "CAMPAIGN",
    "id": "hr7l0",
    "name": "first AB test",
    "start_time": "2020-12-01T01:00:00Z",
    "status": "SCHEDULED",
    "user_groups": [
      {
        "id": "p1bcx",
        "name": "first group",
        "description": null,
        "size": "50.0",
        "entity_ids": [
          "f2qcw",
          "f2tht"
        ]
      },
      {
        "id": "p1bcy",
        "name": "second group",
        "description": "second AB test group",
        "size": "50.0",
        "entity_ids": [
          "f2rqi",
          "f2tws"
        ]
      }
    ],
    "updated_at": "2020-12-01T00:00:00Z",
    "updated_by": {
      "user_id": "756201191646691328",
      "username": "apimctestface"
    }
  }
}
```

**针对广告资源级别的 A/B 测试**

在广告系列级别和广告资源级别执行 A/B 测试的主要区别在于 `entity_type`。对于在广告资源级别进行的 A/B 测试，我们需要将其设置为 `entity_type` = `LINE_ITEM`。以下对已创建的 A/B 测试执行的所有操作都适用此设置。

要求：

1. A/B 测试广告系列中的所有广告资源都必须包含在拆分测试中。
2. 在广告资源级别仅允许等比例拆分。
3. 单个拆分测试中，用户分组对应的广告资源数量必须小于或等于 5 个。
4. 每个用户分组仅允许 1 个广告资源。

<div id="updating">
  ### 更新
</div>

使用 [PUT accounts/:account&#95;id/ab&#95;tests/:ab&#95;test&#95;id](https://developer.x.com/en/docs/x-ads-api/measurement/api-reference/ab-tests) 端点更新 A/B 测试。该端点要求在请求中发送一个 JSON 数据块。Content-Type 必须设置为 application/json。

与其他更新端点类似，[PUT accounts/:account&#95;id/ab&#95;tests/:ab&#95;test&#95;id](/zh/x-ads-api/measurement/ab-testing#get-accounts-account-id-ab-tests) 端点要求在 URL 中包含 A/B 测试 ID。一般来说，A/B 测试只有在状态为 SCHEDULED 时才能更新。有一个例外：当 A/B 测试处于 LIVE 状态时，可以更新其 end&#95;time。

此端点支持包含对象 ID 的部分 JSON。适用以下原则：

* 要添加或移除对象或元素，请传入整个数组（及其子结构）；这是一次**替换**操作

* 否则，通过引用键名或 ID 来修改（更改、添加、移除）现有*字段*

  * 要移除某个字段，将其值设置为 null

  * 未传入的字段不会被修改

例如，向先前创建的 A/B 测试中添加第三个用户组，需要我们发送包含两个现有用户组对象以及要添加的新用户组对象的 user&#95;groups 数组。可以将其视为对 user&#95;groups 数组的*重新创建*；传入的数据应就好像你一开始就是以这种方式创建它一样（不要传入用户组对象 ID）。更新请求中的 user&#95;groups 数组可以表示如下。

```json
[
  {
    "entity_ids": [
      "f2qcw",
      "f2tht"
    ],
    "size": "30.0",
    "name": "first group"
  },
  {
    "entity_ids": [
      "f2rqi",
      "f2tws"
    ],
    "size": "30.0",
    "name": "second group",
    "description": "second AB test group"
  },
  {
    "entity_ids": [
      "i1vwr",
      "i1xre"
    ],
    "size": "40.0"
  }
]
```

请注意，各个对象的 size 值相加之和仍然为 100.00。若我们没有更新前两个对象（它们之前各自设置为 50.00），该请求就会失败。

如果我们只是想为第一个用户组添加一个 description，更新请求中的 user&#95;groups 数组可以表示如下。

```json
[
  {
    "id": "p1bcx",
    "description": "使用 PUT 请求更新"
  }
]
```

我们通过 id 指定用户分组对象，并且只包含需要修改的字段。

<div id="request-examples">
  #### 请求示例
</div>

本节提供了其他更新请求示例。可以将这些示例视为按顺序调用的请求。JSON 数据主体为了便于阅读进行了格式化，未包含响应内容。

要进行以下修改，请求应表示如下。（这与上面先前使用的示例相同。）

1. 添加第三个没有名称或描述的用户组

2. 更改每个用户组中各用户组的用户百分比

twurl -X PUT -H ads-api.x.com &quot;/8/accounts/18ce54d4x5t/ab&#95;tests/hr7l0&quot; -d &#39;

```json
twurl -X PUT -H ads-api.x.com "/8/accounts/18ce54d4x5t/ab_tests/hr7l0" -d '
{
  "user_groups": [
    {
      "entity_ids": [
        "f2qcw",
        "f2tht"
      ],
      "size": "30.00",
      "name": "first group"
    },
    {
      "entity_ids": [
        "f2rqi",
        "f2tws"
      ],
      "size": "30.00",
      "name": "second group",
      "description": "second AB test group"
    },
    {
      "entity_ids": [
        "i1vwr",
        "i1xre"
      ],
      "size": "40.00"
    }
  ]
}'
```

要进行以下修改，请求应表示为：

1. 删除 A/B 测试描述

2. 为第一个用户组添加描述

3. 为第二个用户组添加实体 ID（f2syz）

twurl -X PUT -H ads-api.x.com &quot;/8/accounts/18ce54d4x5t/ab&#95;tests/hr7l0&quot; -d &#39;

```json
twurl -X PUT -H ads-api.x.com "/8/accounts/18ce54d4x5t/ab_tests/hr7l0" -d '
{
  "description": null,
  "user_groups": [
    {
      "id": "p1bcx",
      "description": "first AB test group"
    },
    {
      "id": "p1bcy",
      "entity_ids": [
        "f2rqi",
        "f2tws",
        "f2syz"
      ]
    }
  ]
}'
```

第三项修改要求我们在传入新的实体 ID 的同时，一并传入两个已有的实体 ID。请注意，第三个用户组未作任何更改。

要进行以下修改，请将请求表示如下：

1. 删除第二个用户组

2. 更改各用户组中的用户占比

```json
twurl -X PUT -H ads-api.x.com "/8/accounts/18ce54d4x5t/ab_tests/hr7l0" -d '
{
  "user_groups": [
    {
      "entity_ids": [
        "f2qcw",
        "f2tht"
      ],
      "size": "55.00",
      "name": "first group"
    },
    {
      "entity_ids": [
        "i1vwr",
        "i1xre"
      ],
      "size": "45.00"
    }
  ]
}'
```

<div id="api-reference">
  ## API 参考
</div>

<div id="ab-tests">
  ### AB 测试
</div>

[]()

<Button href="https://app.getpostman.com/run-collection/1d12b9fc623b8e149f87">
  在 Postman 中运行
</Button>

<div id="get-accountsaccount_idab_tests">
  #### GET accounts/:account&#95;id/ab&#95;tests
</div>

获取部分或全部 A/B 测试的详细信息。

<div id="resource-url">
  ##### 资源 URL
</div>

`https://ads-api.x.com/12/accounts/:account_id/ab_tests`

<div id="parameters">
  ##### 参数
</div>

| 名称 | 描述 |
| :--- | :--- |
| account&#95;id  <br />*必填* | 所使用账户的标识符。出现在资源路径中，一般是除 [GET accounts](/zh/x-ads-api/campaign-management#accounts) 之外所有 Advertiser API 请求的必需参数。指定的账户必须与已认证用户关联。<br /><br />类型：string<br /><br />示例：`18ce54d4x5t` |
| ab&#95;test&#95;ids  <br />*可选* | 通过指定以逗号分隔的标识符列表，仅返回所需的 A/B 测试。最多可提供 200 个 ID。<br /><br />类型：string<br /><br />示例：`hr7l0` |
| count  <br />*可选* | 指定每个独立请求尝试检索的记录数。<br /><br />类型：int<br /><br />默认值：`200`  <br />最小值、最大值：`1`、`1000` |
| cursor  <br />*可选* | 指定用于获取下一页结果的游标。更多信息参见 [Pagination](/zh/x-ads-api/introduction)。<br /><br />类型：string<br /><br />示例：`8x7v00oow` |
| live&#95;during  <br />*可选* | 将响应限定为在给定日期范围内曾经或将要处于有效状态的 A/B 测试。返回的 A/B 测试的开始和结束时间会与给定日期范围部分或完全重叠。<br /><br />将值指定为以逗号分隔的日期，并使用 [ISO 8601](https://en.wikipedia.org/wiki/ISO_8601) 格式表示。应先指定较早的日期。<br /><br />类型：string<br /><br />示例：`2020-11-01T08:00:00Z,2020-12-01T08:00:00Z` |
| q  <br />*可选* | 一个可选的查询，用于按 `name` 限定资源范围。省略此参数以检索全部结果。<br /><br />类型：string<br /><br />最小、最大长度：`1`、`80` |
| sort&#95;by  <br />*可选* | 按支持的属性以升序或降序排序。更多信息参见 [Sorting](/zh/x-ads-api/fundamentals/sorting)。<br /><br />类型：string<br /><br />示例：`created_at-asc` |
| status  <br />*可选* | 将响应限定为具有指定状态的 A/B 测试。<br /><br />类型：enum<br /><br />可能的取值：`COMPLETED`、`LIVE`、`SCHEDULED` |
| user&#95;id  <br />*可选* | 将响应限定为由指定用户 ID 创建的 A/B 测试。<br /><br />**注意**：不能与 `username` 同时指定。<br /><br />类型：long<br /><br />示例：`756201191646691328` |
| username  <br />*可选* | 将响应限定为由指定用户名创建的 A/B 测试。不要包含前导 “@” 符号。<br /><br />**注意**：不能与 `user_id` 同时指定。<br /><br />类型：string<br /><br />示例：`apimctestface` |
| with&#95;deleted  <br />*可选* | 在请求中包含已删除的结果。<br /><br />类型：boolean<br /><br />默认值：`false`  <br />可能的取值：`true`、`false` |

<div id="example-request">
  ##### 示例请求
</div>

`GET https://ads-api.x.com/12/accounts/18ce54d4x5t/ab_tests`

<div id="example-response">
  ##### 示例响应
</div>

```json
    {
      "request": {
        "params": {
          "account_id": "18ce54d4x5t"
        }
      },
      "data": [
        {
          "created_at": "2022-05-25T00:00:00Z",
          "created_by": {
            "user_id": "756201191646691328",
            "username": "apimctestface"
          },
          "deleted": false,
          "description": "documentation example",
          "end_time": "2022-05-30T01:00:00Z",
          "entities": [
            {
              "id": "p1bcx",
              "account_id": "18ce54d4x5t"
            },
            {
              "id": "p1bcy",
              "account_id": "18ce54d4x5t"
            }
          ],
          "entity_type": "CAMPAIGN",
          "id": "hr7l0",
          "name": "first AB test",
          "start_time": "2022-05-25T01:00:00Z",
          "status": "SCHEDULED",
          "user_groups": [
            {
              "id": "p1bcx",
              "name": "first group",
              "description": null,
              "size": "50.0",
              "entity_ids": [
                "f2qcw",
                "f2tht"
              ]
            },
            {
              "id": "p1bcy",
              "name": "second group",
              "description": "second AB test group",
              "size": "50.0",
              "entity_ids": [
                "f2rqi",
                "f2tws"
              ]
            }
          ],
          "updated_at": "2022-05-25T00:00:00Z",
          "updated_by": {
            "user_id": "756201191646691328",
            "username": "apimctestface"
          }
        }
      ],
      "next_cursor": null
    }
```

<div id="post-accountsaccount_idab_tests">
  #### POST accounts/:account&#95;id/ab&#95;tests
</div>

创建一个新的 A/B 测试。

所有参数都在请求体中传递，请求头中的 `Content-Type` 必须为 `application/json`。

<div id="resource-url">
  ##### 资源 URL
</div>

`https://ads-api.x.com/12/accounts/:account_id/ab_tests`

<div id="parameters">
  ##### 参数
</div>

| Name | Description |
| :--- | :--- |
| account&#95;id  <br />*required* | 所使用账号的标识符。出现在资源路径中，并且通常是除 [GET accounts](/zh/x-ads-api/campaign-management#accounts) 之外所有 Advertiser API 请求的必需参数。指定的账号必须与已认证用户关联。<br /><br />Type: string<br /><br />Example: `18ce54d4x5t` |
| end&#95;time  <br />*required* | A/B 测试结束的时间，采用 ISO 8601 格式表示。<br /><br />Type: string<br /><br />Example: `2020-10-02T00:00:00Z` |
| entity&#95;type  <br />*required* | 用于划分用户分组的实体类型。<br /><br />Type: enum<br /><br />Possible values: `CAMPAIGN`, `LINE_ITEM` |
| start&#95;time  <br />*required* | A/B 测试开始的时间，采用 ISO 8601 格式表示。<br /><br />Type: string<br /><br />Example: `2022-05-30T00:00:00Z` |
| user&#95;groups  <br />*required* | 描述用户分组。更多信息见下表。可以指定 2 到 30 个用户分组。<br /><br />Type: array of objects |
| description  <br />*optional* | A/B 测试的描述。最大长度：1,024 个字符。<br /><br />Type: string<br /><br />Example: `documentation example` |
| name  <br />*optional* | A/B 测试的名称。最大长度：255 个字符。<br /><br />Type: string<br /><br />Example: `first AB test` |

<div id="user-groups">
  #### 用户分组
</div>

| Name | Description |
| :--- | :--- |
| entity&#95;ids  <br />*required* | 实体 ID 的数组。<br /><br />**注意**：每个实体只能关联到一个 A/B 测试。<br /><br />Type: array<br /><br />Example: `["dxi0l", "e66bl"]` |
| size  <br />*required* | 分配给该用户分组的用户百分比。该值为以字符串形式表示的数值，小数点后最多两位。例如，可将 40% 表示为：40、40.0 或 40.00。<br /><br />**注意**：所有 *对象* 的 size 值之和**必须**为 100.00。<br /><br />Type: array<br /><br />Min, Max: `1.00`, `99.00` |
| description  <br />*optional* | 用户分组的描述。最大长度：1,024 个字符。<br /><br />Type: string<br /><br />Example: `second AB test group` |
| name  <br />*optional* | 用户分组的名称。最大长度：255 个字符。<br /><br />Type: string<br /><br />Example: `first group` |

### 示例请求

`POST https://ads-api.x.com/12/accounts/18ce54d4x5t/ab_tests -d '{"end_time": "2022-05-30T01:00:00Z", "entity_type" : "CAMPAIGN", "start_time": "2022-05-25T01:00:00Z", "user_groups": [{"entity_ids": ["f2qcw", "f2tht"], "size": "50.00", "name": "第一组"},{"entity_ids": ["f2rqi", "f2tws"], "size": "50.00", "name": "第二组", "description": "第二个 AB 测试组"}], "name": "第一个 AB 测试", "description": "文档示例"}'`

### 示例响应

```json
    {
      "request": {
        "params": {
          "account_id": "18ce54d4x5t",
          "end_time": "2022-05-30T01:00:00Z",
          "entity_type": "CAMPAIGN",
          "start_time": "2022-05-25T01:00:00Z",
          "user_groups": [
            {
              "entity_ids": [
                "f2qcw",
                "f2tht"
              ],
              "size": "50.0",
              "name": "first group"
            },
            {
              "entity_ids": [
                "f2rqi",
                "f2tws"
              ],
              "size": "50.0",
              "name": "second group",
              "description": "second AB test group"
            }
          ],
          "name": "first AB test",
          "description": "documentation example"
        }
      },
      "data": {
        "created_at": "2022-05-25T00:00:00Z",
        "created_by": {
          "user_id": "756201191646691328",
          "username": "apimctestface"
        },
        "deleted": false,
        "description": "documentation example",
        "end_time": "2022-05-30T01:00:00Z",
        "entities": [
          {
            "id": "p1bcx",
            "account_id": "18ce54d4x5t"
          },
          {
            "id": "p1bcy",
            "account_id": "18ce54d4x5t"
          }
        ],
        "entity_type": "CAMPAIGN",
        "id": "hr7l0",
        "name": "first AB test",
        "start_time": "2022-05-25T01:00:00Z",
        "status": "SCHEDULED",
        "user_groups": [
          {
            "id": "p1bcx",
            "name": "first group",
            "description": null,
            "size": "50.0",
            "entity_ids": [
              "f2qcw",
              "f2tht"
            ]
          },
          {
            "id": "p1bcy",
            "name": "second group",
            "description": "second AB test group",
            "size": "50.0",
            "entity_ids": [
              "f2rqi",
              "f2tws"
            ]
          }
        ],
        "updated_at": "2022-05-25T00:00:00Z",
        "updated_by": {
          "user_id": "756201191646691328",
          "username": "apimctestface"
        }
      }
    }
```

<div id="put-accountsaccount_idab_testsab_test_id">
  #### PUT accounts/:account&#95;id/ab&#95;tests/:ab&#95;test&#95;id
</div>

更新指定的 A/B 测试。

所有参数都通过请求主体发送，并且需要将 `Content-Type` 设为 `application/json`。

此端点支持带对象 ID 的部分 JSON。适用以下原则：

* 若要添加或移除对象或元素，请传入整个数组及其子结构；这是一次**替换**操作
  * 可以将其理解为重新创建该数组
* 其他情况下，通过引用键名或 ID 来修改（变更、添加、移除）现有字段
  * 若要移除字段，将其值设为 `null`
  * 未传入的字段不会被修改

通常，只有当 `status` 为 `SCHEDULED` 时，才能更新 A/B 测试。有一个例外：当 A/B 测试为 `LIVE` 时，可以更新其 `end_time`。

<div id="resource-url">
  ##### 资源 URL
</div>

`https://ads-api.x.com/12/accounts/18ce54d4x5t/:ab_test_id`

<div id="parameters">
  ##### 参数
</div>

| Name | Description |
| :--- | :--- |
| account&#95;id  <br />*required* | 所使用账户的标识符。出现在资源路径中，并且通常是除 [GET accounts](/zh/x-ads-api/campaign-management#accounts) 之外所有 Advertiser API 请求的必需参数。指定的账户必须与通过身份验证的用户关联。<br /><br />Type: string<br /><br />Example: `18ce54d4x5t` |
| ab&#95;test&#95;id  <br />*required* | 指向你在本次请求中操作的 A/B 测试的引用。<br /><br />Type: string<br /><br />Example: `hr7l0` |
| description  <br />*optional* | A/B 测试的描述。最大长度：1,024 个字符。<br /><br />**Note**: 只能在 A/B 测试的 `status` 为 `SCHEDULED` 时更新。<br /><br />Type: string<br /><br />Example: `documentation example` |
| end&#95;time  <br />*optional* | A/B 测试结束的时间，使用 ISO 8601 表示。<br /><br />**Note**: 只能在 A/B 测试的 `status` 为 `SCHEDULED` 或 `LIVE` 时更新。<br /><br />Type: string<br /><br />Example: `2020-10-02T00:00:00Z` |
| name  <br />*optional* | A/B 测试的名称。最大长度：255 个字符。<br /><br />**Note**: 只能在 A/B 测试的 `status` 为 `SCHEDULED` 时更新。<br /><br />Type: string<br /><br />Example: `first AB test` |
| start&#95;time  <br />*optional* | A/B 测试开始的时间，使用 ISO 8601 表示。<br /><br />**Note**: 只能在 A/B 测试的 `status` 为 `SCHEDULED` 时更新。<br /><br />Type: string<br /><br />Example: `2022-05-30T00:00:00Z` |
| user&#95;groups  <br />*required* | 用户分组的定义。更多信息见下表。<br /><br />**Note**: 只能在 A/B 测试的 `status` 为 `SCHEDULED` 时更新。<br /><br />Type: array of objects |

#### 用户组

| Name | Description |
| :--- | :--- |
| id  <br />*有时必填* | 在请求中所操作的用户组对象的引用。<br /><br />**注意**：在修改（更改、添加或移除）用户组对象&#95;字段&#95;时必填。<br /><br />**注意**：在添加或移除整个用户组对象时不要指定 ID。<br /><br />Type: string<br /><br />Example: `p1bcx` |
| description  <br />*可选* | 用户组的描述。最大长度：1,024 个字符。<br /><br />**注意**：通过为该字段指定 `null` 值来清除（移除）。<br /><br />Type: string<br /><br />Example: `second AB test group` |
| entity&#95;ids  <br />*可选* | 实体 ID 的数组。<br /><br />**注意**：这是替换操作，它会覆盖之前设置的任何值。<br /><br />**注意**：实体只能关联到一个 A/B 测试。<br /><br />Type: array<br /><br />Example: `["dxi0l", "e66bl"]` |
| name  <br />*可选* | 用户组的名称。最大长度：255 个字符。<br /><br />**注意**：通过为该字段指定 `null` 值来清除（移除）。<br /><br />Type: string<br /><br />Example: `first group` |
| size  <br />*可选* | 分配给此用户组的用户百分比。该数值以字符串形式表示，最多保留两位小数。例如，可以将 40% 表示为 40、40.0 或 40.00。<br /><br />**注意**：所有&#95;对象&#95;的 size 字段值之和**必须**为 100.00。<br /><br />Type: string<br /><br />Min, Max: `1.00`, `99.00` |

<div id="example-request">
  ##### 示例请求
</div>

此请求会进行以下修改。

1. 移除 A/B 测试的描述
2. 更改结束时间
3. 为第一个用户组添加描述
4. 调整每个用户组中的用户占比
5. 为第二个用户组添加实体 ID（`f2syz`）

`PUT https://ads-api.x.com/12/accounts/18ce54d4x5t/ab_tests/hr7l0 -d '{"description": null, "end_time": "2022-06-01T01:00:00Z", "user_groups": [{"id": "p1bcx", "description": "first AB test group", "size": "60.00"},{"id": "p1bcy", "size": "40.00", "entity_ids": ["f2rqi", "f2tws", "f2syz"]}]}'`

<div id="example-response">
  ##### 示例响应
</div>

```json
    {
      "request": {
        "params": {
          "account_id": "18ce54d4x5t",
          "ab_test_id": "hr7l0",
          "description": null,
          "end_time": "2022-06-01T01:00:00Z",
          "user_groups": [
            {
              "id": "p1bcx",
              "description": "first AB test group",
              "size": "60.0"
            },
            {
              "id": "p1bcy",
              "size": "40.0",
              "entity_ids": [
                "f2rqi",
                "f2tws",
                "f2syz"
              ]
            }
          ]
        }
      },
      "data": {
        "created_at": "2020-05-25T00:00:00Z",
        "created_by": {
          "user_id": "756201191646691328",
          "username": "apimctestface"
        },
        "deleted": false,
        "description": null,
        "end_time": "2022-06-01T01:00:00Z",
        "entities": [
          {
            "id": "p1bcx",
            "account_id": "18ce54d4x5t"
          },
          {
            "id": "p1bcy",
            "account_id": "18ce54d4x5t"
          }
        ],
        "entity_type": "CAMPAIGN",
        "id": "hr7l0",
        "name": "first AB test",
        "start_time": "2022-05-25T01:00:00Z",
        "status": "SCHEDULED",
        "user_groups": [
          {
            "id": "p1bcx",
            "name": "first group",
            "description": "first AB test group",
            "size": "60.0",
            "entity_ids": [
              "f2qcw",
              "f2tht"
            ]
          },
          {
            "id": "p1bcy",
            "name": "second group",
            "description": "second AB test group",
            "size": "40.0",
            "entity_ids": [
              "f2rqi",
              "f2tws",
              "f2syz"
            ]
          }
        ],
        "updated_at": "2022-05-25T00:17:23Z",
        "updated_by": {
          "user_id": "756201191646691328",
          "username": "apimctestface"
        }
      }
    }
```

<div id="delete-accountsaccount_idab_testsab_test_id">
  #### DELETE accounts/:account&#95;id/ab&#95;tests/:ab&#95;test&#95;id
</div>

删除指定的 A/B 测试。

**注意**：删除 A/B 测试是不可撤销的，随后再次尝试删除该资源将返回 HTTP 404。

<div id="resource-url">
  ##### 资源 URL
</div>

`https://ads-api.x.com/12/accounts/:account_id/ab_tests/:ab_test_id`

<div id="parameters">
  ##### 参数
</div>

| 名称 | 说明 |
| :--- | :--- |
| ab&#95;test&#95;id  <br />*required* | 对你在该请求中要操作的 A/B 测试的引用。<br /><br />类型：string<br /><br />示例：`hr7l0` |

<div id="example-request">
  ##### 示例请求
</div>

`DELETE https://ads-api.x.com/12/accounts/18ce54d4x5t/ab_tests/hr7l0`

### 示例响应

```json
    {
      "request": {
        "params": {
          "account_id": "18ce54d4x5t",
          "ab_test_id": "hr7l0"
        }
      },
      "data": {
        "created_at": "2022-05-25T00:00:00Z",
        "created_by": {
          "user_id": "756201191646691328",
          "username": "apimctestface"
        },
        "deleted": true,
        "description": null,
        "end_time": "2022-06-01T01:00:00Z",
        "entities": [
          {
            "id": "p1bcx",
            "account_id": "18ce54d4x5t"
          },
          {
            "id": "p1bcy",
            "account_id": "18ce54d4x5t"
          }
        ],
        "entity_type": "CAMPAIGN",
        "id": "hr7l0",
        "name": "first AB test",
        "start_time": "2022-05-25T01:00:00Z",
        "status": "SCHEDULED",
        "user_groups": [
          {
            "id": "p1bcx",
            "name": "first group",
            "description": "first AB test group",
            "size": "60.0",
            "entity_ids": [
              "f2qcw",
              "f2tht"
            ]
          },
          {
            "id": "p1bcy",
            "name": "second group",
            "description": "second AB test group",
            "size": "40.0",
            "entity_ids": [
              "f2rqi",
              "f2tws",
              "f2syz"
            ]
          }
        ],
        "updated_at": "2022-06-02T00:18:31Z",
        "updated_by": {
          "user_id": "756201191646691328",
          "username": "apimctestface"
        }
      }
    }
```
