---
title: '创建 DPA 广告系列 - 分步说明'
keywords: ["DPA campaign", "dynamic product ads", "DPA", "create DPA campaign", "product ads", "dynamic ads"]
---

下面的示例假设你已经使用 twurl 安装、配置并授权了你的应用和用户。twurl 是一款类似 cURL 的命令行工具，可以顺畅地处理 X OAuth 身份验证。twurl 是快速测试和调试 Ads API（以及 REST API）功能的非常实用的工具。要查看请求和响应的完整头部信息，请使用 -t 来跟踪调用，其作用大致相当于 cURL 的 -v 选项。

在本示例中，我们将创建一个动态商品广告（Dynamic Product Ads，DPA）广告系列。

获取账户 id。

```bash
twurl -H ads-api.x.com /12/accounts/
```

```json
{
  "request": {
    "params": {}
  },
  "data": [
    {
      "name": "@AdsAPI 的测试账户",
      "timezone": "America/Los_Angeles",
      "timezone_switch_at": null,
      "id": "xxxxxx",
      "created_at": "2014-03-09T00:41:49Z",
      "salt": "f9f9d5a5f23075c618da5eb1d1a9df57",
      "updated_at": "2015-01-29T00:41:49Z",
      "approval_status": "ACCEPTED",
      "deleted": false
    }
  ],
  "data_type": "account",
  "total_count": 1,
  "next_cursor": null
}
```

获取资金工具 id。
使用在上一个命令中获取的 account id 调用 GET accounts/:account&#95;id/funding&#95;instruments API。

```bash
twurl -H ads-api.x.com /12/accounts/xxxxxx/funding_instruments
```

```json
{
  "data": [
    {
      "cancelled": true,
      "created_at": "2014-03-09T00:41:49Z",
      "credit_limit_local_micro": null,
      "currency": "USD",
      "deleted": false,
      "description": null,
      "end_time": null,
      "funded_amount_local_micro": null,
      "id": "yyyy",
      "type": null,
      "updated_at": "2014-05-29T00:41:49Z"
    }
  ],
  "data_type": "funding_instrument",
  "next_cursor": null,
  "request": {
    "params": {
      "account_id": "xxxxxx"
    }
  },
  "total_count": 1
}
```


<div id="step-1-create-campaign">
  ## 步骤 1：创建广告系列
</div>

创建一个广告系列，并将其关联到资金工具。
为该广告系列指定开始时间和预算。

* 必填字段：资金工具、广告系列名称、预算（总计/每日）、开始时间和广告账户 ID

```bash
twurl -H ads-api.x.com -d "funding_instrument_id={FUNDING_INSTRUMENT_ID}&name={CAMPAIGN_NAME}&total_budget_amount_local_micro={TOTAL_BUDGET}&daily_budget_amount_local_micro={DAILY_BUDGET}&start_time={START_TIME}" /12/accounts/{ADS_ACCOUNT_ID}/campaigns | jq
```


<div id="step-2-create-line-item-with-sales-objective">
  ## 步骤 2：创建以销售为目标的广告组（line item）
</div>

创建与该广告系列关联的广告组。

* 必填字段包括：campaign id（来自步骤 1）、product type、placements、objective、goal、entity status、primary web event tag、catalog id、product set id、creative&#95;source、ads&#95;account&#95;id
* catalog&#95;id 和 product&#95;set&#95;id 可以在您的购物管理器（Shopping Manager）中找到
* creative&#95;source 应始终为 DYNAMIC&#95;PRODUCT&#95;CREATIVE
* objective 应始终为 WEBSITE&#95;CLICKS
* goal 应始终为 WEBSITE&#95;CONVERSIONS

```bash
twurl -H ads-api.x.com -d "campaign_id={CAMPAIGN_ID}&product_type={product_type}&placements={PLACEMENTS}&objective=WEBSITE_CLICKS&goal=WEBSITE_CONVERSIONS&entity_status={entity_status}&primary_web_event_tag={WEB_EVENT_TAG}&catalog_id={catalog_id}&product_set_id={product_set_id}&creative_source=DYNAMIC_PRODUCT_CREATIVE" /12/accounts/{ADS_ACCOUNT_ID}/line_items | jq
```

* 完成此步骤后，您就可以在 X 的 Ads Manager 中查看该广告系列。


<div id="step-3-create-dpa-card">
  ## 步骤 3：创建 DPA 卡片
</div>

创建一个 DPA 卡片。

* 必需参数：广告账户 ID 和 URL：
* URL 必须以 [https://twitter.com](https://twitter.com) 开头——之后可以像下面的示例一样追加任意 UTM 参数：
  * `https://twitter.com?utm_source=%7B%7Bsite_source%7D%7D`
* 你还可以通过为 creative&#95;type 指定以下值之一来选择卡片格式：&quot;CAROUSEL&quot;、&quot;SINGLE&quot;、&quot;COLLECTION&quot;。如果未指定，你的卡片将被创建为轮播卡片（carousel card）。

```bash
twurl -X POST -H ads-api.twitter.com -A "Content-Type: application/json" "/12/accounts/{ADS_ACCOUNT_ID}/dynamic_product_cards" -d '{"url": "{URL}", "creative_type": "{CREATIVE_TYPE}"}' | jq
```


<div id="step-4-create-post">
  ## 步骤 4：创建帖子
</div>

创建一条帖子。

* 必需参数：广告账户 ID、用户 ID、卡片 URI（来自步骤 3）、text、name 和 dynamic product ad
* dynamic&#95;product&#95;ad 应始终设置为 true

```bash
twurl -X POST -H "https://ads-api.twitter.com" "/12/accounts/{ADS_ACCOUNT_ID}/tweet?as_user_id={USER_ID}1&card_uri=card%3A%2F%2F{CARD_URI}&text={POST_TEXT}&name={POST_NAME}%201&dynamic_product_ad=true" | jq
```


<div id="step-5-associate-post-with-line-item">
  ## 步骤 5：将帖子关联到广告单元
</div>

将帖子与广告单元关联。

* 必需参数：广告账户 id、广告单元 id（来自步骤 2）以及帖子 id（步骤 4 中的 id&#95;str）

```bash
twurl -X POST -H "https://ads-api.twitter.com" "/12/accounts/{ADS_ACCOUNT_ID}/promoted_tweets?line_item_id={line_item_id}&tweet_ids={tweet_id}" | jq
```

如果广告主希望在 UI 中查看该卡片，也可以在那里看到。
