---
title: 快速入门
sidebarTitle: 快速入门
keywords: ["列表帖子快速入门", "列表时间线快速入门", "获取列表帖子快速入门", "列表帖子快速入门"]
---

import { Button } from '/snippets/zh/button.mdx';

<div id="getting-started-with-the-list-posts-lookup-endpoint">
  ## 开始使用 List Posts 查询端点
</div>

本快速入门指南将帮助你使用 Postman 向 List Posts 查询端点发送第一个请求。

如果你想查看不同编程语言的示例代码，请访问我们的 [X API v2 sample code](https://github.com/xdevplatform/Twitter-API-v2-sample-code) GitHub 仓库。

<Note>
  ### 前提条件

  要完成本指南，你需要一组用于对请求进行身份验证的[密钥和令牌](/zh/resources/fundamentals/authentication)。你可以按照以下步骤生成这些密钥和令牌：

  * [注册开发者账号](https://developer.x.com/en/apply-for-access) 并通过审批。
  * 在开发者门户中创建一个[项目](/zh/resources/fundamentals/projects)以及其关联的[开发者应用](/zh/resources/fundamentals/developer-apps)。
  * 在开发者门户中打开你的 App 的“Keys and tokens”页面，生成所需凭证。请务必将所有凭证保存在安全的位置。
</Note>

<div id="steps-to-build-a-list-posts-lookup-request">
  ### 构建列表帖子查询请求的步骤
</div>

<div id="step-one-start-with-a-tool-or-library">
  #### 第一步：选择工具或库
</div>

有多种不同的工具、代码示例和库可以用来向此端点发起请求，但在这里我们将使用 Postman 工具来简化流程。

要将 X API v2 的 Postman 集合加载到你的环境中，请点击以下按钮：

<Button href="https://app.getpostman.com/run-collection/9956214-784efcda-ed4c-4491-a4c0-a26470a67400">
  将 X API v2 添加到 Postman
</Button>

在你将 X API v2 集合加载到 Postman 之后，进入 “List” 文件夹，选择其中的 “List Posts” 文件夹，然后选择 “List Posts lookup”。
 

<div id="step-two-authenticate-your-request">
  #### 步骤二：为请求进行身份验证
</div>

要正确地向 X API 发起请求，你需要验证自己是否拥有相应的权限。对于此端点，你必须使用 [仅应用（App-only）](/zh/resources/fundamentals/authentication#app-only-authentication-and-oauth-2-0-bearer-token)、[OAuth 2.0 Authorization Code with PKCE](resources/fundamentals/authentication#oauth-2-0-authorization-code-flow-with-pkce-2) 或 [OAuth 1.0a 用户上下文](/zh/resources/fundamentals/authentication) 这几种身份验证方式之一来为请求进行身份验证。

为简单起见，我们在本次请求中将使用仅应用（App-only）方式，但如果你希望请求私有 [指标](/zh/x-api/fundamentals/metrics) 或私有帖子，则需要使用其他身份验证方式之一。 

要使用仅应用（App-only）方式，你必须将密钥和令牌（具体为 [App only Access Token](/zh/resources/fundamentals/authentication#using-and-generating-an-app-only-bearer-token)，也称为 App only Bearer Token）添加到 Postman 中：选择名为“X API v2”的环境（位于 Postman 右上角），并将你的密钥和令牌添加到 “initial value” 和 “current value” 字段中（单击环境下拉菜单旁边的眼睛图标进行添加）。

如果你已正确完成这些步骤，这些变量会自动填充到请求的 Authorization 选项卡中。
 

<div id="step-three-identify-and-specify-which-list-you-would-like-to-retrieve-posts-from">
  #### 步骤三：确定并指定要从哪个列表中检索帖子
</div>

你必须在请求中指定一个你希望获取其帖子的列表。你可以通过访问 x.com，点击某个列表，然后查看 URL 来找到该列表的 ID。例如，下面这个 URL 中的列表 ID 是 84839422。

https://x.com/i/lists/84839422

目标 ID 可以是任何有效的列表 ID。在 Postman 中，转到 &quot;Params&quot; 选项卡，在 id 路径变量的 &quot;Value&quot; 列中输入你的 ID。务必确保在任何 ID 前后都不要包含空格。

|     |     |
| :--- | :--- |
| **Key** | **Value** |
| id  | 84839422（列表 ID） |

<div id="step-four-identify-and-specify-which-fields-you-would-like-to-retrieve">
  #### 步骤四：确定并指定要检索的字段
</div>

如果你在完成步骤三后点击 &quot;Send&quot; 按钮，你将在响应中收到默认的 [Post object](/zh/x-api/fundamentals/data-dictionary#tweet) 字段：id 和 text。

如果你想接收更多字段，则需要在请求中通过 tweet.fields 和/或 [expansion](/zh/x-api/fundamentals/expansions) 参数来指定这些字段。

在本练习中，我们将从不同对象中请求三组额外字段：

* 主 List 对象中的额外 created&#95;at 字段。

* 使用 expansion 参数请求完整的 [user object](/zh/x-api/fundamentals/data-dictionary#user)

* 关联用户对象中的额外 user.created&#95;at 字段。

在 Postman 中，导航到 &quot;Params&quot; 选项卡，并在 &quot;Query Params&quot; 表中添加以下 key:value 键值对：

|     |     |     |
| :--- | :--- | :--- |
| **Key** | **Value** | **Returned fields** |
| tweet.fields | created&#95;at | created&#95;at |
| expansions | author&#95;id | includes.users.id,  <br />includes.users.name,  <br />includes.users.username |
| user.fields | created&#95;at | includes.users.created&#95;at |

现在，你应该会在 &quot;Send&quot; 按钮旁边看到类似如下的 URL：

`https://api.x.com/2/lists/84839422/tweets?expansions=author_id&user.fields=created_at&max_results=1`

<div id="step-five-make-your-request-and-review-your-response">
  #### 步骤五：发出请求并查看响应
</div>

在完成所有设置后，点击“Send”按钮，你会收到与以下示例类似的响应：

```
{
  "data": [
    {
      "author_id": "4172587277",
      "id": "1458172421115101189",
      "text": "A Alemanha registrou nesta semana um recorde de novos casos de Covid-19. Segundo o governo e especialistas em Saúde, pessoas não vacinadas são responsáveis pela situação \nhttps://t.co/4POyaPwMLu"
    }
  ],
  "includes": {
    "users": [
      {
        "username": "MomentsBrasil",
        "name": "Twitter Moments Brasil",
        "created_at": "2015-11-12T16:46:02.000Z",
        "id": "4172587277"
      }
    ]
  },
  "meta": {
    "result_count": 1,
    "next_token": "7140dibdnow9c7btw3z2vwioavpvutgzrzm9icis4ndix"
  }
}
```

**请注意：** 此端点的响应支持查询指定列表中最新的最多 800 条帖子
