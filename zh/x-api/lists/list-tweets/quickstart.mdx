---
title: 快速入门
sidebarTitle: 快速入门
keywords: ["列表帖子快速入门", "列表时间线快速入门", "获取列表中帖子快速入门", "列表帖子快速入门"]
---

import { Button } from '/snippets/zh/button.mdx';

<div id="getting-started-with-the-list-posts-lookup-endpoint">
  ## 开始使用 List 帖子查询端点
</div>

本快速入门指南将帮助你使用 Postman 向 List 帖子查询端点发出第一个请求。

如果你想查看不同语言的示例代码，请访问我们的 [X API v2 sample code](https://github.com/xdevplatform/Twitter-API-v2-sample-code) GitHub 代码仓库。

<Note>
  ### 前提条件

  要完成本指南，你需要一组用于为请求进行认证的 [密钥和令牌](/zh/resources/fundamentals/authentication)。你可以按照以下步骤生成这些密钥和令牌：

  * [注册开发者账号](https://developer.x.com/en/apply-for-access) 并通过审核。
  * 在开发者门户中创建一个 [项目](/zh/resources/fundamentals/projects) 以及关联的 [开发者应用](/zh/resources/fundamentals/developer-apps)。
  * 前往你的应用的 “Keys and tokens” 页面生成所需的凭证。请确保将所有凭证保存在安全的位置。
</Note>

<div id="steps-to-build-a-list-posts-lookup-request">
  ### 创建列表帖子查询请求的步骤
</div>

<div id="step-one-start-with-a-tool-or-library">
  #### 步骤一：从工具或库入手
</div>

可以用多种工具、代码示例和库向该端点发起请求，但在这里我们将使用 Postman 工具来简化流程。

要将 X API v2 的 Postman 集合加载到你的环境中，请点击以下按钮：

<Button href="https://app.getpostman.com/run-collection/9956214-784efcda-ed4c-4491-a4c0-a26470a67400">
  将 X API v2 添加到 Postman
</Button>

在你将 X API v2 集合加载到 Postman 之后，导航到“List”文件夹，选择其中的“List Posts”子文件夹，然后选择“List Posts lookup”请求。
 

<div id="step-two-authenticate-your-request">
  #### 步骤二：对请求进行身份验证
</div>

要正确地向 X API 发出请求，你需要验证自己是否具有相应的权限。针对这个端点，你必须通过以下任一方式对请求进行身份验证：[App only](/zh/resources/fundamentals/authentication#app-only-authentication-and-oauth-2-0-bearer-token)、[OAuth 2.0 Authorization Code with PKCE](resources/fundamentals/authentication#oauth-2-0-authorization-code-flow-with-pkce-2) 或 [OAuth 1.0a User Context](/zh/resources/fundamentals/authentication) 身份验证方法。

为简单起见，我们在本请求中将使用 App only，但如果你希望请求私有[指标](/zh/x-api/fundamentals/metrics)或帖子，则需要使用其他身份验证方法之一。 

要使用 App only，你必须将你的密钥和令牌（特别是 [App only Access Token](/zh/resources/fundamentals/authentication#using-and-generating-an-app-only-bearer-token)，也称为 App only Bearer Token）添加到 Postman 中：在 Postman 右上角选择名为 “X API v2” 的环境，并将你的密钥和令牌添加到 &quot;initial value&quot; 和 &quot;current value&quot; 字段中（通过点击环境下拉菜单旁边的眼睛图标）。

如果配置正确，这些变量会自动填充到该请求的 Authorization 选项卡中。
 

<div id="step-three-identify-and-specify-which-list-you-would-like-to-retrieve-posts-from">
  #### 步骤三：确定并指定要从哪个列表中获取帖子
</div>

你必须在请求中指定希望获取的列表。你可以通过访问 x.com，点击某个列表，然后查看浏览器地址栏中的 URL 来找到该列表的 ID。例如，下面这个 URL 中的列表 ID 是 84839422。

https://x.com/i/lists/84839422

目标 ID 可以是任何有效的列表 ID。在 Postman 中，导航到 &quot;Params&quot; 选项卡，在 id 路径变量对应行的 &quot;Value&quot; 列中输入你的 ID。请确保在任何 ID 前后都不要包含空格。

|     |     |
| :--- | :--- |
| **Key** | **Value** |
| id  | 84839422（列表 ID） |

<div id="step-four-identify-and-specify-which-fields-you-would-like-to-retrieve">
  #### 步骤四：确定并指定你想要检索的字段
</div>

在完成步骤三后，如果你点击“Send”按钮，你将会在响应中收到默认的 [Post object](/zh/x-api/fundamentals/data-dictionary#tweet) 字段：id 和 text。

如果你想接收更多字段，你需要在请求中通过 tweet.fields 和/或 [expansion](/zh/x-api/fundamentals/expansions) 参数来指定这些字段。

在本练习中，我们将从不同对象中请求三组额外字段：

* 主 Lists 对象中的额外 created&#95;at 字段。
* 使用 expansion 参数获取完整的 [user object](/zh/x-api/fundamentals/data-dictionary#user)
* 关联用户对象中的额外 user.created&#95;at 字段。

在 Postman 中，前往“Params”选项卡，并在“Query Params”表中添加以下键值对：

|     |     |     |
| :--- | :--- | :--- |
| **Key** | **Value** | **Returned fields** |
| tweet.fields | created&#95;at | created&#95;at |
| expansions | author&#95;id | includes.users.id,  <br />includes.users.name,  <br />includes.users.username |
| user.fields | created&#95;at | includes.users.created&#95;at |

此时你应该会在“Send”按钮旁边看到类似如下的 URL：

`https://api.x.com/2/lists/84839422/tweets?expansions=author_id&user.fields=created_at&max_results=1`

<div id="step-five-make-your-request-and-review-your-response">
  #### 步骤五：发送请求并查看响应
</div>

在完成所有设置之后，点击“Send”按钮，你将会收到一个类似于下面示例的响应：

```
{
  "data": [
    {
      "author_id": "4172587277",
      "id": "1458172421115101189",
      "text": "A Alemanha registrou nesta semana um recorde de novos casos de Covid-19. Segundo o governo e especialistas em Saúde, pessoas não vacinadas são responsáveis pela situação \nhttps://t.co/4POyaPwMLu"
    }
  ],
  "includes": {
    "users": [
      {
        "username": "MomentsBrasil",
        "name": "Twitter Moments Brasil",
        "created_at": "2015-11-12T16:46:02.000Z",
        "id": "4172587277"
      }
    ]
  },
  "meta": {
    "result_count": 1,
    "next_token": "7140dibdnow9c7btw3z2vwioavpvutgzrzm9icis4ndix"
  }
}
```

**请注意：** 此端点的响应支持查询指定列表中最新的最多 800 条帖子
