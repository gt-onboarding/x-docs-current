---
title: 概览
keywords: ["迁移", "API 迁移", "v2 迁移", "迁移到 v2", "迁移指南", "升级到 v2", "迁移概览"]
---

import { Button } from "/snippets/zh/button.mdx"

最新版本的 X API v2 意义重大。因此，我们将本迁移部分拆分为几个模块：

| X API v2 有哪些新变化 | 了解我们在 X API v2 中发布的新端点和新功能。                   |
| :-------------- | :-------------------------------------------- |
| 准备好开始迁移了吗？      | 通过一系列指南和操作说明开始你的迁移。                           |
| 数据格式迁移指南        | 了解如何调整之前适用于标准 v1.1 和 Enterprise 数据格式的数据解析器。   |
| X API 端点映射      | 查看标准 v1.1 和 Enterprise 端点如何映射到新的 X API v2 端点。 |

***

<div id="what-is-the-x-api-v2">
  ## 什么是 X API v2？
</div>

X API v2 现已成为主要的 X API，也是我们产品投入和创新的重点所在。我们与开发者合作，共同构建了新一代 X API，以更好地服务多元化的开发者社区。基于开发者反馈，我们对 API 进行了重新构建，以更好地满足更广泛的需求，引入新的功能和端点，并提升整体开发者体验。

X API v2 现已成为主要的 X API，也是我们产品投入和创新的重点所在。过去几年中，我们与开发者合作，重新构建了 API，以更好地满足更广泛的需求，引入新的功能和端点，并提升整体开发者体验。我们致力于持续打造一个开放的开发者平台，也期待看到你使用 X API v2 构建出什么样的产品。

<div id="why-migrate">
  ## 为什么要迁移？
</div>

X API v2 构建在更现代且更可持续的基础之上，不仅为标准版 v1.1 和 Enterprise 级产品提供了改进后的替代端点，还带来了全新的功能。我们强烈建议旧版 API（v1.1 和 Enterprise）的客户开始迁移到 v2，因为我们确实计划最终弃用这些旧版本。使用 X API 来监测和分析公开对话、在 X 上与人互动并推动创新。

在本节中，我们将介绍这些端点及其功能。

<div id="v2-endpoints">
  ## V2 端点
</div>

你可以在以下指南中查看 v2 端点及其在 v2 之前版本中的对应端点的完整列表：

<Button href="/zh/x-api/migrate/x-api-endpoint-map">
  X API 端点映射
</Button>

虽然 X API v2 中的大多数端点都是对旧端点的替代，但我们也引入了若干全新的端点。以下是我们在 v2 中发布的一些新端点示例：

* [Spaces 端点](/zh/x-api/spaces/introduction)，帮助人们更好地使用 X Spaces，并让开发者能够参与塑造音频对话的未来。
* [隐藏回复](/zh/x-api/posts/hide-replies/introduction)，允许你构建工具，大规模地降低辱骂性、干扰性或误导性回复的影响。
* 新的 [Lists 端点](/zh/x-api/lists/pinned-lists/introduction)，允许你固定和取消固定 Lists，或查询某人的已固定 Lists。
* 新的[批量合规端点](/zh/x-api/compliance/batch-compliance/introduction)，帮助你确保所存储的用户和帖子数据保持合规。

<div id="new-functionality">
  ## 新增功能
</div>

X API v2 还包含一些新特性，可帮助你更好地从 X API 中获取价值。许多新增内容是在你的反馈推动下推出的，其中包括一些此前仅向 Enterprise 客户开放的功能。

对 API 的部分改进包括：

* [跨端点的一致性设计](/zh/x-api/fundamentals/consistency)
* [能够指定哪些字段和对象会在响应负载中返回](/zh/x-api/fundamentals/data-dictionary#how-to-use-fields-and-expansions)
* [新的、更详细的数据对象](/zh/x-api/fundamentals/data-dictionary)
* [通过帖子注释提供的新上下文信息来接收和过滤数据](/zh/x-api/fundamentals/post-annotations)
* [访问新的指标](/zh/x-api/fundamentals/metrics)
* [轻松识别并过滤属于回复线程的会话](/zh/x-api/fundamentals/conversation-id)
* [为学术研究者提供高级功能和更多数据访问权限](https://developer.x.com/content/developer-twitter/en/products/twitter-api/academic-research)
* [用于流式端点的恢复和冗余功能](/zh/x-api/posts/filtered-stream/integrate/recovery-and-redundancy-features)
* [轻松返回与查询匹配的帖子计数](/zh/x-api/posts/counts/introduction)
* [对编辑帖子（Edit Tweets）的支持](/zh/x-api/fundamentals/edit-posts)
* 高置信度的垃圾信息过滤
* 完全展开缩短后的 URL，以便进行更高效的过滤和分析
* 通过移除已弃用字段并更新标签命名来简化 JSON 响应对象
* 在搜索查询中返回 100% 匹配的、公开且可用的帖子
* 流式规则（rules），这样你可以在不中断连接的情况下进行更改
* 更具表现力的查询语言，用于搜索帖子、帖子计数和 filtered stream
* 使用 OpenAPI 规范来构建新的库并更透明地跟踪变更

<div id="discover-new-and-updated-response-objects">
  ### 发现新的和更新的响应对象
</div>

以下六种数据对象可通过 v2 端点获取：

| Object | Description |
|:--------|:-------------|
| [Tweet](/zh/x-api/fundamentals/data-dictionary#tweet) | Tweet 对象具有一长串根级字段，例如 `id`、`text` 和 `created_at`。Tweet 对象同时也是多个子对象（包括 `user`、`media`、`poll` 和 `place`）的父对象。 |
| [User](/zh/x-api/fundamentals/data-dictionary#user) | User 对象包含描述所引用用户的 X 用户账号的元数据。 |
| [Spaces](/zh/x-api/fundamentals/data-dictionary#space) | Space 对象由 `state`、`host_id`、`is_ticketed`，以及 `lang` 等字段组成。 |
| [Lists](/zh/x-api/fundamentals/data-dictionary#list) | List 对象包含有关所请求列表的基本信息，包括 `description`、`member_count` 和 `owner_id`。 |
| [Media](/zh/x-api/fundamentals/data-dictionary#media) | 如果某条帖子包含媒体（例如图片），则可以使用 `media.fields` 参数请求 media 对象，其中包括 `media_key`、`type`、`url`、`preview_image_url` 等字段。 |
| [Poll](/zh/x-api/fundamentals/data-dictionary#poll) | 包含在帖子中的投票不是任何端点上的主对象，但可以在 Tweet 对象中找到并展开。 |
| [Place](/zh/x-api/fundamentals/data-dictionary#place) | Place 对象由 `place_id`、`geo` 对象、`country_code` 等字段组成。此信息可用于按位置识别和研究帖子。 |

进一步了解 [如何使用字段和扩展字段](/zh/x-api/fundamentals/data-dictionary#how-to-use-fields-and-expansions)。

<div id="flexibility-to-choose-which-objects-and-fields-you-receive">
  ### 灵活选择要接收的对象和字段
</div>

当你向某个 GET 端点发起请求时，你会收到与该端点相关的主要数据对象，其中会包含一组默认字段。例如，帖子对象默认返回 `id` 和 `text` 字段。

如果你希望在请求中获取更多字段，需要使用 [fields](/zh/x-api/fundamentals/fields) 和 [expansions](/zh/x-api/fundamentals/expansions) 参数。`expansions` 参数可以让你获取关联的数据对象，例如用户置顶的帖子或媒体对象，而字段参数则允许你在默认字段之外，为返回的对象请求特定字段。

下面是你可以在不同 X API v2 端点中请求的所有可用扩展字段的完整列表：

| 对象 / 资源 | 可用扩展字段 |
|:-------------------|:----------------------|
| Tweets            | `author_id`, `edit_history_tweet_ids`, `entities.mentions.username`, `in_reply_to_user_id`, `referenced_tweets.id`, `referenced_tweets.id.author_id`, `attachments.poll_ids`, `attachments.media_keys`, `geo.place_id` |
| Users             | `pinned_tweet_id` |
| Spaces            | `invited_user_ids`, `speaker_ids`, `creator_id`, `host_ids`, `topic_ids` |

前往[如何使用字段和扩展字段](/zh/x-api/fundamentals/data-dictionary#how-to-use-fields-and-expansions)了解更多信息。

<div id="new-metrics-available-within-tweets-users-spaces-and-media-objects">
  ## 在帖子、用户、Spaces、列表和媒体对象中提供的新指标
</div>

现在可以在帖子、用户、Spaces、列表和媒体对象中访问更多指标。这些指标包括公开和私有指标，其中一些指标还可以按自然或推广场景进行细分，用于帖子广告。

详细了解可用的[指标](/zh/x-api/fundamentals/metrics)。

| Object  | Available Metrics      | Public Metrics | Private Metrics | Organic Metrics | Promoted Metrics |
|:---------|:-------------------------|:----------------|:-----------------|:-----------------|:------------------|
| tweets  | retweet&#95;count           | ✔️             |                 | ✔️              | ✔️               |
|         | quote&#95;count             | ✔️             |                 |                 |                  |
|         | like&#95;count              | ✔️             |                 | ✔️              | ✔️               |
|         | reply&#95;count             | ✔️             |                 | ✔️              | ✔️               |
|         | impression&#95;count        |               | ✔️              | ✔️              | ✔️               |
|         | url&#95;profile&#95;clicks      |               | ✔️              | ✔️              | ✔️               |
|         | url&#95;link&#95;clicks         |               | ✔️              | ✔️              | ✔️               |
| user    | follower&#95;count          | ✔️             |                 |                 |                  |
| user    | following&#95;count         | ✔️             |                 |                 |                  |
| media   | view&#95;count              |               | ✔️              |                 |                  |
| media   | playback&#95;0&#95;count        |               | ✔️              |                 |                  |
| space   | participant&#95;count       | ✔️             |                 |                 |                  |

<div id="edit-tweets">
  ## 编辑帖子
</div>

X API v2 端点会提供与已编辑帖子相关的元数据。*编辑帖子* 功能最初于 2022 年 9 月 1 日在 X 员工中启动测试。从该日期起，符合条件的帖子可在 30 分钟内编辑，最多可编辑 5 次。详细了解 [编辑帖子](/zh/x-api/fundamentals/edit-posts)。
使用 X API v2，开发者可以获知：

* 某条帖子在创建时是否支持编辑。有些帖子（例如包含投票的帖子或预定发布的帖子）无法编辑。
* 帖子在 30 分钟内可编辑，且最多可编辑 5 次。对于可编辑的帖子，你可以看到是否仍有可用的编辑时间，以及还可以编辑多少次。
* 你当前查看的是否是该帖子的已编辑版本（在大多数情况下，除非通过帖子 ID 请求特定的历史版本，否则 API 会返回该帖子的最新版本）。
* 该帖子的完整编辑历史。
* 归因于该帖子每个版本的互动数据。

<div id="track-threaded-conversations">
  ## 跟踪会话线程
</div>

一个新的帖子字段可以帮助识别某条帖子所属的会话线程。会话 ID 是发起该会话的那条帖子的 ID。了解更多关于[会话跟踪](/zh/x-api/fundamentals/conversation-id)的信息。

<div id="ready-to-migrate">
  ## 准备好迁移
</div>

要使用 v2 端点，你需要具备以下内容：

* [一个开发者账号](https://developer.x.com/en/portal/petition/essential/basic-info)
* 在一个[项目](resources/fundamentals/projects)中创建的[开发者应用](https://developer.x.com/en/apps)
* 来自该项目中开发者应用的[密钥和令牌](resources/fundamentals/authentication)

请务必使用项目内开发者应用的密钥和令牌。如果你使用的是项目外开发者应用的密钥和令牌，将无法向 v2 端点发起请求。

一旦你拥有开发者账号，就可以在[开发者门户](https://developer.x.com/en/portal/petition/essential/basic-info)中完成上述所有设置。

<div id="authentication">
  ### 身份验证
</div>

在新的 Twitter API 中，你将使用两种不同的身份验证方式：OAuth 1.0a 用户上下文和 OAuth 2.0 Bearer Token，以访问不同的端点。每种方式在向端点发出请求时都有不同的用途：

当代表某个 Twitter 用户发出请求时，需要使用 OAuth 1.0a 用户上下文\
当代表你的开发者应用发出请求时，需要使用 OAuth 2.0 Bearer Token

<div id="tools-and-code">
  ## 工具和代码
</div>

为了帮助你上手并熟悉新的端点和功能，我们提供了几种可以快速推进你工作的方式：

* 我们提供了一个 Twitter [Postman collection](https://app.getpostman.com/run-collection/9956214-784efcda-ed4c-4491-a4c0-a26470a67400)，你可以使用 Postman 客户端向各个端点发起请求并连接到这些端点。这是一种低门槛的方式，用于测试身份验证并试用这些端点。
* 我们还提供了一份库列表，其中包含由 Twitter 支持的库以及第三方库，涵盖 Ruby、Python、Node、Java 等多种语言。若需更多相关信息，请查看我们的[工具和库页面](/zh/x-api/tools-and-libraries/overview)。

<div id="migrating-to-updated-endpoints">
  ## 迁移到更新后的端点
</div>

当你开始探索新的 Twitter v2 端点时，我们提供了一系列详细的迁移指南，帮助你对比每个更新端点与旧版本的功能差异：

* **帖子**
  * [帖子查询](/zh/x-api/posts/lookup/integrate)
  * [管理帖子](/zh/x-api/posts/manage-tweets/migrate/overview)
  * [时间线](/zh/x-api/posts/timelines/migrate/overview)
  * [搜索帖子](/zh/x-api/posts/search/migrate/overview)
  * [帖子数量](/zh/x-api/posts/counts/migrate/overview)
  * [过滤流](/zh/x-api/posts/filtered-stream/migrate/overview)
  * 采样流
  * [转发](/zh/x-api/posts/retweets/migrate/overview)
  * [点赞](/zh/x-api/posts/likes/migrate/likes-lookup-standard-to-twitter-api-v2)
  * [隐藏回复](/zh/x-api/posts/hide-replies/migrate)
* **用户**
  * [用户查询](/zh/x-api/users/lookup/migrate/overview)
  * [关注](/zh/x-api/users/follows/migrate/standard-to-twitter-api-v2)
  * [屏蔽](/zh/x-api/users/blocks/migrate)
  * [静音](/zh/x-api/users/mutes/migrate/manage-mutes-standard-to-twitter-api-v2)
* **列表**
  * [列表查询](/zh/x-api/lists/list-lookup/migrate/overview)
  * [管理列表](/zh/x-api/lists/manage-lists/migrate/overview)
  * [列表帖子查询](/zh/x-api/lists/list-tweets/migrate/overview)
  * [列表成员](/zh/x-api/lists/list-members/migrate/overview)

<div id="migrating-to-the-new-data-format">
  ## 迁移到新的数据格式
</div>

当你从 v1.1 或 Enterprise 迁移到 v2 时，需要注意数据交付的格式已经发生了显著变化。我们新增了字段，调整了字段的顺序，并且在某些情况下还完全移除了部分元素。

为帮助你进一步了解这些变化，我们正在编写一系列指南，帮助你将 v2 之前的数据格式字段映射到新的字段，并说明如何请求这些新字段。

你可以访问本迁移中心的 [数据格式迁移](/zh/x-api/migrate/data-format-migration) 章节了解更多信息，或查看我们针对具体数据格式的指南：

* [原生格式到 X API v2（标准 v1.1）](/zh/x-api/migrate/data-format-migration#migrating-from-standard-v1-1s-data-format-to-v2)
* [Native Enriched 到 X API v2（Enterprise）](/zh/x-api/migrate/data-format-migration#migrating-from-native-enriched-data-format-to-v2)
* [Activity Streams 到 X API v2（Enterprise）](/zh/x-api/migrate/data-format-migration#migrating-from-activity-streams-data-format-to-v2)

<div id="whats-next">
  ## 接下来是什么？
</div>

已经使用该平台一段时间的开发者会注意到，许多新端点与现有的 [标准 v1.1](https://developer.x.com/en/docs/twitter-api/v1) 和 [enterprise](/zh/x-api/enterprise-gnip-2.0/enterprise-gnip) 端点保持了一致。实际上，我们计划在未来用这些端点替代这三个版本。

我们整理了一张表格，帮助你了解 [X API 端点映射关系](/zh/x-api/migrate/x-api-endpoint-map) 与以往版本之间的对应情况。

如果你想了解接下来会推出哪些功能，请访问我们的[产品路线图](https://trello.com/b/myf7rKwV/twitter-developer-platform-roadmap)。

我们还有一个[更新日志](https://developer.x.com/en/updates/changelog)，你可以查看我们已经发布的更新内容。

<div id="what-should-we-build-next">
  ### 我们接下来应该构建什么？
</div>

在我们扩展 X API v2 功能的过程中，我们希望能持续听取你的意见。我们欢迎并鼓励你提供[反馈](https://twitterdevfeedback.uservoice.com/)。

看看已经提交的想法，为那些符合你需求的想法表达支持，并一同分享你的看法！