---
title: 静音查询
sidebarTitle: 静音查询
keywords: ["静音查询快速入门", "静音查询快速开始", "静音查询教程", "静音查询指南", "静音快速入门"]
---

import { Button } from '/snippets/zh/button.mdx';

<div id="getting-started-with-the-mutes-lookup-endpoint">
  ## 开始使用 mutes 查询端点
</div>

本快速入门指南将帮助你使用 Postman 向 mutes 查询端点发送你的第一个请求。

如果你希望查看不同语言的示例代码，请访问我们的 [X API v2 sample code](https://github.com/xdevplatform/Twitter-API-v2-sample-code) GitHub 仓库。

<Note>
  **先决条件**

  要完成本指南，你需要准备一组用于对请求进行认证的 [keys and tokens](/zh/resources/fundamentals/authentication)。你可以按照以下步骤生成这些密钥和令牌：

  * [注册开发者账号](https://developer.x.com/en/apply-for-access) 并通过审批。
  * 在开发者门户中创建一个 [Project](/zh/resources/fundamentals/projects) 和关联的 [developer App](/zh/resources/fundamentals/developer-apps)。
  * 前往你的 App 的 “Keys and tokens” 页面生成所需的凭证。请务必将所有凭证保存在安全的位置。
</Note>

<div id="steps-to-build-a-mutes-lookup-request">
  ### 构建静音查找请求的步骤
</div>

<div id="step-one-start-with-a-tool-or-library">
  #### 第一步：选择一个工具或库
</div>

有多种不同的工具、代码示例和库可以用于向此端点发起请求，但这里我们将使用 Postman 工具来简化这一过程。

要将 X API v2 的 Postman 集合加载到你的环境中，请点击下面的按钮：

<Button href="https://app.getpostman.com/run-collection/9956214-784efcda-ed4c-4491-a4c0-a26470a67400">
  将 X API v2 添加到 Postman
</Button>

在你将 X API v2 集合加载到 Postman 之后，前往“Mutes”文件夹，然后选择“Mutes lookup”。
 

<div id="step-two-authenticate-your-request">
  #### 步骤二：为你的请求进行身份验证
</div>

要正确地向 X API 发起请求，你需要先验证自己是否具备相应的权限。针对该端点，你必须使用 [OAuth 1.0a User Context](/zh/resources/fundamentals/authentication) 或 [OAuth 2.0 Authorization Code with PKCE](resources/fundamentals/authentication#oauth-2-0-authorization-code-flow-with-pkce-2) 对你的请求进行身份验证。

在本示例中，我们将使用 OAuth 1.0a 用户上下文。

你必须将你的密钥和令牌——具体来说是你的 API Key、API Secret Key、OAuth 1.0a 用户 Access Token，以及 OAuth 1.0a 用户 Access Token Secret——添加到 Postman 中。你可以通过在 Postman 右上角选择名为“X API v2”的 environment，然后将你的密钥和令牌添加到“initial value”和“current value”字段中来完成这一操作（点击 environment 下拉菜单旁边的眼睛图标）。

如果你已正确完成上述步骤，这些变量会自动带入请求的 Authorization 选项卡中。
 

<div id="step-three-specify-a-user">
  #### 步骤三：指定一个用户
</div>

使用此端点时，你必须指定你的用户 ID，或某个已通过身份验证用户的 ID，才能查看你或该已通过身份验证的用户已将哪些账户设为静音。

在 Postman 中，转到 &quot;Params&quot; 选项卡，在 “Path Variables”（本节底部）下，将已通过身份验证的用户 ID 输入到 `id` 的 &quot;Value&quot; 列中，并确保 ID 前后没有任何空格。

在 “Path Variables” 部分上方，你会注意到可以添加可选的 “Query Params”。在本示例中，我们将选中参数 max&#95;results，并将其值设置为 5。

|     |     |     |
| :--- | :--- | :--- |
| **Key** | **Value** | **Parameter Type** |
| `id` | （你的用户 ID） | Path |
| max&#95;results | 5   | Query |

<div id="step-four-identify-and-specify-which-fields-you-would-like-to-retrieve">
  #### 第四步：确定并指定你希望获取的字段
</div>

如果你在完成第三步后点击 &quot;Send&quot; 按钮，你将在响应中收到默认的 [user 对象](/zh/x-api/fundamentals/data-dictionary#user) 字段：id、name 和 username。

如果你希望在 id、name 和 username 之外再接收更多字段，则必须在请求中通过 [fields](/zh/x-api/fundamentals/fields) 和/或 [expansions](/zh/x-api/fundamentals/expansions) 参数来指定这些字段。

在本练习中，我们将从不同对象中请求三组额外字段：

1. 主 user 对象中的额外 user.created&#95;at 字段。
2. 与返回用户关联的置顶帖子对象的默认字段：id 和 text。
3. 与这些帖子对象关联的额外 tweet.created&#95;at 字段。

在 Postman 中，切换到 &quot;Params&quot; 选项卡，并在 &quot;Query Params&quot; 表中添加以下 key:value 键值对：

|     |     |     |
| :--- | :--- | :--- |
| **Key** | **Value** | **Returned fields** |
| user.fields | created&#95;at | user.created&#95;at |
| expansions | pinned&#95;tweet&#95;id | tweet.id, tweet.text |
| tweet.fields | created&#95;at | includes.tweets.created&#95;at |

现在，你应该会在 &quot;Send&quot; 按钮旁边看到一个类似的 URL，只是将示例中的用户 ID 替换为了你自己的用户 ID：

`https://api.x.com/2/users/1324848235714736129/muting?user.fields=created_at&expansions=pinned_tweet_id&tweet.fields=created_at&max_results=5`

<div id="step-five-make-your-request-and-review-your-response">
  #### 步骤五：发送请求并查看响应
</div>

在完成所有设置后，点击 &quot;Send&quot; 按钮，你将收到一个与下面示例类似的响应：

```
{
  "data": [
    {
      "username": "TwitterDev",
      "created_at": "2013-12-14T04:35:55.000Z",
      "id": "2244994945",
      "name": "Twitter Dev",
      "pinned_tweet_id": "1430984356139470849"
    }
  ],
  "includes": {
    "tweets": [
      {
        "created_at": "2021-08-26T20:03:51.000Z",
        "id": "1430984356139470849",
        "text": "Help us build a better Twitter Developer Platform!\n \nTake the annual developer survey &gt;&gt;&gt; https://t.co/9yTbEKlJHH https://t.co/fYIwKPzqua"
      }
    ]
  },
  "meta": {
    "result_count": 1
  }
}
```

<div id="step-six-paginate-through-your-results">
  #### 第六步：对结果进行分页
</div>

你可能会注意到，在响应的底部有一个 meta 对象。如果你收到了一个 next&#95;token，这就表示我们还可以获取另一页结果。要获取下一页结果，你需要取出 next&#95;token 字段的值，并将其作为一个额外的 pagination&#95;token 查询参数的值添加到请求中。
 

|     |     |
| :--- | :--- |
| **键** | **值** |
| pagination&#95;token | 1710819323648428707 |

在添加了这个额外参数后发送请求时，由于我们在第三步中将 max&#95;results 指定为 5，接下来的五条结果会包含在下一次返回的响应负载中。你可以持续重复这个过程，直到所有结果都被返回，但你也可以使用 max&#95;results 参数在每次请求中最多请求 1000 个用户，这样就不必进行那么多次分页。