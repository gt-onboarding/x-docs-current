---
title: 已认证用户查找
sidebarTitle: 已认证用户查找
keywords: ["已认证用户查找快速入门", "获取已认证用户的快速入门", "me 端点快速入门", "已认证用户教程"]
---

import { Button } from '/snippets/zh/button.mdx';

<div id="getting-started-with-the-authenticated-user-lookup-endpoint">
  ## 开始使用已认证用户查询端点
</div>

本快速入门指南将帮助你使用 Postman 向已认证用户查询端点发起第一次请求。

如果你想查看不同语言的示例代码，请访问我们的 [X API v2 sample code](https://github.com/xdevplatform/Twitter-API-v2-sample-code) GitHub 仓库。

<Note>
  ### 前提条件

  要完成本指南，你需要一组用于对请求进行认证的[密钥和令牌](/zh/resources/fundamentals/authentication)。你可以按照以下步骤生成这些密钥和令牌：

  * [注册开发者账号](https://developer.x.com/en/apply-for-access)并通过审核。
  * 在开发者门户中创建一个[项目](/zh/resources/fundamentals/projects)和一个关联的[开发者应用](/zh/resources/fundamentals/developer-apps)。
  * 进入你的 App 的“Keys and tokens”页面以生成所需的凭证。请务必将所有凭证保存在安全的位置。
</Note>

<div id="steps-to-build-an-authenticated-user-lookup-request">
  ### 构建认证用户查询请求的步骤
</div>

<div id="step-one-start-with-a-tool-or-library">
  #### 步骤一：从工具或库开始
</div>

有多种工具、代码示例和库可用于向该端点发送请求，但在这里我们将使用 Postman 来简化这一过程。

要将 X API v2 Postman 集合加载到你的环境中，请点击以下按钮：

<Button href="https://app.getpostman.com/run-collection/9956214-784efcda-ed4c-4491-a4c0-a26470a67400">
  将 X API v2 添加到 Postman
</Button>

在你将 X API v2 集合加载到 Postman 之后，在 Postman 中导航到 “Authenticated User Lookup” 文件夹，并选择 “Lookup an Authenticated User”。

<div id="step-two-authenticate-your-request">
  #### 步骤二：对请求进行身份验证
</div>

要正确地向 X API 发起请求，你需要验证自己是否拥有对应的访问权限。对于本端点，你必须使用 [OAuth 1.0a User Context](/zh/resources/fundamentals/authentication) 或 [OAuth 2.0 Authorization Code with PKCE](resources/fundamentals/authentication#oauth-2-0-authorization-code-flow-with-pkce-2) 对请求进行身份验证。

在本示例中，我们将使用 OAuth 1.0a User Context。

你必须将你的密钥和令牌——具体来说是 API Key、API Secret Key、OAuth 1.0a 用户 Access Token 和 OAuth 1.0a 用户 Access Token Secret——添加到 Postman 中。你可以通过在 Postman 右上角选择名为 “X API v2” 的环境，然后将你的密钥和令牌添加到 &quot;initial value&quot; 和 &quot;current value&quot; 字段中（点击环境下拉菜单旁边的眼睛图标）来完成此操作。

如果配置正确，这些变量会自动填充到该请求的 Authorization 选项卡中。
 

<div id="step-three-determine-which-user-fields-you-want-to-retrieve">
  ##### 第三步：确定你想要获取哪些用户字段
</div>

如果你在完成第三步后点击 “Send” 按钮，你将在响应中收到默认的 [user object](/zh/x-api/fundamentals/data-dictionary#user) 字段：id、name 和 username。

如果你想在 id、name 和 username 之外获取更多字段，你需要在请求中使用 [field](/zh/x-api/fundamentals/fields) 和/或 [expansion](/zh/x-api/fundamentals/expansions) 参数来指定这些字段。

在本练习中，我们将从不同对象中请求三组额外字段：

1. 主用户对象中额外的 user.created&#95;at 字段。

2. 返回用户所关联的置顶帖子对象的默认字段：id 和 text。

3. 关联帖子对象中额外的 tweet.created&#95;at 字段。

在 Postman 中，转到 “Params” 选项卡，并在 “Query Params” 表中添加以下键值对：

|              |                               |                                                                   |
| :----------- | :---------------------------- | :---------------------------------------------------------------- |
| **Key**      | **Value**                     | **返回的字段**                                                         |
| user.fields  | created&#95;at                | user.created&#95;at                                               |
| expansions   | pinned&#95;tweet&#95;id       | includes.tweets.id,  <br />includes.tweets.text                   |
| tweet.fields | created&#95;at, author&#95;id | includes.tweets.created&#95;at, includes&#95;tweets.author&#95;id |

现在你应该会在 “Send” 按钮旁边看到一个类似的 URL：

```
      https://api.x.com/2/users/me?user.fields=created_at&expansions=pinned_tweet_id&tweet.fields=author_id,created_at
```
