---
title: 迁移指南
sidebarTitle: 迁移指南
keywords: ["屏蔽迁移", "屏蔽功能迁移", "v1.1 到 v2 屏蔽", "屏蔽迁移指南", "从 v1.1 迁移到 v2 的屏蔽"]
---

import { Button } from '/snippets/zh/button.mdx';

<div id="blocks-lookup-standard-v11-compared-to-x-api-v2">
  ### 封锁查询：标准 v1.1 与 X API v2 的比较
</div>

如果你一直在使用标准 v1.1 的 [GET blocks/ids](https://developer.x.com/en/docs/twitter-api/v1/accounts-and-users/mute-block-report-users/api-reference/get-blocks-ids) 和 [GET blocks/list](https://developer.x.com/en/docs/twitter-api/v1/accounts-and-users/mute-block-report-users/api-reference/get-blocks-list) 端点，那么本指南的目标是帮助你了解标准 v1.1 与 X API v2 封锁查询端点之间的相同点和不同点。

* **相似点**
  * 身份验证
* **差异**
  * 端点 URL

  * 每次请求的用户数量限制

  * 应用和项目的要求

  * 响应数据格式

  * 请求参数

<div id="similarities">
  #### 相似之处
</div>

**身份验证**

标准 v1.1 和 X API v2 的 blocks lookup 端点都使用 [OAuth 1.0a 用户上下文](/zh/resources/fundamentals/authentication#oauth-1-0a-2)。因此，如果你之前使用的是某个标准 v1.1 的 blocks lookup 端点，那么在迁移到 X API v2 对应版本时，可以继续使用相同的身份验证方式。 

<div id="differences">
  #### 不同之处
</div>

**Endpoint URL**

* 标准 v1.1 endpoint：
  * GET https://api.x.com/1.1/blocks/ids.json
    （由指定用户屏蔽的用户 ID 列表）
  * GET https://api.x.com/1.1/blocks/lists.json
    （由指定用户屏蔽的用户列表）
* X API v2 endpoint：
  * GET https://api.x.com/2/users/:id/blocking
    （由指定用户 ID 屏蔽的用户列表）
     

**每个请求的用户数量限制**

标准 v1.1 endpoint 允许你在每个请求中返回最多 5000 个用户。新的 v2 endpoint 允许你在每个请求中返回最多 1000 个用户。要返回完整的 1000 个用户，你需要在查询参数中传入 max&#95;results=1000；然后，你可以将响应负载中返回的 next&#95;token 作为下一次请求中的 pagination&#95;token 查询参数传入。
 

**应用和项目要求**

在对请求进行认证时，X API v2 endpoint 要求你使用与某个[开发者应用](/zh/resources/fundamentals/developer-apps)关联的[项目](/zh/resources/fundamentals/developer-apps)中的凭证。所有 X API v1.1 endpoint 都可以使用来自独立应用或与项目关联的应用的凭证。

**响应数据格式**

标准 v1.1 与 X API v2 版本的 endpoint 之间最大差异之一，是你如何选择在负载中返回哪些字段。

对于标准 endpoint，你默认会收到许多响应字段，然后可以选择使用参数来指定应在负载中返回哪些字段或字段集。

X API v2 版本默认仅返回用户的 id、name 和 username 字段。若要请求任何其他字段或对象，你需要使用 [fields](/zh/x-api/fundamentals/fields) 和 [expansions](/zh/x-api/fundamentals/expansions) 参数。从此 endpoint 请求的任何用户字段都会返回到主用户对象中。任何通过扩展得到的帖子对象及其字段会返回在响应中的 includes 对象中。然后，你可以通过匹配用户对象和扩展帖子对象中出现的 ID，将任何扩展对象匹配回用户对象。 

我们鼓励你在各自的指南中进一步了解这些新参数，或阅读我们的[如何使用 fields 和 expansions](/zh/x-api/fundamentals/data-dictionary#how-to-use-fields-and-expansions) 指南。 

我们还整理了一份[数据格式迁移指南](/zh/x-api/migrate/data-format-migration#migrating-from-standard-v1-1s-data-format-to-v2)，可帮助你将标准 v1.1 字段映射到新的 v2 字段。该指南还会告知你在 v2 请求中需要传入哪些特定的 expansion 和 field 参数，以返回特定字段。 
 

除了你请求某些字段的方式发生变化之外，X API v2 还为 API 返回的对象引入了新的 JSON 设计，包括[帖子](/zh/x-api/fundamentals/data-dictionary#tweet)和[用户](/zh/x-api/fundamentals/data-dictionary#user)对象。

* 在 JSON 根级别，标准 endpoint 将帖子对象返回在一个名为 statuses 的数组中，而 X API v2 则返回在一个 data 数组中。 
* X API v2 JSON 不再引用被转发和被引用的 “statuses”，而是引用被转发和被引用的帖子。许多旧版和已弃用字段，例如 contributors 和 user.translator&#95;type 正在被移除。 
* X API v2 不再同时使用 favorites（帖子对象中）和 favourites（用户对象中），而是统一使用术语 like。 
* X 采用这样的约定：没有值的 JSON 字段（例如 null）不会写入负载。帖子和用户属性只有在其值非 null 时才会被包含。 
   

我们还为[帖子对象](/zh/x-api/fundamentals/data-dictionary#tweet)引入了一组新的字段，包括以下内容：

* 一个 [conversation&#95;id](/zh/x-api/fundamentals/conversation-id) 字段
* 两个新的 [annotations](/zh/x-api/fundamentals/post-annotations) 字段，包括 context 和 entities
* 若干新的 [metrics](/zh/x-api/fundamentals/metrics) 字段 
* 一个新的 reply&#95;setting 字段，用于显示谁可以回复指定的帖子

**请求参数**

以下标准 v1.1 请求参数支持两个查询参数（user&#95;id 或 screen&#95;name）。X API v2 仅接受数值型用户 ID，并且必须作为端点路径的一部分传递。