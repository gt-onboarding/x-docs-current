---
title: "帖子标注"
keywords: ["标注", "帖子标注", "实体标注", "上下文标注", "NER", "命名实体识别", "主题", "实体", "上下文信息"]
---

<div id="overview">
  ## 概览
</div>

在所有返回 Post 对象的 v2 端点中，我们都为 Post 对象添加了标注。Post 标注提供了一种方式，用来理解关于帖子本身的上下文信息。虽然我们会处理 100% 的帖子，但由于帖子文本的具体内容，只有一部分帖子会被添加标注。

1. **实体标注（NER）：** 实体包括人物、地点、产品和组织，并在 `entity` 负载部分中返回。它们是根据帖子文本中明确提及的内容（命名实体识别）通过程序自动标注的。

2. **上下文标注：** 通过分析某个帖子的文本得出，上下文标注包含一个域与实体的配对，用于帮助发现那些以前可能难以被检索到的相关主题帖子。我们目前使用 80 多个域对帖子进行分类。可用的上下文标注实体的 CSV 文件可以在我们的 [GitHub 仓库](https://github.com/xdevplatform/twitter-context-annotations) 中获取。

<div id="post-annotation-types">
  ## 帖子标注类型
</div>

<div id="entities">
  ### 实体
</div>

实体标注是在 `entities` 字段中以程序方式定义的实体，并在载荷中体现为标注。每个标注都有一个置信度分数，并指明在帖子文本中的哪个位置识别出了这些实体（通过 `start` 和 `end` 字段）。

实体标注类型包括：

* **Person** - 示例：Barack Obama、Daniel、George W. Bush
* **Place** - 示例：Detroit、Cali、San Francisco
* **Product** - 示例：Mountain Dew、Mozilla Firefox
* **Organization** - 示例：Chicago White Sox、IBM
* **Other** - 示例：Diabetes、Super Bowl 50

<div id="context">
  ### 上下文
</div>

*最近更新：2022 年 6 月*

上下文标注通过响应负载中的 `context_annotations` 字段提供。它们基于对帖子文本中的关键词、话题标签、账号等的语义分析进行推断，并生成领域和/或实体标签。目前我们使用了 80 多个领域，如下表所示。

| Domain Categories                           | Domain Codes                            |
| :------------------------------------------- | :--------------------------------------- |
| 3: 电视节目                                 | 46: 品牌类别                             |
| 4: 电视分集                                 | 47: 品牌                                |
| 6: 体育赛事                                 | 48: 产品                                |
| 10: 人物                                    | 54: 音乐人                              |
| 11: 体育运动                                | 55: 音乐流派                            |
| 12: 体育队                                  | 56: 演员                                |
| 13: 地点                                    | 58: 娱乐人物                            |
| 22: 电视类型                                | 60: 运动员                              |
| 23: 电视频道                                | 65: 兴趣和爱好垂直领域                  |
| 26: 体育联盟                                | 66: 兴趣和爱好类别                      |
| 27: 美式橄榄球比赛                          | 67: 兴趣和爱好                          |
| 28: NFL 橄榄球比赛                          | 68: 冰球比赛                            |
| 29: 活动                                    | 71: 电子游戏                            |
| 31: 社群                                    | 78: 电子游戏发行商                      |
| 35: 政治人物                                | 79: 电子游戏硬件                        |
| 38: 选举/竞选活动                           | 83: 板球比赛                            |
| 39: 篮球比赛                                | 84: 图书                                |
| 40: 体育系列赛事                            | 85: 图书类型                            |
| 43: 足球比赛                                | 86: 电影                                |
| 44: 棒球比赛                                | 87: 电影类型                            |
| 45: 品牌垂直领域                            | 88: 政治机构                            |
| 46: 品牌类别                                | 89: 音乐专辑                            |
| 47: 品牌                                    | 90: 电台                                |
| 48: 产品                                    | 91: 播客                                |
| 54: 音乐人                                  | 92: 体育人物                            |
| 55: 音乐流派                                | 93: 教练                                |
| 56: 演员                                    | 94: 记者                                |
| 58: 娱乐人物                                | 95: 电视台 [实体服务]                  |
| 60: 运动员                                  | 109: 经常出现的趋势                     |
| 65: 兴趣和爱好垂直领域                      | 110: 高传播性账号                       |
| 66: 兴趣和爱好类别                          | 114: 音乐会                              |
| 67: 兴趣和爱好                              | 115: 电子游戏大会                        |
| 68: 冰球比赛                                | 116: 电子游戏锦标赛                      |
| 71: 电子游戏                                | 117: 电影节                              |
| 78: 电子游戏发行商                          | 118: 颁奖典礼                            |
| 79: 电子游戏硬件                            | 119: 节日                                |
| 83: 板球比赛                                | 120: 数字内容创作者                      |
| 84: 图书                                    | 122: 虚构角色                            |
| 85: 图书类型                                | 130: 多媒体系列作品                      |
| 86: 电影                                    | 131: 统一 Twitter 分类法                 |
| 87: 电影类型                                | 136: 电子游戏领域人物                    |
| 88: 政治机构                                | 137: 电子竞技战队                        |
| 89: 音乐专辑                                | 138: 电子竞技选手                        |
| 90: 电台                                    | 139: 粉丝社区                            |
| 91: 播客                                    | 149: 电子竞技联盟                        |
| 92: 体育人物                                | 152: 食品                                |
| 93: 教练                                    | 155: 天气                                |
| 94: 记者                                    | 156: 城市                                |
| 95: 电视台 [实体服务]                       | 157: 学院和大学                          |
| 109: 经常出现的趋势                         | 158: 兴趣点                              |
| 110: 高传播性账号                           | 159: 州                                  |
| 114: 音乐会                                  | 160: 国家                                |
| 115: 电子游戏大会                            | 162: 运动与健身                          |
| 116: 电子游戏锦标赛                          | 163: 旅行                                |
| 117: 电影节                                  | 164: 学科领域                            |
| 118: 颁奖典礼                                | 165: 技术                                |
| 119: 节日                                    | 166: 股票                                |
| 120: 数字内容创作者                          | 167: 动物                                |
| 122: 虚构角色                                | 171: 本地新闻                            |
| 130: 多媒体系列作品                          | 172: 全球电视节目                        |
| 131: 统一 Twitter 分类法                     | 173: Google 产品分类法                   |
| 136: 电子游戏领域人物                        | 174: 数字资产与加密货币                  |
| 137: 电子竞技战队                            | 175: 紧急事件                            |
| 138: 电子竞技选手                            |                                         |

*注意：* 域 131（Unified Twitter Taxonomy）指的是 X 面向用户的兴趣分类体系（User Facing Interest Taxonomy）。该分类体系为平台上的功能（例如 [Topics](https://blog.x.com/en_us/topics/product/2020/topics-behind-the-tweets)）提供支持。

<div id="requesting-annotations">
  ## 请求注解
</div>

<div id="sample-request">
  ### 示例请求
</div>

```bash
curl --location --request GET 'https://api.x.com/2/tweets/1212092628029698048?tweet.fields=context_annotations,entities' --header 'Authorization: Bearer $BEARER_TOKEN'
```

<div id="sample-response">
  ### 示例响应
</div>

```
{
    "data": {
        "context_annotations": [
            {
                "domain": {
                    "id": "119",
                    "name": "Holiday",
                    "description": "Holidays like Christmas or Halloween"
                },
                "entity": {
                    "id": "1186637514896920576",
                    "name": "New Years Eve"
                }
            },
            {
                "domain": {
                    "id": "119",
                    "name": "Holiday",
                    "description": "Holidays like Christmas or Halloween"
                },
                "entity": {
                    "id": "1206982436287963136",
                    "name": "Happy New Year: It’s finally 2020 everywhere!",
                    "description": "Catch fireworks and other celebrations as people across the globe enter the new year.\nPhoto via @GettyImages"
                }
            },
            {
                "domain": {
                    "id": "45",
                    "name": "Brand Vertical",
                    "description": "Top level entities that describe a Brand's industry"
                }
            },
            {
                "domain": {
                    "id": "46",
                    "name": "Brand Category",
                    "description": "Categories within Brand Verticals that narrow down the scope of Brands"
                },
                "entity": {
                    "id": "781974596752842752",
                    "name": "Services"
                }
            },
            {
                "domain": {
                    "id": "47",
                    "name": "Brand",
                    "description": "Brands and Companies"
                },
                "entity": {
                    "id": "10045225402",
                    "name": "Twitter"
                }
            }
        ],
        "entities": {
            "annotations": [
                {
                    "start": 144,
                    "end": 150,
                    "probability": 0.626,
                    "type": "Product",
                    "normalized_text": "Twitter"
                }
            ],
            "urls": [
                {
                    "start": 222,
                    "end": 245,
                    "url": "https://t.co/yvxdK6aOo2",
                    "expanded_url": "https://x.com/LovesNandos/status/1211797914437259264/photo/1",
                    "display_url": "pic.x.com/yvxdK6aOo2"
                }
            ]
        },
        "id": "1212092628029698048",
        "text": "我们相信我们API的最佳未来版本将来自与您一起构建。祝所有在Twitter平台上构建的人又一个美好的年份。我们迫不及待地想在新的一年里继续与您合作。https://t.co/yvxdK6aOo2"
    }
}
```

<div id="sample-app">
  ### 示例应用
</div>

查看 [Glitch 上的 Post Entity Extractor](https://tweet-entity-extractor.glitch.me/)，轻松发现帖子中的上下文标注，并了解该功能的工作原理。

<div id="frequently-asked-questions">
  ## 常见问题
</div>

<div id="context-annotations">
  ### 上下文注释
</div>

以下问题专门针对帖子注释中的上下文注释元素。更多详情请参阅 [概览](/zh/x-api/fundamentals/post-annotations) 页面。

<AccordionGroup>
  <Accordion title="Twitter 的上下文标注是如何工作的？">
    Twitter 会从语义角度对帖子进行分类，这意味着我们会整理与给定主题相关的关键词、话题标签（hashtags）和 @ 账号列表。如果某条帖子包含了我们指定的文本，就会被相应地加上标签。这不同于机器学习方法，后者会专门训练一个模型来对文本（在本例中为帖子）进行分类，并在输出/分类结果的同时生成一个概率得分。
  </Accordion>

  <Accordion title="我怎么知道你们提供的数据是完整且可靠的？">
    Twitter 的注释由领域专家通过研究和质量评估（QA）流程精心整理，这些流程在过去数年间不断打磨完善。该过程借助自定义工具，在我们仍能保持出色精确率和召回率的前提下，将数据跟踪尽可能扩展到最大规模。此外，我们的数据还由内部团队定期审计，在过去数个季度中精确率得分约为 80%。
  </Accordion>

  <Accordion title="你们如何确保准确性？">
    团队成员每天都会对我们的实体进行质检，以确保高精确率和召回率。此外，我们的工作还会由内部团队按季度进行审计，该团队会人工审查覆盖我们所有领域的 10,000 条帖子，以计算精确率评分。
  </Accordion>

  <Accordion title="你们如何决定要跟踪什么？">
    对于某些领域（例如体育和电视），我们依靠自动化数据摄取来构建我们的图谱。在新闻领域，我们跟踪由 Twitter Moments 团队制作的故事相关数据。除此之外，团队会使用多种研究方法来识别需要跟踪的主题，这些主题通常会在平台上引发大量讨论。
  </Accordion>

  <Accordion title="帖子注释提供哪些历史数据支持？">
    数据跟踪会从某个实体被发布的那一刻开始；因此，对于在开始跟踪该实体之前发布的帖子，我们不会添加注解。比如说，如果一个新兴品牌/公司被加入到分类体系中，我们不会为在添加该注解之前与该品牌相关的帖子补充历史注解。
  </Accordion>

  <Accordion title="Twitter 是否也能够为非英文的帖子添加注释？如果可以，支持哪些语言？被注释帖子的覆盖率是否会发生变化？">
    是的。语言覆盖范围可能会因领域和市场而异。英语和日语在大多数主要实体中都有所覆盖。下面是当前所覆盖语言及其主要市场的列表：

    1. 英语（美国、英国）
    2. 日语（日本）
    3. 葡萄牙语（巴西）
    4. 西班牙语（阿根廷、墨西哥、西班牙）
    5. 印地语（印度）
    6. 阿拉伯语（沙特阿拉伯）
    7. 土耳其语（土耳其）
    8. 印度尼西亚语（印度尼西亚）
    9. 俄语（俄罗斯）
    10. 法语（法国）

    即将推出（预计 2021 年下半年）：

    1. 德语（德国）
    2. 泰米尔语（印度）

    下面的表格展示了按带注释帖子覆盖率从高到低排序的前 15 个国家：

    | 排名 | 国家代码 | 国家   | 带注释帖子占比 |
    | :- | :--- | :--- | :------ |
    | 1  | IN   | 印度   | 41%     |
    | 2  | VN   | 越南   | 36%     |
    | 3  | GB   | 英国   | 36%     |
    | 4  | EC   | 厄瓜多尔 | 35%     |
    | 5  | PE   | 秘鲁   | 33%     |
    | 6  | US   | 美国   | 32%     |
    | 7  | CA   | 加拿大  | 32%     |
    | 8  | AU   | 澳大利亚 | 31%     |
    | 9  | JP   | 日本   | 31%     |
    | 10 | PH   | 菲律宾  | 30%     |
    | 11 | SG   | 新加坡  | 30%     |
    | 12 | MY   | 马来西亚 | 30%     |
    | 13 | MX   | 墨西哥  | 30%     |
    | 14 | GB   | 英国   | 29%     |
    | 15 | NG   | 尼日利亚 | 29%     |
  </Accordion>

  <Accordion title="Twitter 在为帖子添加注解时所依据的底层“语义”是什么？">
    帖子注释由以下语义元素组成，用于对帖子进行标注：

    * 账号——我们可以为来自特定账号的帖子，或提及该账号的帖子添加注释
    * 话题标签（Hashtags）
    * 关键词/短语

    对于熟悉 PowerTrack 等过滤流式 API 的客户而言，注释所使用的语义在原理上与用于过滤帖子流的布尔规则类似。如果某个帖子符合底层语义条件，就会被相应地打上标签。
  </Accordion>

  <Accordion title="为什么有些帖子包含关联的实体信息，而有些则没有？">
    我们的目标是为尽可能多的帖子添加注释，但有多种原因可能导致某些帖子未被注释：

    * 有些帖子在语义信息上不够丰富，无法被标注，因此也无法根据我们当前的注释规则进行标记
    * 有些帖子本身不够具有话题性
    * 帖子的内容围绕一个非常短暂、转瞬即逝的话题，而该话题不在我们的图谱中
    * 我们尚未覆盖该语言或市场
    * 我们已覆盖该语言或市场，但缺少与我们已追踪主题相关的某个话题，或与之关联的特定术语、账号或话题标签
  </Accordion>

  <Accordion title="在存在多个域（例如 [3,30]）的情况下，实体 ID 是否保持不变？">
    一个实体可以属于多个域。域 ID 会改变，但实体 ID 保持不变。Donald Glover 既是一个人（域 10）、一名演员（域 56），也是一位音乐家（域 54），但他的实体 ID 仍然是 875072662527029248。
  </Accordion>

  <Accordion title="你们是否有既定的节目/电影追踪时间线？换句话说，一部节目/电影在上线前后会被追踪多长时间？">
    追踪会在上映前一个月开始。对于像漫威电影这样的热门大片，一旦它们开始预热即将上映的消息，我们就可以开始对其进行追踪。
  </Accordion>

  <Accordion title="电影是否也提供类似于电视剧的 locale 过滤器？">
    不会的。
  </Accordion>
</AccordionGroup>