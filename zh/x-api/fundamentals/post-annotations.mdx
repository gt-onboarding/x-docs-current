---
title: "帖子标注"
keywords: ["标注", "帖子标注", "实体标注", "上下文标注", "NER", "命名实体识别", "主题", "实体", "上下文信息"]
---

<div id="overview">
  ## 概览
</div>

所有会返回 Post 对象的 v2 端点，其返回的 Post 对象中都已添加注释。Post 注释提供了一种理解该 Post 本身上下文信息的方式。虽然我们会处理 100% 的帖子，但由于帖子文本内容的差异，只有一部分帖子会带有注释。

1. **实体注释（NER）：** 实体包括人物、地点、产品和组织，并在 `entity` 载荷部分中返回。它们会根据 Post 文本中明确提及的内容（命名实体识别）通过程序自动分配。

2. **上下文注释：** 通过分析 Post 文本得出，上下文注释包含一个领域与实体的配对，以帮助发现此前可能难以被发现的相关话题帖子。我们目前使用 80 多个领域对帖子进行分类。可用的上下文注释实体的 CSV 文件可在我们的 [GitHub 仓库](https://github.com/xdevplatform/twitter-context-annotations) 中获取。

<div id="post-annotation-types">
  ## 帖子标注类型
</div>

<div id="entities">
  ### 实体
</div>

实体标注是在 `entities` 字段中以编程方式定义的实体，并在响应负载中体现为标注。每个标注都有一个置信度分数，并指示在帖子文本中的哪些位置识别出了这些实体（使用 `start` 和 `end` 字段）。

实体标注类型包括：

* **人物（Person）** - 示例：Barack Obama、Daniel、George W. Bush
* **地点（Place）** - 示例：Detroit、Cali、San Francisco
* **产品（Product）** - 示例：Mountain Dew、Mozilla Firefox
* **组织（Organization）** - 示例：Chicago White Sox、IBM
* **其他（Other）** - 示例：Diabetes、Super Bowl 50

<div id="context">
  ### 背景
</div>

*最后更新日期：2022 年 6 月*

上下文标注通过负载中的 `context_annotations` 字段提供。它们是基于对帖子文本中关键词、话题标签、账号等的语义分析推断得到的，并生成领域和/或实体标签。目前我们使用了 80 多个领域，如下表所示。

| 领域类别                                   | 领域代码                                |
| :------------------------------------------- | :--------------------------------------- |
| 3: 电视节目                                | 46: 品牌类别                            |
| 4: 电视剧集                                | 47: 品牌                                |
| 6: 体育赛事                                | 48: 产品                                |
| 10: 人物                                   | 54: 音乐人                              |
| 11: 运动项目                               | 55: 音乐流派                            |
| 12: 体育队伍                               | 56: 演员                                |
| 13: 地点                                   | 58: 娱乐名人                            |
| 22: 电视类型                               | 60: 运动员                              |
| 23: 电视频道                               | 65: 兴趣与爱好垂直领域                  |
| 26: 体育联赛                               | 66: 兴趣与爱好类别                      |
| 27: 美式橄榄球比赛                         | 67: 兴趣与爱好                          |
| 28: NFL 橄榄球比赛                         | 68: 冰球比赛                            |
| 29: 事件                                   | 71: 电子游戏                            |
| 31: 社区                                   | 78: 电子游戏发行商                      |
| 35: 政治人物                               | 79: 电子游戏硬件                        |
| 38: 政治竞选                               | 83: 板球比赛                            |
| 39: 篮球比赛                               | 84: 图书                                |
| 40: 体育系列赛                             | 85: 图书体裁                            |
| 43: 足球比赛                               | 86: 电影                                |
| 44: 棒球比赛                               | 87: 电影类型                            |
| 45: 品牌垂直领域                           | 88: 政治机构                            |
| 46: 品牌类别                               | 89: 音乐专辑                            |
| 47: 品牌                                   | 90: 电台                                |
| 48: 产品                                   | 91: 播客                                |
| 54: 音乐人                                 | 92: 体育人物                            |
| 55: 音乐流派                               | 93: 教练                                |
| 56: 演员                                   | 94: 记者                                |
| 58: 娱乐名人                               | 95: 电视频道 [实体服务]                |
| 60: 运动员                                 | 109: 周期性趋势                         |
| 65: 兴趣与爱好垂直领域                     | 110: 病毒式传播账号                     |
| 66: 兴趣与爱好类别                         | 114: 音乐会                             |
| 67: 兴趣与爱好                             | 115: 电子游戏大会                       |
| 68: 冰球比赛                               | 116: 电子游戏锦标赛                     |
| 71: 电子游戏                               | 117: 电影节                             |
| 78: 电子游戏发行商                         | 118: 颁奖礼                             |
| 79: 电子游戏硬件                           | 119: 假日                               |
| 83: 板球比赛                               | 120: 数字创作者                         |
| 84: 图书                                   | 122: 虚构角色                           |
| 85: 图书体裁                               | 130: 多媒体特许经营系列                 |
| 86: 电影                                   | 131: 统一的 Twitter 分类体系           |
| 87: 电影类型                               | 136: 电子游戏人物                       |
| 88: 政治机构                               | 137: 电子竞技战队                       |
| 89: 音乐专辑                               | 138: 电子竞技选手                       |
| 90: 电台                                   | 139: 粉丝社区                           |
| 91: 播客                                   | 149: 电子竞技联赛                       |
| 92: 体育人物                               | 152: 食物                               |
| 93: 教练                                   | 155: 天气                               |
| 94: 记者                                   | 156: 城市                               |
| 95: 电视频道 [实体服务]                    | 157: 学院与大学                         |
| 109: 周期性趋势                            | 158: 兴趣点                             |
| 110: 病毒式传播账号                        | 159: 州                                 |
| 114: 音乐会                                | 160: 国家                               |
| 115: 电子游戏大会                          | 162: 锻炼与健身                         |
| 116: 电子游戏锦标赛                        | 163: 旅行                               |
| 117: 电影节                                | 164: 研究领域                           |
| 118: 颁奖礼                                | 165: 技术                               |
| 119: 假日                                  | 166: 股票                               |
| 120: 数字创作者                            | 167: 动物                               |
| 122: 虚构角色                              | 171: 本地新闻                           |
| 130: 多媒体特许经营系列                    | 172: 全球电视节目                       |
| 131: 统一的 Twitter 分类体系              | 173: Google 产品分类体系               |
| 136: 电子游戏人物                          | 174: 数字资产与加密货币                 |
| 137: 电子竞技战队                          | 175: 紧急事件                           |
| 138: 电子竞技选手                          |                                         |

*注意：* 域 131（统一 Twitter 分类体系）指的是 X 面向用户的兴趣分类体系。此分类体系为平台上的功能（例如 [话题](https://blog.x.com/en_us/topics/product/2020/topics-behind-the-tweets)）提供支持。

<div id="requesting-annotations">
  ## 请求注解
</div>

<div id="sample-request">
  ### 示例请求
</div>

```bash
curl --location --request GET 'https://api.x.com/2/tweets/1212092628029698048?tweet.fields=context_annotations,entities' --header 'Authorization: Bearer $BEARER_TOKEN'
```

<div id="sample-response">
  ### 示例响应
</div>

```
{
    "data": {
        "context_annotations": [
            {
                "domain": {
                    "id": "119",
                    "name": "Holiday",
                    "description": "Holidays like Christmas or Halloween"
                },
                "entity": {
                    "id": "1186637514896920576",
                    "name": "New Years Eve"
                }
            },
            {
                "domain": {
                    "id": "119",
                    "name": "Holiday",
                    "description": "Holidays like Christmas or Halloween"
                },
                "entity": {
                    "id": "1206982436287963136",
                    "name": "Happy New Year: It’s finally 2020 everywhere!",
                    "description": "Catch fireworks and other celebrations as people across the globe enter the new year.\nPhoto via @GettyImages"
                }
            },
            {
                "domain": {
                    "id": "45",
                    "name": "Brand Vertical",
                    "description": "Top level entities that describe a Brand's industry"
                }
            },
            {
                "domain": {
                    "id": "46",
                    "name": "Brand Category",
                    "description": "Categories within Brand Verticals that narrow down the scope of Brands"
                },
                "entity": {
                    "id": "781974596752842752",
                    "name": "Services"
                }
            },
            {
                "domain": {
                    "id": "47",
                    "name": "Brand",
                    "description": "Brands and Companies"
                },
                "entity": {
                    "id": "10045225402",
                    "name": "Twitter"
                }
            }
        ],
        "entities": {
            "annotations": [
                {
                    "start": 144,
                    "end": 150,
                    "probability": 0.626,
                    "type": "Product",
                    "normalized_text": "Twitter"
                }
            ],
            "urls": [
                {
                    "start": 222,
                    "end": 245,
                    "url": "https://t.co/yvxdK6aOo2",
                    "expanded_url": "https://x.com/LovesNandos/status/1211797914437259264/photo/1",
                    "display_url": "pic.x.com/yvxdK6aOo2"
                }
            ]
        },
        "id": "1212092628029698048",
        "text": "我们相信我们API的最佳未来版本将来自与您一起构建。祝所有在Twitter平台上构建的人又一个美好的年份。我们迫不及待地想在新的一年里继续与您合作。https://t.co/yvxdK6aOo2"
    }
}
```

<div id="sample-app">
  ### 示例应用
</div>

访问 [Glitch 上的 Post Entity Extractor](https://tweet-entity-extractor.glitch.me/)，以便轻松发现帖子中的上下文标注，并了解该功能的工作原理。

<div id="frequently-asked-questions">
  ## 常见问题解答
</div>

<div id="context-annotations">
  ### 上下文注释
</div>

下面的问题专门针对帖子注释中的上下文注释元素。更多详情，请参阅 [概览](/zh/x-api/fundamentals/post-annotations) 页面。

<AccordionGroup>
  <Accordion title="Twitter 上下文标注如何工作？">
    Twitter 会对帖子进行语义分类，这意味着我们会整理与特定主题相关的关键词、话题标签（hashtag）以及 @ 账号列表。只要某条帖子包含我们指定的文本，就会被打上相应的标签。这与机器学习方法不同，后者会专门训练一个模型来对文本（在本例中为帖子）进行分类，并在给出分类结果的同时输出一个概率分数。
  </Accordion>

  <Accordion title="我怎么知道你们的数据是完整且值得信赖的？">
    Twitter 的注释由领域专家通过经过多年打磨的研究和质量保证（QA）流程精心整理而成。该流程借助定制工具，以在尽可能扩大数据跟踪规模的同时，仍然保持出色的准确率和召回率。此外，我们的数据还会由内部团队定期审计，在过去几个季度中，其准确率评分约为 80%。
  </Accordion>

  <Accordion title="你们如何确保准确性？">
    团队成员每天都会对我们的实体进行质检，以确保具有较高的准确率和召回率。此外，我们的工作每季度还会由一个内部团队审计，该团队会人工审查覆盖我们所有领域的 10,000 条帖子，以计算准确率评分。
  </Accordion>

  <Accordion title="你们如何决定跟踪哪些内容？">
    对于某些领域（例如体育和电视），我们依赖自动化数据摄入来构建我们的图谱。在新闻领域，我们会跟踪由 Twitter Moments 团队发布的故事相关数据。除此之外，团队还通过多种研究方法来识别在平台上引发大量讨论、值得跟踪的主题。
  </Accordion>

  <Accordion title="使用 Tweet Annotations 可以获取哪些历史数据？">
    数据跟踪从某个实体被发布并开始被跟踪的那一刻起才会进行；因此，在开始跟踪该实体之前发布的帖子，我们不会为其添加注释。比如说，如果某个新兴品牌/公司被添加到分类体系中，我们不会对在将该品牌添加到分类体系之前发布的、关于该品牌的帖子进行追溯性注释。
  </Accordion>

  <Accordion title="Twitter 是否可以为非英文的帖子添加注解？如果可以，支持哪些语言？被添加注解的帖子覆盖范围是否会发生变化？">
    是的。语言覆盖范围会因领域和市场而异。英语和日语已包含在大多数主要实体中。下面是当前已覆盖语言及其主要市场的列表：

    1. 英语（美国、英国）
    2. 日语（日本）
    3. 葡萄牙语（巴西）
    4. 西班牙语（阿根廷、墨西哥、西班牙）
    5. 印地语（印度）
    6. 阿拉伯语（沙特阿拉伯）
    7. 土耳其语（土耳其）
    8. 印度尼西亚语（印度尼西亚）
    9. 俄语（俄罗斯）
    10. 法语（法国）

    即将推出（约 2021 年下半年）：

    1. 德语（德国）
    2. 泰米尔语（印度）

    下面的表格展示了按已添加注释的帖子覆盖率排序的前 15 个国家：

    | Rank | Country code | Country | % of Tweets annotated |
    | :--- | :----------- | :------ | :-------------------- |
    | 1    | IN           | 印度      | 41%                   |
    | 2    | VN           | 越南      | 36%                   |
    | 3    | GB           | 英国      | 36%                   |
    | 4    | EC           | 厄瓜多尔    | 35%                   |
    | 5    | PE           | 秘鲁      | 33%                   |
    | 6    | US           | 美国      | 32%                   |
    | 7    | CA           | 加拿大     | 32%                   |
    | 8    | AU           | 澳大利亚    | 31%                   |
    | 9    | JP           | 日本      | 31%                   |
    | 10   | PH           | 菲律宾     | 30%                   |
    | 11   | SG           | 新加坡     | 30%                   |
    | 12   | MY           | 马来西亚    | 30%                   |
    | 13   | MX           | 墨西哥     | 30%                   |
    | 14   | GB           | 英国      | 29%                   |
    | 15   | NG           | 尼日利亚    | 29%                   |
  </Accordion>

  <Accordion title="Twitter 在为帖子添加注释时依赖哪些底层“语义”？">
    帖子注释由以下语义组成，用于给帖子添加注释：

    * 账号 - 我们可以对来自某个特定账号的帖子，或提及该账号的帖子进行注释
    * 话题标签（Hashtags）
    * 关键词/短语

    对于已经熟悉诸如 PowerTrack 等过滤型流式 API 的客户而言，注释所使用的语义在原理上与用于过滤帖子流的布尔规则类似。如果某条帖子满足底层语义条件，它就会被打上相应的标签。
  </Accordion>

  <Accordion title="为什么有些帖子包含实体，而有些则不包含？">
    我们的目标是为尽可能多的帖子添加上下文标注；不过，有多种原因会导致某些帖子未被标注：

    * 有些帖子语义信息不够丰富，无法根据我们当前的标注规则进行标记
    * 有些帖子不具备明显的主题性
    * 帖子是关于一个非常短暂的主题，而且该主题不在我们的图谱中
    * 我们尚未覆盖该语言/市场
    * 我们已覆盖该语言/市场，但缺少某个主题，或缺少与我们已跟踪主题相关的特定术语/账号/话题标签
  </Accordion>

  <Accordion title="当存在多个区间（例如 [3,30]）时，Entity ID 是否保持不变？">
    一个实体可以属于多个领域。领域 id 可能不同，但实体 id 始终保持不变。Donald Glover 既是一个人（领域 10），又是一名演员（领域 56）和一名音乐家（领域 54），但他的实体 id 仍然是 875072662527029248。
  </Accordion>

  <Accordion title="你们是否有既定的剧集/电影跟踪时间窗口？换句话说，一部剧集/电影在上映前后会被跟踪多长时间？">
    我们会在上映前一个月开始跟踪。对于像漫威电影这样的热门大片，一旦它们开始发布有关即将上映的预告，我们就可以开始对其进行跟踪。
  </Accordion>

  <Accordion title="电影是否也有类似于电视剧的地区筛选器？">
    不会的。
  </Accordion>
</AccordionGroup>