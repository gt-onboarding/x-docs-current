---
title: 响应状态码与错误
sidebarTitle: 响应状态码
keywords: ["响应状态码", "错误码", "HTTP 状态码", "API 错误", "错误处理", "调试", "错误信息", "状态码"]
---

import { Button } from '/snippets/zh/button.mdx';

X API 提供以下响应和错误代码，帮助你在第一时间理解并调试问题。你可以使用下方的调试指南和错误索引获取更多上下文信息。

成功的响应会使用 200 系列的 HTTP 状态码，并返回一个 JSON 格式的负载，其中包含你请求、创建、修改或删除的对象，以及服务器对该请求的解释。

错误响应会使用非 200 系列的 HTTP 状态码。不同的错误代码表示导致错误的不同原因。X API 会尽量为每个请求返回适当的 [HTTP 状态码](https://en.wikipedia.org/wiki/List_of_HTTP_status_codes)。

<div id="x-api-v2-http-status-codes">
  ## X API v2 HTTP 状态码
</div>

| Code | Text                  | Description                                                                                                                                          | Troubleshooting tips                                                                              |
| :--- | :-------------------- | :--------------------------------------------------------------------------------------------------------------------------------------------------- | :------------------------------------------------------------------------------------------------ |
| 200  | OK                    | 请求已成功。                                                                                                                                               |                                                                                                   |
| 400  | Bad Request           | 请求无效或无法被处理。随附的错误消息会进一步说明原因。缺少认证或使用了无效查询参数的请求被视为无效，并会返回此响应。                                                                                           | 请仔细检查你的 JSON 查询格式。例如，如果你的规则中包含与精确匹配或其他运算符相关的双引号字符，你可能需要使用反斜杠对它们进行转义，以便将它们与 JSON 格式本身的结构区分开。       |
| 401  | Unauthorized          | 对你的请求进行认证时出现问题。这可能是由于缺失或错误的认证凭证所致。在其他未定义的情况下也可能返回此状态码。                                                                                               | 检查你是否使用了正确的[认证方式](https://docs.x.com/resources/fundamentals/authentication/overview)，并确认你的凭证是否正确。 |
| 403  | Forbidden             | 服务器理解该请求，但已拒绝它或不允许访问。随附的错误消息会说明原因。                                                                                                                   | 检查你的开发者账号是否包含你尝试使用的端点的访问权限。你可能还需要将你的应用加入允许名单（allowlist）（例如 Engagement API 或 Ads API），或者注册获取访问权限。  |
| 404  | Not Found             | 请求的 URI 无效，或请求的资源（例如某个用户）不存在。                                                                                                                        | 检查你是否使用了有效的参数以及该端点的正确 URI。                                                                        |
| 409  | Connection Exception  | 当尝试连接到未配置任何规则的 filtered stream 时返回。                                                                                                                  | 检查你是否在要连接的流上至少创建了一条规则。Filtered stream 只会返回与有效规则匹配的帖子。如果没有规则，流将不会返回任何帖子。                           |
| 429  | Too Many Requests     | 当由于应用的[速率限制](/zh/resources/fundamentals/rate-limits)或[帖子上限](/zh/x-api/fundamentals/post-cap)已耗尽而无法再处理请求时返回。请参阅[速率限制](/zh/resources/fundamentals/rate-limits)。 | 检查你正在使用的端点在一个时间范围内允许的请求数。等待该时间范围重置。拉开你的请求间隔以避免触及速率限制，或者升级到下一个可用的数据套餐。                             |
| 500  | Internal Server Error | 出现故障。这通常是一个临时错误，例如高负载情况下，或某个端点暂时出现问题时。                                                                                                               | 查看 X API 的[状态页](/zh/status)或[开发者社区论坛](https://devcommunity.x.com/)，以了解是否有其他人遇到类似问题，或者稍后再试。           |
| 501  | Unimplemented         | X API 不支持此端点，无法完成请求。                                                                                                                                 |                                                                                                   |
| 503  | Service Unavailable   | X 服务器正在运行，但当前请求过载。请稍后再试。                                                                                                                             | 查看 X API 的[状态页](/zh/status)或[开发者社区论坛](https://devcommunity.x.com/)，以了解是否有其他人遇到类似问题，或者稍后再试。           |

当请求过程中发生错误时，响应体中会返回有关该错误的详细信息，以帮助诊断问题。`type` 字段（一个 URI）指示问题的性质，而其他字段则提供该问题的详细信息。在这类响应体中（见下表），`type`、`title` 和 `detail` 字段将始终返回。其他字段（如下面示例所示）会根据错误类型的不同而变化。

```json
{
  "client_id": "101010101",
  "required_enrollment": "Standard Basic",
  "registration_url": "https://developer.twitter.com/en/account",
  "title": "Client Forbidden",
  "detail": "此请求必须使用已批准且已注册所请求端点的开发者账号进行。访问我们的文档以了解更多信息。",
  "reason": "client-not-enrolled",
  "type": "https://api.x.com/2/problems/client-forbidden"
}
```

<div id="partial-errors">
  ## 部分错误
</div>

在某些情况下，你可能会在返回 200 状态码的响应中看到上文所述的错误。在这些情况下，该端点会在尽可能返回可用数据的同时，对无法返回的部分提供详细的错误信息。

例如，[Posts 查找端点](/zh/x-api/posts/lookup/introduction) 允许 X [developer App](/zh/resources/fundamentals/developer-apps#overview) 请求多个 ID。如果其中部分帖子可用，但有一条已被删除，则可用的帖子会在响应的 `data` 字段中返回。响应负载中还会包含一个额外的 `errors` 字段，用来指示哪些请求的帖子无法返回。该字段采用与整体请求错误相同的格式，以便更容易诊断问题。

<div id="error-information">
  ### 错误信息
</div>

每种问题类型都表明所遇到问题的性质。你可能遇到的所有问题类型的完整列表也可以在我们的 [API 规范](https://api.x.com/2/openapi.json) 中找到。

X API 会尝试为每个请求返回相应的 [HTTP 状态码](https://en.wikipedia.org/wiki/List_of_HTTP_status_codes)。

| 标题 | 类型 | 描述 |
| :--- | :--- | :--- |
| 通用问题 | `about:blank` | 通用问题，除了 HTTP 状态码提供的信息外，没有其他附加信息。 |
| 无效请求问题 | `https://api.X.com/2/problems/invalid-request` | 表示此请求无效的问题。如果你的请求带有 POST 请求体，请确保内容是有效的 JSON，并且与 [OpenAPI 规范](https://api.x.com/2/openapi.json) 匹配。 |
| 资源未找到问题 | `https://api.X.com/2/problems/resource-not-found` | 表示指定的帖子、用户等资源不存在的问题。 |
| 资源未授权问题 | `https://api.X.com/2/problems/not-authorized-for-resource` | 表示你无权查看特定帖子、用户等资源的问题。 |
| 客户端被禁止问题 | `https://api.X.com/2/problems/client-forbidden` | 表示你的客户端被禁止发出此请求的问题。 |
| 不允许的资源问题 | `https://api.X.com/2/problems/disallowed-resource` | 表示所请求的资源违反此 API 规范的问题。 |
| 不支持的身份验证问题 | `https://api.X.com/2/problems/unsupported-authentication` | 表示所使用的身份验证方式不受支持的问题。 |
| 使用量上限问题 | `https://api.X.com/2/problems/usage-capped` | 表示已超出使用量上限的问题。 |
| 连接异常问题 | `https://api.X.com/2/problems/streaming-connection` | 表示连接存在问题的问题。 |
| 客户端断开连接问题 | `https://api.X.com/2/problems/client-disconnected` | 表示你的客户端已断开连接。 |
| 运营性断开连接问题 | `https://api.X.com/2/problems/operational-disconnect` | 表示由于运营原因你已被断开连接。 |
| 规则数量上限问题 | `https://api.X.com/2/problems/rule-cap` | 表示你已超出规则的最大数量。 |
| 规则长度问题 | `https://api.X.com/2/problems/rule-length` | 表示你已超出基于你的访问级别在查询或规则中允许的最大字符数。参见[访问级别](/zh/x-api/getting-started/about-x-api#x-api-access-levels-and-versions)。 |
| 无效规则问题 | `https://api.X.com/2/problems/invalid-rules` | 表示你提交的规则无效。 |
| 重复规则问题 | `https://api.X.com/2/problems/duplicate-rules` | 表示你提交的规则是重复的。 |

<div id="troubleshooting-tips">
  ## 排查提示
</div>

<Accordion title="调试你的代码">
  在构建应用时，不时遇到错误或意外问题是很正常的。下面是一些帮助你调试代码的提示：

  先把问题拆解成更小的部分，以确定问题出在哪里。例如，如果你正在集成一个 REST 或流式（streaming）端点，问题可能出在以下任一项：

  * 端点需要正确的[身份验证](/zh/resources/fundamentals/authentication/overview)。
  * 端点需要有效的参数和请求头。任何过滤规则都要使用正确的运算符和正确的[语法](/zh/x-api/enterprise-gnip-2.0/fundamentals/rules-filtering#building-rules-and-queries)来构建。
  * 端点的 URI 必须正确，并且对于 REST 端点，必须使用正确的 HTTP 方法。
  * 你尝试访问的数据或资源对你不可访问（例如，仅已认证用户可以访问私有数据）。
  * 你当前的数据套餐只允许访问特定端点和特定速率限制。查看你的[开发者门户](https://developer.x.com/en/portal/products)以了解更多详情。
  * 你的代码使用了第三方库来集成该端点。
  * 你的代码需要能够成功解析端点响应。

  阅读随附的错误信息。这通常可以很好地帮助你判断问题所在。使用[错误和响应代码部分](#x-api-http-status-codes)中的表格，获取针对每个错误代码的排查提示。

  对于 REST 端点，你可以使用 [Postman](https://www.postman.com/) 或 [Insomnia](https://insomnia.rest/) 这样的 REST 客户端来验证上述步骤 (1) 到 (5)（参阅我们的[《Postman 入门》](/zh/tutorials/postman-getting-started)指南）。如果使用 REST 客户端发出的请求返回 200 成功状态码，就可以认为问题出在你的代码或你使用的库上，而不是端点请求本身。

  对于流式端点，你可以使用 cURL（一个使用 URL 语法来发送或获取请求的命令行工具）来检查问题是出在对端点的请求（上述步骤 (1) 到 (5)），还是出在你自己的代码（上述步骤 (6) 到 (7)）。
</Accordion>

<Accordion title="身份验证问题">
  * 检查你是否使用了该端点所需的正确[身份验证方式](/zh/resources/fundamentals/authentication/overview)。你可以在该端点的 API 参考页面上找到相关信息。
  * 检查你的身份验证凭证是否正确。你可以在开发者仪表板的 [Apps 部分](https://developer.x.com/en/portal/projects-and-apps)（“Details” 下）查看或重新生成你的应用密钥和令牌。
  * 检查你是否已使用 `oauth_nonce`、`oauth_signature` 和 `oauth_timestamp` 正确[为 OAuth 1.0a 请求授权](/zh/resources/fundamentals/authentication/oauth-1-0a/authorizing-a-request)。
  * 如果问题仍然存在，可以考虑使用 OAuth 库、[Postman](https://www.postman.com/) 或 [Insomnia](https://insomnia.rest/) 等 REST 客户端，或 [xurl](https://github.com/xdevplatform/xurl)。

  查阅我们的[身份验证指南](/zh/resources/fundamentals/authentication/overview)，了解上述所有内容的更多信息。
</Accordion>

<Accordion title="速率限制和帖子上限问题">
  当你触发某个端点的速率限制，或触及帖子上限时，可能会返回 429 错误。

  如果返回的是特定的 “Too many requests” 错误，则表示你触发了该端点的速率限制。换句话说，你已超过在指定时间段内该端点允许的最大请求次数。

  请注意，速率限制是按应用级别和用户级别分别设置的。

  * **X App 级别** 表示在使用 OAuth 2.0 应用仅模式时允许的请求次数，此时速率限制在整个应用范围内全局确定。例如，如果某个方法在一个速率限制窗口内允许 15 次请求，那么它允许你代表你的 X App 在每个窗口中发出 15 次请求。该限制与用户级别限制完全独立计算。更多信息请参阅我们的 [OAuth 2.0 应用仅模式](/zh/resources/fundamentals/authentication/oauth-2-0/application-only) 指南。
  * **用户上下文级别** 表示在使用 OAuth 1.0a 用户上下文或 OAuth 2.0 Authorization Code with PKCE 时，每个用户访问令牌可以发出的请求次数。例如，如果某个方法在一个速率限制窗口内允许 15 次请求，那么它允许每个窗口、每个用户访问令牌各 15 次请求。更多信息请参阅我们的指南，了解如何通过 [OAuth 1.0a](/zh/resources/fundamentals/authentication/oauth-1-0a/obtaining-user-access-tokens) 和 [OAuth 2.0](/zh/resources/fundamentals/authentication/oauth-2-0/user-access-token) 获取用户的访问令牌。

  首先检查你正在使用的端点的速率限制。你可以在该端点的 API 参考页面以及新的开发者门户仪表盘中找到这些信息。

  查看我们的文档以获取有关速率限制的更多信息，包括如何使用 HTTP 头部来跟踪你的应用在给定速率限制下的使用情况、如何从 429 速率限制错误代码中恢复，以及避免触发速率限制的技巧：

  * [v2 端点的速率限制](/zh/x-api/fundamentals/rate-limits)

  如果你收到特定的 “Usage cap exceeded: Monthly product cap” 错误，这意味着你已触及当前访问级别的帖子上限。关于这些 [帖子上限](/zh/x-api/fundamentals/post-cap) 的详细信息，请参阅我们的文档页面。
</Accordion>

<Accordion title="帖子缺失问题">
  如果你预期某条帖子本应被返回，但端点没有返回，请按照以下步骤排查。

  * 检查你的规则，确保你使用了正确的[运算符](/zh/x-api/enterprise-gnip-2.0/fundamentals/rules-filtering#enterprise-operators)和[语法](/zh/x-api/enterprise-gnip-2.0/fundamentals/rules-filtering#building-rules-and-queries)。将规则拆分成更小的子句，以确保你使用了正确的语法。
  * 如果发送该帖子的账号在创建帖子时是[受保护的](https://help.twitter.com/en/safety-and-security/public-and-protected-tweets)，那么该帖子将不会被返回——即使在向端点发起请求时该账号已经是公开的。通常你可以使用 [X 高级搜索](https://x.com/search-advanced) 进行检查：如果使用 X 高级搜索功能无法找到该帖子，你应当假定端点也不会返回它。

  以下步骤仅适用于流式端点：

  * 当帖子发送时，你是否已连接到流？请记住，帖子对象中返回的时间戳使用的是 UTC 时间。如果在帖子发送时你发生了断连，请查看可用于回填任何遗漏数据的[恢复和冗余功能](/zh/x-api/posts/filtered-stream/integrate/recovery-and-redundancy-features#recovery-and-redundancy)。
  * 当帖子发送时，你的规则是否已生效？请记住，帖子对象中返回的时间戳使用的是 UTC 时间。
</Accordion>

<Accordion title="缓冲区已满导致的断开问题">
  当你的流处理速度跟不上我们传递数据的速度，且你的应用从流中消费数据的速度不够快时，你可能会遇到以下错误之一：

  ```
  This stream has been disconnected because your client was unable to keep up with us.
  ```

  ```
  This stream has been disconnected for operational reasons.
  ```

  我们允许在一段时间内存在一定程度的滞后，并且在我们这边为每个流都设置了一个临时缓冲区配额；但如果你始终无法追上，我们会发起断开，以便你可以在当前时间点重新连接。请注意，这可能会导致数据丢失（针对在缓冲区已满并触发断开时仍在缓冲区中的数据）。

  在数据量出现大幅激增时，上述断开情况可能会发生。一般来说，我们建议使用一个与处理流程分离的缓冲流程，来快速消费数据。

  如果你是使用 v1.1 端点的 Enterprise 客户，你可以在我们的[连接](/zh/x-api/enterprise-gnip-2.0/powertrack-api#disconnections-explained)相关文章，以及关于消费流式数据的[这里](https://developer.x.com/en/docs/tutorials/consuming-streaming-data)和[这里](/zh/x-api/enterprise-gnip-2.0/powertrack-api#planning-for-high-volume-social-data-events)中，了解更多关于优化你的应用以防止此类断开的信息。

  在发生断开后，有多种工具可用于检索因断开而错过的帖子，包括下面列出的这些。请注意，下列工具仅适用于具有 Enterprise 级别访问权限的 v1.1 端点。

  * [**冗余连接（Redundant Connections）**](/zh/x-api/enterprise-gnip-2.0/powertrack-api#recovery-and-redundancy-features) - 使用多个连接，从多台服务器消费流数据，以防止当其中一个连接断开时出现数据遗漏。
  * [**回放（Replay）**](/zh/x-api/enterprise-gnip-2.0/powertrack-api#recovery-and-redundancy-features) - 使用单独的流恢复过去 5 天内的数据。
  * [**回填（Backfill）**](/zh/x-api/enterprise-gnip-2.0/powertrack-api#recovery-and-redundancy-features) - 在 5 分钟内重新连接，并从上次中断的位置开始。
  * **Historical PowerTrack** - 从整个 X 存档中恢复数据。
</Accordion>

<div id="get-help">
  ## 获取帮助
</div>

X 社区论坛可供你就 X 开发者平台提出技术问题。这是一个讨论论坛，你可以在这里看到其他开发者提出的问题，以及关于使用 X API 的各类技术信息。

我们鼓励你通过回答问题并参与论坛中的讨论来加入交流。X 员工也会在那里提供支持。

<Button href="https://devcommunity.x.com/">
  X 社区论坛
</Button>

<div id="before-you-post-a-question">
  ### 在发布问题之前
</div>

* 在 X 开发者文档中查找与你的问题相关的信息
* 在社区论坛中查找其他开发者提出的类似问题
* 查阅社区论坛使用指南

<div id="when-you-post-a-question-make-sure-to-include-the-following-information">
  ### 当你发布提问时，请务必包含以下信息
</div>

* 问题描述
* 所执行的 API 调用（如有可能，请包括 headers）
* 返回的 X 响应（包括任何错误信息）
* 你本来预期收到的结果
* 为排查该问题已采取的步骤
* 复现该问题所需的步骤
* 如适用，问题发生的时间范围
* 如适用，App ID、Post ID 等
* 任何相关的代码示例或截图

请在每个帖子中仅包含一个主题或问题。

如果你有功能需求或反馈，请通过 [X Developer Platform Feedback Form](https://t.co/devfeedback) 提交。

对于与政策相关的问题，例如 App 被暂停，请联系 [Policy support](https://help.twitter.com/forms/platform)。

对于与 X 相关的问题，例如登录或账号支持，请使用 [X Help Desk](https://help.twitter.com/en/contact-us)。