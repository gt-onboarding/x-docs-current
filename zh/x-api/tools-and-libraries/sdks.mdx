---
title: SDK

keywords: ["SDK", "软件开发工具包", "客户端SDK", "API SDK", "开发者SDK", "SDK库", "官方SDK"]
---

<div id="introduction">
  ## 简介
</div>

软件开发工具包（SDK）是一组针对特定平台或 API 定制的软件工具和程序。SDK 的目的，是通过提供库或代码库，让开发者可以在其应用中高效地、以最少的编码构建或扩展应用程序功能。这能够显著加快开发进程，节省时间、资金和人力投入。

> X 开发者平台目前为使用 TypeScript/JavaScript 和 Java 进行开发的用户提供了 2 个官方 SDK。通过免去手动处理围绕 X API v2 的各种复杂细节，并利用为所有可用 v2 端点预构建的函数，以及简化的认证流程，这些 SDK 将帮助开发者更高效地构建应用。由于这些 SDK 由开发者平台团队构建并维护，它们将始终与 X API v2 的后续版本保持同步更新。

由于这些 SDK 封装了 X API，你必须拥有一个 [开发者账号](https://developer.x.com/en/portal/dashboard)，并使用位于某个 [项目](/zh/resources/fundamentals/projects) 下的 [开发者应用](/zh/resources/fundamentals/developer-apps) 的凭证，来对请求进行认证。

<div id="installing">
  #### 安装
</div>

<Tabs>
  <Tab title="Java">
    有几种方式可以安装 Java 包（需要 Java 1.8+）

    * Maven 用户：在你的项目 POM 文件中添加如下依赖：

    ```xml
    <dependency>
      <groupId>com.twitter</groupId>
      <artifactId>twitter-api-java-sdk</artifactId>
      <version>1.1.4</version>
    </dependency>
    ```

    * Gradle 用户：在你的项目构建文件中添加如下依赖：
      `implementation "com.twitter:twitter-api-java-sdk:1.1.4"`

    * 其他用户：先运行以下命令生成 JAR：
      `mvn clean package`
      然后手动安装以下 JAR：

    `target/twitter-api-java-sdk-1.1.4.jar`

    `target/lib/*.jar`
  </Tab>

  <Tab title="TypeScript">
    此包支持 Node.js 14+。要进行安装，请在 Node 项目的目录中运行以下命令：
    `npm install twitter-api-sdk`
  </Tab>
</Tabs>

<div id="client-basics">
  #### Client 基础知识
</div>

在代码文件的顶部导入类（Java）和包（TypeScript），以便使用认证 Client 和库 Client。要使用库 Client 中的方法，必须传入认证凭证，这可以是 Bearer Token（仅应用模式），也可以是在使用 OAuth 2.0 用户上下文进行认证时使用 client id/client secret。

示例如下：

<Tabs>
  <Tab title="Java">
    ```java
    // 导入类:
    import com.twitter.clientlib.ApiClient;
    import com.twitter.clientlib.ApiException;
    import com.twitter.clientlib.Configuration;
    import com.twitter.clientlib.auth.*;
    import com.twitter.clientlib.model.*;
    import com.twitter.clientlib.TwitterCredentialsBearer;
    import com.twitter.clientlib.api.TwitterApi;

    // 实例化库 Client
    TwitterApi apiInstance = new TwitterApi();

    // 实例化认证凭证（仅应用模式示例）
    TwitterCredentialsBearer credentials = new TwitterCredentialsBearer(System.getenv("APP-ONLY-ACCESS-TOKEN"));

    // 将凭证传递给库 Client
    apiInstance.setTwitterCredentials(credentials);
    ```
  </Tab>

  <Tab title="TypeScript">
    ```typescript
    // 导入包
    import { Client, auth } from "twitter-api-sdk";

    // 先初始化 auth Client
    const authClient = new auth.OAuth2User({
     client_id: process.env.CLIENT_ID as string,
     client_secret: process.env.CLIENT_SECRET as string,
     callback: "YOUR-CALLBACK",
     scopes: ["tweet.read", "users.read", "offline.access"],
    });

     // 将认证凭证传递给库 Client
     const twitterClient = new Client(authClient);
    ```
  </Tab>
</Tabs>

<div id="authentication-flow">
  #### 身份验证流程
</div>

如果你使用仅应用（App-only）方式为 SDK 进行身份验证，你只需要提供令牌，库的 Client 实例就可以立即开始调用这些端点方法。请注意，仅应用令牌不能用于需要用户上下文身份验证的端点。

OAuth 2.0 用户上下文身份验证在创建 auth client 之后，还需要执行一些额外步骤。

* 生成授权 URL
* 通过授权 URL 授权应用
* 重定向到回调（这应该与在 Developer Portal 的 auth 设置页面中配置的回调 URL 保持一致）
* 解析授权码并使用 code&#95;verifier 换取访问令牌

SDKs 在 auth client 上提供了简化这些步骤的方法。要查看使用 OAuth 2.0 用户上下文进行身份验证来发起请求的完整示例，请参阅 GitHub 代码库。

* [TypeScript](https://github.com/xdevplatform/twitter-api-typescript-sdk/blob/main/examples/oauth2-callback_pkce_s256.ts)

* [Java](https://github.com/xdevplatform/twitter-api-java-sdk/blob/main/examples/src/main/java/com/twitter/clientlib/auth/OAuth20GetAccessToken.java)

<div id="endpoint-methods">
  #### 端点方法
</div>

客户端库中提供的方法都具有清晰的命名，与每个端点一一对应，所有参数都通过函数参数传入。
下面是一个根据 ID 查询帖子(Post)的示例：

<Tabs>
  <Tab title="Java">
    ```java
    String id = "1511757922354663425"; // String | 单个帖子 ID。
    Set<String> expansions = new HashSet<>(Arrays.asList("author_id")); // Set<String> | 逗号分隔的待扩展字段列表。
    Set<String> tweetFields = new HashSet<>(Arrays.asList("created_at", "lang", "context_annotations")); // Set<String> | 逗号分隔的待返回帖子字段列表。
    Set<String> userFields = new HashSet<>(Arrays.asList("created_at", "description", "name")); // Set<String> | 逗号分隔的待返回用户字段列表。

    try {
     SingleTweetLookupResponse result = apiInstance.tweets().findTweetById(id, expansions, tweetFields, userFields, null, null, null);
     System.out.println(result);
    } catch (ApiException e) {
     System.err.println("Exception when calling TweetsApi#findTweetById");
     System.err.println("Status code: " + e.getCode());
     System.err.println("Reason: " + e.getResponseBody());
     System.err.println("Response headers: " + e.getResponseHeaders());
     e.printStackTrace();
    }

    ```
  </Tab>

  <Tab title="TypeScript">
    ```typescript
    const lookupTweetById = await client.tweets.findTweetById(
      // 帖子 ID
      "1511757922354663425",
      {
        // 可选参数
        expansions: ["author_id"],
        "user.fields": ["created_at", "description", "name"],
      }
    );
    ```
  </Tab>
</Tabs>