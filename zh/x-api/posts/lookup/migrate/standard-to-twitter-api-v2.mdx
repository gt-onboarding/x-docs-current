---
title: v1 到 v2
sidebarTitle: v1 到 v2
keywords: ["v1.1 到 v2 迁移", "lookup 迁移", "迁移 lookup", "standard 到 v2", "v1 到 v2 lookup", "迁移指南"]
---

<div id="standard-v11-compared-to-x-api-v2">
  ## 标准 v1.1 与 X API v2 的比较
</div>

如果你一直在使用标准 v1.1 的 GET statuses/show 和 GET statuses/lookup，本指南将帮助你了解标准端点与 X API v2 帖子查找端点之间的相似点和差异。

你可能也会对我们的[可视化数据格式迁移工具](/zh/x-api/migrate/data-format-migration)感兴趣，它可以帮助你快速查看 [X API v1.1 数据格式](/zh/x-api/fundamentals/data-dictionary)与 [X API v2 格式](/zh/x-api/fundamentals/data-dictionary)之间的差异。

* **相似之处**
  * OAuth 1.0a 用户上下文
  * 每个请求的帖子数量上限
  * 对帖子编辑历史和元数据的支持

* **差异**
  * 端点 URL
  * 应用和项目要求
  * 响应数据格式
  * 请求参数

<div id="similarities">
  ### 相似之处
</div>

<div id="oauth-10a-user-context-authentication-method">
  #### OAuth 1.0a 用户上下文身份验证方法
</div>

标准端点支持 [OAuth 1.0a 用户上下文](/zh/resources/fundamentals/authentication)，而新的 X API v2 帖子查询端点同时支持 OAuth 1.0a 用户上下文和 [OAuth 2.0 应用仅模式](/zh/resources/fundamentals/authentication)。因此，如果你之前使用的是某个标准 v1.1 帖子查询端点，那么在迁移到 X API v2 版本时，可以继续使用相同的身份验证方法。

应用仅模式身份验证通常是最容易上手的方式。要了解如何生成应用访问令牌，请参阅 [OAuth 2.0 应用仅模式指南](/zh/resources/fundamentals/authentication)。

<div id="posts-per-request-limits">
  #### 每次请求的帖子数量限制
</div>

v1.1 的 [GET statuses/lookup](https://developer.x.com/en/docs/twitter-api/v1/tweets/post-and-engage/api-reference/get-statuses-lookup) 端点允许你在每个请求中最多指定 100 条帖子。这同样适用于 `GET /tweets` 端点。要指定完整的 100 条帖子，请将 `ids` 参数作为查询参数使用，并提供一个以逗号分隔的[帖子 ID](/zh/resources/fundamentals/x-ids) 列表。

**对帖子编辑历史和元数据的支持**

这两个版本都会提供用于描述编辑历史的元数据。请查阅 Post 查找 API 参考文档以及[帖子编辑基础知识页面](/zh/x-api/fundamentals/edit-posts)以了解更多详情。

<div id="differences">
  ### 差异
</div>

<div id="endpoint-urls">
  #### 端点 URL
</div>

* **标准 v1.1 端点：**
  * `https://api.x.com/1.1/statuses/show`
  * `https://api.x.com/1.1/statuses/lookup`

* **X API v2 端点：**
  * `https://api.x.com/2/tweets`
  * `https://api.x.com/2/tweets/:id`

<div id="app-and-project-requirements">
  #### 应用和项目要求
</div>

进行身份验证时，X API v2 端点需要使用来自与某个 [项目](/zh/resources/fundamentals/projects) 关联的 [开发者应用](/zh/resources/fundamentals/developer-apps) 的凭证。X API v1.1 端点可以使用独立应用的凭证，或与某个项目关联的应用的凭证。

<div id="response-data-format">
  #### 响应数据格式
</div>

标准 v1.1 与 X API v2 版本的端点之间一个重要差异，是在响应负载中如何选择字段。

对于标准端点，许多响应字段会默认包含，并可以通过参数来指定额外字段。

然而，在 X API v2 中，默认只返回帖子 `id` 和 `text` 字段。要获取额外的字段和对象，必须使用 [fields](/zh/x-api/fundamentals/fields) 和 [expansions](/zh/x-api/fundamentals/expansions) 参数。通过扩展获取的字段会返回在响应中的 `includes` 对象里，并可以通过匹配 ID 将其与主帖子对象对应起来。

有关如何使用 fields 和 expansions 的更多信息，请参阅[如何使用 fields 和 expansions 的指南](/zh/x-api/fundamentals/data-dictionary)。[数据格式迁移指南](/zh/x-api/fundamentals/fields) 也将标准 v1.1 字段映射到较新的 v2 字段。

此外，X API v2 为对象引入了新的 JSON 设计，包括帖子和 [user](/zh/x-api/fundamentals/data-dictionary#user) 对象：

* 标准端点在 `statuses` 数组中返回帖子对象，而 X API v2 使用 `data` 数组。
* 在 X API v2 中，使用“转发的帖子（Retweeted Posts）”和“引用的帖子（Quoted Posts）”等术语来取代“statuses”术语。
* `like` 等新术语取代了 `favorites` 和 `favourites` 等术语。
* 在 X API v2 的响应负载中，不会包含没有值的属性（例如 `null`）。

X API v2 中的帖子对象包含新的字段，例如：

* `conversation_id`
* 两个新的 [annotations](/zh/x-api/fundamentals/post-annotations) 字段（`context` 和 `entities`）
* 新的 [metrics](/zh/x-api/fundamentals/metrics) 字段
* `reply_setting` 字段，用于显示谁可以回复某条帖子

<div id="request-parameters">
  #### 请求参数
</div>

以下标准 v1.1 请求参数在 X API v2 中有对应参数：

| Standard | X API v2 |
|:----------|:----------|
| `id`     | `ids`    |

某些标准 v1.1 参数在 X API v2 中**不**受支持：

| Standard            | Comment                                                                                                                      |
|:---------------------|:------------------------------------------------------------------------------------------------------------------------------|
| `tweet_mode`        | 已由 fields 和 expansions 功能取代。                                                                                          |
| `trim_user`         | 已由 fields 和 expansions 取代。对用户数据使用 `author_id` 扩展字段和 `user.fields`。                                         |
| `include_my_retweet`| 返回经身份验证用户所转发帖子的源帖子 ID。                                                                                     |
| `include_entities`  | 使用 fields 和 expansions 来控制响应负载中的 entities。                                                                       |
| `include_ext_alt_text` | 如果存在替代文本，则在媒体实体中添加 `ext_alt_text` 字段。                                                                  |
| `include_card_uri`  | 当附加了广告卡片时添加 `card_uri`。                                                                                           |
| `map`               | 在 X API v2 中为不可用的帖子返回其 ID 和错误信息，而不是像 v1.1 中那样将字段置为 null。                                      |

<div id="curl-requests">
  ### CURL 请求
</div>

以下 cURL 请求展示了标准 v1.1 端点及其在 v2 中的对应端点。将请求头中的 `ACCESS_TOKEN` 替换为你的应用访问令牌。对于 v2 端点，该令牌必须属于某个 [developer App](/zh/resources/fundamentals/developer-apps/overview)，并且该 App 必须隶属于某个 [Project](/zh/resources/fundamentals/projects/overview)。

v1.1 与 v2 的响应负载会有所不同。在 v2 中，你可以通过 [fields](/zh/x-api/fundamentals/fields) 和 [expansions](/zh/x-api/fundamentals/expansions) 参数请求不同的字段。

**标准 v1.1 `GET statuses/lookup` 端点及其 v2 `GET /tweets` 对应端点**

```bash
curl --request GET \
  --url 'https://api.x.com/1.1/statuses/lookup.json?id=1460323737035677698%2C1460323743339741184' \
  --header 'Authorization: Bearer $ACCESS_TOKEN'
```

```
  curl --request GET \
  --url 'https://api.x.com/2/tweets?ids=1460323737035677698%2C1460323743339741184&tweet.fields=created_at&expansions=author_id&user.fields=created_at' \
  --header 'Authorization: Bearer $ACCESS_TOKEN'
```

**v1.1 标准 `GET statuses/show/:id` 与 v2 `GET /tweets/:id` 端点**

```
curl --request GET \
  --url 'https://api.x.com/1.1/statuses/show.json?id=1460323737035677698' \
  --header 'Authorization: Bearer $ACCESS_TOKEN'
```

```
curl --request GET \
  --url 'https://api.x.com/2/tweets/1460323737035677698?tweet.fields=created_at&expansions=author_id&user.fields=created_at' \
  --header 'Authorization: Bearer $ACCESS_TOKEN'
```
