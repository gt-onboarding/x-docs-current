---
title: 简介
sidebarTitle: 简介
keywords: ["搜索帖子", "搜索帖子", "最近搜索", "完整存档搜索", "帖子搜索", "搜索 API", "搜索查询", "搜索运算符", "历史搜索"]
---

import { Button } from '/snippets/zh/button.mdx';

搜索帖子是一个重要功能，用于呈现围绕特定主题或事件展开的 X 对话。虽然 X 本身也具备这类功能，但这些端点在筛选和摄取帖子时提供了更高的灵活性和能力，让你可以更轻松地找到与你的研究相关的数据，构建接近实时的“监听”应用，或者更广泛地探索、分析以及/或者对与关注主题相关的帖子采取行动。 

我们提供两个用于搜索帖子的端点：Recent search 和 full-archive search。这两个 REST 端点在设计和特性上具有共通性，包括都使用单个搜索查询来筛选围绕某个特定主题的帖子。搜索查询由一组运算符构成，这些运算符会匹配帖子和用户的属性，例如消息关键词、话题标签（hashtag）和 URL。可以通过布尔逻辑和括号组合运算符，以帮助精细化查询的匹配行为。 

Recent search 和 full-archive search 端点都提供帖子编辑相关的元数据。自 2022 年 9 月 29 日起创建的所有帖子对象都包含帖子编辑元数据，即便该帖子从未被编辑。每当帖子被编辑时，都会创建一个新的 Post ID。帖子的编辑历史由一个 Post ID 数组记录，从原始 ID 开始。

这些端点将始终返回最新的编辑版本以及任何编辑历史。在帖子 30 分钟编辑窗口结束后收集到的帖子将代表其最终版本。要进一步了解 Edit Post 元数据，请查看 [Edit Posts fundamentals](/zh/x-api/fundamentals/edit-posts) 页面。

在你设置好查询并开始接收帖子后，这些端点支持按时间和 Post ID 范围来遍历结果。此设计旨在支持两种常见用例： 

* **获取历史数据（Get historical）**：请求针对某个关注的时间范围，对数据的实时性没有要求。只发出单个请求，所有匹配的数据会在需要时通过分页返回。这是 Search Posts 的默认模式。
* **轮询（Polling）** 或 **监听（listening）**：以“自上次请求以来是否有新帖子？”的模式发出请求。请求会持续发出，通常用于聚焦接近实时地“监听”感兴趣的帖子。

许多运算符和查询限制仅适用于 [Enterprise access](/zh/x-api/getting-started/about-x-api)，这意味着你必须使用位于具有 Enterprise access 的 [项目（Project）](/zh/resources/fundamentals/projects) 中的应用的密钥和令牌，才能使用这些附加功能。你可以在下面的端点小节中了解更多信息。

Recent search 和 full-archive search 端点返回的帖子都会计入每月的 [Post cap](/zh/x-api/fundamentals/post-cap)。

**账号设置**

要访问这些端点，你需要：

* 一个已获批准的 [开发者账号](https://developer.x.com/en/portal/petition/essential/basic-info)。
* 使用位于某个 [项目（Project）](/zh/resources/fundamentals/projects) 中的 [开发者应用（developer App）](/zh/resources/fundamentals/developer-apps) 的密钥和令牌进行认证。 

在我们的[入门指南](/zh/x-api/getting-started/getting-access)中了解更多关于如何获取 X API v2 端点访问权限的信息。

<div id="recent-search">
  ## 最近搜索
</div>

recent search 端点允许你以编程方式访问过去一周内发布的、经过过滤的公开帖子。所有拥有开发者账号，并在某个[项目](/zh/resources/fundamentals/projects)中的[应用](/zh/resources/fundamentals/developer-apps)里使用密钥和令牌的开发者都可以使用该端点。

你可以使用 [OAuth 1.0a 用户上下文](/zh/resources/fundamentals/authentication)、[OAuth 2.0 应用仅模式](/zh/resources/fundamentals/authentication#app-only-authentication-and-oauth-2-0-bearer-token) 或 [OAuth 2.0 Authorization Code with PKCE](/zh/resources/fundamentals/authentication#oauth-2-0-authorization-code-flow-with-pkce-2) 来对请求进行身份验证。不过，如果你希望在帖子结果中接收私有指标，或获取自然与推广指标的拆分明细，则必须使用 OAuth 1.0a 用户上下文或 OAuth 2.0 Authorization Code with PKCE，并传递与发布该内容的用户关联的用户访问令牌。 

此端点每次请求最多可按时间倒序返回 100 条帖子，并提供[分页](/zh/x-api/posts/search/integrate/paginate)令牌，用于在大量匹配帖子的结果集中分页查询。 

当使用具有常规访问权限的项目时，你可以使用基础[运算符](/zh/x-api/posts/search/integrate/build-a-query)，并可发出最长为 512 个字符的查询。当使用具有 Enterprise 访问权限的项目时，你还可以使用更多运算符。具有 Enterprise 访问权限的项目可以发出最长为 4096 个字符的查询。

详细了解[访问级别](/zh/x-api/getting-started/about-x-api)。

<div id="full-archive-search">
  ## 全量归档搜索
</div>

v2 全量归档搜索端点仅对具有 [Pro](/zh/x-api/getting-started/about-x-api "Pro") 访问权限和 [Enterprise](/zh/x-api/getting-started/about-x-api) 访问权限的项目开放。该端点允许你根据搜索查询，以编程方式访问自 2006 年 3 月第一条帖子以来的完整归档中的公开帖子。

你可以使用 [OAuth 2.0 App-Only](/zh/resources/fundamentals/authentication#app-only-authentication-and-oauth-2-0-bearer-token) 为发往该端点的请求进行认证，并且 [应用访问令牌](/zh/resources/fundamentals/authentication#using-and-generating-an-app-only-bearer-token) 必须来自某个所属项目已开通 Pro 或 Enterprise 访问权限的应用。由于你无法在此端点上代表其他用户发起请求（OAuth 1.0a 用户上下文或 OAuth 2.0 Authorization Code with PKCE），因此你将无法获取私有[指标](/zh/x-api/fundamentals/metrics)。

该端点每个请求最多可按时间倒序返回 500 条帖子，并提供用于分页浏览大量匹配帖子的[分页](/zh/x-api/posts/search/integrate/paginate)令牌。

**注意：** 如果通过 tweet.fields 参数请求[注解](/zh/x-api/fundamentals/post-annotations)，max&#95;results 参数目前的最大值限制为 100。此限制将来可能会发生变化，但现在请注意这一点。

由于该端点仅向已获批 Pro 和 Enterprise 访问权限的用户开放，你可以使用完整集合的搜索[操作符](/zh/x-api/posts/search/integrate/build-a-query)，并构建最长 1024 个字符的查询。

<Button href="/zh/x-api/posts/search/quickstart/full-archive-search">
  快速开始
</Button>

<br />

<Button href="https://github.com/xdevplatform/Twitter-API-v2-sample-code">
  示例代码
</Button>

<br />

<Button href="https://github.com/xdevplatform/search-tweets-python">
  搜索帖子 Python 客户端
</Button>

<br />

<Button href="https://github.com/xdevplatform/search-tweets-ruby">
  搜索帖子 Ruby 客户端
</Button>

<br />

<Button href="https://app.getpostman.com/run-collection/9956214-784efcda-ed4c-4491-a4c0-a26470a67400">
  在 Postman 中运行
</Button>

<br />

<Button href="https://developer.x.com/apitools/api?endpoint=/2/tweets/search/recent&method=get">
  使用 API Explorer 试用
</Button>

<br />

<br />

**支持资源**

[了解如何使用 Postman 发起请求](/zh/tutorials/postman-getting-started)

[排查错误](https://developer.x.com/en/support/x-api)

[访问 API 参考页面](/zh/x-api/posts/recent-search)