---
title: 搜索帖子（最近）
sidebarTitle: 搜索帖子（最近）
keywords: ["最近帖子数量快速入门", "最近计数快速入门", "帖子数量快速入门", "计数快速入门", "最近搜索计数"]
---

import { Button } from '/snippets/zh/button.mdx';

<div id="getting-started-with-the-recent-post-counts-endpoint">
  ### 开始使用近期帖子计数端点
</div>

本快速入门指南将帮助你使用 Postman（一个用于发送 HTTP 请求的图形化工具）向近期帖子计数端点发出你的第一个请求。

如果你想查看不同编程语言的示例代码，请访问我们的 [X API v2 sample code](https://github.com/xdevplatform/Twitter-API-v2-sample-code) GitHub 代码库。 

<Note>
  ### 前提条件

  要完成本指南，你需要拥有一组用于对请求进行身份验证的 [密钥和令牌](/zh/resources/fundamentals/authentication)。你可以通过以下步骤生成这些密钥和令牌：

  * [注册开发者账号](https://developer.x.com/en/apply-for-access) 并通过审批。
  * 在开发者门户中创建一个 [项目](/zh/resources/fundamentals/projects) 以及一个关联的 [开发者应用](/zh/resources/fundamentals/developer-apps)。
  * 前往你的 App 的“Keys and tokens”页面以生成所需的凭证。请务必将所有凭证保存在安全的位置。
</Note>

<div id="steps-to-build-a-recent-post-counts-request">
  #### 构建最近帖子计数请求的步骤
</div>

**步骤一：选择一个工具或库**

有多种不同的工具、代码示例和库可以用来向此端点发起请求，但在这里我们将使用 Postman 工具来简化流程。

要将 X API v2 Postman 集合加载到你的环境中，请点击下面的按钮：

<Button href="https://app.getpostman.com/run-collection/9956214-784efcda-ed4c-4491-a4c0-a26470a67400">
  将 X API v2 添加到 Postman
</Button>

在你将 X API v2 集合加载到 Postman 之后，在集合中导航到 Post counts &gt; Recent Post counts 请求。

**步骤二：为你的请求进行身份验证**

要正确地向 X API 发起请求，你需要验证自己是否具有权限。对于此端点，你必须使用 [OAuth 2.0 应用仅模式](/zh/resources/fundamentals/authentication#app-only-authentication-and-oauth-2-0-bearer-token) 身份验证方式为你的请求进行身份验证。

你必须将你的密钥和令牌，特别是 [App Access Token](/zh/resources/fundamentals/authentication#using-and-generating-an-app-only-bearer-token)（也称为 App-only Bearer Token）添加到 Postman。你可以通过在 Postman 右上角选择名为 “X API v2” 的环境，并将你的密钥和令牌添加到 &quot;initial value&quot; 和 &quot;current value&quot; 字段中（点击环境下拉列表旁边的眼睛图标）来完成此操作。

如果你已正确完成此操作，该变量会自动被填充到请求的 &quot;Authorization&quot; 选项卡中。
 

**步骤三：创建查询**

每个最近帖子计数请求都需要一个单个 [query](/zh/x-api/posts/counts/integrate/build-a-query)。在此示例中，我们将使用一个匹配由 @XDevelopers 账号发布的帖子 的查询。对于这个查询，我们使用 from: 运算符，并将其设置为 XDevelopers（不区分大小写）：

`from:XDevelopers`

在 Postman 中，导航到 &quot;Params&quot; 选项卡，并在 `ids` 参数的 &quot;Value&quot; 列中输入此 ID，或以逗号分隔的一串帖子 ID。

|     |     |     |
| :--- | :--- | :--- |
| **Key** | **Value** | **Description** |
| `query` | from:XDevelopers | 提交到最近帖子计数端点的查询 |

**步骤四（可选）：指定请求的粒度**

如果你在步骤三之后点击 &quot;Send&quot; 按钮，你将获得默认的最近帖子计数：过去七天按小时统计。如果你希望按天获取最近帖子计数，你需要添加 granularity 参数，并将其值设置为 day。

在 Postman 中，导航到 &quot;Params&quot; 选项卡，并在 granularity 参数的 &quot;Value&quot; 列中输入 day。

|     |     |     |
| :--- | :--- | :--- |
| **Key** | **Value** | **Description** |
| granularity | day | 帖子计数结果的粒度。可选值为 day、hour 或 minute |

你现在应该会在 &quot;Send&quot; 按钮旁看到以下 URL：

`https://api.x.com/2/tweets/counts/recent?query=from%3AXDevelopers&granularity=day`

**步骤五：发送请求并查看响应**

当一切准备就绪后，点击 &quot;Send&quot; 按钮，你将收到如下响应：

```
{
   "data": [
       {
           "end": "2021-06-16T00:00:00.000Z",
           "start": "2021-06-15T00:00:00.000Z",
           "tweet_count": 0
       },
       {
           "end": "2021-06-17T00:00:00.000Z",
           "start": "2021-06-16T00:00:00.000Z",
           "tweet_count": 1
       },
       {
           "end": "2021-06-18T00:00:00.000Z",
           "start": "2021-06-17T00:00:00.000Z",
           "tweet_count": 2
       },
       {
           "end": "2021-06-19T00:00:00.000Z",
           "start": "2021-06-18T00:00:00.000Z",
           "tweet_count": 0
       },
       {
           "end": "2021-06-20T00:00:00.000Z",
           "start": "2021-06-19T00:00:00.000Z",
           "tweet_count": 0
       },
       {
           "end": "2021-06-21T00:00:00.000Z",
           "start": "2021-06-20T00:00:00.000Z",
           "tweet_count": 0
       },
       {
           "end": "2021-06-22T00:00:00.000Z",
           "start": "2021-06-21T00:00:00.000Z",
           "tweet_count": 1
       },
       {
           "end": "2021-06-23T00:00:00.000Z",
           "start": "2021-06-22T00:00:00.000Z",
           "tweet_count": 2
       }
   ],
   "meta": {
       "total_tweet_count": 6
   }
}
```
