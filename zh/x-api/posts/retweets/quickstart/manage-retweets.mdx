---
title: 管理转发
sidebarTitle: 管理转发
keywords: ["管理转发", "转发帖子", "取消转发", "转发快速开始", "转发教程", "转发指南"]
---

import { Button } from '/snippets/zh/button.mdx';

<div id="getting-started-with-the-manage-retweets-endpoints">
  ### 管理转发端点入门
</div>

本快速入门指南将帮助你使用 Postman 向管理转发端点发送第一个请求。

如果你想查看不同语言的示例代码，请访问我们的 [X API v2 sample code](https://github.com/xdevplatform/Twitter-API-v2-sample-code) GitHub 仓库。 

<div id="prerequisites">
  #### 先决条件
</div>

要完成本指南，你需要一组用于对请求进行身份验证的 [keys and tokens](/zh/resources/fundamentals/authentication)。你可以按照以下步骤生成这些密钥和令牌：

* [注册开发者账号](https://developer.x.com/en/apply-for-access)并通过审核。
* 在开发者门户中创建一个 [Project](/zh/resources/fundamentals/projects) 以及一个关联的 [developer App](/zh/resources/fundamentals/developer-apps)。
* 访问你的 App 的 “Keys and tokens” 页面以生成所需的凭证。请务必将所有凭证保存在安全的位置。

<div id="steps-to-build-a-manage-retweets-request">
  #### 构建管理转发请求的步骤
</div>

**第一步：从工具或库开始**

有多种不同的工具、代码示例和库可以用来向此端点发起请求，但在这里我们将使用 Postman 工具来简化流程。

要将 X API v2 Postman 集合加载到你的环境中，请点击以下按钮：

<Button href="https://app.getpostman.com/run-collection/9956214-784efcda-ed4c-4491-a4c0-a26470a67400">
  将 X API v2 添加到 Postman
</Button>

在你将 X API v2 集合加载到 Postman 之后，导航到 “Retweets” 文件夹，并选择 “Retweet a Post”。
 

第二步：对你的请求进行身份验证

要正确地向 X API 发起请求，你需要先验证自己是否拥有相应权限。对于该端点，你必须使用 [OAuth 1.0a User Context](/zh/resources/fundamentals/authentication) 或 [OAuth 2.0 Authorization Code with PKCE](resources/fundamentals/authentication#oauth-2-0-authorization-code-flow-with-pkce-2) 对你的请求进行身份验证。

在本示例中，我们将使用 OAuth 1.0a User Context。

你必须将你的密钥和令牌——具体来说是你的 API Key、API Secret Key、OAuth 1.0a 用户 Access Token 和 OAuth 1.0a 用户 Access Token Secret——添加到 Postman 中。你可以通过在 Postman 右上角选择名为 “X API v2” 的环境，并将你的密钥和令牌添加到 &quot;initial value&quot; 和 &quot;current value&quot; 字段中（点击环境下拉菜单旁边的眼睛图标）来完成此操作。

如果你已正确完成这些步骤，这些变量将会自动填充到请求的 Authorization（授权）选项卡中。

**第三步：指定你要转发的帖子**

管理转发端点需要两个 ID：一个是希望转发或撤销转发的用户 ID，另一个是帖子的 id。

用户的 ID 必须与进行身份验证的用户 ID 相对应，这意味着你在对请求进行身份验证时，必须传递与该用户 ID 关联的[访问令牌](/zh/resources/fundamentals/authentication#obtaining-access-tokens-using-3-legged-oauth-flow)。在本例中，你可以指定属于你自己的用户 ID。你可以通过两种方式找到你的 ID：

1. 使用 [user lookup by username](/zh/x-api/users/user-lookup-by-username) 端点，你可以传入一个用户名并获取 id 字段。 
2. 查看你的 Access Token，你会发现其中的数字部分就是你的用户 ID。
    

你还必须指定你想要转发的帖子。你可以通过访问 X.com，点击某条帖子并查看其 URL 来找到帖子 ID。比如，下列 URL 的帖子 ID 是 1228393702244134912。

[https://x.com/TwitterDev/status/1228393702244134912](https://x.com/TwitterDev/status/1228393702244134912)

在 Postman 中，导航到 &quot;Params&quot; 选项卡，在 id 路径变量的 &quot;Value&quot; 列中输入你的用户 ID，并将你希望转发的帖子的 ID 作为 tweet&#95;id 参数的值输入。请务必不要在任何 ID 前后包含空格。

|              |                                           |
| :----------- | :---------------------------------------- |
| **Key**      | **Value**                                 |
| `id`         | (your user ID)                            |
| tweet&#95;id | (the ID of the Tweet you want to Retweet) |

如果你点击 &quot;Send&quot; 按钮，你会收到一个响应对象，其中包含该转发关系的状态：

* 如果你收到 &quot;retweeted&quot;: true，则说明该 id 已成功转发 tweet&#95;id 对应的帖子。
   

**第四步：发起请求并查看响应**

在完成所有设置后，点击 &quot;Send&quot; 按钮，你将会收到如下响应：

```
{
    "data": {
        "retweeted": true
    }
}
```

如果你在响应中看到 `"retweeted": true`，则表示已成功转推该 `tweet_id`。

如果你希望撤销同一用户的转推，可以使用名为 “Undo a Retweet” 的请求，此请求也位于已加载到 Postman 中的 X API v2 集合里的 “Retweets” 文件夹中。`id` 应为你的用户 ID，而 `source_tweet_id` 应为你想撤销其转推的帖子 ID。你不需要将这些作为 JSON 请求体添加，因此需要确保为 id 和 `source_tweet_id` 添加相应的查询参数。 

成功撤销转推后，你会收到类似如下示例的响应：

```
{
  "data": {
    "retweeted": false
  }
}
```
