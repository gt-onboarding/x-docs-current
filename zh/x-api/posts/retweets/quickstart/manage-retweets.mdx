---
title: 管理转发
sidebarTitle: 管理转发
keywords: ["管理转发", "转发帖子", "取消转发", "转发快速入门", "转发教程", "转发指南"]
---

import { Button } from '/snippets/zh/button.mdx';

<div id="getting-started-with-the-manage-retweets-endpoints">
  ### 管理转发（Retweets）端点入门
</div>

本快速入门指南将帮助你使用 Postman 向管理转发端点发送你的第一个请求。

如果你希望查看不同语言的示例代码，请访问我们的 [X API v2 sample code](https://github.com/xdevplatform/Twitter-API-v2-sample-code) GitHub 仓库。 

<div id="prerequisites">
  #### 前提条件
</div>

要完成本指南，你需要一组用于对请求进行身份验证的 [keys and tokens](/zh/resources/fundamentals/authentication)。你可以按照以下步骤生成这些密钥和令牌：

* [注册开发者账号](https://developer.x.com/en/apply-for-access)并获得批准。
* 在开发者门户中创建一个 [Project](/zh/resources/fundamentals/projects) 以及一个关联的 [developer App](/zh/resources/fundamentals/developer-apps)。
* 前往你的 App 的“Keys and tokens”页面以生成所需的凭据。请务必将所有凭据保存在安全的位置。

<div id="steps-to-build-a-manage-retweets-request">
  #### 构建管理转发请求的步骤
</div>

**第一步：先选择一个工具或库**

有多种不同的工具、代码示例和库可以用于向此端点发起请求，但在这里我们将使用 Postman 工具来简化流程。

要将 X API v2 的 Postman 集合加载到你的环境中，请点击下面的按钮：

<Button href="https://app.getpostman.com/run-collection/9956214-784efcda-ed4c-4491-a4c0-a26470a67400">
  将 X API v2 添加到 Postman
</Button>

在你将 X API v2 集合加载到 Postman 之后，导航到 “Retweets” 文件夹，并选择 “Retweet a Post”。
 

第二步：为你的请求进行身份验证

要正确地向 X API 发起请求，你需要验证自己是否具有权限。对于该端点，你必须使用 [OAuth 1.0a User Context](/zh/resources/fundamentals/authentication) 或 [OAuth 2.0 Authorization Code with PKCE](resources/fundamentals/authentication#oauth-2-0-authorization-code-flow-with-pkce-2) 对你的请求进行身份验证。

在本示例中，我们将使用 OAuth 1.0a User Context。

你必须将你的密钥和令牌——特别是你的 API Key、API Secret Key、OAuth 1.0a 用户 Access Token 和 OAuth 1.0a 用户 Access Token Secret——添加到 Postman 中。你可以通过在 Postman 右上角选择名为 “X API v2” 的环境，并将你的密钥和令牌添加到 &quot;initial value&quot; 和 &quot;current value&quot; 字段中来完成此操作（点击环境下拉菜单旁边的眼睛图标）。

如果你正确完成了这些操作，这些变量会自动填充到请求的授权（authorization）选项卡中。

**第三步：指定你要转发的帖子**

管理转发端点需要两个 ID：一个是希望转发或撤销转发的用户的 ID，另一个是该帖子的 id。

用户的 ID 必须与进行认证的用户 ID 对应，这意味着在为请求进行身份验证时，你必须传递与该用户 ID 关联的[访问令牌](/zh/resources/fundamentals/authentication#obtaining-access-tokens-using-3-legged-oauth-flow)。在这种情况下，你可以指定属于你自己的用户 ID。你可以通过两种方式找到你的 ID：

1. 使用 [user lookup by username](/zh/x-api/users/user-lookup-by-username) 端点，你可以传入一个用户名并获取 id 字段。 
2. 查看你的 Access Token，你会发现其数字部分就是你的用户 ID。
    

你还必须指定你想要转发的帖子。你可以通过访问 X.com，点击某条帖子，然后查看其 URL 来找到该帖子的 ID。比如，下面这个 URL 中的帖子 ID 为 1228393702244134912。

[https://x.com/TwitterDev/status/1228393702244134912](https://x.com/TwitterDev/status/1228393702244134912)

在 Postman 中，导航到 &quot;Params&quot; 选项卡，在 id 路径变量的 &quot;Value&quot; 列中输入你的 ID，并在 tweet&#95;id 参数的值中输入你希望转发的帖子的 ID。请务必不要在任何 ID 前后包含空格。

|              |              |
| :----------- | :----------- |
| **Key**      | **Value**    |
| `id`         | （你的用户 ID）    |
| tweet&#95;id | （你要转发的帖子 ID） |

如果你点击 &quot;Send&quot; 按钮，你将会收到一个包含关系状态的响应对象：

* 如果你收到 &quot;retweeted&quot;: true，则表示该 id 已成功转发 tweet&#95;id。
   

**第四步：发起请求并查看响应**

在你完成所有设置之后，点击 &quot;Send&quot; 按钮，你将会收到如下响应：

```
{
    "data": {
        "retweeted": true
    }
}
```

如果你收到 `"retweeted": true`，则表示已成功转发该 `tweet_id` 对应的帖子。

如果你希望撤销同一用户的转发，可以使用名为 “Undo a Retweet” 的请求，该请求同样位于加载到 Postman 中的 X API v2 集合里的 “Retweets” 文件夹中。`id` 应为你的用户 ID，而 `source_tweet_id` 应为要撤销转发的那个帖子的 Post ID。你不需要将其添加为 JSON body，因此需要确保在查询参数中添加 `id` 和 `source_tweet_id` 这两个必需的 query 参数。 

在成功撤销转发后，你将会收到类似下面示例的响应：

```
{
  "data": {
    "retweeted": false
  }
}
```
