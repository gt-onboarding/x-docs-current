---
title: 基于 PIN 的授权
sidebarTitle: 基于 PIN 的 OAuth
keywords: ["基于 PIN 的 OAuth", "PIN OAuth", "OAuth PIN", "PIN 授权", "OAuth 1.0a PIN", "桌面应用 OAuth"]
---

import { Button } from "/snippets/zh/button.mdx";

<div id="pin-based-authorization">
  ### 基于 PIN 的授权
</div>

基于 PIN 的 OAuth 流程是[三方（3-legged）OAuth](/zh/resources/fundamentals/authentication/oauth-1-0a/obtaining-user-access-tokens) 流程的一种变体，适用于在授权后无法访问或嵌入 Web 浏览器来重定向用户的应用。例如命令行应用、嵌入式系统、游戏主机以及某些类型的移动应用。

基于 PIN 的 OAuth 流程由应用在发起 `request_token` 请求时将 `oauth_callback` 设置为 `oob` 来启动。术语 `oob` 表示带外（out-of-band）OAuth。用户仍然会访问 X 来登录或授权该应用，但在批准访问后不会自动被重定向回应用程序。相反，他们会看到一个数字 PIN 码，并会被提示返回到应用并输入该数值。

<Note>
  **注意：** 即使使用基于 PIN 的授权，X 应用设置中的 `callback_url` 仍然是必填项。
</Note>

 

<div id="implementing-the-pin-based-oauth-flow">
  #### 实现基于 PIN 的 OAuth 流程
</div>

基于 PIN 的流程与 [三方授权](/zh/resources/fundamentals/authentication/oauth-1-0a/obtaining-user-access-tokens)（以及 [使用 X 登录](/zh/resources/fundamentals/authentication#log-in-with-x)）的实现方式相同，但有以下差异：

1. 在调用 [POST oauth/request&#95;token](/zh/resources/fundamentals/authentication/api-reference#post-oauth-request-token) 时，`oauth_callback` 的值必须设置为 `oob`。

2. 在用户被引导至 X，通过 [GET oauth/authenticate](/zh/resources/fundamentals/authentication/api-reference#get-oauth-authenticate) 或 [GET oauth/authorize URL](/zh/resources/fundamentals/authentication/api-reference#get-oauth-authorize) 来授权你的应用后，他们不会被重定向到你的 `callback_url`，而是会看到一个页面，其中显示一个由 X 生成的约 7 位数字的 PIN 码，并附有说明，提示用户在你的应用中输入该 PIN。

3. 用户将该 PIN 输入到你的应用中，你的应用随后在 [POST oauth/access&#95;token](/zh/resources/fundamentals/authentication/api-reference#post-oauth-access-token) 请求中将该 PIN 作为 `oauth_verifier` 使用，以获取 `access_token`。

<Note>
  **Note:** PIN 码不可重复使用，获取到的 `access_token` 应用于代表该应用用户发起的请求。
</Note>