---
title: OAuth 1.0a
sidebarTitle: 概览
keywords: ["OAuth 1.0a", "OAuth 1.0", "OAuth 1.0a 认证", "OAuth 1.0a 用户上下文", "三方 OAuth 授权", "OAuth 1.0a 授权流程"]
---

import { Button } from "/snippets/zh/button.mdx";

<div id="oauth-10a">
  ## OAuth 1.0a
</div>

X 开发者平台上的许多端点使用 OAuth 1.0a 方式代表某个 X 账号执行操作或发出 API 请求。例如，如果你拥有一个 X 开发者应用，只要该用户对你的应用完成认证，你就可以代表任意 X 账号发出 API 请求。

请注意：如果你不熟悉 HMAC-SHA1 和 percent encoding 等概念，建议查看下方的“实用工具”部分，其中列出了一些能大幅简化认证流程的 API 客户端。

<div id="key-concepts">
  ### 核心概念
</div>

<div id="signing-a-request-with-keys-and-tokens">
  #### 使用密钥和令牌对请求进行签名
</div>

你必须在 `authorization` 请求标头中传递若干生成的密钥和令牌，才能对每个 API 请求进行签名。首先，你可以在 [X 开发者应用](/zh/resources/fundamentals/developer-apps) 的详情页面生成若干密钥和令牌，包括以下内容：

|     |     |
| :--- | :--- |
| API key 和 secret：<br /><br />`oauth_consumer_key`<br /><br />`oauth_consumer_secret` | 可以将它们视为在发起 API 请求时，用于表示你的 X 开发者应用身份的用户名和密码。 |
| Access token 和 secret：<br /><br />`oauth_token`<br /><br />`oauth_token_secret` | Access token 和 access token secret 是用户级凭证，用于对 OAuth 1.0a API 请求进行认证。它们指定了请求代表哪个 X 账号发起。<br /><br />如果你希望你的应用代表与你的开发者账号关联的同一个 X 账号发起请求，可以在 [X 开发者应用](/zh/resources/fundamentals/developer-apps) 的详情页面生成你自己的 access token 和 token secret。<br /><br />如果你希望为其他用户生成 access token，请参阅下文的“代表用户发起请求”。 |

<div id="making-requests-on-behalf-of-users">
  #### 代表用户发起请求
</div>

在创建签名时，你需要一组访问令牌，用于标识你将代表其发起请求的用户。

你可以在 [应用详情页面](https://developer.x.com/content/developer-twitter/en/apps) 生成一组访问令牌，用于表示拥有该 X 开发者应用的 X 账号。但如果你希望代表另一个 X 账号发起请求，则该账号的所有者必须在 [三方 OAuth 流程](/zh/resources/fundamentals/authentication#obtaining-access-tokens-using-3-legged-oauth-flow) 中通过登录自己的账号来向你授予访问权限。该流程的输出是一组访问令牌（oauth&#95;token 和 oauth&#95;token&#95;secret），可用于发起 OAuth 1.0a 请求。

一旦你拥有这些密钥和令牌，你可以选择[从头创建签名](/zh/resources/fundamentals/authentication#creating-a-signature)。但除非你非常清楚自己在做什么，或者你正在使用下面提到的某个工具向需要 OAuth 1.0a 的端点发起请求，否则我们不建议这样做。

作为参考，下面是一个带有签名的 cURL 请求示例，其中所有生成的令牌都通过 Authorization 头部传入：

```bash
curl --request POST \
  --url 'https://api.x.com/1.1/statuses/update.json?status=Hello%20world' \
  --header 'authorization: OAuth oauth_consumer_key="CONSUMER_API_KEY", oauth_nonce="OAUTH_NONCE", oauth_signature="OAUTH_SIGNATURE", oauth_signature_method="HMAC-SHA1", oauth_timestamp="OAUTH_TIMESTAMP", oauth_token="ACCESS_TOKEN", oauth_version="1.0"' \
```

<Note>
  **注意：** 用户访问令牌属于敏感信息，必须非常谨慎地加以保护。生成访问令牌时，其所代表的用户是在信任你的应用可以保证这些令牌的安全。如果 API 密钥和用户访问令牌的安全同时遭到泄露，你的应用可能会导致对私人信息和账户功能的访问被暴露。我们鼓励你进一步了解[如何保护密钥和访问令牌](/zh/resources/fundamentals/developer-apps)。
</Note>

<div id="useful-tools">
  ### 实用工具
</div>

为请求[生成签名](/zh/resources/fundamentals/authentication#creating-a-signature)的过程较为复杂。我们建议你使用可以自动生成大部分身份验证令牌的 API 客户端库：

|     |     |
| :--- | :--- |
| [Postman](https://www.getpostman.com/) | 一款 API 客户端，可用于构建和发送 REST API 请求。阅读我们的“[开始使用 Postman](/zh/tutorials/postman-getting-started)”教程，进一步了解此工具。 |
| [Insomnia](https://insomnia.rest/) | Insomnia 是一款 REST API 客户端，提供 Cookie 管理、环境变量、代码生成和身份验证等功能，并可在 Mac、Windows 和 Linux 上使用。 |