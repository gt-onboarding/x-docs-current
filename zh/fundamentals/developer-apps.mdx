---
title: 应用
icon: wrench
keywords: ["X 应用", "开发者应用", "API 密钥", "OAuth", "身份验证", "应用管理", "开发者门户", "API 凭证", "访问令牌", "OAuth 1.0a", "OAuth 2.0", "API 密钥和密钥", "client ID", "client secret", "应用权限", "回调 URL"]
---

<div id="overview">
  ## 概览
</div>

如果你已有应用，可以通过[开发者门户的 App 页面](https://developer.x.com/en/portal/projects-and-apps)查看、编辑或删除它们。

要访问 X API 和 X Ads API，你需要一组[身份验证](/zh/resources/fundamentals/authentication)凭证（也称为密钥和令牌），并且必须在每个请求中携带这些凭证。根据你所使用的具体端点所要求的身份验证类型，这些凭证可以有不同形式。

下面是你可以在应用中生成的不同凭证类型，以及如何使用它们：

* **[API Key and Secret](/zh/resources/fundamentals/authentication#api-key-and-secret)：** 本质上是你应用的用户名和密码。你将使用它们来对需要 [OAuth 1.0a 用户上下文](/zh/resources/fundamentals/authentication#oauth-1-0a-2) 的请求进行认证，或者生成其他令牌，例如用户访问令牌或应用访问令牌。

* **[Access Token and Secret](/zh/resources/fundamentals/authentication#obtaining-access-tokens-using-3-legged-oauth-flow)：** 一般而言，访问令牌代表你所代为发起请求的用户身份。你在开发者门户中生成的访问令牌代表拥有该应用的用户。你将使用这些令牌来对需要 [OAuth 1.0a 用户上下文](/zh/resources/fundamentals/authentication#oauth-1-0a-2) 的请求进行认证。如果你希望代表其他用户发起请求，则需要使用三方 OAuth 流程，以便他们授权你。

* **[Client ID and Client Secret](/zh/resources/fundamentals/authentication#oauth-2-0)：** 这些凭证用于通过 OAuth 2.0 身份验证获取用户访问令牌。与 OAuth 1.0a 类似，用户访问令牌用于对那些提供私有用户账户信息或代表其他账户执行操作的请求进行认证，但它们具有更细粒度的权限范围，从而更精细地控制客户端应用对用户账户所拥有的访问权限。

* **[App only Access Token](/zh/resources/fundamentals/authentication#bearer-token-also-known-as-app-only)：** 当你向仅返回 X 上公开可用信息的端点发起请求时，将使用此令牌。

除了生成发起 X API 请求所需的密钥和令牌之外，你还可以设置访问[权限](/zh/resources/fundamentals/developer-apps#app-permissions)、记录应用的使用场景或用途、定义[回调 URL](/zh/resources/fundamentals/developer-apps#callback-urls)，以及在[管理仪表盘](https://developer.x.com/en/portal/projects-and-apps)中修改与你的应用开发环境相关的其他设置。

<div id="apps-and-projects">
  ### 应用和项目
</div>

你可以结合使用应用和[项目](/zh/resources/fundamentals/projects)，按使用场景来组织你在 X 开发者平台上的工作。使用 Free X API 方案时，每个项目可以包含一个应用；使用 Basic 方案时，每个项目最多可以包含两个应用；使用 Pro 方案时，每个项目最多可以包含三个应用。

如果你希望访问新的 [X API v2](/zh/x-api/introduction) 端点，则必须使用隶属于某个项目的应用的密钥和令牌。

如果你有在我们推出项目之前创建的应用，它们会显示在名为 “Standalone Apps” 的部分中。Standalone Apps 是不在项目结构内的应用。如果你将某个 Standalone App 添加到一个项目中，它之后就可以向 v2 端点发起请求。

<div id="developer-portal-dashboard">
  ### 开发者门户仪表盘
</div>

你可以[访问仪表盘](https://developer.x.com/content/developer-twitter/en/apps)来管理与你账号关联的应用。要了解更多信息，请访问我们关于[开发者门户](/zh/resources/fundamentals/developer-portal)的文档页面。该仪表盘允许开发者快速、轻松地执行以下任务：

* 查看你现有的独立应用及其关联的 App ID。
* 创建一个新的项目、应用或独立应用。
* 删除未使用的项目或应用。
* 查看或更新某个特定应用的设置，包括更新名称、描述、网站、回调 URL 和[权限](/zh/resources/fundamentals/developer-apps#app-permissions)。
* 重新生成应用相关的凭证，例如 API Key 和 Secret、App Access Token，以及应用所有者用户的 Access Token。

<div id="signing-up-for-access">
  ### 注册获取访问权限
</div>

如果你已有 X 应用，并且已经在 developer.x.com 上登录了你的 X 账号，则可以通过 X 的 [App dashboard](https://developer.x.com/content/developer-twitter/en/portal/projects-and-apps) 查看和编辑你的应用。请注意，你**不**需要注册新账号就可以管理之前在 developer.x.com 上创建的所有应用。

如果你需要创建一个新的 X 应用，则需要先[注册一个开发者账号](https://developer.x.com/en/portal/petition/essential/basic-info)。如果你是[团队账号](/zh/resources/fundamentals/developer-portal#team-management)的成员，则必须被分配管理员角色才能创建新的应用。

<div id="automated-account-labeling-for-bots">
  ### 机器人账号的“自动账号”标记
</div>

你可以为机器账号添加“自动账号”（Automated Account）标签，让 X 上的用户知道你的机器人是一个自动化账号。这些机器人通过 X API 执行预先编程的操作。为机器人添加“自动账号”标签有助于建立与你受众之间的信任，使你的账号更具公信力，并将自己与垃圾机器人区分开来。这能帮助 X 上的用户在与机器人互动时更好地理解你的账号用途。

要为你的机器人账号添加标签，请按照以下步骤操作：

1. 前往你的账号设置
2. 选择 “Your account”
3. 选择 “Automation”
4. 选择 “Managing account”
5. 接下来，选择用于运行你机器人账号的 X 账号
6. 输入你的密码以登录
7. 最后，你应该会看到一条确认信息，表示该标签已成功应用到你的账号上。

***

<div id="app-management">
  ## 应用管理
</div>

<div id="introduction">
  ### 介绍
</div>

[X App dashboard](https://developer.x.com/en/portal/projects-and-apps) 让开发者可以快速便捷地执行以下任务：

* 查看你现有的应用和[项目](/zh/resources/fundamentals/projects)，以及它们关联的 App ID。
* 创建一个新的项目或独立应用。
* 删除一个项目、应用或独立应用。
* 点击某个特定应用即可打开该应用的设置。在设置中，你可以查看应用详情、密钥和令牌，以及权限。
* 将应用的用户认证设置更新为使用 OAuth 1.0a 或 OAuth 2.0。

<Note>
  **注意：**

  所有应用的密钥和令牌在开发者门户中将不再可见，生成后必须妥善保存。我们建议使用密码管理器来存储你的密钥和令牌。

  你可以显示 API Key 提示，以帮助你将凭证与其对应的应用进行匹配。
</Note>

<div id="app-settings">
  ### 应用设置
</div>

<div id="app-details">
  #### 应用详情
</div>

在这里，你可以编辑应用图标、应用名称、应用描述、你的网站 URL、[回调 URL/重定向 URI](/zh/resources/fundamentals/developer-apps#callback-urls)、服务条款 URL、隐私政策 URL、组织名称、组织 URL，以及应用的用途或使用场景。

OAuth 2.0 和 OAuth 1.0a 是身份验证方式，允许用户使用 X 登录你的应用。它们还允许你的应用代表已通过身份验证的用户发出特定请求。你可以为你的应用开启其中一种或两种方式。

保持这些信息最新非常重要。你的应用名称和网站 URL 将作为来源显示在由你的应用以编程方式创建的任何帖子元数据中。如果你更改了某个 X 应用的使用场景，请务必在这些设置中更新使用场景，以确保你遵守[开发者条款](https://developer.x.com/content/developer-twitter/en/developer-terms/agreement-and-policy)。

如果你的应用带有 “suspended”（已暂停） 标签，这表示你的应用违反了一条或多条 X 的[开发者条款](https://developer.x.com/en/developer-terms.html)，例如我们的[自动化规则](https://help.x.com/en/rules-and-policies/twitter-automation)。开发者平台政策团队会通过设置在应用所有者 X 账号上的电子邮件地址与开发者进行沟通；要查看该电子邮件地址，请检查你的 [X 账号设置](https://x.com/settings/your_twitter_data/account)。有关暂停的通知邮件将发送到该电子邮件地址，邮件标题类似 “Application suspension notice”（应用暂停通知），并包含下一步应如何处理的具体信息。若要与 X 团队协作处理暂停问题，请检查你的电子邮件以获取具体指示，或使用我们的[平台帮助表单](https://help.x.com/forms/platform)。

<div id="keys-and-tokens">
  #### 密钥和令牌
</div>

在项目中的 App 内，或通过独立 App，你可以查看、重新生成或撤销以下令牌：

* [API Key（Consumer Key）和 API Secret（Consumer Secret）](/zh/resources/fundamentals/authentication#api-key-and-secret)
* [App Access Token](/zh/resources/fundamentals/authentication#bearer-token-also-known-as-app-only)
* [User Access Token 和 Access Token Secret](/zh/resources/fundamentals/authentication#obtaining-access-tokens-using-3-legged-oauth-flow) -
  开发者门户中可用的 Access Token 和 Secret 与拥有该 App 的用户相关联。

**请注意** - 如果你希望代表其他用户发起请求（也就是说，不是拥有该 App 的那个用户），你需要使用 [OAuth 1.0a 三方 OAuth 流程](https://developer.x.com/resources/fundamentals/authentication/obtaining-user-access-tokens) 或 OAuth 2.0 的 [Authorization Code with PKCE 流程](/zh/resources/fundamentals/authentication#oauth-2-0-authorization-code-flow-with-pkce-2) 来生成一组用户 Access Tokens。然后在向 API 发起请求时使用这些特定用户的令牌。

<div id="user-authentication-settings">
  #### 用户身份验证设置
</div>

你可以将应用的身份验证设置为 OAuth 1.0a 或 OAuth 2.0。OAuth 2.0 只能与 X API v2 搭配使用。通过 OAuth 2.0，你可以选择粒度更细的 scope，从而代表用户获得相应的特定权限。OAuth 1.0a 可用于 X API v1.1 和 v2，并使用授权范围较宽、粒度较粗的 scope。

<div id="oauth-10a-application-user-permissions">
  #### OAuth 1.0a 应用与用户权限
</div>

如果你是该应用的所有者，你可以调整应用的权限（只读、读写或读写加发送私信）。这将控制你可以通过 X API 访问哪些资源和事件（注意：某些资源需要直接向 X 申请额外权限）。

你还可以在此页面开启或关闭你的应用请求用户电子邮件地址的权限（这要求在 “App details” 页面中提供服务条款 URL 和隐私政策 URL）。

<div id="oauth-20-type-of-app">
  #### OAuth 2.0 应用类型
</div>

如果你选择 OAuth 2.0 作为用户身份验证方式，你需要选择要创建的应用类型。可选项包括 Native App、Single page App、Web App、Automated App 或 bot。Native App 和 Single page App 属于公共客户端，而 Web App 以及 Automated App 或 bot 属于机密客户端。

机密客户端会安全地与授权服务器进行身份验证，并妥善保管你的 client secret。公共客户端通常是在浏览器或移动设备上运行的应用，无法使用你的 client secret。如果你选择的应用类型是机密客户端，系统会向你提供一个 client secret。

***

<div id="app-permissions">
  ## 应用权限
</div>

<div id="oauth-10a-app-permissions">
  ### OAuth 1.0a 应用权限
</div>

应用权限用于描述 OAuth 1.0a 应用与用户身份验证时的访问级别。你可以在 [X App](/zh/resources/fundamentals/developer-apps) 的设置中为每个应用单独配置应用权限。

可用的权限级别共有三种：

1. 仅读取
2. 读取和写入
3. 读取、写入以及访问私信

此外还有一个额外的权限，用于请求查看用户的电子邮件地址——该权限可以与上述任意一个级别组合使用。

如果更改了某个权限级别，任何已经颁发给该 X 应用的用户令牌都必须作废，用户必须重新授权该应用，令牌才能继承更新后的权限。

一个较好的做法是，只请求应用或服务访问用户账户数据所必需的*最低访问级别*。

<div id="read-only">
  ### 仅读
</div>

此权限级别允许读取 X 资源，例如用户的帖子、首页时间线和个人资料信息。但不允许读取用户的私信，也不允许更新任何内容或对象。

<div id="read-and-write">
  ### 读写
</div>

此权限级别允许对 X 资源进行读取和写入访问。在允许读取访问的基础上，它还允许发布帖子、关注用户或更新用户个人资料信息中的某些元素。它还允许代表已认证用户隐藏回复。此权限级别不允许以任何形式访问私信（包括读取、写入或删除）。

<div id="read-write-and-access-direct-messages">
  ### 读取、发送和访问私信
</div>

此权限级别包含以上所有权限，并额外允许代表用户读取、发送和删除私信。

* [POST /2/dm&#95;conversations/:dm&#95;conversation&#95;id/messages](/zh/x-api/direct-messages/send-a-new-message-to-a-dm-conversation)
* [POST /2/dm&#95;conversations/](/zh/x-api/direct-messages/create-a-new-dm-conversation)
* [POST /2/dm&#95;conversations/with/:participant&#95;id/messages](/zh/x-api/direct-messages/send-a-new-message-to-a-user)
* [GET /2/dm&#95;conversations/with/:user&#95;id/dm&#95;events](/zh/x-api/direct-messages/get-dm-events-for-a-dm-conversation)
* [GET /2/dm&#95;conversations/:dm&#95;conversation&#95;id/dm&#95;events](/zh/x-api/direct-messages/get-dm-events-for-a-dm-conversation-1)
* [GET /2/dm&#95;events](/zh/x-api/direct-messages/get-recent-dm-events)

<div id="determining-permissions">
  ### 确定权限
</div>

所有通过身份验证的 API 请求都会在 HTTP 响应中返回一个 `x-access-level` 头部。该头部的值表示当前正在使用的权限级别。可能的值为 read、read-write 和 read-write-directmessages。

***

<div id="callback-urls">
  ## 回调 URL
</div>

OAuth 1.0a 用户上下文和 OAuth 2.0 Authorization Code with PKCE 这两种认证方式，使开发者能够代表已经完成特定登录流程的不同 X 用户发起请求。目前，你可以使用以下两种流程让用户授权你的应用：

* [OAuth 2.0 authorization code flow with PKCE](/zh/resources/fundamentals/authentication#oauth-2-0-authorization-code-flow-with-pkce-2)
* [OAuth 1.0a 3-legged OAuth flow](/zh/resources/fundamentals/authentication#obtaining-access-tokens-using-3-legged-oauth-flow)（以及单独的 [Sign in with X flow](/zh/resources/fundamentals/authentication#log-in-with-x)）

当用户经历这些流程时，在他们成功登录并向开发者的应用授予授权后，需要有一个网页或位置，将他们重定向到该处。这个后续网页或位置称为回调 URL。

在为潜在用户配置这些流程以供其使用时，开发者必须在发往前文所述认证端点的请求中传递回调 URL。比如，使用 OAuth 1.0a 用户上下文的开发者，在向 [GET oauth/request&#95;token](/zh/resources/fundamentals/authentication#post-oauth-request-token) 端点发起请求时，必须传递 `callback_url` 参数。类似地，使用 OAuth 2.0 Authorization Code with PKCE 的开发者，在向 GET oauth2/authorize 端点发起请求时，必须在请求中传递 `redirect_uri` 参数。

除了使用这些参数之外，开发者还必须确保已将回调 URL 添加到其 [App](/zh/resources/fundamentals/developer-apps) 的回调 URL 允许列表中，该列表可以在 [developer portal](/zh/resources/fundamentals/developer-portal) 的 App 设置页面中找到。

如果配置正确，开发者在作为这些流程的一部分成功登录 X 之后，将被重定向到回调 URL。

<div id="things-to-keep-in-mind">
  ### 需要注意的事项
</div>

在设置回调 URL 时，你需要注意以下几点：

**对查询参数进行 HTTP 编码**

由于你是通过 `callback_url` 或 `redirect_uri` 参数将回调 URL 作为查询参数传递的，请确保对该 URL 进行 HTTP 编码。

**回调 URL 限制**

在 X Apps 控制台中，最多只能配置 10 个回调 URL。你的回调 URL 必须与在 Apps 控制台中加入允许列表的回调 URL，以及你在授权流程中传入的参数完全精确匹配。

如果你希望在回调 URL 中包含与请求相关的特定数据，可以使用 `state` 参数来存储这些数据，这些数据会在用户被重定向之后一并返回。你可以将数据直接编码在 `state` 参数中，或者将该参数用作会话 ID，在服务器端存储状态。

**不要使用 localhost 作为回调 URL**
请不要使用 localhost，而是在本地使用自定义主机或 http(s)://127.0.0.1

**自定义协议 URL**
如果你想利用移动端深度链接，可以使用带有路径和域部分的自定义协议 URL，例如 twitter://callback/path。但我们确实有一份不允许使用的协议列表，你需要避开这些协议。你可以在下方查看不允许使用的协议列表。

**不允许使用的协议**

|    |    |
|:----------|:----------|
| `vbscript` | `ldap` |
| `javascript` | `mailto` |
| `vbs` | `mmst` |
| `data` | `mmsu` |
| `mocha` | `msbd` |
| `keyword` | `rtsp` |
| `livescript` | `mso-offdap` |
| `ftp` | `snews` |
| `file` | `news` |
| `gopher` | `nntp` |
| `acrobat` | `outlook` |
| `callto` | `stssync` |
| `daap` | `rlogin` |
| `itpc` | `telnet` |
| `itms` | `tn3270` |
| `firefoxurl` | `shell` |
| `hcp` | `sip` |

<div id="error-example">
  ### 错误示例
</div>

如果你使用的回调 URL 未在开发者门户中你的应用设置里正确添加，你将会收到以下错误信息：

**OAuth 1.0a**

```json HTTP 403 - Forbidden

{
  "errors": [
    {
      "code":415,"message":"此客户端应用程序的回调 URL 未获批准。可以在应用程序设置中调整已批准的回调 URL。"
    }
  ]
}
```

或

```xml
<?xml version="1.0" encoding="UTF-8"?>
<hash>
<error>Callback URL not approved for this client application. Approved callback URLs can be adjusted in your application settings</error>
<request>/oauth/request_token</request>
</hash>
```

**OAuth 2.0**

```json HTTP 400

{
  "error": "invalid_request",
  "error_description": "传递的 redirect uri 值与授权码的 uri 不匹配。"
}
```

**故障排查**

如果你收到错误，请确保在认证请求中使用的回调 URL 已进行 URL 编码，并且与已添加到你在请求中所使用密钥和令牌所属应用的允许列表中的某个回调 URL 完全匹配。

***
